(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function NS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bd={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function DS(){if(q_)return vl;q_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return vl.Fragment=e,vl.jsx=n,vl.jsxs=n,vl}var H_;function xS(){return H_||(H_=1,Bd.exports=DS()),Bd.exports}var S=xS(),qd={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function OS(){if(F_)return be;F_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=R&&D[R]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,J={};function W(D,Z,ae){this.props=D,this.context=Z,this.refs=J,this.updater=ae||z}W.prototype.isReactComponent={},W.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ie(){}ie.prototype=W.prototype;function ee(D,Z,ae){this.props=D,this.context=Z,this.refs=J,this.updater=ae||z}var re=ee.prototype=new ie;re.constructor=ee,F(re,W.prototype),re.isPureReactComponent=!0;var Ae=Array.isArray,me={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function V(D,Z,ae,te,de,Ie){return ae=Ie.ref,{$$typeof:r,type:D,key:Z,ref:ae!==void 0?ae:null,props:Ie}}function b(D,Z){return V(D.type,Z,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return Z[ae]})}var M=/\/+/g;function k(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function C(){}function Lt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function at(D,Z,ae,te,de){var Ie=typeof D;(Ie==="undefined"||Ie==="boolean")&&(D=null);var Ee=!1;if(D===null)Ee=!0;else switch(Ie){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(D.$$typeof){case r:case e:Ee=!0;break;case T:return Ee=D._init,at(Ee(D._payload),Z,ae,te,de)}}if(Ee)return de=de(D),Ee=te===""?"."+k(D,0):te,Ae(de)?(ae="",Ee!=null&&(ae=Ee.replace(M,"$&/")+"/"),at(de,Z,ae,"",function(Yn){return Yn})):de!=null&&(N(de)&&(de=b(de,ae+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(M,"$&/")+"/")+Ee)),Z.push(de)),1;Ee=0;var Dt=te===""?".":te+":";if(Ae(D))for(var We=0;We<D.length;We++)te=D[We],Ie=Dt+k(te,We),Ee+=at(te,Z,ae,Ie,de);else if(We=I(D),typeof We=="function")for(D=We.call(D),We=0;!(te=D.next()).done;)te=te.value,Ie=Dt+k(te,We++),Ee+=at(te,Z,ae,Ie,de);else if(Ie==="object"){if(typeof D.then=="function")return at(Lt(D),Z,ae,te,de);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function G(D,Z,ae){if(D==null)return D;var te=[],de=0;return at(D,te,"","",function(Ie){return Z.call(ae,Ie,de++)}),te}function se(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var he=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ze(){}return be.Children={map:G,forEach:function(D,Z,ae){G(D,function(){Z.apply(this,arguments)},ae)},count:function(D){var Z=0;return G(D,function(){Z++}),Z},toArray:function(D){return G(D,function(Z){return Z})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},be.Component=W,be.Fragment=n,be.Profiler=l,be.PureComponent=ee,be.StrictMode=s,be.Suspense=y,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return me.H.useMemoCache(D)}},be.cache=function(D){return function(){return D.apply(null,arguments)}},be.cloneElement=function(D,Z,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var te=F({},D.props),de=D.key,Ie=void 0;if(Z!=null)for(Ee in Z.ref!==void 0&&(Ie=void 0),Z.key!==void 0&&(de=""+Z.key),Z)!Re.call(Z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Z.ref===void 0||(te[Ee]=Z[Ee]);var Ee=arguments.length-2;if(Ee===1)te.children=ae;else if(1<Ee){for(var Dt=Array(Ee),We=0;We<Ee;We++)Dt[We]=arguments[We+2];te.children=Dt}return V(D.type,de,void 0,void 0,Ie,te)},be.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},be.createElement=function(D,Z,ae){var te,de={},Ie=null;if(Z!=null)for(te in Z.key!==void 0&&(Ie=""+Z.key),Z)Re.call(Z,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(de[te]=Z[te]);var Ee=arguments.length-2;if(Ee===1)de.children=ae;else if(1<Ee){for(var Dt=Array(Ee),We=0;We<Ee;We++)Dt[We]=arguments[We+2];de.children=Dt}if(D&&D.defaultProps)for(te in Ee=D.defaultProps,Ee)de[te]===void 0&&(de[te]=Ee[te]);return V(D,Ie,void 0,void 0,null,de)},be.createRef=function(){return{current:null}},be.forwardRef=function(D){return{$$typeof:p,render:D}},be.isValidElement=N,be.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:se}},be.memo=function(D,Z){return{$$typeof:g,type:D,compare:Z===void 0?null:Z}},be.startTransition=function(D){var Z=me.T,ae={};me.T=ae;try{var te=D(),de=me.S;de!==null&&de(ae,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ze,he)}catch(Ie){he(Ie)}finally{me.T=Z}},be.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},be.use=function(D){return me.H.use(D)},be.useActionState=function(D,Z,ae){return me.H.useActionState(D,Z,ae)},be.useCallback=function(D,Z){return me.H.useCallback(D,Z)},be.useContext=function(D){return me.H.useContext(D)},be.useDebugValue=function(){},be.useDeferredValue=function(D,Z){return me.H.useDeferredValue(D,Z)},be.useEffect=function(D,Z,ae){var te=me.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(D,Z)},be.useId=function(){return me.H.useId()},be.useImperativeHandle=function(D,Z,ae){return me.H.useImperativeHandle(D,Z,ae)},be.useInsertionEffect=function(D,Z){return me.H.useInsertionEffect(D,Z)},be.useLayoutEffect=function(D,Z){return me.H.useLayoutEffect(D,Z)},be.useMemo=function(D,Z){return me.H.useMemo(D,Z)},be.useOptimistic=function(D,Z){return me.H.useOptimistic(D,Z)},be.useReducer=function(D,Z,ae){return me.H.useReducer(D,Z,ae)},be.useRef=function(D){return me.H.useRef(D)},be.useState=function(D){return me.H.useState(D)},be.useSyncExternalStore=function(D,Z,ae){return me.H.useSyncExternalStore(D,Z,ae)},be.useTransition=function(){return me.H.useTransition()},be.version="19.1.1",be}var G_;function Om(){return G_||(G_=1,qd.exports=OS()),qd.exports}var Me=Om();const VS=NS(Me);var Hd={exports:{}},El={},Fd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function MS(){return Q_||(Q_=1,(function(r){function e(G,se){var he=G.length;G.push(se);e:for(;0<he;){var ze=he-1>>>1,D=G[ze];if(0<l(D,se))G[ze]=se,G[he]=D,he=ze;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var se=G[0],he=G.pop();if(he!==se){G[0]=he;e:for(var ze=0,D=G.length,Z=D>>>1;ze<Z;){var ae=2*(ze+1)-1,te=G[ae],de=ae+1,Ie=G[de];if(0>l(te,he))de<D&&0>l(Ie,te)?(G[ze]=Ie,G[de]=he,ze=de):(G[ze]=te,G[ae]=he,ze=ae);else if(de<D&&0>l(Ie,he))G[ze]=Ie,G[de]=he,ze=de;else break e}}return se}function l(G,se){var he=G.sortIndex-se.sortIndex;return he!==0?he:G.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var y=[],g=[],T=1,R=null,I=3,z=!1,F=!1,J=!1,W=!1,ie=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ae(G){for(var se=n(g);se!==null;){if(se.callback===null)s(g);else if(se.startTime<=G)s(g),se.sortIndex=se.expirationTime,e(y,se);else break;se=n(g)}}function me(G){if(J=!1,Ae(G),!F)if(n(y)!==null)F=!0,Re||(Re=!0,k());else{var se=n(g);se!==null&&at(me,se.startTime-G)}}var Re=!1,V=-1,b=5,N=-1;function O(){return W?!0:!(r.unstable_now()-N<b)}function M(){if(W=!1,Re){var G=r.unstable_now();N=G;var se=!0;try{e:{F=!1,J&&(J=!1,ee(V),V=-1),z=!0;var he=I;try{t:{for(Ae(G),R=n(y);R!==null&&!(R.expirationTime>G&&O());){var ze=R.callback;if(typeof ze=="function"){R.callback=null,I=R.priorityLevel;var D=ze(R.expirationTime<=G);if(G=r.unstable_now(),typeof D=="function"){R.callback=D,Ae(G),se=!0;break t}R===n(y)&&s(y),Ae(G)}else s(y);R=n(y)}if(R!==null)se=!0;else{var Z=n(g);Z!==null&&at(me,Z.startTime-G),se=!1}}break e}finally{R=null,I=he,z=!1}se=void 0}}finally{se?k():Re=!1}}}var k;if(typeof re=="function")k=function(){re(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Lt=C.port2;C.port1.onmessage=M,k=function(){Lt.postMessage(null)}}else k=function(){ie(M,0)};function at(G,se){V=ie(function(){G(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(G){switch(I){case 1:case 2:case 3:var se=3;break;default:se=I}var he=I;I=se;try{return G()}finally{I=he}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var he=I;I=G;try{return se()}finally{I=he}},r.unstable_scheduleCallback=function(G,se,he){var ze=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ze+he:ze):he=ze,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=he+D,G={id:T++,callback:se,priorityLevel:G,startTime:he,expirationTime:D,sortIndex:-1},he>ze?(G.sortIndex=he,e(g,G),n(y)===null&&G===n(g)&&(J?(ee(V),V=-1):J=!0,at(me,he-ze))):(G.sortIndex=D,e(y,G),F||z||(F=!0,Re||(Re=!0,k()))),G},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(G){var se=I;return function(){var he=I;I=se;try{return G.apply(this,arguments)}finally{I=he}}}})(Gd)),Gd}var K_;function PS(){return K_||(K_=1,Fd.exports=MS()),Fd.exports}var Qd={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function kS(){if(Y_)return Yt;Y_=1;var r=Om();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,g,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:y,containerInfo:g,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Yt.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,T)},Yt.flushSync=function(y){var g=d.T,T=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=g,s.p=T,s.d.f()}},Yt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(y,g))},Yt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Yt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,R=p(T,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:R,integrity:I,fetchPriority:z}):T==="script"&&s.d.X(y,{crossOrigin:R,integrity:I,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Yt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(y)},Yt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,R=p(T,g.crossOrigin);s.d.L(y,T,{crossOrigin:R,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Yt.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);s.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(y)},Yt.requestFormReset=function(y){s.d.r(y)},Yt.unstable_batchedUpdates=function(y,g){return y(g)},Yt.useFormState=function(y,g,T){return d.H.useFormState(y,g,T)},Yt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Yt.version="19.1.1",Yt}var X_;function LS(){if(X_)return Qd.exports;X_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qd.exports=kS(),Qd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function US(){if($_)return El;$_=1;var r=PS(),e=Om(),n=LS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Lt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case W:return"Profiler";case J:return"StrictMode";case me:return"Suspense";case Re:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case re:return(t.displayName||"Context")+".Provider";case ee:return(t._context.displayName||"Context")+".Consumer";case Ae:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return i=t.displayName||null,i!==null?i:Lt(t.type)||"Memo";case b:i=t._payload,t=t._init;try{return Lt(t(i))}catch{}}return null}var at=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ze=[],D=-1;function Z(t){return{current:t}}function ae(t){0>D||(t.current=ze[D],ze[D]=null,D--)}function te(t,i){D++,ze[D]=t.current,t.current=i}var de=Z(null),Ie=Z(null),Ee=Z(null),Dt=Z(null);function We(t,i){switch(te(Ee,i),te(Ie,t),te(de,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?g_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=g_(i),t=y_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(de),te(de,t)}function Yn(){ae(de),ae(Ie),ae(Ee)}function tr(t){t.memoizedState!==null&&te(Dt,t);var i=de.current,a=y_(i,t.type);i!==a&&(te(Ie,t),te(de,a))}function vi(t){Ie.current===t&&(ae(de),ae(Ie)),Dt.current===t&&(ae(Dt),ml._currentValue=he)}var es=Object.prototype.hasOwnProperty,ts=r.unstable_scheduleCallback,ns=r.unstable_cancelCallback,co=r.unstable_shouldYield,ou=r.unstable_requestPaint,An=r.unstable_now,zh=r.unstable_getCurrentPriorityLevel,ho=r.unstable_ImmediatePriority,Xs=r.unstable_UserBlockingPriority,is=r.unstable_NormalPriority,Bh=r.unstable_LowPriority,$s=r.unstable_IdlePriority,fo=r.log,lu=r.unstable_setDisableYieldValue,ot=null,Fe=null;function cn(t){if(typeof fo=="function"&&lu(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(ot,t)}catch{}}var Qt=Math.clz32?Math.clz32:rs,uu=Math.log,qh=Math.LN2;function rs(t){return t>>>=0,t===0?32:31-(uu(t)/qh|0)|0}var ss=256,as=4194304;function Un(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zs(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Un(o):(v&=E,v!==0?h=Un(v):a||(a=E&~t,a!==0&&(h=Un(a))))):(E=o&~f,E!==0?h=Un(E):v!==0?h=Un(v):a||(a=o&~t,a!==0&&(h=Un(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function os(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function mo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var t=ss;return ss<<=1,(ss&4194048)===0&&(ss=256),t}function go(){var t=as;return as<<=1,(as&62914560)===0&&(as=4194304),t}function Ei(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ti(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function yo(t,i,a,o,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Qt(a),X=1<<Q;E[Q]=0,w[Q]=-1;var B=j[Q];if(B!==null)for(j[Q]=null,Q=0;Q<B.length;Q++){var q=B[Q];q!==null&&(q.lane&=-536870913)}a&=~X}o!==0&&Xn(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~i))}function Xn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Qt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function _o(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Qt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function nr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ws(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ir(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:k_(t.type))}function cu(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var nt=Math.random().toString(36).slice(2),bt="__reactFiber$"+nt,pt="__reactProps$"+nt,Sn="__reactContainer$"+nt,vo="__reactEvents$"+nt,Hh="__reactListeners$"+nt,rr="__reactHandles$"+nt,hu="__reactResources$"+nt,ls="__reactMarker$"+nt;function sr(t){delete t[bt],delete t[pt],delete t[vo],delete t[Hh],delete t[rr]}function Ai(t){var i=t[bt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Sn]||a[bt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=T_(t);t!==null;){if(a=t[bt])return a;t=T_(t)}return i}t=a,a=t.parentNode}return null}function $n(t){if(t=t[bt]||t[Sn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Zn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Jt(t){var i=t[hu];return i||(i=t[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ct(t){t[ls]=!0}var Eo=new Set,Js={};function jn(t,i){Si(t,i),Si(t+"Capture",i)}function Si(t,i){for(Js[t]=i,t=0;t<i.length;t++)Eo.add(i[t])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),du={},us={};function mu(t){return es.call(us,t)?!0:es.call(du,t)?!1:fu.test(t)?us[t]=!0:(du[t]=!0,!1)}function ar(t,i,a){if(mu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Wn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ut(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var cs,pu;function bi(t){if(cs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cs=i&&i[1]||"",pu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+t+pu}var ea=!1;function ta(t,i){if(!t||ea)return"";ea=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var B=q}Reflect.construct(t,[],X)}else{try{X.call()}catch(q){B=q}t.call(X.prototype)}}else{try{throw Error()}catch(q){B=q}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),j=E.split(`
`);for(h=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===w.length||h===j.length)for(o=w.length-1,h=j.length-1;1<=o&&0<=h&&w[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(w[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||w[o]!==j[h]){var Q=`
`+w[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ea=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?bi(a):""}function To(t){switch(t.tag){case 26:case 27:case 5:return bi(t.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return ta(t.type,!1);case 11:return ta(t.type.render,!1);case 1:return ta(t.type,!0);case 31:return bi("Activity");default:return""}}function na(t){try{var i="";do i+=To(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ao(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fh(t){var i=Ao(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ia(t){t._valueTracker||(t._valueTracker=Fh(t))}function So(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Ao(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gh=/[\n"\\]/g;function gt(t){return t.replace(Gh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hn(t,i,a,o,h,f,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+en(i)):t.value!==""+en(i)&&(t.value=""+en(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?or(t,v,en(i)):a!=null?or(t,v,en(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+en(E):t.removeAttribute("name")}function fs(t,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+en(a):"",i=i!=null?""+en(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function or(t,i,a){i==="number"&&hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function wi(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ke(t,i,a){if(i!=null&&(i=""+en(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+en(a):""}function ds(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(at(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=en(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function bn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ms.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function bo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&gu(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&gu(t,f,i[f])}function wo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ra(t){return Kh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ri=null;function wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Ci=null;function Ro(t){var i=$n(t);if(i&&(t=i.stateNode)){var a=t[pt]||null;e:switch(t=i.stateNode,i.type){case"input":if(hn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[pt]||null;if(!h)throw Error(s(90));hn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&So(o)}break e;case"textarea":Ke(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&wi(t,!!a.multiple,i,!1)}}}var Jn=!1;function yu(t,i,a){if(Jn)return t(i,a);Jn=!0;try{var o=t(i);return o}finally{if(Jn=!1,(Ii!==null||Ci!==null)&&(cc(),Ii&&(i=Ii,t=Ci,Ci=Ii=null,Ro(i),t)))for(i=0;i<t.length;i++)Ro(t[i])}}function ps(t,i){var a=t.stateNode;if(a===null)return null;var o=a[pt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(zn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Rn=!1}var ei=null,lr=null,Ni=null;function Io(){if(Ni)return Ni;var t,i=lr,a=i.length,o,h="value"in ei?ei.value:ei.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ni=h.slice(t,1<o?1-o:void 0)}function ti(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ni(){return!0}function Co(){return!1}function xt(t){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ni:Co,this.isPropagationStopped=Co,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),i}var qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=xt(qe),ys=T({},qe,{view:0,detail:0}),_u=xt(ys),aa,oa,ii,_s=T({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(aa=t.screenX-ii.screenX,oa=t.screenY-ii.screenY):oa=aa=0,ii=t),aa)},movementY:function(t){return"movementY"in t?t.movementY:oa}}),In=xt(_s),vu=T({},_s,{dataTransfer:0}),Yh=xt(vu),vs=T({},ys,{relatedTarget:0}),la=xt(vs),No=T({},qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=xt(No),Eu=T({},qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ca=xt(Eu),Xh=T({},qe,{data:0}),Do=xt(Xh),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Au[t])?!!i[t]:!1}function Ts(){return xo}var Su=T({},ys,{key:function(t){if(t.key){var i=Es[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(t){return t.type==="keypress"?ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ha=xt(Su),bu=T({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=xt(bu),Di=T({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),wu=xt(Di),Ru=T({},qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iu=xt(Ru),Cu=T({},_s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fa=xt(Cu),tn=T({},qe,{newState:0,oldState:0}),Nu=xt(tn),Du=[9,13,27,32],ri=zn&&"CompositionEvent"in window,u=null;zn&&"documentMode"in document&&(u=document.documentMode);var m=zn&&"TextEvent"in window&&!u,_=zn&&(!ri||u&&8<u&&11>=u),A=" ",L=!1;function H(t,i){switch(t){case"keyup":return Du.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ne(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pe=!1;function wt(t,i){switch(t){case"compositionend":return ne(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function ke(t,i){if(Pe)return t==="compositionend"||!ri&&H(t,i)?(t=Io(),Ni=lr=ei=null,Pe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ot[t.type]:i==="textarea"}function xi(t,i,a,o){Ii?Ci?Ci.push(o):Ci=[o]:Ii=o,i=gc(i,"onChange"),0<i.length&&(a=new sa("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var jt=null,si=null;function Vo(t){h_(t,0)}function xu(t){var i=Zn(t);if(So(i))return t}function Op(t,i){if(t==="change")return i}var Vp=!1;if(zn){var $h;if(zn){var Zh="oninput"in document;if(!Zh){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),Zh=typeof Mp.oninput=="function"}$h=Zh}else $h=!1;Vp=$h&&(!document.documentMode||9<document.documentMode)}function Pp(){jt&&(jt.detachEvent("onpropertychange",kp),si=jt=null)}function kp(t){if(t.propertyName==="value"&&xu(si)){var i=[];xi(i,si,t,wn(t)),yu(Vo,i)}}function sA(t,i,a){t==="focusin"?(Pp(),jt=i,si=a,jt.attachEvent("onpropertychange",kp)):t==="focusout"&&Pp()}function aA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(si)}function oA(t,i){if(t==="click")return xu(i)}function lA(t,i){if(t==="input"||t==="change")return xu(i)}function uA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:uA;function Mo(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!es.call(i,h)||!fn(t[h],i[h]))return!1}return!0}function Lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Up(t,i){var a=Lp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lp(a)}}function jp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?jp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function zp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=hs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=hs(t.document)}return i}function Wh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var cA=zn&&"documentMode"in document&&11>=document.documentMode,da=null,Jh=null,Po=null,ef=!1;function Bp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||da==null||da!==hs(o)||(o=da,"selectionStart"in o&&Wh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Po&&Mo(Po,o)||(Po=o,o=gc(Jh,"onSelect"),0<o.length&&(i=new sa("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=da)))}function As(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ma={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},tf={},qp={};zn&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Ss(t){if(tf[t])return tf[t];if(!ma[t])return t;var i=ma[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in qp)return tf[t]=i[a];return t}var Hp=Ss("animationend"),Fp=Ss("animationiteration"),Gp=Ss("animationstart"),hA=Ss("transitionrun"),fA=Ss("transitionstart"),dA=Ss("transitioncancel"),Qp=Ss("transitionend"),Kp=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function Bn(t,i){Kp.set(t,i),jn(i,[t])}var Yp=new WeakMap;function Cn(t,i){if(typeof t=="object"&&t!==null){var a=Yp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:na(i)},Yp.set(t,i),i)}return{value:t,source:i,stack:na(i)}}var Nn=[],pa=0,rf=0;function Ou(){for(var t=pa,i=rf=pa=0;i<t;){var a=Nn[i];Nn[i++]=null;var o=Nn[i];Nn[i++]=null;var h=Nn[i];Nn[i++]=null;var f=Nn[i];if(Nn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Xp(a,h,f)}}function Vu(t,i,a,o){Nn[pa++]=t,Nn[pa++]=i,Nn[pa++]=a,Nn[pa++]=o,rf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function sf(t,i,a,o){return Vu(t,i,a,o),Mu(t)}function ga(t,i){return Vu(t,null,null,i),Mu(t)}function Xp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Qt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Mu(t){if(50<al)throw al=0,hd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ya={};function mA(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,o){return new mA(t,i,a,o)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oi(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $p(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Pu(t,i,a,o,h,f){var v=0;if(o=t,typeof t=="function")af(t)&&(v=1);else if(typeof t=="string")v=gS(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=dn(31,a,i,h),t.elementType=N,t.lanes=f,t;case F:return bs(a.children,h,f,i);case J:v=8,h|=24;break;case W:return t=dn(12,a,i,h|2),t.elementType=W,t.lanes=f,t;case me:return t=dn(13,a,i,h),t.elementType=me,t.lanes=f,t;case Re:return t=dn(19,a,i,h),t.elementType=Re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ie:case re:v=10;break e;case ee:v=9;break e;case Ae:v=11;break e;case V:v=14;break e;case b:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=dn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function bs(t,i,a,o){return t=dn(7,t,o,i),t.lanes=a,t}function of(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function lf(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var _a=[],va=0,ku=null,Lu=0,Dn=[],xn=0,ws=null,Vi=1,Mi="";function Rs(t,i){_a[va++]=Lu,_a[va++]=ku,ku=t,Lu=i}function Zp(t,i,a){Dn[xn++]=Vi,Dn[xn++]=Mi,Dn[xn++]=ws,ws=t;var o=Vi;t=Mi;var h=32-Qt(o)-1;o&=~(1<<h),a+=1;var f=32-Qt(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Vi=1<<32-Qt(i)+h|a<<h|o,Mi=f+t}else Vi=1<<f|a<<h|o,Mi=t}function uf(t){t.return!==null&&(Rs(t,1),Zp(t,1,0))}function cf(t){for(;t===ku;)ku=_a[--va],_a[va]=null,Lu=_a[--va],_a[va]=null;for(;t===ws;)ws=Dn[--xn],Dn[xn]=null,Mi=Dn[--xn],Dn[xn]=null,Vi=Dn[--xn],Dn[xn]=null}var nn=null,lt=null,Be=!1,Is=null,ai=!1,hf=Error(s(519));function Cs(t){var i=Error(s(418,""));throw Uo(Cn(i,t)),hf}function Wp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[bt]=t,i[pt]=o,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<ll.length;a++)De(ll[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),fs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ia(i);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),ds(i,o.value,o.defaultValue,o.children),ia(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||p_(i.textContent,a)?(o.popover!=null&&(De("beforetoggle",i),De("toggle",i)),o.onScroll!=null&&De("scroll",i),o.onScrollEnd!=null&&De("scrollend",i),o.onClick!=null&&(i.onclick=yc),i=!0):i=!1,i||Cs(t)}function Jp(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:nn=nn.return}}function ko(t){if(t!==nn)return!1;if(!Be)return Jp(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&lt&&Cs(t),Jp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){lt=Hn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}lt=null}}else i===27?(i=lt,br(t.type)?(t=xd,xd=null,lt=t):lt=i):lt=nn?Hn(t.stateNode.nextSibling):null;return!0}function Lo(){lt=nn=null,Be=!1}function eg(){var t=Is;return t!==null&&(on===null?on=t:on.push.apply(on,t),Is=null),t}function Uo(t){Is===null?Is=[t]:Is.push(t)}var ff=Z(null),Ns=null,Pi=null;function ur(t,i,a){te(ff,i._currentValue),i._currentValue=a}function ki(t){t._currentValue=ff.current,ae(ff)}function df(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function mf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var w=0;w<i.length;w++)if(E.context===i[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),df(f.return,a,t),o||(v=null);break e}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),df(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function jo(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;fn(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===Dt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ml):t=[ml])}h=h.return}t!==null&&mf(i,t,a,o),i.flags|=262144}function Uu(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ds(t){Ns=t,Pi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return tg(Ns,t)}function ju(t,i){return Ns===null&&Ds(t),tg(t,i)}function tg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Pi===null){if(t===null)throw Error(s(308));Pi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Pi=Pi.next=i;return a}var pA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},gA=r.unstable_scheduleCallback,yA=r.unstable_NormalPriority,It={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new pA,data:new Map,refCount:0}}function zo(t){t.refCount--,t.refCount===0&&gA(yA,function(){t.controller.abort()})}var Bo=null,gf=0,Ea=0,Ta=null;function _A(t,i){if(Bo===null){var a=Bo=[];gf=0,Ea=_d(),Ta={status:"pending",value:void 0,then:function(o){a.push(o)}}}return gf++,i.then(ng,ng),i}function ng(){if(--gf===0&&Bo!==null){Ta!==null&&(Ta.status="fulfilled");var t=Bo;Bo=null,Ea=0,Ta=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function vA(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var ig=G.S;G.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&_A(t,i),ig!==null&&ig(t,i)};var xs=Z(null);function yf(){var t=xs.current;return t!==null?t:Je.pooledCache}function zu(t,i){i===null?te(xs,xs.current):te(xs,i.pool)}function rg(){var t=yf();return t===null?null:{parent:It._currentValue,pool:t}}var qo=Error(s(460)),sg=Error(s(474)),Bu=Error(s(542)),_f={then:function(){}};function ag(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qu(){}function og(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(qu,qu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ug(t),t;default:if(typeof i.status=="string")i.then(qu,qu);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ug(t),t}throw Ho=i,qo}}var Ho=null;function lg(){if(Ho===null)throw Error(s(459));var t=Ho;return Ho=null,t}function ug(t){if(t===qo||t===Bu)throw Error(s(483))}var cr=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ge&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Mu(t),Xp(t,null,a),i}return Vu(t,o,i,a),Mu(t)}function Fo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,_o(t,a)}}function Tf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Af=!1;function Go(){if(Af){var t=Ta;if(t!==null)throw t}}function Qo(t,i,a,o){Af=!1;var h=t.updateQueue;cr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,j=w.next;w.next=null,v===null?f=j:v.next=j,v=w;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=j:E.next=j,Q.lastBaseUpdate=w))}if(f!==null){var X=h.baseState;v=0,Q=j=w=null,E=f;do{var B=E.lane&-536870913,q=B!==E.lane;if(q?(Le&B)===B:(o&B)===B){B!==0&&B===Ea&&(Af=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ve=t,pe=E;B=i;var $e=a;switch(pe.tag){case 1:if(ve=pe.payload,typeof ve=="function"){X=ve.call($e,X,B);break e}X=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=pe.payload,B=typeof ve=="function"?ve.call($e,X,B):ve,B==null)break e;X=T({},X,B);break e;case 2:cr=!0}}B=E.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(j=Q=q,w=X):Q=Q.next=q,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(w=X),h.baseState=w,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),Er|=v,t.lanes=v,t.memoizedState=X}}function cg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function hg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)cg(a[t],i)}var Aa=Z(null),Hu=Z(0);function fg(t,i){t=Hi,te(Hu,t),te(Aa,i),Hi=t|i.baseLanes}function Sf(){te(Hu,Hi),te(Aa,Aa.current)}function bf(){Hi=Hu.current,ae(Aa),ae(Hu)}var dr=0,we=null,Ye=null,yt=null,Fu=!1,Sa=!1,Os=!1,Gu=0,Ko=0,ba=null,EA=0;function ht(){throw Error(s(321))}function wf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!fn(t[a],i[a]))return!1;return!0}function Rf(t,i,a,o,h,f){return dr=f,we=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?Xg:$g,Os=!1,f=a(o,h),Os=!1,Sa&&(f=mg(i,a,o,h)),dg(t),f}function dg(t){G.H=Zu;var i=Ye!==null&&Ye.next!==null;if(dr=0,yt=Ye=we=null,Fu=!1,Ko=0,ba=null,i)throw Error(s(300));t===null||Vt||(t=t.dependencies,t!==null&&Uu(t)&&(Vt=!0))}function mg(t,i,a,o){we=t;var h=0;do{if(Sa&&(ba=null),Ko=0,Sa=!1,25<=h)throw Error(s(301));if(h+=1,yt=Ye=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=IA,f=i(a,o)}while(Sa);return f}function TA(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Yo(i):i,t=t.useState()[0],(Ye!==null?Ye.memoizedState:null)!==t&&(we.flags|=1024),i}function If(){var t=Gu!==0;return Gu=0,t}function Cf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Nf(t){if(Fu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Fu=!1}dr=0,yt=Ye=we=null,Sa=!1,Ko=Gu=0,ba=null}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?we.memoizedState=yt=t:yt=yt.next=t,yt}function _t(){if(Ye===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var i=yt===null?we.memoizedState:yt.next;if(i!==null)yt=i,Ye=t;else{if(t===null)throw we.alternate===null?Error(s(467)):Error(s(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},yt===null?we.memoizedState=yt=t:yt=yt.next=t}return yt}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(t){var i=Ko;return Ko+=1,ba===null&&(ba=[]),t=og(ba,t,i),i=we,(yt===null?i.memoizedState:yt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Xg:$g),t}function Qu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yo(t);if(t.$$typeof===re)return Kt(t)}throw Error(s(438,String(t)))}function xf(t){var i=null,a=we.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=we.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Df(),we.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function Li(t,i){return typeof i=="function"?i(t):i}function Ku(t){var i=_t();return Of(i,Ye,t)}function Of(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=v=null,w=null,j=i,Q=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Le&X)===X:(dr&X)===X){var B=j.revertLane;if(B===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Ea&&(Q=!0);else if((dr&B)===B){j=j.next,B===Ea&&(Q=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=X,v=f):w=w.next=X,we.lanes|=B,Er|=B;X=j.action,Os&&a(f,X),f=j.hasEagerState?j.eagerState:a(f,X)}else B={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=B,v=f):w=w.next=B,we.lanes|=X,Er|=X;j=j.next}while(j!==null&&j!==i);if(w===null?v=f:w.next=E,!fn(f,t.memoizedState)&&(Vt=!0,Q&&(a=Ta,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=w,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Vf(t){var i=_t(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);fn(f,i.memoizedState)||(Vt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function pg(t,i,a){var o=we,h=_t(),f=Be;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!fn((Ye||h).memoizedState,a);v&&(h.memoizedState=a,Vt=!0),h=h.queue;var E=_g.bind(null,o,h,t);if(Xo(2048,8,E,[t]),h.getSnapshot!==i||v||yt!==null&&yt.memoizedState.tag&1){if(o.flags|=2048,wa(9,Yu(),yg.bind(null,o,h,a,i),null),Je===null)throw Error(s(349));f||(dr&124)!==0||gg(o,i,a)}return a}function gg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=we.updateQueue,i===null?(i=Df(),we.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function yg(t,i,a,o){i.value=a,i.getSnapshot=o,vg(i)&&Eg(t)}function _g(t,i,a){return a(function(){vg(i)&&Eg(t)})}function vg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!fn(t,a)}catch{return!0}}function Eg(t){var i=ga(t,2);i!==null&&_n(i,t,2)}function Mf(t){var i=sn();if(typeof t=="function"){var a=t;if(t=a(),Os){cn(!0);try{a()}finally{cn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:t},i}function Tg(t,i,a,o){return t.baseState=a,Of(t,Ye,typeof o=="function"?o:Li)}function AA(t,i,a,o,h){if($u(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Ag(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Ag(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=G.T,v={};G.T=v;try{var E=a(h,o),w=G.S;w!==null&&w(v,E),Sg(t,i,E)}catch(j){Pf(t,i,j)}finally{G.T=f}}else try{f=a(h,o),Sg(t,i,f)}catch(j){Pf(t,i,j)}}function Sg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){bg(t,i,o)},function(o){return Pf(t,i,o)}):bg(t,i,a)}function bg(t,i,a){i.status="fulfilled",i.value=a,wg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ag(t,a)))}function Pf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,wg(i),i=i.next;while(i!==o)}t.action=null}function wg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Rg(t,i){return i}function Ig(t,i){if(Be){var a=Je.formState;if(a!==null){e:{var o=we;if(Be){if(lt){t:{for(var h=lt,f=ai;h.nodeType!==8;){if(!f){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){lt=Hn(h.nextSibling),o=h.data==="F!";break e}}Cs(o)}o=!1}o&&(i=a[0])}}return a=sn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:i},a.queue=o,a=Qg.bind(null,we,o),o.dispatch=a,o=Mf(!1),f=zf.bind(null,we,!1,o.queue),o=sn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=AA.bind(null,we,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Cg(t){var i=_t();return Ng(i,Ye,t)}function Ng(t,i,a){if(i=Of(t,i,Rg)[0],t=Ku(Li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Yo(i)}catch(v){throw v===qo?Bu:v}else o=i;i=_t();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(we.flags|=2048,wa(9,Yu(),SA.bind(null,h,a),null)),[o,f,t]}function SA(t,i){t.action=i}function Dg(t){var i=_t(),a=Ye;if(a!==null)return Ng(i,a,t);_t(),i=i.memoizedState,a=_t();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function wa(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=we.updateQueue,i===null&&(i=Df(),we.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Yu(){return{destroy:void 0,resource:void 0}}function xg(){return _t().memoizedState}function Xu(t,i,a,o){var h=sn();o=o===void 0?null:o,we.flags|=t,h.memoizedState=wa(1|i,Yu(),a,o)}function Xo(t,i,a,o){var h=_t();o=o===void 0?null:o;var f=h.memoizedState.inst;Ye!==null&&o!==null&&wf(o,Ye.memoizedState.deps)?h.memoizedState=wa(i,f,a,o):(we.flags|=t,h.memoizedState=wa(1|i,f,a,o))}function Og(t,i){Xu(8390656,8,t,i)}function Vg(t,i){Xo(2048,8,t,i)}function Mg(t,i){return Xo(4,2,t,i)}function Pg(t,i){return Xo(4,4,t,i)}function kg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Lg(t,i,a){a=a!=null?a.concat([t]):null,Xo(4,4,kg.bind(null,i,t),a)}function kf(){}function Ug(t,i){var a=_t();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&wf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function jg(t,i){var a=_t();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&wf(i,o[1]))return o[0];if(o=t(),Os){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,i],o}function Lf(t,i,a){return a===void 0||(dr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=qy(),we.lanes|=t,Er|=t,a)}function zg(t,i,a,o){return fn(a,i)?a:Aa.current!==null?(t=Lf(t,a,o),fn(t,i)||(Vt=!0),t):(dr&42)===0?(Vt=!0,t.memoizedState=a):(t=qy(),we.lanes|=t,Er|=t,i)}function Bg(t,i,a,o,h){var f=se.p;se.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,zf(t,!1,i,a);try{var w=h(),j=G.S;if(j!==null&&j(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var Q=vA(w,o);$o(t,i,Q,yn(t))}else $o(t,i,o,yn(t))}catch(X){$o(t,i,{then:function(){},status:"rejected",reason:X},yn())}finally{se.p=f,G.T=v}}function bA(){}function Uf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=qg(t).queue;Bg(t,h,i,he,a===null?bA:function(){return Hg(t),a(o)})}function qg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Hg(t){var i=qg(t).next.queue;$o(t,i,{},yn())}function jf(){return Kt(ml)}function Fg(){return _t().memoizedState}function Gg(){return _t().memoizedState}function wA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();t=hr(a);var o=fr(i,t,a);o!==null&&(_n(o,i,a),Fo(o,i,a)),i={cache:pf()},t.payload=i;return}i=i.return}}function RA(t,i,a){var o=yn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},$u(t)?Kg(i,a):(a=sf(t,i,a,o),a!==null&&(_n(a,t,o),Yg(a,i,o)))}function Qg(t,i,a){var o=yn();$o(t,i,a,o)}function $o(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if($u(t))Kg(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,v))return Vu(t,i,h,0),Je===null&&Ou(),!1}catch{}finally{}if(a=sf(t,i,h,o),a!==null)return _n(a,t,o),Yg(a,i,o),!0}return!1}function zf(t,i,a,o){if(o={lane:2,revertLane:_d(),action:o,hasEagerState:!1,eagerState:null,next:null},$u(t)){if(i)throw Error(s(479))}else i=sf(t,a,o,2),i!==null&&_n(i,t,2)}function $u(t){var i=t.alternate;return t===we||i!==null&&i===we}function Kg(t,i){Sa=Fu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Yg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,_o(t,a)}}var Zu={readContext:Kt,use:Qu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht},Xg={readContext:Kt,use:Qu,useCallback:function(t,i){return sn().memoizedState=[t,i===void 0?null:i],t},useContext:Kt,useEffect:Og,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Xu(4194308,4,kg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Xu(4194308,4,t,i)},useInsertionEffect:function(t,i){Xu(4,2,t,i)},useMemo:function(t,i){var a=sn();i=i===void 0?null:i;var o=t();if(Os){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=sn();if(a!==void 0){var h=a(i);if(Os){cn(!0);try{a(i)}finally{cn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=RA.bind(null,we,t),[o.memoizedState,t]},useRef:function(t){var i=sn();return t={current:t},i.memoizedState=t},useState:function(t){t=Mf(t);var i=t.queue,a=Qg.bind(null,we,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,i){var a=sn();return Lf(a,t,i)},useTransition:function(){var t=Mf(!1);return t=Bg.bind(null,we,t.queue,!0,!1),sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=we,h=sn();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Je===null)throw Error(s(349));(Le&124)!==0||gg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Og(_g.bind(null,o,f,t),[t]),o.flags|=2048,wa(9,Yu(),yg.bind(null,o,f,a,i),null),a},useId:function(){var t=sn(),i=Je.identifierPrefix;if(Be){var a=Mi,o=Vi;a=(o&~(1<<32-Qt(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Gu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=EA++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:jf,useFormState:Ig,useActionState:Ig,useOptimistic:function(t){var i=sn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=zf.bind(null,we,!0,a),a.dispatch=i,[t,i]},useMemoCache:xf,useCacheRefresh:function(){return sn().memoizedState=wA.bind(null,we)}},$g={readContext:Kt,use:Qu,useCallback:Ug,useContext:Kt,useEffect:Vg,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Pg,useMemo:jg,useReducer:Ku,useRef:xg,useState:function(){return Ku(Li)},useDebugValue:kf,useDeferredValue:function(t,i){var a=_t();return zg(a,Ye.memoizedState,t,i)},useTransition:function(){var t=Ku(Li)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:Yo(t),i]},useSyncExternalStore:pg,useId:Fg,useHostTransitionStatus:jf,useFormState:Cg,useActionState:Cg,useOptimistic:function(t,i){var a=_t();return Tg(a,Ye,t,i)},useMemoCache:xf,useCacheRefresh:Gg},IA={readContext:Kt,use:Qu,useCallback:Ug,useContext:Kt,useEffect:Vg,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Pg,useMemo:jg,useReducer:Vf,useRef:xg,useState:function(){return Vf(Li)},useDebugValue:kf,useDeferredValue:function(t,i){var a=_t();return Ye===null?Lf(a,t,i):zg(a,Ye.memoizedState,t,i)},useTransition:function(){var t=Vf(Li)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:Yo(t),i]},useSyncExternalStore:pg,useId:Fg,useHostTransitionStatus:jf,useFormState:Dg,useActionState:Dg,useOptimistic:function(t,i){var a=_t();return Ye!==null?Tg(a,Ye,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xf,useCacheRefresh:Gg},Ra=null,Zo=0;function Wu(t){var i=Zo;return Zo+=1,Ra===null&&(Ra=[]),og(Ra,t,i)}function Wo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ju(t,i){throw i.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Zg(t){var i=t._init;return i(t._payload)}function Wg(t){function i(P,x){if(t){var U=P.deletions;U===null?(P.deletions=[x],P.flags|=16):U.push(x)}}function a(P,x){if(!t)return null;for(;x!==null;)i(P,x),x=x.sibling;return null}function o(P){for(var x=new Map;P!==null;)P.key!==null?x.set(P.key,P):x.set(P.index,P),P=P.sibling;return x}function h(P,x){return P=Oi(P,x),P.index=0,P.sibling=null,P}function f(P,x,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<x?(P.flags|=67108866,x):U):(P.flags|=67108866,x)):(P.flags|=1048576,x)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,x,U,K){return x===null||x.tag!==6?(x=of(U,P.mode,K),x.return=P,x):(x=h(x,U),x.return=P,x)}function w(P,x,U,K){var ue=U.type;return ue===F?Q(P,x,U.props.children,K,U.key):x!==null&&(x.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===b&&Zg(ue)===x.type)?(x=h(x,U.props),Wo(x,U),x.return=P,x):(x=Pu(U.type,U.key,U.props,null,P.mode,K),Wo(x,U),x.return=P,x)}function j(P,x,U,K){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=lf(U,P.mode,K),x.return=P,x):(x=h(x,U.children||[]),x.return=P,x)}function Q(P,x,U,K,ue){return x===null||x.tag!==7?(x=bs(U,P.mode,K,ue),x.return=P,x):(x=h(x,U),x.return=P,x)}function X(P,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=of(""+x,P.mode,U),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case I:return U=Pu(x.type,x.key,x.props,null,P.mode,U),Wo(U,x),U.return=P,U;case z:return x=lf(x,P.mode,U),x.return=P,x;case b:var K=x._init;return x=K(x._payload),X(P,x,U)}if(at(x)||k(x))return x=bs(x,P.mode,U,null),x.return=P,x;if(typeof x.then=="function")return X(P,Wu(x),U);if(x.$$typeof===re)return X(P,ju(P,x),U);Ju(P,x)}return null}function B(P,x,U,K){var ue=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ue!==null?null:E(P,x,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===ue?w(P,x,U,K):null;case z:return U.key===ue?j(P,x,U,K):null;case b:return ue=U._init,U=ue(U._payload),B(P,x,U,K)}if(at(U)||k(U))return ue!==null?null:Q(P,x,U,K,null);if(typeof U.then=="function")return B(P,x,Wu(U),K);if(U.$$typeof===re)return B(P,x,ju(P,U),K);Ju(P,U)}return null}function q(P,x,U,K,ue){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return P=P.get(U)||null,E(x,P,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return P=P.get(K.key===null?U:K.key)||null,w(x,P,K,ue);case z:return P=P.get(K.key===null?U:K.key)||null,j(x,P,K,ue);case b:var Ce=K._init;return K=Ce(K._payload),q(P,x,U,K,ue)}if(at(K)||k(K))return P=P.get(U)||null,Q(x,P,K,ue,null);if(typeof K.then=="function")return q(P,x,U,Wu(K),ue);if(K.$$typeof===re)return q(P,x,U,ju(x,K),ue);Ju(x,K)}return null}function ve(P,x,U,K){for(var ue=null,Ce=null,ce=x,ge=x=0,Pt=null;ce!==null&&ge<U.length;ge++){ce.index>ge?(Pt=ce,ce=null):Pt=ce.sibling;var je=B(P,ce,U[ge],K);if(je===null){ce===null&&(ce=Pt);break}t&&ce&&je.alternate===null&&i(P,ce),x=f(je,x,ge),Ce===null?ue=je:Ce.sibling=je,Ce=je,ce=Pt}if(ge===U.length)return a(P,ce),Be&&Rs(P,ge),ue;if(ce===null){for(;ge<U.length;ge++)ce=X(P,U[ge],K),ce!==null&&(x=f(ce,x,ge),Ce===null?ue=ce:Ce.sibling=ce,Ce=ce);return Be&&Rs(P,ge),ue}for(ce=o(ce);ge<U.length;ge++)Pt=q(ce,P,ge,U[ge],K),Pt!==null&&(t&&Pt.alternate!==null&&ce.delete(Pt.key===null?ge:Pt.key),x=f(Pt,x,ge),Ce===null?ue=Pt:Ce.sibling=Pt,Ce=Pt);return t&&ce.forEach(function(Nr){return i(P,Nr)}),Be&&Rs(P,ge),ue}function pe(P,x,U,K){if(U==null)throw Error(s(151));for(var ue=null,Ce=null,ce=x,ge=x=0,Pt=null,je=U.next();ce!==null&&!je.done;ge++,je=U.next()){ce.index>ge?(Pt=ce,ce=null):Pt=ce.sibling;var Nr=B(P,ce,je.value,K);if(Nr===null){ce===null&&(ce=Pt);break}t&&ce&&Nr.alternate===null&&i(P,ce),x=f(Nr,x,ge),Ce===null?ue=Nr:Ce.sibling=Nr,Ce=Nr,ce=Pt}if(je.done)return a(P,ce),Be&&Rs(P,ge),ue;if(ce===null){for(;!je.done;ge++,je=U.next())je=X(P,je.value,K),je!==null&&(x=f(je,x,ge),Ce===null?ue=je:Ce.sibling=je,Ce=je);return Be&&Rs(P,ge),ue}for(ce=o(ce);!je.done;ge++,je=U.next())je=q(ce,P,ge,je.value,K),je!==null&&(t&&je.alternate!==null&&ce.delete(je.key===null?ge:je.key),x=f(je,x,ge),Ce===null?ue=je:Ce.sibling=je,Ce=je);return t&&ce.forEach(function(CS){return i(P,CS)}),Be&&Rs(P,ge),ue}function $e(P,x,U,K){if(typeof U=="object"&&U!==null&&U.type===F&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:e:{for(var ue=U.key;x!==null;){if(x.key===ue){if(ue=U.type,ue===F){if(x.tag===7){a(P,x.sibling),K=h(x,U.props.children),K.return=P,P=K;break e}}else if(x.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===b&&Zg(ue)===x.type){a(P,x.sibling),K=h(x,U.props),Wo(K,U),K.return=P,P=K;break e}a(P,x);break}else i(P,x);x=x.sibling}U.type===F?(K=bs(U.props.children,P.mode,K,U.key),K.return=P,P=K):(K=Pu(U.type,U.key,U.props,null,P.mode,K),Wo(K,U),K.return=P,P=K)}return v(P);case z:e:{for(ue=U.key;x!==null;){if(x.key===ue)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){a(P,x.sibling),K=h(x,U.children||[]),K.return=P,P=K;break e}else{a(P,x);break}else i(P,x);x=x.sibling}K=lf(U,P.mode,K),K.return=P,P=K}return v(P);case b:return ue=U._init,U=ue(U._payload),$e(P,x,U,K)}if(at(U))return ve(P,x,U,K);if(k(U)){if(ue=k(U),typeof ue!="function")throw Error(s(150));return U=ue.call(U),pe(P,x,U,K)}if(typeof U.then=="function")return $e(P,x,Wu(U),K);if(U.$$typeof===re)return $e(P,x,ju(P,U),K);Ju(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(a(P,x.sibling),K=h(x,U),K.return=P,P=K):(a(P,x),K=of(U,P.mode,K),K.return=P,P=K),v(P)):a(P,x)}return function(P,x,U,K){try{Zo=0;var ue=$e(P,x,U,K);return Ra=null,ue}catch(ce){if(ce===qo||ce===Bu)throw ce;var Ce=dn(29,ce,null,P.mode);return Ce.lanes=K,Ce.return=P,Ce}finally{}}}var Ia=Wg(!0),Jg=Wg(!1),On=Z(null),oi=null;function mr(t){var i=t.alternate;te(Ct,Ct.current&1),te(On,t),oi===null&&(i===null||Aa.current!==null||i.memoizedState!==null)&&(oi=t)}function ey(t){if(t.tag===22){if(te(Ct,Ct.current),te(On,t),oi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(oi=t)}}else pr()}function pr(){te(Ct,Ct.current),te(On,On.current)}function Ui(t){ae(On),oi===t&&(oi=null),ae(Ct)}var Ct=Z(0);function ec(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Dd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Bf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var qf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=yn(),h=hr(o);h.payload=i,a!=null&&(h.callback=a),i=fr(t,h,o),i!==null&&(_n(i,t,o),Fo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=yn(),h=hr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=fr(t,h,o),i!==null&&(_n(i,t,o),Fo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=yn(),o=hr(a);o.tag=2,i!=null&&(o.callback=i),i=fr(t,o,a),i!==null&&(_n(i,t,a),Fo(i,t,a))}};function ty(t,i,a,o,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Mo(a,o)||!Mo(h,f):!0}function ny(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&qf.enqueueReplaceState(i,i.state,null)}function Vs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){tc(t)}function ry(t){console.error(t)}function sy(t){tc(t)}function nc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ay(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hf(t,i,a){return a=hr(a),a.tag=3,a.payload={element:null},a.callback=function(){nc(t,i)},a}function oy(t){return t=hr(t),t.tag=3,t}function ly(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){ay(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ay(i,a,o),typeof h!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function CA(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&jo(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return oi===null?dd():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===_f?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),pd(t,o,h)),!1;case 22:return a.flags|=65536,o===_f?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),pd(t,o,h)),!1}throw Error(s(435,a.tag))}return pd(t,o,h),dd(),!1}if(Be)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==hf&&(t=Error(s(422),{cause:o}),Uo(Cn(t,a)))):(o!==hf&&(i=Error(s(423),{cause:o}),Uo(Cn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Cn(o,a),h=Hf(t.stateNode,o,h),Tf(t,h),ut!==4&&(ut=2)),!1;var f=Error(s(520),{cause:o});if(f=Cn(f,a),sl===null?sl=[f]:sl.push(f),ut!==4&&(ut=2),i===null)return!0;o=Cn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Hf(a.stateNode,o,t),Tf(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Tr===null||!Tr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=oy(h),ly(h,t,a,o),Tf(a,h),!1}a=a.return}while(a!==null);return!1}var uy=Error(s(461)),Vt=!1;function zt(t,i,a,o){i.child=t===null?Jg(i,null,a,o):Ia(i,t.child,a,o)}function cy(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ds(i),o=Rf(t,i,a,v,f,h),E=If(),t!==null&&!Vt?(Cf(t,i,h),ji(t,i,h)):(Be&&E&&uf(i),i.flags|=1,zt(t,i,o,h),i.child)}function hy(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!af(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,fy(t,i,f,o,h)):(t=Pu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Zf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Mo,a(v,o)&&t.ref===i.ref)return ji(t,i,h)}return i.flags|=1,t=Oi(f,o),t.ref=i.ref,t.return=i,i.child=t}function fy(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(Mo(f,o)&&t.ref===i.ref)if(Vt=!1,i.pendingProps=o=f,Zf(t,h))(t.flags&131072)!==0&&(Vt=!0);else return i.lanes=t.lanes,ji(t,i,h)}return Ff(t,i,a,o,h)}function dy(t,i,a){var o=i.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return my(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&zu(i,f!==null?f.cachePool:null),f!==null?fg(i,f):Sf(),ey(i);else return i.lanes=i.childLanes=536870912,my(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(zu(i,f.cachePool),fg(i,f),pr(),i.memoizedState=null):(t!==null&&zu(i,null),Sf(),pr());return zt(t,i,h,a),i.child}function my(t,i,a,o){var h=yf();return h=h===null?null:{parent:It._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&zu(i,null),Sf(),ey(i),t!==null&&jo(t,i,o,!0),null}function ic(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ff(t,i,a,o,h){return Ds(i),a=Rf(t,i,a,o,void 0,h),o=If(),t!==null&&!Vt?(Cf(t,i,h),ji(t,i,h)):(Be&&o&&uf(i),i.flags|=1,zt(t,i,a,h),i.child)}function py(t,i,a,o,h,f){return Ds(i),i.updateQueue=null,a=mg(i,o,a,h),dg(t),o=If(),t!==null&&!Vt?(Cf(t,i,f),ji(t,i,f)):(Be&&o&&uf(i),i.flags|=1,zt(t,i,a,f),i.child)}function gy(t,i,a,o,h){if(Ds(i),i.stateNode===null){var f=ya,v=a.contextType;typeof v=="object"&&v!==null&&(f=Kt(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=qf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},vf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Kt(v):ya,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Bf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&qf.enqueueReplaceState(f,f.state,null),Qo(i,o,f,h),Go(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,w=Vs(a,E);f.props=w;var j=f.context,Q=a.contextType;v=ya,typeof Q=="object"&&Q!==null&&(v=Kt(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==v)&&ny(i,f,o,v),cr=!1;var B=i.memoizedState;f.state=B,Qo(i,o,f,h),Go(),j=i.memoizedState,E||B!==j||cr?(typeof X=="function"&&(Bf(i,a,X,o),j=i.memoizedState),(w=cr||ty(i,a,w,o,B,j,v))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,Ef(t,i),v=i.memoizedProps,Q=Vs(a,v),f.props=Q,X=i.pendingProps,B=f.context,j=a.contextType,w=ya,typeof j=="object"&&j!==null&&(w=Kt(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==X||B!==w)&&ny(i,f,o,w),cr=!1,B=i.memoizedState,f.state=B,Qo(i,o,f,h),Go();var q=i.memoizedState;v!==X||B!==q||cr||t!==null&&t.dependencies!==null&&Uu(t.dependencies)?(typeof E=="function"&&(Bf(i,a,E,o),q=i.memoizedState),(Q=cr||ty(i,a,Q,o,B,q,w)||t!==null&&t.dependencies!==null&&Uu(t.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,w)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),f.props=o,f.state=q,f.context=w,o=Q):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,ic(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Ia(i,t.child,null,h),i.child=Ia(i,null,a,h)):zt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ji(t,i,h),t}function yy(t,i,a,o){return Lo(),i.flags|=256,zt(t,i,a,o),i.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(t){return{baseLanes:t,cachePool:rg()}}function Kf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Vn),t}function _y(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?mr(i):pr(),Be){var E=lt,w;if(w=E){e:{for(w=E,E=ai;w.nodeType!==8;){if(!E){E=null;break e}if(w=Hn(w.nextSibling),w===null){E=null;break e}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:ws!==null?{id:Vi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},w=dn(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,nn=i,lt=null,w=!0):w=!1}w||Cs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Dd(E)?i.lanes=32:i.lanes=536870912,null;Ui(i)}return E=o.children,o=o.fallback,h?(pr(),h=i.mode,E=rc({mode:"hidden",children:E},h),o=bs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Qf(a),h.childLanes=Kf(t,v,a),i.memoizedState=Gf,o):(mr(i),Yf(i,E))}if(w=t.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)i.flags&256?(mr(i),i.flags&=-257,i=Xf(t,i,a)):i.memoizedState!==null?(pr(),i.child=t.child,i.flags|=128,i=null):(pr(),h=o.fallback,E=i.mode,o=rc({mode:"visible",children:o.children},E),h=bs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ia(i,t.child,null,a),o=i.child,o.memoizedState=Qf(a),o.childLanes=Kf(t,v,a),i.memoizedState=Gf,i=h);else if(mr(i),Dd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),i=Xf(t,i,a)}else if(Vt||jo(t,i,a,!1),v=(a&t.childLanes)!==0,Vt||v){if(v=Je,v!==null&&(o=a&-a,o=(o&42)!==0?1:nr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,ga(t,o),_n(v,t,o),uy;E.data==="$?"||dd(),i=Xf(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=w.treeContext,lt=Hn(E.nextSibling),nn=i,Be=!0,Is=null,ai=!1,t!==null&&(Dn[xn++]=Vi,Dn[xn++]=Mi,Dn[xn++]=ws,Vi=t.id,Mi=t.overflow,ws=i),i=Yf(i,o.children),i.flags|=4096);return i}return h?(pr(),h=o.fallback,E=i.mode,w=t.child,j=w.sibling,o=Oi(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,j!==null?h=Oi(j,h):(h=bs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=Qf(a):(w=E.cachePool,w!==null?(j=It._currentValue,w=w.parent!==j?{parent:j,pool:j}:w):w=rg(),E={baseLanes:E.baseLanes|a,cachePool:w}),h.memoizedState=E,h.childLanes=Kf(t,v,a),i.memoizedState=Gf,o):(mr(i),a=t.child,t=a.sibling,a=Oi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Yf(t,i){return i=rc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function rc(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xf(t,i,a){return Ia(i,t.child,null,a),t=Yf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function vy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),df(t.return,i,a)}function $f(t,i,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Ey(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(zt(t,i,o.children,a),o=Ct.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vy(t,a,i);else if(t.tag===19)vy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(te(Ct,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&ec(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),$f(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&ec(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}$f(i,!0,a,null,f);break;case"together":$f(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ji(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Er|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(jo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Oi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Oi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Zf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Uu(t)))}function NA(t,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),ur(i,It,t.memoizedState.cache),Lo();break;case 27:case 5:tr(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:ur(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(mr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?_y(t,i,a):(mr(i),t=ji(t,i,a),t!==null?t.sibling:null);mr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(jo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Ey(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),te(Ct,Ct.current),o)break;return null;case 22:case 23:return i.lanes=0,dy(t,i,a);case 24:ur(i,It,t.memoizedState.cache)}return ji(t,i,a)}function Ty(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Vt=!0;else{if(!Zf(t,a)&&(i.flags&128)===0)return Vt=!1,NA(t,i,a);Vt=(t.flags&131072)!==0}else Vt=!1,Be&&(i.flags&1048576)!==0&&Zp(i,Lu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")af(o)?(t=Vs(o,t),i.tag=1,i=gy(null,i,o,t,a)):(i.tag=0,i=Ff(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ae){i.tag=11,i=cy(null,i,o,t,a);break e}else if(h===V){i.tag=14,i=hy(null,i,o,t,a);break e}}throw i=Lt(o)||o,Error(s(306,i,""))}}return i;case 0:return Ff(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Vs(o,i.pendingProps),gy(t,i,o,h,a);case 3:e:{if(We(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,Ef(t,i),Qo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ur(i,It,o),o!==f.cache&&mf(i,[It],a,!0),Go(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=yy(t,i,o,a);break e}else if(o!==h){h=Cn(Error(s(424)),i),Uo(h),i=yy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(lt=Hn(t.firstChild),nn=i,Be=!0,Is=null,ai=!0,a=Jg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=ji(t,i,a);break e}zt(t,i,o,a)}i=i.child}return i;case 26:return ic(t,i),t===null?(a=w_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,o=_c(Ee.current).createElement(a),o[bt]=i,o[pt]=t,qt(o,a,t),ct(o),i.stateNode=o):i.memoizedState=w_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return tr(i),t===null&&Be&&(o=i.stateNode=A_(i.type,i.pendingProps,Ee.current),nn=i,ai=!0,h=lt,br(i.type)?(xd=h,lt=Hn(o.firstChild)):lt=h),zt(t,i,i.pendingProps.children,a),ic(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=o=lt)&&(o=iS(o,i.type,i.pendingProps,ai),o!==null?(i.stateNode=o,nn=i,lt=Hn(o.firstChild),ai=!1,h=!0):h=!1),h||Cs(i)),tr(i),h=i.type,f=i.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,Id(h,f)?o=null:v!==null&&Id(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Rf(t,i,TA,null,null,a),ml._currentValue=h),ic(t,i),zt(t,i,o,a),i.child;case 6:return t===null&&Be&&((t=a=lt)&&(a=rS(a,i.pendingProps,ai),a!==null?(i.stateNode=a,nn=i,lt=null,t=!0):t=!1),t||Cs(i)),null;case 13:return _y(t,i,a);case 4:return We(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ia(i,null,o,a):zt(t,i,o,a),i.child;case 11:return cy(t,i,i.type,i.pendingProps,a);case 7:return zt(t,i,i.pendingProps,a),i.child;case 8:return zt(t,i,i.pendingProps.children,a),i.child;case 12:return zt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ur(i,i.type,o.value),zt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ds(i),h=Kt(h),o=o(h),i.flags|=1,zt(t,i,o,a),i.child;case 14:return hy(t,i,i.type,i.pendingProps,a);case 15:return fy(t,i,i.type,i.pendingProps,a);case 19:return Ey(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=rc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Oi(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return dy(t,i,a);case 24:return Ds(i),o=Kt(It),t===null?(h=yf(),h===null&&(h=Je,f=pf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},vf(i),ur(i,It,h)):((t.lanes&a)!==0&&(Ef(t,i),Qo(i,null,null,a),Go()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ur(i,It,o)):(o=f.cache,ur(i,It,o),o!==h.cache&&mf(i,[It],a,!0))),zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function zi(t){t.flags|=4}function Ay(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(i)){if(i=On.current,i!==null&&((Le&4194048)===Le?oi!==null:(Le&62914560)!==Le&&(Le&536870912)===0||i!==oi))throw Ho=_f,sg;t.flags|=8192}}function sc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?go():536870912,t.lanes|=i,xa|=i)}function Jo(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function DA(t,i,a){var o=i.pendingProps;switch(cf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ki(It),Yn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ko(i)?zi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,eg())),rt(i),null;case 26:return a=i.memoizedState,t===null?(zi(i),a!==null?(rt(i),Ay(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(zi(i),rt(i),Ay(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==o&&zi(i),rt(i),i.flags&=-16777217),null;case 27:vi(i),a=Ee.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=de.current,ko(i)?Wp(i):(t=A_(h,o,a),i.stateNode=t,zi(i))}return rt(i),null;case 5:if(vi(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=de.current,ko(i))Wp(i);else{switch(h=_c(Ee.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[bt]=i,t[pt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(qt(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&zi(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ee.current,ko(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[bt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||p_(t.nodeValue,a)),t||Cs(i)}else t=_c(t).createTextNode(o),t[bt]=i,i.stateNode=t}return rt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ko(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[bt]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else h=eg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ui(i),i):(Ui(i),null)}if(Ui(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),sc(i,i.updateQueue),rt(i),null;case 4:return Yn(),t===null&&Ad(i.stateNode.containerInfo),rt(i),null;case 10:return ki(i.type),rt(i),null;case 19:if(ae(Ct),h=i.memoizedState,h===null)return rt(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Jo(h,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=ec(t),f!==null){for(i.flags|=128,Jo(h,!1),t=f.updateQueue,i.updateQueue=t,sc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)$p(a,t),a=a.sibling;return te(Ct,Ct.current&1|2),i.child}t=t.sibling}h.tail!==null&&An()>lc&&(i.flags|=128,o=!0,Jo(h,!1),i.lanes=4194304)}else{if(!o)if(t=ec(f),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,sc(i,t),Jo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Be)return rt(i),null}else 2*An()-h.renderingStartTime>lc&&a!==536870912&&(i.flags|=128,o=!0,Jo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=An(),i.sibling=null,t=Ct.current,te(Ct,o?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Ui(i),bf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&sc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&ae(xs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(It),rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function xA(t,i){switch(cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ki(It),Yn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return vi(i),null;case 13:if(Ui(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Lo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ae(Ct),null;case 4:return Yn(),null;case 10:return ki(i.type),null;case 22:case 23:return Ui(i),bf(),t!==null&&ae(xs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ki(It),null;case 25:return null;default:return null}}function Sy(t,i){switch(cf(i),i.tag){case 3:ki(It),Yn();break;case 26:case 27:case 5:vi(i);break;case 4:Yn();break;case 13:Ui(i);break;case 19:ae(Ct);break;case 10:ki(i.type);break;case 22:case 23:Ui(i),bf(),t!==null&&ae(xs);break;case 24:ki(It)}}function el(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Ze(i,i.return,E)}}function gr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var w=a,j=E;try{j()}catch(Q){Ze(h,w,Q)}}}o=o.next}while(o!==f)}}catch(Q){Ze(i,i.return,Q)}}function by(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{hg(i,a)}catch(o){Ze(t,t.return,o)}}}function wy(t,i,a){a.props=Vs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Ze(t,i,o)}}function tl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Ze(t,i,h)}}function li(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function Ry(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function Wf(t,i,a){try{var o=t.stateNode;WA(o,t.type,a,i),o[pt]=i}catch(h){Ze(t,t.return,h)}}function Iy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&br(t.type)||t.tag===4}function Jf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=yc));else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(ed(t,i,a),t=t.sibling;t!==null;)ed(t,i,a),t=t.sibling}function ac(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ac(t,i,a),t=t.sibling;t!==null;)ac(t,i,a),t=t.sibling}function Cy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);qt(i,o,a),i[bt]=t,i[pt]=a}catch(f){Ze(t,t.return,f)}}var Bi=!1,ft=!1,td=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function OA(t,i){if(t=t.containerInfo,wd=bc,t=zp(t),Wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,E=-1,w=-1,j=0,Q=0,X=t,B=null;t:for(;;){for(var q;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==f||o!==0&&X.nodeType!==3||(w=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(q=X.firstChild)!==null;)B=X,X=q;for(;;){if(X===t)break t;if(B===a&&++j===h&&(E=v),B===f&&++Q===o&&(w=v),(q=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=q}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rd={focusedElem:t,selectionRange:a},bc=!1,Mt=i;Mt!==null;)if(i=Mt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Mt=t;else for(;Mt!==null;){switch(i=Mt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ve=Vs(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(ve,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Ze(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Nd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Nd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Mt=t;break}Mt=i.return}}function Dy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:yr(t,a),o&4&&el(5,a);break;case 1:if(yr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Ze(a,a.return,v)}else{var h=Vs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(a,a.return,v)}}o&64&&by(a),o&512&&tl(a,a.return);break;case 3:if(yr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{hg(t,i)}catch(v){Ze(a,a.return,v)}}break;case 27:i===null&&o&4&&Cy(a);case 26:case 5:yr(t,a),i===null&&o&4&&Ry(a),o&512&&tl(a,a.return);break;case 12:yr(t,a);break;case 13:yr(t,a),o&4&&Vy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=BA.bind(null,a),sS(t,a))));break;case 22:if(o=a.memoizedState!==null||Bi,!o){i=i!==null&&i.memoizedState!==null||ft,h=Bi;var f=ft;Bi=o,(ft=i)&&!f?_r(t,a,(a.subtreeFlags&8772)!==0):yr(t,a),Bi=h,ft=f}break;case 30:break;default:yr(t,a)}}function xy(t){var i=t.alternate;i!==null&&(t.alternate=null,xy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&sr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,an=!1;function qi(t,i,a){for(a=a.child;a!==null;)Oy(t,i,a),a=a.sibling}function Oy(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(ot,a)}catch{}switch(a.tag){case 26:ft||li(a,i),qi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||li(a,i);var o=it,h=an;br(a.type)&&(it=a.stateNode,an=!1),qi(t,i,a),cl(a.stateNode),it=o,an=h;break;case 5:ft||li(a,i);case 6:if(o=it,h=an,it=null,qi(t,i,a),it=o,an=h,it!==null)if(an)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(f){Ze(a,i,f)}else try{it.removeChild(a.stateNode)}catch(f){Ze(a,i,f)}break;case 18:it!==null&&(an?(t=it,E_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),_l(t)):E_(it,a.stateNode));break;case 4:o=it,h=an,it=a.stateNode.containerInfo,an=!0,qi(t,i,a),it=o,an=h;break;case 0:case 11:case 14:case 15:ft||gr(2,a,i),ft||gr(4,a,i),qi(t,i,a);break;case 1:ft||(li(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&wy(a,i,o)),qi(t,i,a);break;case 21:qi(t,i,a);break;case 22:ft=(o=ft)||a.memoizedState!==null,qi(t,i,a),ft=o;break;default:qi(t,i,a)}}function Vy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_l(t)}catch(a){Ze(i,i.return,a)}}function VA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ny),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ny),i;default:throw Error(s(435,t.tag))}}function nd(t,i){var a=VA(t);i.forEach(function(o){var h=qA.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function mn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(br(E.type)){it=E.stateNode,an=!1;break e}break;case 5:it=E.stateNode,an=!1;break e;case 3:case 4:it=E.stateNode.containerInfo,an=!0;break e}E=E.return}if(it===null)throw Error(s(160));Oy(f,v,h),it=null,an=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)My(i,t),i=i.sibling}var qn=null;function My(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),o&4&&(gr(3,t,t.return),el(3,t),gr(5,t,t.return));break;case 1:mn(i,t),pn(t),o&512&&(ft||a===null||li(a,a.return)),o&64&&Bi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=qn;if(mn(i,t),pn(t),o&512&&(ft||a===null||li(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ls]||f[bt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),qt(f,o,a),f[bt]=t,ct(f),o=f;break e;case"link":var v=C_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}f=h.createElement(o),qt(f,o,a),h.head.appendChild(f);break;case"meta":if(v=C_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}f=h.createElement(o),qt(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[bt]=t,ct(f),o=f}t.stateNode=o}else N_(h,t.type,t.stateNode);else t.stateNode=I_(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?N_(h,t.type,t.stateNode):I_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),o&512&&(ft||a===null||li(a,a.return)),a!==null&&o&4&&Wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),o&512&&(ft||a===null||li(a,a.return)),t.flags&32){h=t.stateNode;try{bn(h,"")}catch(q){Ze(t,t.return,q)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Wf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(td=!0);break;case 6:if(mn(i,t),pn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(q){Ze(t,t.return,q)}}break;case 3:if(Tc=null,h=qn,qn=vc(i.containerInfo),mn(i,t),qn=h,pn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{_l(i.containerInfo)}catch(q){Ze(t,t.return,q)}td&&(td=!1,Py(t));break;case 4:o=qn,qn=vc(t.stateNode.containerInfo),mn(i,t),pn(t),qn=o;break;case 12:mn(i,t),pn(t);break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ld=An()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,nd(t,o)));break;case 22:h=t.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=Bi,Q=ft;if(Bi=j||h,ft=Q||w,mn(i,t),ft=Q,Bi=j,pn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||Bi||ft||Ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(f=w.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){Ze(w,w.return,q)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(q){Ze(w,w.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,nd(t,a))));break;case 19:mn(i,t),pn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,nd(t,o)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Iy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Jf(t);ac(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(bn(v,""),a.flags&=-33);var E=Jf(t);ac(t,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,j=Jf(t);ed(t,j,w);break;default:throw Error(s(161))}}catch(Q){Ze(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function yr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Dy(t,i.alternate,i),i=i.sibling}function Ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:gr(4,i,i.return),Ms(i);break;case 1:li(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&wy(i,i.return,a),Ms(i);break;case 27:cl(i.stateNode);case 26:case 5:li(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}t=t.sibling}}function _r(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:_r(h,f,a),el(4,f);break;case 1:if(_r(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){Ze(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)cg(w[h],E)}catch(j){Ze(o,o.return,j)}}a&&v&64&&by(f),tl(f,f.return);break;case 27:Cy(f);case 26:case 5:_r(h,f,a),a&&o===null&&v&4&&Ry(f),tl(f,f.return);break;case 12:_r(h,f,a);break;case 13:_r(h,f,a),a&&v&4&&Vy(h,f);break;case 22:f.memoizedState===null&&_r(h,f,a),tl(f,f.return);break;case 30:break;default:_r(h,f,a)}i=i.sibling}}function id(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&zo(a))}function rd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zo(t))}function ui(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ky(t,i,a,o),i=i.sibling}function ky(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ui(t,i,a,o),h&2048&&el(9,i);break;case 1:ui(t,i,a,o);break;case 3:ui(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&zo(t)));break;case 12:if(h&2048){ui(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){Ze(i,i.return,w)}}else ui(t,i,a,o);break;case 13:ui(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ui(t,i,a,o):nl(t,i):f._visibility&2?ui(t,i,a,o):(f._visibility|=2,Ca(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&id(v,i);break;case 24:ui(t,i,a,o),h&2048&&rd(i.alternate,i);break;default:ui(t,i,a,o)}}function Ca(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,v=i,E=a,w=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Ca(f,v,E,w,h),el(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Ca(f,v,E,w,h):nl(f,v):(Q._visibility|=2,Ca(f,v,E,w,h)),h&&j&2048&&id(v.alternate,v);break;case 24:Ca(f,v,E,w,h),h&&j&2048&&rd(v.alternate,v);break;default:Ca(f,v,E,w,h)}i=i.sibling}}function nl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:nl(a,o),h&2048&&id(o.alternate,o);break;case 24:nl(a,o),h&2048&&rd(o.alternate,o);break;default:nl(a,o)}i=i.sibling}}var il=8192;function Na(t){if(t.subtreeFlags&il)for(t=t.child;t!==null;)Ly(t),t=t.sibling}function Ly(t){switch(t.tag){case 26:Na(t),t.flags&il&&t.memoizedState!==null&&_S(qn,t.memoizedState,t.memoizedProps);break;case 5:Na(t);break;case 3:case 4:var i=qn;qn=vc(t.stateNode.containerInfo),Na(t),qn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=il,il=16777216,Na(t),il=i):Na(t));break;default:Na(t)}}function Uy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Mt=o,zy(o,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jy(t),t=t.sibling}function jy(t){switch(t.tag){case 0:case 11:case 15:rl(t),t.flags&2048&&gr(9,t,t.return);break;case 3:rl(t);break;case 12:rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,oc(t)):rl(t);break;default:rl(t)}}function oc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Mt=o,zy(o,t)}Uy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:gr(8,i,i.return),oc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,oc(i));break;default:oc(i)}t=t.sibling}}function zy(t,i){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:gr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Mt=o;else e:for(a=t;Mt!==null;){o=Mt;var h=o.sibling,f=o.return;if(xy(o),o===a){Mt=null;break e}if(h!==null){h.return=f,Mt=h;break e}Mt=f}}}var MA={getCacheForType:function(t){var i=Kt(It),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},PA=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Je=null,Ne=null,Le=0,Qe=0,gn=null,vr=!1,Da=!1,sd=!1,Hi=0,ut=0,Er=0,Ps=0,ad=0,Vn=0,xa=0,sl=null,on=null,od=!1,ld=0,lc=1/0,uc=null,Tr=null,Bt=0,Ar=null,Oa=null,Va=0,ud=0,cd=null,By=null,al=0,hd=null;function yn(){if((Ge&2)!==0&&Le!==0)return Le&-Le;if(G.T!==null){var t=Ea;return t!==0?t:_d()}return ir()}function qy(){Vn===0&&(Vn=(Le&536870912)===0||Be?po():536870912);var t=On.current;return t!==null&&(t.flags|=32),Vn}function _n(t,i,a){(t===Je&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Ma(t,0),Sr(t,Le,Vn,!1)),Ti(t,a),((Ge&2)===0||t!==Je)&&(t===Je&&((Ge&2)===0&&(Ps|=a),ut===4&&Sr(t,Le,Vn,!1)),ci(t))}function Hy(t,i,a){if((Ge&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||os(t,i),h=o?UA(t,i):md(t,i,!0),f=o;do{if(h===0){Da&&!o&&Sr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!kA(a)){h=md(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=sl;var w=E.current.memoizedState.isDehydrated;if(w&&(Ma(E,v).flags|=256),v=md(E,v,!1),v!==2){if(sd&&!w){E.errorRecoveryDisabledLanes|=f,Ps|=f,h=4;break e}f=on,on=h,f!==null&&(on===null?on=f:on.push.apply(on,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ma(t,0),Sr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Sr(o,i,Vn,!vr);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=ld+300-An(),10<h)){if(Sr(o,i,Vn,!vr),Zs(o,0,!0)!==0)break e;o.timeoutHandle=__(Fy.bind(null,o,a,on,uc,od,i,Vn,Ps,xa,vr,f,2,-0,0),h);break e}Fy(o,a,on,uc,od,i,Vn,Ps,xa,vr,f,0,-0,0)}}break}while(!0);ci(t)}function Fy(t,i,a,o,h,f,v,E,w,j,Q,X,B,q){if(t.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(dl={stylesheets:null,count:0,unsuspend:yS},Ly(i),X=vS(),X!==null)){t.cancelPendingCommit=X(Zy.bind(null,t,i,f,a,o,h,v,E,w,Q,1,B,q)),Sr(t,f,v,!j);return}Zy(t,i,f,a,o,h,v,E,w)}function kA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Sr(t,i,a,o){i&=~ad,i&=~Ps,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-Qt(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Xn(t,a,i)}function cc(){return(Ge&6)===0?(ol(0),!1):!0}function fd(){if(Ne!==null){if(Qe===0)var t=Ne.return;else t=Ne,Pi=Ns=null,Nf(t),Ra=null,Zo=0,t=Ne;for(;t!==null;)Sy(t.alternate,t),t=t.return;Ne=null}}function Ma(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,eS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fd(),Je=t,Ne=a=Oi(t.current,null),Le=i,Qe=0,gn=null,vr=!1,Da=os(t,i),sd=!1,xa=Vn=ad=Ps=Er=ut=0,on=sl=null,od=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Qt(o),f=1<<h;i|=t[h],o&=~f}return Hi=i,Ou(),a}function Gy(t,i){we=null,G.H=Zu,i===qo||i===Bu?(i=lg(),Qe=3):i===sg?(i=lg(),Qe=4):Qe=i===uy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,Ne===null&&(ut=1,nc(t,Cn(i,t.current)))}function Qy(){var t=G.H;return G.H=Zu,t===null?Zu:t}function Ky(){var t=G.A;return G.A=MA,t}function dd(){ut=4,vr||(Le&4194048)!==Le&&On.current!==null||(Da=!0),(Er&134217727)===0&&(Ps&134217727)===0||Je===null||Sr(Je,Le,Vn,!1)}function md(t,i,a){var o=Ge;Ge|=2;var h=Qy(),f=Ky();(Je!==t||Le!==i)&&(uc=null,Ma(t,i)),i=!1;var v=ut;e:do try{if(Qe!==0&&Ne!==null){var E=Ne,w=gn;switch(Qe){case 8:fd(),v=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(i=!0);var j=Qe;if(Qe=0,gn=null,Pa(t,E,w,j),a&&Da){v=0;break e}break;default:j=Qe,Qe=0,gn=null,Pa(t,E,w,j)}}LA(),v=ut;break}catch(Q){Gy(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Pi=Ns=null,Ge=o,G.H=h,G.A=f,Ne===null&&(Je=null,Le=0,Ou()),v}function LA(){for(;Ne!==null;)Yy(Ne)}function UA(t,i){var a=Ge;Ge|=2;var o=Qy(),h=Ky();Je!==t||Le!==i?(uc=null,lc=An()+500,Ma(t,i)):Da=os(t,i);e:do try{if(Qe!==0&&Ne!==null){i=Ne;var f=gn;t:switch(Qe){case 1:Qe=0,gn=null,Pa(t,i,f,1);break;case 2:case 9:if(ag(f)){Qe=0,gn=null,Xy(i);break}i=function(){Qe!==2&&Qe!==9||Je!==t||(Qe=7),ci(t)},f.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:ag(f)?(Qe=0,gn=null,Xy(i)):(Qe=0,gn=null,Pa(t,i,f,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var E=Ne;if(!v||D_(v)){Qe=0,gn=null;var w=E.sibling;if(w!==null)Ne=w;else{var j=E.return;j!==null?(Ne=j,hc(j)):Ne=null}break t}}Qe=0,gn=null,Pa(t,i,f,5);break;case 6:Qe=0,gn=null,Pa(t,i,f,6);break;case 8:fd(),ut=6;break e;default:throw Error(s(462))}}jA();break}catch(Q){Gy(t,Q)}while(!0);return Pi=Ns=null,G.H=o,G.A=h,Ge=a,Ne!==null?0:(Je=null,Le=0,Ou(),ut)}function jA(){for(;Ne!==null&&!co();)Yy(Ne)}function Yy(t){var i=Ty(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,i===null?hc(t):Ne=i}function Xy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=py(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=py(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Nf(i);default:Sy(a,i),i=Ne=$p(i,Hi),i=Ty(a,i,Hi)}t.memoizedProps=t.pendingProps,i===null?hc(t):Ne=i}function Pa(t,i,a,o){Pi=Ns=null,Nf(i),Ra=null,Zo=0;var h=i.return;try{if(CA(t,h,i,a,Le)){ut=1,nc(t,Cn(a,t.current)),Ne=null;return}}catch(f){if(h!==null)throw Ne=h,f;ut=1,nc(t,Cn(a,t.current)),Ne=null;return}i.flags&32768?(Be||o===1?t=!0:Da||(Le&536870912)!==0?t=!1:(vr=t=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),$y(i,t)):hc(i)}function hc(t){var i=t;do{if((i.flags&32768)!==0){$y(i,vr);return}t=i.return;var a=DA(i.alternate,i,Hi);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);ut===0&&(ut=5)}function $y(t,i){do{var a=xA(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ut=6,Ne=null}function Zy(t,i,a,o,h,f,v,E,w){t.cancelPendingCommit=null;do fc();while(Bt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=rf,yo(t,a,f,v,E,w),t===Je&&(Ne=Je=null,Le=0),Oa=i,Ar=t,Va=a,ud=f,cd=h,By=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,HA(is,function(){return n_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=se.p,se.p=2,v=Ge,Ge|=4;try{OA(t,i,a)}finally{Ge=v,se.p=h,G.T=o}}Bt=1,Wy(),Jy(),e_()}}function Wy(){if(Bt===1){Bt=0;var t=Ar,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=se.p;se.p=2;var h=Ge;Ge|=4;try{My(i,t);var f=Rd,v=zp(t.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&jp(E.ownerDocument.documentElement,E)){if(w!==null&&Wh(E)){var j=w.start,Q=w.end;if(Q===void 0&&(Q=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var q=B.getSelection(),ve=E.textContent.length,pe=Math.min(w.start,ve),$e=w.end===void 0?pe:Math.min(w.end,ve);!q.extend&&pe>$e&&(v=$e,$e=pe,pe=v);var P=Up(E,pe),x=Up(E,$e);if(P&&x&&(q.rangeCount!==1||q.anchorNode!==P.node||q.anchorOffset!==P.offset||q.focusNode!==x.node||q.focusOffset!==x.offset)){var U=X.createRange();U.setStart(P.node,P.offset),q.removeAllRanges(),pe>$e?(q.addRange(U),q.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),q.addRange(U))}}}}for(X=[],q=E;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var K=X[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}bc=!!wd,Rd=wd=null}finally{Ge=h,se.p=o,G.T=a}}t.current=i,Bt=2}}function Jy(){if(Bt===2){Bt=0;var t=Ar,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=se.p;se.p=2;var h=Ge;Ge|=4;try{Dy(t,i.alternate,i)}finally{Ge=h,se.p=o,G.T=a}}Bt=3}}function e_(){if(Bt===4||Bt===3){Bt=0,ou();var t=Ar,i=Oa,a=Va,o=By;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,Oa=Ar=null,t_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Tr=null),Ws(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(ot,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=se.p,se.p=2,G.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=i,se.p=h}}(Va&3)!==0&&fc(),ci(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===hd?al++:(al=0,hd=t):al=0,ol(0)}}function t_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,zo(i)))}function fc(t){return Wy(),Jy(),e_(),n_()}function n_(){if(Bt!==5)return!1;var t=Ar,i=ud;ud=0;var a=Ws(Va),o=G.T,h=se.p;try{se.p=32>a?32:a,G.T=null,a=cd,cd=null;var f=Ar,v=Va;if(Bt=0,Oa=Ar=null,Va=0,(Ge&6)!==0)throw Error(s(331));var E=Ge;if(Ge|=4,jy(f.current),ky(f,f.current,v,a),Ge=E,ol(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(ot,f)}catch{}return!0}finally{se.p=h,G.T=o,t_(t,i)}}function i_(t,i,a){i=Cn(a,i),i=Hf(t.stateNode,i,2),t=fr(t,i,2),t!==null&&(Ti(t,2),ci(t))}function Ze(t,i,a){if(t.tag===3)i_(t,t,a);else for(;i!==null;){if(i.tag===3){i_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Tr===null||!Tr.has(o))){t=Cn(a,t),a=oy(2),o=fr(i,a,2),o!==null&&(ly(a,o,i,t),Ti(o,2),ci(o));break}}i=i.return}}function pd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new PA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(sd=!0,h.add(a),t=zA.bind(null,t,i,a),i.then(t,t))}function zA(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Le&a)===a&&(ut===4||ut===3&&(Le&62914560)===Le&&300>An()-ld?(Ge&2)===0&&Ma(t,0):ad|=a,xa===Le&&(xa=0)),ci(t)}function r_(t,i){i===0&&(i=go()),t=ga(t,i),t!==null&&(Ti(t,i),ci(t))}function BA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),r_(t,a)}function qA(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),r_(t,a)}function HA(t,i){return ts(t,i)}var dc=null,ka=null,gd=!1,mc=!1,yd=!1,ks=0;function ci(t){t!==ka&&t.next===null&&(ka===null?dc=ka=t:ka=ka.next=t),mc=!0,gd||(gd=!0,GA())}function ol(t,i){if(!yd&&mc){yd=!0;do for(var a=!1,o=dc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Qt(42|t)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,l_(o,f))}else f=Le,f=Zs(o,o===Je?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||os(o,f)||(a=!0,l_(o,f));o=o.next}while(a);yd=!1}}function FA(){s_()}function s_(){mc=gd=!1;var t=0;ks!==0&&(JA()&&(t=ks),ks=0);for(var i=An(),a=null,o=dc;o!==null;){var h=o.next,f=a_(o,i);f===0?(o.next=null,a===null?dc=h:a.next=h,h===null&&(ka=a)):(a=o,(t!==0||(f&3)!==0)&&(mc=!0)),o=h}ol(t)}function a_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Qt(f),E=1<<v,w=h[v];w===-1?((E&a)===0||(E&o)!==0)&&(h[v]=mo(E,i)):w<=i&&(t.expiredLanes|=E),f&=~E}if(i=Je,a=Le,a=Zs(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ns(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||os(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ns(o),Ws(a)){case 2:case 8:a=Xs;break;case 32:a=is;break;case 268435456:a=$s;break;default:a=is}return o=o_.bind(null,t),a=ts(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ns(o),t.callbackPriority=2,t.callbackNode=null,2}function o_(t,i){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(fc()&&t.callbackNode!==a)return null;var o=Le;return o=Zs(t,t===Je?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Hy(t,o,i),a_(t,An()),t.callbackNode!=null&&t.callbackNode===a?o_.bind(null,t):null)}function l_(t,i){if(fc())return null;Hy(t,i,!0)}function GA(){tS(function(){(Ge&6)!==0?ts(ho,FA):s_()})}function _d(){return ks===0&&(ks=po()),ks}function u_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ra(""+t)}function c_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function QA(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=u_((h[pt]||null).action),v=o.submitter;v&&(i=(i=v[pt]||null)?u_(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new sa("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var w=v?c_(h,v):new FormData(h);Uf(a,{pending:!0,data:w,method:h.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?c_(h,v):new FormData(h),Uf(a,{pending:!0,data:w,method:h.method,action:f},f,w))},currentTarget:h}]})}}for(var vd=0;vd<nf.length;vd++){var Ed=nf[vd],KA=Ed.toLowerCase(),YA=Ed[0].toUpperCase()+Ed.slice(1);Bn(KA,"on"+YA)}Bn(Hp,"onAnimationEnd"),Bn(Fp,"onAnimationIteration"),Bn(Gp,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(hA,"onTransitionRun"),Bn(fA,"onTransitionStart"),Bn(dA,"onTransitionCancel"),Bn(Qp,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function h_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,j=E.currentTarget;if(E=E.listener,w!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(Q){tc(Q)}h.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,j=E.currentTarget,E=E.listener,w!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(Q){tc(Q)}h.currentTarget=null,f=w}}}}function De(t,i){var a=i[vo];a===void 0&&(a=i[vo]=new Set);var o=t+"__bubble";a.has(o)||(f_(i,t,2,!1),a.add(o))}function Td(t,i,a){var o=0;i&&(o|=4),f_(a,t,o,i)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[pc]){t[pc]=!0,Eo.forEach(function(a){a!=="selectionchange"&&(XA.has(a)||Td(a,!1,t),Td(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[pc]||(i[pc]=!0,Td("selectionchange",!1,i))}}function f_(t,i,a,o){switch(k_(i)){case 2:var h=AS;break;case 8:h=SS;break;default:h=kd}a=h.bind(null,i,a,t),h=void 0,!Rn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Sd(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ai(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue e}E=E.parentNode}}o=o.return}yu(function(){var j=f,Q=wn(a),X=[];e:{var B=Kp.get(t);if(B!==void 0){var q=sa,ve=t;switch(t){case"keypress":if(ti(a)===0)break e;case"keydown":case"keyup":q=ha;break;case"focusin":ve="focus",q=la;break;case"focusout":ve="blur",q=la;break;case"beforeblur":case"afterblur":q=la;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=wu;break;case Hp:case Fp:case Gp:q=ua;break;case Qp:q=Iu;break;case"scroll":case"scrollend":q=_u;break;case"wheel":q=fa;break;case"copy":case"cut":case"paste":q=ca;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Oo;break;case"toggle":case"beforetoggle":q=Nu}var pe=(i&4)!==0,$e=!pe&&(t==="scroll"||t==="scrollend"),P=pe?B!==null?B+"Capture":null:B;pe=[];for(var x=j,U;x!==null;){var K=x;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||P===null||(K=ps(x,P),K!=null&&pe.push(ul(x,K,U))),$e)break;x=x.return}0<pe.length&&(B=new q(B,ve,null,a,Q),X.push({event:B,listeners:pe}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Ri&&(ve=a.relatedTarget||a.fromElement)&&(Ai(ve)||ve[Sn]))break e;if((q||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,q?(ve=a.relatedTarget||a.toElement,q=j,ve=ve?Ai(ve):null,ve!==null&&($e=c(ve),pe=ve.tag,ve!==$e||pe!==5&&pe!==27&&pe!==6)&&(ve=null)):(q=null,ve=j),q!==ve)){if(pe=In,K="onMouseLeave",P="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Oo,K="onPointerLeave",P="onPointerEnter",x="pointer"),$e=q==null?B:Zn(q),U=ve==null?B:Zn(ve),B=new pe(K,x+"leave",q,a,Q),B.target=$e,B.relatedTarget=U,K=null,Ai(Q)===j&&(pe=new pe(P,x+"enter",ve,a,Q),pe.target=U,pe.relatedTarget=$e,K=pe),$e=K,q&&ve)t:{for(pe=q,P=ve,x=0,U=pe;U;U=La(U))x++;for(U=0,K=P;K;K=La(K))U++;for(;0<x-U;)pe=La(pe),x--;for(;0<U-x;)P=La(P),U--;for(;x--;){if(pe===P||P!==null&&pe===P.alternate)break t;pe=La(pe),P=La(P)}pe=null}else pe=null;q!==null&&d_(X,B,q,pe,!1),ve!==null&&$e!==null&&d_(X,$e,ve,pe,!0)}}e:{if(B=j?Zn(j):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ue=Op;else if(Rt(B))if(Vp)ue=lA;else{ue=aA;var Ce=sA}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&wo(j.elementType)&&(ue=Op):ue=oA;if(ue&&(ue=ue(t,j))){xi(X,ue,a,Q);break e}Ce&&Ce(t,B,j),t==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&or(B,"number",B.value)}switch(Ce=j?Zn(j):window,t){case"focusin":(Rt(Ce)||Ce.contentEditable==="true")&&(da=Ce,Jh=j,Po=null);break;case"focusout":Po=Jh=da=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Bp(X,a,Q);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":Bp(X,a,Q)}var ce;if(ri)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Pe?H(t,a)&&(ge="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ge="onCompositionStart");ge&&(_&&a.locale!=="ko"&&(Pe||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Pe&&(ce=Io()):(ei=Q,lr="value"in ei?ei.value:ei.textContent,Pe=!0)),Ce=gc(j,ge),0<Ce.length&&(ge=new Do(ge,t,null,a,Q),X.push({event:ge,listeners:Ce}),ce?ge.data=ce:(ce=ne(a),ce!==null&&(ge.data=ce)))),(ce=m?wt(t,a):ke(t,a))&&(ge=gc(j,"onBeforeInput"),0<ge.length&&(Ce=new Do("onBeforeInput","beforeinput",null,a,Q),X.push({event:Ce,listeners:ge}),Ce.data=ce)),QA(X,t,j,a,Q)}h_(X,i)})}function ul(t,i,a){return{instance:t,listener:i,currentTarget:a}}function gc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ps(t,a),h!=null&&o.unshift(ul(t,h,f)),h=ps(t,i),h!=null&&o.push(ul(t,h,f))),t.tag===3)return o;t=t.return}return[]}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function d_(t,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,j=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||j===null||(w=j,h?(j=ps(a,f),j!=null&&v.unshift(ul(a,j,w))):h||(j=ps(a,f),j!=null&&v.push(ul(a,j,w)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var $A=/\r\n?/g,ZA=/\u0000|\uFFFD/g;function m_(t){return(typeof t=="string"?t:""+t).replace($A,`
`).replace(ZA,"")}function p_(t,i){return i=m_(i),m_(t)===i}function yc(){}function Xe(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||bn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&bn(t,""+o);break;case"className":Wn(t,"class",o);break;case"tabIndex":Wn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(t,a,o);break;case"style":bo(t,o,f);break;case"data":if(i!=="object"){Wn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ra(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ra(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=yc);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ra(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":De("beforetoggle",t),De("toggle",t),ar(t,"popover",o);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ar(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qh.get(a)||a,ar(t,a,o))}}function bd(t,i,a,o,h,f){switch(a){case"style":bo(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?bn(t,o):(typeof o=="number"||typeof o=="bigint")&&bn(t,""+o);break;case"onScroll":o!=null&&De("scroll",t);break;case"onScrollEnd":o!=null&&De("scrollend",t);break;case"onClick":o!=null&&(t.onclick=yc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[pt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ar(t,a,o)}}}function qt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,f,v,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),o&&Xe(t,i,"src",a.src,a,null);return;case"input":De("invalid",t);var E=f=v=h=null,w=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":w=Q;break;case"defaultChecked":j=Q;break;case"value":f=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Xe(t,i,o,Q,a,null)}}fs(t,f,E,w,j,v,h,!1),ia(t);return;case"select":De("invalid",t),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xe(t,i,h,E,a,null)}i=f,a=v,t.multiple=!!o,i!=null?wi(t,!!o,i,!1):a!=null&&wi(t,!!o,a,!0);return;case"textarea":De("invalid",t),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xe(t,i,v,E,a,null)}ds(t,o,h,f),ia(t);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xe(t,i,w,o,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(o=0;o<ll.length;o++)De(ll[o],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,j,o,a,null)}return;default:if(wo(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&bd(t,i,Q,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xe(t,i,E,o,a,null))}function WA(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,w=null,j=null,Q=null;for(q in a){var X=a[q];if(a.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":w=X;default:o.hasOwnProperty(q)||Xe(t,i,q,null,o,X)}}for(var B in o){var q=o[B];if(X=a[B],o.hasOwnProperty(B)&&(q!=null||X!=null))switch(B){case"type":f=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":Q=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==X&&Xe(t,i,B,q,o,X)}}hn(t,v,E,w,j,Q,f,h);return;case"select":q=v=E=B=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":q=w;default:o.hasOwnProperty(f)||Xe(t,i,f,null,o,w)}for(h in o)if(f=o[h],w=a[h],o.hasOwnProperty(h)&&(f!=null||w!=null))switch(h){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&Xe(t,i,h,f,o,w)}i=E,a=v,o=q,B!=null?wi(t,!!a,B,!1):!!o!=!!a&&(i!=null?wi(t,!!a,i,!0):wi(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xe(t,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xe(t,i,v,h,o,f)}Ke(t,B,q);return;case"option":for(var ve in a)if(B=a[ve],a.hasOwnProperty(ve)&&B!=null&&!o.hasOwnProperty(ve))switch(ve){case"selected":t.selected=!1;break;default:Xe(t,i,ve,null,o,B)}for(w in o)if(B=o[w],q=a[w],o.hasOwnProperty(w)&&B!==q&&(B!=null||q!=null))switch(w){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Xe(t,i,w,B,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)B=a[pe],a.hasOwnProperty(pe)&&B!=null&&!o.hasOwnProperty(pe)&&Xe(t,i,pe,null,o,B);for(j in o)if(B=o[j],q=a[j],o.hasOwnProperty(j)&&B!==q&&(B!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:Xe(t,i,j,B,o,q)}return;default:if(wo(i)){for(var $e in a)B=a[$e],a.hasOwnProperty($e)&&B!==void 0&&!o.hasOwnProperty($e)&&bd(t,i,$e,void 0,o,B);for(Q in o)B=o[Q],q=a[Q],!o.hasOwnProperty(Q)||B===q||B===void 0&&q===void 0||bd(t,i,Q,B,o,q);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&Xe(t,i,P,null,o,B);for(X in o)B=o[X],q=a[X],!o.hasOwnProperty(X)||B===q||B==null&&q==null||Xe(t,i,X,B,o,q)}var wd=null,Rd=null;function _c(t){return t.nodeType===9?t:t.ownerDocument}function g_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Id(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cd=null;function JA(){var t=window.event;return t&&t.type==="popstate"?t===Cd?!1:(Cd=t,!0):(Cd=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof v_<"u"?function(t){return v_.resolve(null).then(t).catch(nS)}:__;function nS(t){setTimeout(function(){throw t})}function br(t){return t==="head"}function E_(t,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&cl(v.documentElement),a&2&&cl(v.body),a&4)for(a=v.head,cl(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[ls]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(f),_l(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);_l(i)}function Nd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nd(a),sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iS(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ls])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function rS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function Dd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function sS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Hn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var xd=null;function T_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function A_(t,i,a){switch(i=_c(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function cl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);sr(t)}var Mn=new Map,S_=new Set;function vc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fi=se.d;se.d={f:aS,r:oS,D:lS,C:uS,L:cS,m:hS,X:dS,S:fS,M:mS};function aS(){var t=Fi.f(),i=cc();return t||i}function oS(t){var i=$n(t);i!==null&&i.tag===5&&i.type==="form"?Hg(i):Fi.r(t)}var Ua=typeof document>"u"?null:document;function b_(t,i,a){var o=Ua;if(o&&typeof i=="string"&&i){var h=gt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S_.has(h)||(S_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),qt(i,"link",t),ct(i),o.head.appendChild(i)))}}function lS(t){Fi.D(t),b_("dns-prefetch",t,null)}function uS(t,i){Fi.C(t,i),b_("preconnect",t,i)}function cS(t,i,a){Fi.L(t,i,a);var o=Ua;if(o&&t&&i){var h='link[rel="preload"][as="'+gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gt(a.imageSizes)+'"]')):h+='[href="'+gt(t)+'"]';var f=h;switch(i){case"style":f=ja(t);break;case"script":f=za(t)}Mn.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Mn.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(hl(f))||i==="script"&&o.querySelector(fl(f))||(i=o.createElement("link"),qt(i,"link",t),ct(i),o.head.appendChild(i)))}}function hS(t,i){Fi.m(t,i);var a=Ua;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+gt(o)+'"][href="'+gt(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(t)}if(!Mn.has(f)&&(t=T({rel:"modulepreload",href:t},i),Mn.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fl(f)))return}o=a.createElement("link"),qt(o,"link",t),ct(o),a.head.appendChild(o)}}}function fS(t,i,a){Fi.S(t,i,a);var o=Ua;if(o&&t){var h=Jt(o).hoistableStyles,f=ja(t);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(hl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Mn.get(f))&&Od(t,a);var w=v=o.createElement("link");ct(w),qt(w,"link",t),w._p=new Promise(function(j,Q){w.onload=j,w.onerror=Q}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ec(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function dS(t,i){Fi.X(t,i);var a=Ua;if(a&&t){var o=Jt(a).hoistableScripts,h=za(t),f=o.get(h);f||(f=a.querySelector(fl(h)),f||(t=T({src:t,async:!0},i),(i=Mn.get(h))&&Vd(t,i),f=a.createElement("script"),ct(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function mS(t,i){Fi.M(t,i);var a=Ua;if(a&&t){var o=Jt(a).hoistableScripts,h=za(t),f=o.get(h);f||(f=a.querySelector(fl(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=Mn.get(h))&&Vd(t,i),f=a.createElement("script"),ct(f),qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function w_(t,i,a,o){var h=(h=Ee.current)?vc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ja(a.href),a=Jt(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ja(a.href);var f=Jt(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(hl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Mn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(t,a),f||pS(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(a),a=Jt(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ja(t){return'href="'+gt(t)+'"'}function hl(t){return'link[rel="stylesheet"]['+t+"]"}function R_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function pS(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),qt(i,"link",a),ct(i),t.head.appendChild(i))}function za(t){return'[src="'+gt(t)+'"]'}function fl(t){return"script[async]"+t}function I_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+gt(a.href)+'"]');if(o)return i.instance=o,ct(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ct(o),qt(o,"style",h),Ec(o,a.precedence,t),i.instance=o;case"stylesheet":h=ja(a.href);var f=t.querySelector(hl(h));if(f)return i.state.loading|=4,i.instance=f,ct(f),f;o=R_(a),(h=Mn.get(h))&&Od(o,h),f=(t.ownerDocument||t).createElement("link"),ct(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),qt(f,"link",o),i.state.loading|=4,Ec(f,a.precedence,t),i.instance=f;case"script":return f=za(a.src),(h=t.querySelector(fl(f)))?(i.instance=h,ct(h),h):(o=a,(h=Mn.get(f))&&(o=T({},a),Vd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),ct(h),qt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Ec(o,a.precedence,t));return i.instance}function Ec(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Od(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Vd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Tc=null;function C_(t,i,a){if(Tc===null){var o=new Map,h=Tc=new Map;h.set(a,o)}else h=Tc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[ls]||f[bt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=t+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function N_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function gS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var dl=null;function yS(){}function _S(t,i,a){if(dl===null)throw Error(s(475));var o=dl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ja(a.href),f=t.querySelector(hl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Ac.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=f,ct(f);return}f=t.ownerDocument||t,a=R_(a),(h=Mn.get(h))&&Od(a,h),f=f.createElement("link"),ct(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),qt(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Ac.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function vS(){if(dl===null)throw Error(s(475));var t=dl;return t.stylesheets&&t.count===0&&Md(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ac(){if(this.count--,this.count===0){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Sc=null;function Md(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Sc=new Map,i.forEach(ES,t),Sc=null,Ac.call(t))}function ES(t,i){if(!(i.state.loading&4)){var a=Sc.get(t);if(a)var o=a.get(null);else{a=new Map,Sc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Ac.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var ml={$$typeof:re,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function TS(t,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function x_(t,i,a,o,h,f,v,E,w,j,Q,X){return t=new TS(t,i,a,v,E,w,j,X),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),t.current=f,f.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},vf(f),t}function O_(t){return t?(t=ya,t):ya}function V_(t,i,a,o,h,f){h=O_(h),o.context===null?o.context=h:o.pendingContext=h,o=hr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=fr(t,o,i),a!==null&&(_n(a,t,i),Fo(a,t,i))}function M_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Pd(t,i){M_(t,i),(t=t.alternate)&&M_(t,i)}function P_(t){if(t.tag===13){var i=ga(t,67108864);i!==null&&_n(i,t,67108864),Pd(t,67108864)}}var bc=!0;function AS(t,i,a,o){var h=G.T;G.T=null;var f=se.p;try{se.p=2,kd(t,i,a,o)}finally{se.p=f,G.T=h}}function SS(t,i,a,o){var h=G.T;G.T=null;var f=se.p;try{se.p=8,kd(t,i,a,o)}finally{se.p=f,G.T=h}}function kd(t,i,a,o){if(bc){var h=Ld(o);if(h===null)Sd(t,i,o,wc,a),L_(t,o);else if(wS(h,t,i,a,o))o.stopPropagation();else if(L_(t,o),i&4&&-1<bS.indexOf(t)){for(;h!==null;){var f=$n(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Un(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Qt(v);E.entanglements[1]|=w,v&=~w}ci(f),(Ge&6)===0&&(lc=An()+500,ol(0))}}break;case 13:E=ga(f,2),E!==null&&_n(E,f,2),cc(),Pd(f,2)}if(f=Ld(o),f===null&&Sd(t,i,o,wc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Sd(t,i,o,null,a)}}function Ld(t){return t=wn(t),Ud(t)}var wc=null;function Ud(t){if(wc=null,t=Ai(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return wc=t,null}function k_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zh()){case ho:return 2;case Xs:return 8;case is:case Bh:return 32;case $s:return 268435456;default:return 32}default:return 32}}var jd=!1,wr=null,Rr=null,Ir=null,pl=new Map,gl=new Map,Cr=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L_(t,i){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":pl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(i.pointerId)}}function yl(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=$n(i),i!==null&&P_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function wS(t,i,a,o,h){switch(i){case"focusin":return wr=yl(wr,t,i,a,o,h),!0;case"dragenter":return Rr=yl(Rr,t,i,a,o,h),!0;case"mouseover":return Ir=yl(Ir,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return pl.set(f,yl(pl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,gl.set(f,yl(gl.get(f)||null,t,i,a,o,h)),!0}return!1}function U_(t){var i=Ai(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,cu(t.priority,function(){if(a.tag===13){var o=yn();o=nr(o);var h=ga(a,o);h!==null&&_n(h,a,o),Pd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Ld(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ri=o,a.target.dispatchEvent(o),Ri=null}else return i=$n(a),i!==null&&P_(i),t.blockedOn=a,!1;i.shift()}return!0}function j_(t,i,a){Rc(t)&&a.delete(i)}function RS(){jd=!1,wr!==null&&Rc(wr)&&(wr=null),Rr!==null&&Rc(Rr)&&(Rr=null),Ir!==null&&Rc(Ir)&&(Ir=null),pl.forEach(j_),gl.forEach(j_)}function Ic(t,i){t.blockedOn===i&&(t.blockedOn=null,jd||(jd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,RS)))}var Cc=null;function z_(t){Cc!==t&&(Cc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Cc===t&&(Cc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Ud(o||a)===null)continue;break}var f=$n(a);f!==null&&(t.splice(i,3),i-=3,Uf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function _l(t){function i(w){return Ic(w,t)}wr!==null&&Ic(wr,t),Rr!==null&&Ic(Rr,t),Ir!==null&&Ic(Ir,t),pl.forEach(i),gl.forEach(i);for(var a=0;a<Cr.length;a++){var o=Cr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Cr.length&&(a=Cr[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&Cr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[pt]||null;if(typeof f=="function")v||z_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[pt]||null)E=v.formAction;else if(Ud(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),z_(a)}}}function zd(t){this._internalRoot=t}Nc.prototype.render=zd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=yn();V_(a,o,t,i,null,null)},Nc.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;V_(t.current,2,null,t,null,null),cc(),i[Sn]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ir();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Cr.length&&i!==0&&i<Cr[a].priority;a++);Cr.splice(a,0,t),a===0&&U_(t)}};var B_=e.version;if(B_!=="19.1.1")throw Error(s(527,B_,"19.1.1"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var IS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{ot=Dc.inject(IS),Fe=Dc}catch{}}return El.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=iy,f=ry,v=sy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=x_(t,1,!1,null,null,a,o,h,f,v,E,null),t[Sn]=i.current,Ad(t),new zd(i)},El.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",f=iy,v=ry,E=sy,w=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=x_(t,1,!0,i,a??null,o,h,f,v,E,w,j),i.context=O_(null),a=i.current,o=yn(),o=nr(o),h=hr(o),h.callback=null,fr(a,h,o),a=o,i.current.lanes=a,Ti(i,a),ci(i),t[Sn]=i.current,Ad(t),new Nc(i)},El.version="19.1.1",El}var Z_;function jS(){if(Z_)return Hd.exports;Z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hd.exports=US(),Hd.exports}var zS=jS();const BS=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},qS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,y=l+2<r.length,g=y?r[l+2]:0,T=c>>2,R=(c&3)<<4|p>>4;let I=(p&15)<<2|g>>6,z=g&63;y||(z=64,d||(I=64)),s.push(n[T],n[R],n[I],n[z])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(DE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const g=l<r.length?n[r.charAt(l)]:64;++l;const R=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||g==null||R==null)throw new HS;const I=c<<2|p>>4;if(s.push(I),g!==64){const z=p<<4&240|g>>2;if(s.push(z),R!==64){const F=g<<6&192|R;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class HS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FS=function(r){const e=DE(r);return xE.encodeByteArray(e,!0)},Yc=function(r){return FS(r).replace(/\./g,"")},OE=function(r){try{return xE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>GS().__FIREBASE_DEFAULTS__,KS=()=>{if(typeof process>"u"||typeof W_>"u")return;const r=W_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&OE(r[1]);return e&&JSON.parse(e)},_h=()=>{try{return BS()||QS()||KS()||YS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VE=r=>_h()?.emulatorHosts?.[r],XS=r=>{const e=VE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ME=()=>_h()?.config,PE=r=>_h()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yc(JSON.stringify(n)),Yc(JSON.stringify(d)),""].join(".")}const Il={};function WS(){const r={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?r.emulator.push(e):r.prod.push(e);return r}function JS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let J_=!1;function LE(r,e){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||Il[r]===e||Il[r]||J_)return;Il[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=WS().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,z){I.setAttribute("width","24"),I.setAttribute("id",z),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function g(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{J_=!0,d()},I}function T(I,z){I.setAttribute("id",z),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function R(){const I=JS(s),z=n("text"),F=document.getElementById(z)||document.createElement("span"),J=n("learnmore"),W=document.getElementById(J)||document.createElement("a"),ie=n("preprendIcon"),ee=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const re=I.element;p(re),T(W,J);const Ae=g();y(ee,ie),re.append(ee,F,W,Ae),document.body.appendChild(re)}c?(F.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function t1(){const r=_h()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s1(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function a1(){return!t1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function l1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="FirebaseError";class er extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=u1,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?c1(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new er(l,p,s)}}function c1(r,e){return r.replace(h1,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const h1=/\{\$([^}]+)}/g;function f1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Bs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(ev(c)&&ev(d)){if(!Bs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function ev(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Tl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Al(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function d1(r,e){const n=new m1(r,e);return n.subscribe.bind(n)}class m1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Kd),l.error===void 0&&(l.error=Kd),l.complete===void 0&&(l.complete=Kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $S;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_1(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y1(r){return r===Ls?void 0:r}function _1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xe||(xe={}));const E1={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},T1=xe.INFO,A1={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},S1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=A1[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=T1,this._logHandler=S1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const b1=(r,e)=>e.some(n=>r instanceof n);let tv,nv;function w1(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R1(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UE=new WeakMap,am=new WeakMap,jE=new WeakMap,Yd=new WeakMap,Mm=new WeakMap;function I1(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(kr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&UE.set(n,r)}).catch(()=>{}),Mm.set(e,r),e}function C1(r){if(am.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});am.set(r,e)}let om={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return am.get(r);if(e==="objectStoreNames")return r.objectStoreNames||jE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function N1(r){om=r(om)}function D1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Xd(this),e,...n);return jE.set(s,e.sort?e.sort():[e]),kr(s)}:R1().includes(r)?function(...e){return r.apply(Xd(this),e),kr(UE.get(this))}:function(...e){return kr(r.apply(Xd(this),e))}}function x1(r){return typeof r=="function"?D1(r):(r instanceof IDBTransaction&&C1(r),b1(r,w1())?new Proxy(r,om):r)}function kr(r){if(r instanceof IDBRequest)return I1(r);if(Yd.has(r))return Yd.get(r);const e=x1(r);return e!==r&&(Yd.set(r,e),Mm.set(e,r)),e}const Xd=r=>Mm.get(r);function O1(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),p=kr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(kr(d.result),y.oldVersion,y.newVersion,kr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const V1=["get","getKey","getAll","getAllKeys","count"],M1=["put","add","delete","clear"],$d=new Map;function iv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=M1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||V1.includes(n)))return;const c=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let g=y.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&y.done]))[0]};return $d.set(e,c),c}N1(r=>({...r,get:(e,n,s)=>iv(e,n)||r.get(e,n,s),has:(e,n)=>!!iv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function k1(r){return r.getComponent()?.type==="VERSION"}const lm="@firebase/app",rv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Vm("@firebase/app"),L1="@firebase/app-compat",U1="@firebase/analytics-compat",j1="@firebase/analytics",z1="@firebase/app-check-compat",B1="@firebase/app-check",q1="@firebase/auth",H1="@firebase/auth-compat",F1="@firebase/database",G1="@firebase/data-connect",Q1="@firebase/database-compat",K1="@firebase/functions",Y1="@firebase/functions-compat",X1="@firebase/installations",$1="@firebase/installations-compat",Z1="@firebase/messaging",W1="@firebase/messaging-compat",J1="@firebase/performance",eb="@firebase/performance-compat",tb="@firebase/remote-config",nb="@firebase/remote-config-compat",ib="@firebase/storage",rb="@firebase/storage-compat",sb="@firebase/firestore",ab="@firebase/ai",ob="@firebase/firestore-compat",lb="firebase",ub="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",cb={[lm]:"fire-core",[L1]:"fire-core-compat",[j1]:"fire-analytics",[U1]:"fire-analytics-compat",[B1]:"fire-app-check",[z1]:"fire-app-check-compat",[q1]:"fire-auth",[H1]:"fire-auth-compat",[F1]:"fire-rtdb",[G1]:"fire-data-connect",[Q1]:"fire-rtdb-compat",[K1]:"fire-fn",[Y1]:"fire-fn-compat",[X1]:"fire-iid",[$1]:"fire-iid-compat",[Z1]:"fire-fcm",[W1]:"fire-fcm-compat",[J1]:"fire-perf",[eb]:"fire-perf-compat",[tb]:"fire-rc",[nb]:"fire-rc-compat",[ib]:"fire-gcs",[rb]:"fire-gcs-compat",[sb]:"fire-fst",[ob]:"fire-fst-compat",[ab]:"fire-vertex","fire-js":"fire-js",[lb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,hb=new Map,cm=new Map;function sv(r,e){try{r.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function $a(r){const e=r.name;if(cm.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,r);for(const n of Xc.values())sv(n,r);for(const n of hb.values())sv(n,r);return!0}function Pm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Pn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Ql("app","Firebase",fb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=ub;function zE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:um,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Lr.create("bad-app-name",{appName:String(l)});if(n||(n=ME()),!n)throw Lr.create("no-options");const c=Xc.get(l);if(c){if(Bs(n,c.options)&&Bs(s,c.config))return c;throw Lr.create("duplicate-app",{appName:l})}const d=new v1(l);for(const y of cm.values())d.addComponent(y);const p=new db(n,s,d);return Xc.set(l,p),p}function BE(r=um){const e=Xc.get(r);if(!e&&r===um&&ME())return zE();if(!e)throw Lr.create("no-app",{appName:r});return e}function Ur(r,e,n){let s=cb[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}$a(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firebase-heartbeat-database",pb=1,Pl="firebase-heartbeat-store";let Zd=null;function qE(){return Zd||(Zd=O1(mb,pb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Lr.create("idb-open",{originalErrorMessage:r.message})})),Zd}async function gb(r){try{const n=(await qE()).transaction(Pl),s=await n.objectStore(Pl).get(HE(r));return await n.done,s}catch(e){if(e instanceof er)$i.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e?.message});$i.warn(n.message)}}}async function av(r,e){try{const s=(await qE()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(e,HE(r)),await s.done}catch(n){if(n instanceof er)$i.warn(n.message);else{const s=Lr.create("idb-set",{originalErrorMessage:n?.message});$i.warn(s.message)}}}function HE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=1024,_b=30;class vb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tb(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ov();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>_b){const l=Ab(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$i.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ov(),{heartbeatsToSend:n,unsentEntries:s}=Eb(this._heartbeatsCache.heartbeats),l=Yc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return $i.warn(e),""}}}function ov(){return new Date().toISOString().substring(0,10)}function Eb(r,e=yb){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),lv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),lv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Tb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?l1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lv(r){return Yc(JSON.stringify({version:2,heartbeats:r})).length}function Ab(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r){$a(new qs("platform-logger",e=>new P1(e),"PRIVATE")),$a(new qs("heartbeat",e=>new vb(e),"PRIVATE")),Ur(lm,rv,r),Ur(lm,rv,"esm2020"),Ur("fire-js","")}Sb("");var bb="firebase",wb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(bb,wb,"app");function FE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rb=FE,GE=new Ql("auth","Firebase",FE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Vm("@firebase/auth");function Ib(r,...e){$c.logLevel<=xe.WARN&&$c.warn(`Auth (${ro}): ${r}`,...e)}function Lc(r,...e){$c.logLevel<=xe.ERROR&&$c.error(`Auth (${ro}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(r,...e){throw km(r,...e)}function fi(r,...e){return km(r,...e)}function QE(r,e,n){const s={...Rb(),[e]:n};return new Ql("auth","Firebase",s).create(e,{appName:r.name})}function Yi(r){return QE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function km(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return GE.create(r,...e)}function ye(r,e,...n){if(!r)throw km(e,...n)}function Gi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lc(e),new Error(e)}function Zi(r,e){r||Gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){return typeof self<"u"&&self.location?.href||""}function Cb(){return uv()==="http:"||uv()==="https:"}function uv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cb()||i1()||"connection"in navigator)?navigator.onLine:!0}function Db(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=e1()||r1()}get(){return Nb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r,e){Zi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vb=new Yl(3e4,6e4);function Xr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function $r(r,e,n,s,l={}){return YE(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=Kl({key:r.config.apiKey,...d}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:y,...c};return n1()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&io(r.emulatorConfig.host)&&(g.credentials="include"),KE.fetch()(await XE(r,r.config.apiHost,n,p),g)})}async function YE(r,e,n){r._canInitEmulator=!1;const s={...xb,...e};try{const l=new Pb(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw xc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw xc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw xc(r,"user-disabled",d);const T=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw QE(r,T,g);Qn(r,T)}}catch(l){if(l instanceof er)throw l;Qn(r,"network-request-failed",{message:String(l)})}}async function Xl(r,e,n,s,l={}){const c=await $r(r,e,n,s,l);return"mfaPendingCredential"in c&&Qn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function XE(r,e,n,s){const l=`${e}${n}?${s}`,c=r,d=c.config.emulator?Lm(r.config,l):`${r.config.apiScheme}://${l}`;return Ob.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Mb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(fi(this.auth,"network-request-failed")),Vb.get())})}}function xc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=fi(r,e,s);return l.customData._tokenResponse=n,l}function cv(r){return r!==void 0&&r.enterprise!==void 0}class kb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Mb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Lb(r,e){return $r(r,"GET","/v2/recaptchaConfig",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(r,e){return $r(r,"POST","/v1/accounts:delete",e)}async function Zc(r,e){return $r(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jb(r,e=!1){const n=St(r),s=await n.getIdToken(e),l=Um(s);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Cl(Wd(l.auth_time)),issuedAtTime:Cl(Wd(l.iat)),expirationTime:Cl(Wd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Wd(r){return Number(r)*1e3}function Um(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Lc("JWT malformed, contained fewer than 3 sections"),null;try{const l=OE(n);return l?JSON.parse(l):(Lc("Failed to decode base64 JWT payload"),null)}catch(l){return Lc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function hv(r){const e=Um(r);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof er&&zb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function zb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(r){const e=r.auth,n=await r.getIdToken(),s=await kl(r,Zc(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?$E(l.providerUserInfo):[],d=Hb(r.providerData,c),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!d?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new fm(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(r,T)}async function qb(r){const e=St(r);await Wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hb(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function $E(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(r,e){const n=await YE(r,{},async()=>{const s=Kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await XE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:s};return r.emulatorConfig&&io(r.emulatorConfig.host)&&(y.credentials="include"),KE.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gb(r,e){return $r(r,"POST","/v2/accounts:revokeToken",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=hv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Fb(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Qa;return s&&(ye(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(ye(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(r,e){ye(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Bb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new fm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await kl(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jb(this,e)}reload(){return qb(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Wc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await kl(this,Ub(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:R,emailVerified:I,isAnonymous:z,providerData:F,stsTokenManager:J}=n;ye(R&&J,e,"internal-error");const W=Qa.fromJSON(this.name,J);ye(typeof R=="string",e,"internal-error"),Dr(s,e.name),Dr(l,e.name),ye(typeof I=="boolean",e,"internal-error"),ye(typeof z=="boolean",e,"internal-error"),Dr(c,e.name),Dr(d,e.name),Dr(p,e.name),Dr(y,e.name),Dr(g,e.name),Dr(T,e.name);const ie=new Fn({uid:R,auth:e,email:l,emailVerified:I,displayName:s,isAnonymous:z,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:g,lastLoginAt:T});return F&&Array.isArray(F)&&(ie.providerData=F.map(ee=>({...ee}))),y&&(ie._redirectEventId=y),ie}static async _fromIdTokenResponse(e,n,s=!1){const l=new Qa;l.updateFromServerResponse(n);const c=new Fn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Wc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?$E(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Qa;p.updateFromIdToken(s);const y=new Fn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new fm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function Qi(r){Zi(r instanceof Function,"Expected a class definition");let e=fv.get(r);return e?(Zi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,fv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const dv=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ka{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Uc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Uc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zc(this.auth,{idToken:e}).catch(()=>{});return n?Fn._fromGetAccountInfoResponse(this.auth,n,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ka(Qi(dv),e,s);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||Qi(dv);const d=Uc(s,e.config.apiKey,e.name);let p=null;for(const g of n)try{const T=await g._get(d);if(T){let R;if(typeof T=="string"){const I=await Zc(e,{idToken:T}).catch(()=>{});if(!I)break;R=await Fn._fromGetAccountInfoResponse(e,I,T)}else R=Fn._fromJSON(e,T);g!==c&&(p=R),c=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Ka(c,e,s):(c=y[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Ka(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i0(e))return"Blackberry";if(r0(e))return"Webos";if(JE(e))return"Safari";if((e.includes("chrome/")||e0(e))&&!e.includes("edge/"))return"Chrome";if(n0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function WE(r=Wt()){return/firefox\//i.test(r)}function JE(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e0(r=Wt()){return/crios\//i.test(r)}function t0(r=Wt()){return/iemobile/i.test(r)}function n0(r=Wt()){return/android/i.test(r)}function i0(r=Wt()){return/blackberry/i.test(r)}function r0(r=Wt()){return/webos/i.test(r)}function jm(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Qb(r=Wt()){return jm(r)&&!!window.navigator?.standalone}function Kb(){return s1()&&document.documentMode===10}function s0(r=Wt()){return jm(r)||n0(r)||r0(r)||i0(r)||/windows phone/i.test(r)||t0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(r,e=[]){let n;switch(r){case"Browser":n=mv(Wt());break;case"Worker":n=`${mv(Wt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const y=e(c);d(y)}catch(y){p(y)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(r,e={}){return $r(r,"GET","/v2/passwordPolicy",Xr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=6;class Zb{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$b,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new Yb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zc(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Db()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Yi(this));const n=e?St(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xb(this),n=new Zb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Gb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,l);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ib(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qs(r){return St(r)}class pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=d1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jb(r){vh=r}function o0(r){return vh.loadJS(r)}function ew(){return vh.recaptchaEnterpriseScript}function tw(){return vh.gapiScript}function nw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class iw{constructor(){this.enterprise=new rw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sw="recaptcha-enterprise",l0="NO_RECAPTCHA";class aw{constructor(e){this.type=sw,this.auth=Qs(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{Lb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new kb(y);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(y=>{p(y)})})}function l(c,d,p){const y=window.grecaptcha;cv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(l0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iw().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&cv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=ew();y.length!==0&&(y+=p),o0(y).then(()=>{l(p,c,d)}).catch(g=>{d(g)})}}).catch(p=>{d(p)})})}}async function gv(r,e,n,s=!1,l=!1){const c=new aw(r);let d;if(l)d=l0;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function dm(r,e,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await gv(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await gv(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,e){const n=Pm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Bs(c,e??{}))return l;Qn(l,"already-initialized")}return n.initialize({options:e})}function lw(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Qi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function uw(r,e,n){const s=Qs(r);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=u0(e),{host:d,port:p}=cw(e),y=p===null?"":`:${p}`,g={url:`${c}//${d}${y}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(Bs(g,s.config.emulator)&&Bs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,io(d)?(kE(`${c}//${d}${y}`),LE("Auth",!0)):hw()}function u0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function cw(r){const e=u0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:yv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:yv(d)}}}function yv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function hw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,n){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}}async function fw(r,e){return $r(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(r,e){return Xl(r,"POST","/v1/accounts:signInWithPassword",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(r,e){return Xl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,e))}async function pw(r,e){return Xl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends zm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ll(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",dw);case"emailLink":return mw(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,s,"signUpPassword",fw);case"emailLink":return pw(e,{idToken:n,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,e){return Xl(r,"POST","/v1/accounts:signInWithIdp",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="http://localhost";class Hs extends zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new Hs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ya(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ya(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ya(e,n)}buildRequest(){const e={requestUri:gw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _w(r){const e=Tl(Al(r)).link,n=e?Tl(Al(e)).deep_link_id:null,s=Tl(Al(r)).deep_link_id;return(s?Tl(Al(s)).link:null)||s||n||e||r}class Bm{constructor(e){const n=Tl(Al(e)),s=n.apiKey??null,l=n.oobCode??null,c=yw(n.mode??null);ye(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_w(e);try{return new Bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Bm.parseLink(n);return ye(s,"argument-error"),Ll._fromEmailAndCode(e,s.code,s.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends c0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends $l{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Or.credential(n,s)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends $l{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends $l{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Mr.credential(n,s)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vw(r,e){return Xl(r,"POST","/v1/accounts:signUp",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Fn._fromIdTokenResponse(e,s,l),d=_v(s);return new Fs({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=_v(s);return new Fs({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function _v(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends er{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Jc(e,n,s,l)}}function h0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jc._fromErrorAndOperation(r,c,e,s):c})}async function Ew(r,e,n=!1){const s=await kl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Fs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r,e,n=!1){const{auth:s}=r;if(Pn(s.app))return Promise.reject(Yi(s));const l="reauthenticate";try{const c=await kl(r,h0(s,l,e,r),n);ye(c.idToken,s,"internal-error");const d=Um(c.idToken);ye(d,s,"internal-error");const{sub:p}=d;return ye(r.uid===p,s,"user-mismatch"),Fs._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Qn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(r,e,n=!1){if(Pn(r.app))return Promise.reject(Yi(r));const s="signIn",l=await h0(r,s,e),c=await Fs._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function Aw(r,e){return f0(Qs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(r){const e=Qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Sw(r,e,n){if(Pn(r.app))return Promise.reject(Yi(r));const s=Qs(r),d=await dm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vw).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&d0(r),y}),p=await Fs._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function bw(r,e,n){return Pn(r.app)?Promise.reject(Yi(r)):Aw(St(r),so.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&d0(r),s})}function ww(r,e,n,s){return St(r).onIdTokenChanged(e,n,s)}function Rw(r,e,n){return St(r).beforeAuthStateChanged(e,n)}function Iw(r,e,n,s){return St(r).onAuthStateChanged(e,n,s)}function m0(r){return St(r).signOut()}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=1e3,Nw=10;class g0 extends p0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Kb()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Nw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Cw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}g0.type="LOCAL";const Dw=g0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends p0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y0.type="SESSION";const _0=y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Eh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async g=>g(n.origin,c)),y=await xw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,y)=>{const g=qm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(R){const I=R;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function Vw(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function Mw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pw(){return navigator?.serviceWorker?.controller||null}function kw(){return v0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="firebaseLocalStorageDb",Lw=1,th="firebaseLocalStorage",T0="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Th(r,e){return r.transaction([th],e?"readwrite":"readonly").objectStore(th)}function Uw(){const r=indexedDB.deleteDatabase(E0);return new Zl(r).toPromise()}function mm(){const r=indexedDB.open(E0,Lw);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(th,{keyPath:T0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(th)?e(s):(s.close(),await Uw(),e(await mm()))})})}async function vv(r,e,n){const s=Th(r,!0).put({[T0]:e,value:n});return new Zl(s).toPromise()}async function jw(r,e){const n=Th(r,!1).get(e),s=await new Zl(n).toPromise();return s===void 0?null:s.value}function Ev(r,e){const n=Th(r,!0).delete(e);return new Zl(n).toPromise()}const zw=800,Bw=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Bw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(kw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Mw(),!this.activeServiceWorker)return;this.sender=new Ow(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await vv(e,eh,"1"),await Ev(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>vv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ev(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Th(l,!1).getAll();return new Zl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const qw=A0;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(r,e){return e?Qi(e):(ye(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Fw(r){return f0(r.auth,new Hm(r),r.bypassAuthState)}function Gw(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Tw(n,new Hm(r),r.bypassAuthState)}async function Qw(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Ew(n,new Hm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fw;case"linkViaPopup":case"linkViaRedirect":return Qw;case"reauthViaPopup":case"reauthViaRedirect":return Gw;default:Qn(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Yl(2e3,1e4);class Ga extends S0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kw.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="pendingRedirect",jc=new Map;class Xw extends S0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=jc.get(this.auth._key());if(!e){try{const s=await $w(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}jc.set(this.auth._key(),e)}return this.bypassAuthState||jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $w(r,e){const n=Jw(e),s=Ww(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Zw(r,e){jc.set(r._key(),e)}function Ww(r){return Qi(r._redirectPersistence)}function Jw(r){return Uc(Yw,r.config.apiKey,r.name)}async function eR(r,e,n=!1){if(Pn(r.app))return Promise.reject(Yi(r));const s=Qs(r),l=Hw(s,e),d=await new Xw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=600*1e3;class nR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!b0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function b0({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function iR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(r,e={}){return $r(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function oR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await rR(r);for(const n of e)try{if(lR(n))return}catch{}Qn(r,"unauthorized-domain")}function lR(r){const e=hm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!aR.test(n))return!1;if(sR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Yl(3e4,6e4);function Av(){const r=di().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function cR(r){return new Promise((e,n)=>{function s(){Av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Av(),n(fi(r,"network-request-failed"))},timeout:uR.get()})}if(di().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(di().gapi?.load)s();else{const l=nw("iframefcb");return di()[l]=()=>{gapi.load?s():n(fi(r,"network-request-failed"))},o0(`${tw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw zc=null,e})}let zc=null;function hR(r){return zc=zc||cR(r),zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Yl(5e3,15e3),dR="__/auth/iframe",mR="emulator/auth/iframe",pR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(r){const e=r.config;ye(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Lm(e,mR):`https://${r.config.authDomain}/${dR}`,s={apiKey:e.apiKey,appName:r.name,v:ro},l=gR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Kl(s).slice(1)}`}async function _R(r){const e=await hR(r),n=di().gapi;return ye(n,r,"internal-error"),e.open({where:document.body,url:yR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=fi(r,"network-request-failed"),p=di().setTimeout(()=>{c(d)},fR.get());function y(){di().clearTimeout(p),l(s)}s.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,TR=600,AR="_blank",SR="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(r,e,n,s=ER,l=TR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const y={...vR,width:s.toString(),height:l.toString(),top:c,left:d},g=Wt().toLowerCase();n&&(p=e0(g)?AR:n),WE(g)&&(e=e||SR,y.scrollbars="yes");const T=Object.entries(y).reduce((I,[z,F])=>`${I}${z}=${F},`,"");if(Qb(g)&&p!=="_self")return wR(e||"",p),new Sv(null);const R=window.open(e||"",p,T);ye(R,r,"popup-blocked");try{R.focus()}catch{}return new Sv(R)}function wR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="__/auth/handler",IR="emulator/auth/handler",CR=encodeURIComponent("fac");async function bv(r,e,n,s,l,c){ye(r.config.authDomain,r,"auth-domain-config-required"),ye(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ro,eventId:l};if(e instanceof c0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",f1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,R]of Object.entries({}))d[T]=R}if(e instanceof $l){const T=e.getScopes().filter(R=>R!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await r._getAppCheckToken(),g=y?`#${CR}=${encodeURIComponent(y)}`:"";return`${NR(r)}?${Kl(p).slice(1)}${g}`}function NR({config:r}){return r.emulator?Lm(r,IR):`https://${r.authDomain}/${RR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="webStorageSupport";class DR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_0,this._completeRedirectFn=eR,this._overrideRedirectResult=Zw}async _openPopup(e,n,s,l){Zi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await bv(e,n,s,hm(),l);return bR(e,c,qm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await bv(e,n,s,hm(),l);return Vw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Zi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await _R(e),s=new nR(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jd,{type:Jd},l=>{const c=l?.[0]?.[Jd];c!==void 0&&n(!!c),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s0()||JE()||jm()}}const xR=DR;var wv="@firebase/auth",Rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MR(r){$a(new qs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;ye(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a0(r)},g=new Wb(s,l,c,y);return lw(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$a(new qs("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(s=>new OR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(wv,Rv,VR(r)),Ur(wv,Rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=300,kR=PE("authIdTokenMaxAge")||PR;let Iv=null;const LR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>kR)return;const l=n?.token;Iv!==l&&(Iv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function UR(r=BE()){const e=Pm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ow(r,{popupRedirectResolver:xR,persistence:[qw,Dw,_0]}),s=PE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=LR(c.toString());Rw(n,d,()=>d(n.currentUser)),ww(n,p=>d(p))}}const l=VE("auth");return l&&uw(n,`http://${l}`),n}function jR(){return document.getElementsByTagName("head")?.[0]??document}Jb({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=fi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",jR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MR("Browser");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,w0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,b){function N(){}N.prototype=b.prototype,V.D=b.prototype,V.prototype=new N,V.prototype.constructor=V,V.C=function(O,M,k){for(var C=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)C[Lt-2]=arguments[Lt];return b.prototype[M].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,b,N){N||(N=0);var O=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)O[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;16>M;++M)O[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=V.g[0],N=V.g[1],M=V.g[2];var k=V.g[3],C=b+(k^N&(M^k))+O[0]+3614090360&4294967295;b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[1]+3905402710&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[2]+606105819&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[3]+3250441966&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[4]+4118548399&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[5]+1200080426&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[6]+2821735955&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[7]+4249261313&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[8]+1770035416&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[9]+2336552879&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[10]+4294925233&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[11]+2304563134&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[12]+1804603682&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[13]+4254626195&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[14]+2792965006&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[15]+1236535329&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(M^k&(N^M))+O[1]+4129170786&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[6]+3225465664&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[11]+643717713&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[0]+3921069994&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[5]+3593408605&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[10]+38016083&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[15]+3634488961&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[4]+3889429448&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[9]+568446438&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[14]+3275163606&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[3]+4107603335&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[8]+1163531501&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[13]+2850285829&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[2]+4243563512&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[7]+1735328473&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[12]+2368359562&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(N^M^k)+O[5]+4294588738&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[8]+2272392833&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[11]+1839030562&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[14]+4259657740&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[1]+2763975236&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[4]+1272893353&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[7]+4139469664&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[10]+3200236656&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[13]+681279174&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[0]+3936430074&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[3]+3572445317&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[6]+76029189&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[9]+3654602809&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[12]+3873151461&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[15]+530742520&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[2]+3299628645&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(M^(N|~k))+O[0]+4096336452&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[7]+1126891415&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[14]+2878612391&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[5]+4237533241&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[12]+1700485571&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[3]+2399980690&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[10]+4293915773&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[1]+2240044497&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[8]+1873313359&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[15]+4264355552&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[6]+2734768916&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[13]+1309151649&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[4]+4149444226&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[11]+3174756917&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[2]+718787259&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+k&4294967295}s.prototype.u=function(V,b){b===void 0&&(b=V.length);for(var N=b-this.blockSize,O=this.B,M=this.h,k=0;k<b;){if(M==0)for(;k<=N;)l(this,V,k),k+=this.blockSize;if(typeof V=="string"){for(;k<b;)if(O[M++]=V.charCodeAt(k++),M==this.blockSize){l(this,O),M=0;break}}else for(;k<b;)if(O[M++]=V[k++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=b},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var N=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=N&255,N/=256;for(this.u(V),V=Array(16),b=N=0;4>b;++b)for(var O=0;32>O;O+=8)V[N++]=this.g[b]>>>O&255;return V};function c(V,b){var N=p;return Object.prototype.hasOwnProperty.call(N,V)?N[V]:N[V]=b(V)}function d(V,b){this.h=b;for(var N=[],O=!0,M=V.length-1;0<=M;M--){var k=V[M]|0;O&&k==b||(N[M]=k,O=!1)}this.g=N}var p={};function y(V){return-128<=V&&128>V?c(V,function(b){return new d([b|0],0>b?-1:0)}):new d([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return R;if(0>V)return W(g(-V));for(var b=[],N=1,O=0;V>=N;O++)b[O]=V/N|0,N*=4294967296;return new d(b,0)}function T(V,b){if(V.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(V.charAt(0)=="-")return W(T(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=g(Math.pow(b,8)),O=R,M=0;M<V.length;M+=8){var k=Math.min(8,V.length-M),C=parseInt(V.substring(M,M+k),b);8>k?(k=g(Math.pow(b,k)),O=O.j(k).add(g(C))):(O=O.j(N),O=O.add(g(C)))}return O}var R=y(0),I=y(1),z=y(16777216);r=d.prototype,r.m=function(){if(J(this))return-W(this).m();for(var V=0,b=1,N=0;N<this.g.length;N++){var O=this.i(N);V+=(0<=O?O:4294967296+O)*b,b*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(F(this))return"0";if(J(this))return"-"+W(this).toString(V);for(var b=g(Math.pow(V,6)),N=this,O="";;){var M=Ae(N,b).g;N=ie(N,M.j(b));var k=((0<N.g.length?N.g[0]:N.h)>>>0).toString(V);if(N=M,F(N))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function F(V){if(V.h!=0)return!1;for(var b=0;b<V.g.length;b++)if(V.g[b]!=0)return!1;return!0}function J(V){return V.h==-1}r.l=function(V){return V=ie(this,V),J(V)?-1:F(V)?0:1};function W(V){for(var b=V.g.length,N=[],O=0;O<b;O++)N[O]=~V.g[O];return new d(N,~V.h).add(I)}r.abs=function(){return J(this)?W(this):this},r.add=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0,M=0;M<=b;M++){var k=O+(this.i(M)&65535)+(V.i(M)&65535),C=(k>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=C>>>16,k&=65535,C&=65535,N[M]=C<<16|k}return new d(N,N[N.length-1]&-2147483648?-1:0)};function ie(V,b){return V.add(W(b))}r.j=function(V){if(F(this)||F(V))return R;if(J(this))return J(V)?W(this).j(W(V)):W(W(this).j(V));if(J(V))return W(this.j(W(V)));if(0>this.l(z)&&0>V.l(z))return g(this.m()*V.m());for(var b=this.g.length+V.g.length,N=[],O=0;O<2*b;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var k=this.i(O)>>>16,C=this.i(O)&65535,Lt=V.i(M)>>>16,at=V.i(M)&65535;N[2*O+2*M]+=C*at,ee(N,2*O+2*M),N[2*O+2*M+1]+=k*at,ee(N,2*O+2*M+1),N[2*O+2*M+1]+=C*Lt,ee(N,2*O+2*M+1),N[2*O+2*M+2]+=k*Lt,ee(N,2*O+2*M+2)}for(O=0;O<b;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=b;O<2*b;O++)N[O]=0;return new d(N,0)};function ee(V,b){for(;(V[b]&65535)!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function re(V,b){this.g=V,this.h=b}function Ae(V,b){if(F(b))throw Error("division by zero");if(F(V))return new re(R,R);if(J(V))return b=Ae(W(V),b),new re(W(b.g),W(b.h));if(J(b))return b=Ae(V,W(b)),new re(W(b.g),b.h);if(30<V.g.length){if(J(V)||J(b))throw Error("slowDivide_ only works with positive integers.");for(var N=I,O=b;0>=O.l(V);)N=me(N),O=me(O);var M=Re(N,1),k=Re(O,1);for(O=Re(O,2),N=Re(N,2);!F(O);){var C=k.add(O);0>=C.l(V)&&(M=M.add(N),k=C),O=Re(O,1),N=Re(N,1)}return b=ie(V,M.j(b)),new re(M,b)}for(M=R;0<=V.l(b);){for(N=Math.max(1,Math.floor(V.m()/b.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=g(N),C=k.j(b);J(C)||0<C.l(V);)N-=O,k=g(N),C=k.j(b);F(k)&&(k=I),M=M.add(k),V=ie(V,C)}return new re(M,V)}r.A=function(V){return Ae(this,V).h},r.and=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)&V.i(O);return new d(N,this.h&V.h)},r.or=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)|V.i(O);return new d(N,this.h|V.h)},r.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)^V.i(O);return new d(N,this.h^V.h)};function me(V){for(var b=V.g.length+1,N=[],O=0;O<b;O++)N[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(N,V.h)}function Re(V,b){var N=b>>5;b%=32;for(var O=V.g.length-N,M=[],k=0;k<O;k++)M[k]=0<b?V.i(k+N)>>>b|V.i(k+N+1)<<32-b:V.i(k+N);return new d(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,w0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=T,jr=d}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R0,Sl,I0,Bc,pm,C0,N0,D0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in _))break e;_=_[L]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,L={next:function(){if(!A&&_<u.length){var H=_++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function R(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:R,I.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function F(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,L,H){for(var ne=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ne[Pe-2]=arguments[Pe];return m.prototype[L].apply(A,ne)}}function J(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(y(A)){const L=u.length||0,H=A.length||0;u.length=L+H;for(let ne=0;ne<H;ne++)u[L+ne]=A[ne]}else u.push(A)}}class ie{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function Ae(u){return Ae[" "](u),u}Ae[" "]=function(){};var me=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Re(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function V(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function b(u){const m={};for(const _ in u)m[_]=u[_];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)u[_]=A[_];for(let H=0;H<N.length;H++)_=N[H],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function k(u){p.setTimeout(()=>{throw u},0)}function C(){var u=ze;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Lt{constructor(){this.h=this.g=null}add(m,_){const A=at.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var at=new ie(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,he=!1,ze=new Lt,D=()=>{const u=p.Promise.resolve(void 0);se=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){k(_)}var m=at;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}he=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Ie(u,m){if(te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(me){e:{try{Ae(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}F(Ie,te);var Ee={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),We=0;function Yn(u,m,_,A,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=L,this.key=++We,this.da=this.fa=!1}function tr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vi(u){this.src=u,this.g={},this.h=0}vi.prototype.add=function(u,m,_,A,L){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ne=ts(u,m,A,L);return-1<ne?(m=u[ne],_||(m.fa=!1)):(m=new Yn(m,this.src,H,!!A,L),m.fa=_,u.push(m)),m};function es(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],L=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(tr(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ts(u,m,_,A){for(var L=0;L<u.length;++L){var H=u[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return L}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),co={};function ou(u,m,_,A,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ou(u,m[H],_,A,L);return null}return _=lu(_),u&&u[Dt]?u.K(m,_,g(A)?!!A.capture:!1,L):An(u,m,_,!1,A,L)}function An(u,m,_,A,L,H){if(!m)throw Error("Invalid event type");var ne=g(L)?!!L.capture:!!L,Pe=$s(u);if(Pe||(u[ns]=Pe=new vi(u)),_=Pe.add(m,_,A,ne,H),_.proxy)return _;if(A=zh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)de||(L=ne),L===void 0&&(L=!1),u.addEventListener(m.toString(),A,L);else if(u.attachEvent)u.attachEvent(is(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function zh(){function u(_){return m.call(u.src,u.listener,_)}const m=Bh;return u}function ho(u,m,_,A,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)ho(u,m[H],_,A,L);else A=g(A)?!!A.capture:!!A,_=lu(_),u&&u[Dt]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],_=ts(H,_,A,L),-1<_&&(tr(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=$s(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ts(m,_,A,L)),(_=-1<u?m[u]:null)&&Xs(_))}function Xs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Dt])es(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(is(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=$s(m))?(es(_,u),_.h==0&&(_.src=null,m[ns]=null)):tr(u)}}}function is(u){return u in co?co[u]:co[u]="on"+u}function Bh(u,m){if(u.da)u=!0;else{m=new Ie(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Xs(u),u=_.call(A,m)}return u}function $s(u){return u=u[ns],u instanceof vi?u:null}var fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function lu(u){return typeof u=="function"?u:(u[fo]||(u[fo]=function(m){return u.handleEvent(m)}),u[fo])}function ot(){ae.call(this),this.i=new vi(this),this.M=this,this.F=null}F(ot,ae),ot.prototype[Dt]=!0,ot.prototype.removeEventListener=function(u,m,_,A){ho(this,u,m,_,A)};function Fe(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new te(m,u);else if(m instanceof te)m.target=m.target||u;else{var L=m;m=new te(A,u),O(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var ne=m.g=_[H];L=cn(ne,A,!0,m)&&L}if(ne=m.g=u,L=cn(ne,A,!0,m)&&L,L=cn(ne,A,!1,m)&&L,_)for(H=0;H<_.length;H++)ne=m.g=_[H],L=cn(ne,A,!1,m)&&L}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)tr(_[A]);delete u.g[m],u.h--}}this.F=null},ot.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ot.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function cn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var ne=m[H];if(ne&&!ne.da&&ne.capture==_){var Pe=ne.listener,wt=ne.ha||ne.src;ne.fa&&es(u.i,ne),L=Pe.call(wt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Qt(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function uu(u){u.g=Qt(()=>{u.g=null,u.i&&(u.i=!1,uu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class qh extends ae{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(u){ae.call(this),this.h=u,this.g={}}F(rs,ae);var ss=[];function as(u){Re(u.g,function(m,_){this.g.hasOwnProperty(_)&&Xs(m)},u),u.g={}}rs.prototype.N=function(){rs.aa.N.call(this),as(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=p.JSON.stringify,Zs=p.JSON.parse,os=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function mo(){}mo.prototype.h=null;function po(u){return u.h||(u.h=u.i())}function go(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ti(){te.call(this,"d")}F(Ti,te);function yo(){te.call(this,"c")}F(yo,te);var Xn={},_o=null;function nr(){return _o=_o||new ot}Xn.La="serverreachability";function Ws(u){te.call(this,Xn.La,u)}F(Ws,te);function ir(u){const m=nr();Fe(m,new Ws(m))}Xn.STAT_EVENT="statevent";function cu(u,m){te.call(this,Xn.STAT_EVENT,u),this.stat=m}F(cu,te);function nt(u){const m=nr();Fe(m,new cu(m,u))}Xn.Ma="timingevent";function bt(u,m){te.call(this,Xn.Ma,u),this.size=m}F(bt,te);function pt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function vo(u,m,_,A,L,H){u.info(function(){if(u.g)if(H)for(var ne="",Pe=H.split("&"),wt=0;wt<Pe.length;wt++){var ke=Pe[wt].split("=");if(1<ke.length){var Ot=ke[0];ke=ke[1];var Rt=Ot.split("_");ne=2<=Rt.length&&Rt[1]=="type"?ne+(Ot+"="+ke+"&"):ne+(Ot+"=redacted&")}}else ne=null;else ne=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+_+`
`+ne})}function Hh(u,m,_,A,L,H,ne){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+ne})}function rr(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ls(u,_)+(A?" "+A:"")})}function hu(u,m){u.info(function(){return"TIMEOUT: "+m})}Sn.prototype.info=function(){};function ls(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ne=1;ne<L.length;ne++)L[ne]=""}}}}return Un(_)}catch{return m}}var sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Zn(){}F(Zn,mo),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},$n=new Zn;function Jt(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ct}function ct(){this.i=null,this.g="",this.h=!1}var Eo={},Js={};function jn(u,m,_){u.L=1,u.v=ds(hn(m)),u.m=_,u.P=!0,Si(u,null)}function Si(u,m){u.F=Date.now(),us(u),u.A=hn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Ro(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ct,u.g=Iu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new qh(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ss[0]=L.toString()),L=ss);for(var H=0;H<L.length;H++){var ne=ou(_,L[H],A||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ir(),vo(u.i,u.u,u.A,u.l,u.R,u.m)}Jt.prototype.ca=function(u){u=u.target;const m=this.M;m&&In(u)==3?m.j():this.Y(u)},Jt.prototype.Y=function(u){try{if(u==this.g)e:{const Rt=In(this.g);var m=this.g.Ba();const xi=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||Rt!=4||m==7||(m==8||0>=xi?ir(3):ir(2)),ar(this);var _=this.g.Z();this.X=_;t:if(fu(this)){var A=vu(this.g);u="";var L=A.length,H=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),Wn(this);var ne="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==L-1)});A.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Hh(this.i,this.u,this.A,this.l,this.R,Rt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,wt=this.g;if((Pe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Pe)){var ke=Pe;break t}}ke=null}if(_=ke)rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,_);else{this.o=!1,this.s=3,nt(12),Ut(this),Wn(this);break e}}if(this.P){_=!0;let jt;for(;!this.J&&this.C<ne.length;)if(jt=du(this,ne),jt==Js){Rt==4&&(this.s=4,nt(14),_=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Eo){this.s=4,nt(15),rr(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else rr(this.i,this.l,jt,null),cs(this,jt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||ne.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)rr(this.i,this.l,ne,"[Invalid Chunked Response]"),Ut(this),Wn(this);else if(0<ne.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Ts(Ot),Ot.M=!0,nt(11))}}else rr(this.i,this.l,ne,null),cs(this,ne);Rt==4&&Ut(this),this.o&&!this.J&&(Rt==4?bu(this.j,this):(this.o=!1,us(this)))}else Yh(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Ut(this),Wn(this)}}}catch{}finally{}};function fu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function du(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Js:(_=Number(m.substring(_,A)),isNaN(_)?Eo:(A+=1,A+_>m.length?Js:(m=m.slice(A,A+_),u.C=A+_,m)))}Jt.prototype.cancel=function(){this.J=!0,Ut(this)};function us(u){u.S=Date.now()+u.I,mu(u,u.I)}function mu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pt(I(u.ba,u),m)}function ar(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Jt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(hu(this.i,this.A),this.L!=2&&(ir(),nt(17)),Ut(this),this.s=2,Wn(this)):mu(this,this.S-u)};function Wn(u){u.j.G==0||u.J||bu(u.j,u)}function Ut(u){ar(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,as(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function cs(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||To(_.h,u))){if(!u.K&&To(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ha(_),ua(_);else break e;xo(_),nt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=pt(I(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Di(_,11)}else if((u.K||_.g==u)&&ha(_),!ee(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let ke=L[m];if(_.T=ke[0],ke=ke[1],_.G==2)if(ke[0]=="c"){_.K=ke[1],_.ia=ke[2];const Ot=ke[3];Ot!=null&&(_.la=Ot,_.j.info("VER="+_.la));const Rt=ke[4];Rt!=null&&(_.Aa=Rt,_.j.info("SVER="+_.Aa));const xi=ke[5];xi!=null&&typeof xi=="number"&&0<xi&&(A=1.5*xi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const jt=u.g;if(jt){const si=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var H=A.h;H.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(na(H,H.h),H.h=null))}if(A.D){const Vo=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.ya=Vo,Ke(A.I,A.D,Vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ne=u;if(A.qa=Ru(A,A.J?A.ia:null,A.W),ne.K){en(A.h,ne);var Pe=ne,wt=A.L;wt&&(Pe.I=wt),Pe.B&&(ar(Pe),us(Pe)),A.g=ne}else Au(A);0<_.i.length&&ca(_)}else ke[0]!="stop"&&ke[0]!="close"||Di(_,7);else _.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Di(_,7):No(_):ke[0]!="noop"&&_.l&&_.l.ta(ke),_.v=0)}}ir(4)}catch{}}var pu=class{constructor(u,m){this.g=u,this.map=m}};function bi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ea(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function To(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function na(u,m){u.g?u.g.add(m):u.h=m}function en(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bi.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return J(u.i)}function Fh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ia(u),A=Fh(u),L=A.length,H=0;H<L;H++)m.call(void 0,A[H],_&&_[H],u)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),L=null;if(0<=A){var H=u[_].substring(0,A);L=u[_].substring(A+1)}else H=u[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gt){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,or(this,u.s),this.l=u.l;var m=u.i,_=new Ri;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),wi(this,_),this.m=u.m}else u&&(m=String(u).match(hs))?(this.h=!1,fs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),or(this,m[4]),this.l=bn(m[5]||"",!0),wi(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}gt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ms(m,bo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ms(m,bo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ms(_,_.charAt(0)=="/"?Qh:wo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ms(_,ra)),u.join("")};function hn(u){return new gt(u)}function fs(u,m,_){u.j=_?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function or(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function wi(u,m,_){m instanceof Ri?(u.i=m,yu(u.i,u.h)):(_||(m=ms(m,Kh)),u.i=new Ri(m,u.h))}function Ke(u,m,_){u.i.set(m,_)}function ds(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ms(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,gu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bo=/[#\/\?@]/g,wo=/[#\?:]/g,Qh=/[#\?]/g,Kh=/[#\?@]/g,ra=/#/g;function Ri(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&Gh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ri.prototype,r.add=function(u,m){wn(this),this.i=null,u=Jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ii(u,m){wn(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ci(u,m){return wn(u),m=Jn(u,m),u.g.has(m)}r.forEach=function(u,m){wn(this),this.g.forEach(function(_,A){_.forEach(function(L){u.call(m,L,A,this)},this)},this)},r.na=function(){wn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const L=u[A];for(let H=0;H<L.length;H++)_.push(m[A])}return _},r.V=function(u){wn(this);let m=[];if(typeof u=="string")Ci(this,u)&&(m=m.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return wn(this),this.i=null,u=Jn(this,u),Ci(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ro(u,m,_){Ii(u,m),0<_.length&&(u.i=null,u.g.set(Jn(u,m),J(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),ne=this.V(A);for(A=0;A<ne.length;A++){var L=H;ne[A]!==""&&(L+="="+encodeURIComponent(String(ne[A]))),u.push(L)}}return this.i=u.join("&")};function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function yu(u,m){m&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(Ii(this,A),Ro(this,L,_))},u)),u.j=m}function ps(u,m){const _=new Sn;if(p.Image){const A=new Image;A.onload=z(Rn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=z(Rn,_,"TestLoadImage: error",!1,m,A),A.onabort=z(Rn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=z(Rn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function zn(u,m){const _=new Sn,A=new AbortController,L=setTimeout(()=>{A.abort(),Rn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?Rn(_,"TestPingServer: ok",!0,m):Rn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Rn(_,"TestPingServer: error",!1,m)})}function Rn(u,m,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function gs(){this.g=new os}function ei(u,m,_){const A=_||"";try{So(u,function(L,H){let ne=L;g(L)&&(ne=Un(L)),m.push(A+H+"="+encodeURIComponent(ne))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function lr(u){this.l=u.Ub||null,this.j=u.eb||!1}F(lr,mo),lr.prototype.g=function(){return new Ni(this.l,this.j)},lr.prototype.i=(function(u){return function(){return u}})({});function Ni(u,m){ot.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Ni,ot),r=Ni.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ni(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Io(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Io(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ti(this):ni(this),this.readyState==3&&Io(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ti(this))},r.Qa=function(u){this.g&&(this.response=u,ti(this))},r.ga=function(){this.g&&ti(this)};function ti(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ni(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Co(u){let m="";return Re(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function xt(u,m,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Co(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ke(u,m,_))}function qe(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(qe,ot);var sa=/^https?$/i,ys=["POST","PUT"];r=qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?po(this.o):po($n),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){_u(this,H);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ys,m,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of _)this.g.setRequestHeader(H,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){_u(this,H)}};function _u(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,aa(u),ii(u)}function aa(u){u.A||(u.A=!0,Fe(u,"complete"),Fe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Fe(this,"complete"),Fe(this,"abort"),ii(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},r.bb=function(){oa(this)};function oa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||In(u)!=4||u.Z()!=2)){if(u.u&&In(u)==4)Qt(u.Ea,0,u);else if(Fe(u,"readystatechange"),In(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var A;if(A=ne===0){var L=String(u.D).match(hs)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),A=!sa.test(L?L.toLowerCase():"")}_=A}if(_)Fe(u,"complete"),Fe(u,"success");else{u.m=6;try{var H=2<In(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",aa(u)}}finally{ii(u)}}}}function ii(u,m){if(u.g){_s(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Fe(u,"ready");try{_.onreadystatechange=A}catch{}}}function _s(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function In(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Zs(m)}};function vu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Yh(u){const m={};u=(u.g&&2<=In(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ee(u[A]))continue;var _=M(u[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}V(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function la(u){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,u),this.cb=vs("retryDelaySeedMs",1e4,u),this.Wa=vs("forwardChannelMaxRetries",2,u),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(u&&u.concurrentRequestLimit),this.Da=new gs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=la.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){nt(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Ru(this,null,this.W),ca(this)};function No(u){if(Eu(u),u.G==3){var m=u.U++,_=hn(u.I);if(Ke(_,"SID",u.K),Ke(_,"RID",m),Ke(_,"TYPE","terminate"),Es(u,_),m=new Jt(u,u.j,m),m.L=2,m.v=ds(hn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Iu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),us(m)}wu(u)}function ua(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function Eu(u){ua(u),u.u&&(p.clearTimeout(u.u),u.u=null),ha(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ca(u){if(!ea(u.h)&&!u.s){u.s=!0;var m=u.Ga;se||D(),he||(se(),he=!0),ze.add(m,u),u.B=0}}function Xh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pt(I(u.Ga,u,m),Oo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Jt(this,this.j,u);let H=this.o;if(this.S&&(H?(H=b(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Tu(this,L,m),_=hn(this.I),Ke(_,"RID",u),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Es(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(Co(H)))+"&"+m:this.m&&xt(_,this.m,H)),na(this.h,L),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",m),Ke(_,"SID","null"),L.T=!0,jn(L,_,null)):jn(L,_,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||ea(this.h)||Do(this))};function Do(u,m){var _;m?_=m.l:_=u.U++;const A=hn(u.I);Ke(A,"SID",u.K),Ke(A,"RID",_),Ke(A,"AID",u.T),Es(u,A),u.m&&u.o&&xt(A,u.m,u.o),_=new Jt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Tu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),na(u.h,_),jn(_,A,m)}function Es(u,m){u.H&&Re(u.H,function(_,A){Ke(m,A,_)}),u.l&&So({},function(_,A){Ke(m,A,_)})}function Tu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?I(u.l.Na,u.l,u):null;e:{var L=u.i;let H=-1;for(;;){const ne=["count="+_];H==-1?0<_?(H=L[0].g,ne.push("ofs="+H)):H=0:ne.push("ofs="+H);let Pe=!0;for(let wt=0;wt<_;wt++){let ke=L[wt].g;const Ot=L[wt].map;if(ke-=H,0>ke)H=Math.max(0,L[wt].g-100),Pe=!1;else try{ei(Ot,ne,"req"+ke+"_")}catch{A&&A(Ot)}}if(Pe){A=ne.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,A}function Au(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;se||D(),he||(se(),he=!0),ze.add(m,u),u.v=0}}function xo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pt(I(u.Fa,u),Oo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ua(this),Su(this))};function Ts(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Su(u){u.g=new Jt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=hn(u.qa);Ke(m,"RID","rpc"),Ke(m,"SID",u.K),Ke(m,"AID",u.T),Ke(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(m,"TO",u.ja),Ke(m,"TYPE","xmlhttp"),Es(u,m),u.m&&u.o&&xt(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ds(hn(m)),_.m=null,_.P=!0,Si(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ua(this),xo(this),nt(19))};function ha(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function bu(u,m){var _=null;if(u.g==m){ha(u),Ts(u),u.g=null;var A=2}else if(To(u.h,m))_=m.D,en(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;A=nr(),Fe(A,new bt(A,_)),ca(u)}else Au(u);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Xh(u,m)||A==2&&xo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Oo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Di(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),A=u.Xa;const L=!A;A=new gt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||fs(A,"https"),ds(A),L?ps(A.toString(),_):zn(A.toString(),_)}else nt(2);u.G=0,u.l&&u.l.sa(m),wu(u),Eu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function wu(u){if(u.G=0,u.ka=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,J(u.i),u.i.length=0),u.l.ra()}}function Ru(u,m,_){var A=_ instanceof gt?hn(_):new gt(_);if(A.g!="")m&&(A.g=m+"."+A.g),or(A,A.s);else{var L=p.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new gt(null);A&&fs(H,A),m&&(H.g=m),L&&or(H,L),_&&(H.l=_),A=H}return _=u.D,m=u.ya,_&&m&&Ke(A,_,m),Ke(A,"VER",u.la),Es(u,A),A}function Iu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qe(new lr({eb:_})):new qe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}r=Cu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fa(){}fa.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){ot.call(this),this.g=new la(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}F(tn,ot),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){No(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Un(u),u=_);m.i.push(new pu(m.Ya++,u)),m.G==3&&ca(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,tn.aa.N.call(this)};function Nu(u){Ti.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(Nu,Ti);function Du(){yo.call(this),this.status=1}F(Du,yo);function ri(u){this.g=u}F(ri,Cu),ri.prototype.ua=function(){Fe(this.g,"a")},ri.prototype.ta=function(u){Fe(this.g,new Nu(u))},ri.prototype.sa=function(u){Fe(this.g,new Du)},ri.prototype.ra=function(){Fe(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,D0=function(){return new fa},N0=function(){return nr()},C0=Xn,pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,Bc=sr,Ai.COMPLETE="complete",I0=Ai,go.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Sl=go,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,R0=qe}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const Nv="@firebase/firestore",Dv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Vm("@firebase/firestore");function Ba(){return Br.logLevel}function zR(r){Br.setLogLevel(r)}function le(r,...e){if(Br.logLevel<=xe.DEBUG){const n=e.map(Fm);Br.debug(`Firestore (${ao}): ${r}`,...n)}}function Wi(r,...e){if(Br.logLevel<=xe.ERROR){const n=e.map(Fm);Br.error(`Firestore (${ao}): ${r}`,...n)}}function Za(r,...e){if(Br.logLevel<=xe.WARN){const n=e.map(Fm);Br.warn(`Firestore (${ao}): ${r}`,...n)}}function Fm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,x0(r,s,n)}function x0(r,e,n){let s=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Wi(s),new Error(s)}function He(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||x0(e,l,s)}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n($t.UNAUTHENTICATED)))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xi,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new O0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class FR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new FR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=c=>{c.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=KR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Oe(r,e){return r<e?-1:r>e?1:0}function gm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return em(l)===em(c)?Oe(l,c):em(l)?1:-1}return Oe(r.length,e.length)}const YR=55296,XR=57343;function em(r){const e=r.charCodeAt(0);return e>=YR&&e<=XR}function Wa(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class hi{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&_e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=hi.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Oe(e.length,n.length)}static compareSegments(e,n){const s=hi.isNumericId(e),l=hi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?hi.extractNumericId(e).compare(hi.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class et extends hi{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new et(n)}static emptyPath(){return new et([])}}const $R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends hi{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return $R.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new Ft([Ov])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new oe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new oe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new oe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new oe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(et.fromString(e))}static fromName(e){return new fe(et.fromString(e).popFirst(5))}static empty(){return new fe(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r,e,n){if(!n)throw new oe(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ZR(r,e,n,s){if(e===!0&&s===!0)throw new oe(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Vv(r){if(!fe.isDocumentKey(r))throw new oe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Mv(r){if(fe.isDocumentKey(r))throw new oe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function M0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ah(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Ln(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(r);throw new oe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const n={typeString:r};return e&&(n.value=e),n}function Wl(r,e){if(!M0(r))throw new oe(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new oe(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=-62135596800,kv=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*kv);return new tt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Pv)throw new oe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kv}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:At("string",tt._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tt(0,0))}static max(){return new Te(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function WR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Te.fromTimestamp(s===1e9?new tt(n+1,0):new tt(n,s));return new qr(l,fe.empty(),e)}function JR(r){return new qr(r.readTime,r.key,Ul)}class qr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new qr(Te.min(),fe.empty(),Ul)}static max(){return new qr(Te.max(),fe.empty(),Ul)}}function eI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(r.documentKey,e.documentKey),n!==0?n:Oe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==tI)throw r;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):$.reject(n)}static resolve(e){return new $(((n,s)=>{n(e)}))}static reject(e){return new $(((n,s)=>{s(e)}))}static waitFor(e){return new $(((n,s)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(y=>s(y)))})),d=!0,c===l&&n()}))}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new $(((s,l)=>{const c=e.length,d=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;n(e[g]).next((T=>{d[g]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(e,n){return new $(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function iI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-1;function bh(r){return r==null}function nh(r){return r===0&&1/r==-1/0}function rI(r){return typeof r=="number"&&Number.isInteger(r)&&!nh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="";function sI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Lv(e)),e=aI(r.get(n),e);return Lv(e)}function aI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case P0:n+="";break;default:n+=c}}return n}function Lv(r){return r+P0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Zr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function k0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=l??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Ht(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ht.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new En([])}unionWith(e){let n=new Nt(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new L0("Invalid base64 string: "+c):c}})(e);return new Gt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const oI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(r){if(He(!!r,39018),typeof r=="string"){let e=0;const n=oI.exec(r);if(He(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="server_timestamp",j0="__type__",z0="__previous_value__",B0="__local_write_time__";function Km(r){return(r?.mapValue?.fields||{})[j0]?.stringValue===U0}function wh(r){const e=r.mapValue.fields[z0];return Km(e)?wh(e):e}function jl(r){const e=Hr(r.mapValue.fields[B0].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,l,c,d,p,y,g,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const ih="(default)";class zl{constructor(e,n){this.projectId=e,this.database=n||ih}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===ih}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="__type__",uI="__max__",Mc={mapValue:{}},H0="__vector__",rh="value";function Gr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Km(r)?4:hI(r)?9007199254740991:cI(r)?10:11:_e(28295,{value:r})}function _i(r,e){if(r===e)return!0;const n=Gr(r);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return jl(r).isEqual(jl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Hr(l.timestampValue),p=Hr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return dt(l.geoPointValue.latitude)===dt(c.geoPointValue.latitude)&&dt(l.geoPointValue.longitude)===dt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return dt(l.integerValue)===dt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=dt(l.doubleValue),p=dt(c.doubleValue);return d===p?nh(d)===nh(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Wa(r.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Uv(d)!==Uv(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!_i(d[y],p[y])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function Bl(r,e){return(r.values||[]).find((n=>_i(n,e)))!==void 0}function Ja(r,e){if(r===e)return 0;const n=Gr(r),s=Gr(e);if(n!==s)return Oe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=dt(c.integerValue||c.doubleValue),y=dt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,e);case 3:return zv(r.timestampValue,e.timestampValue);case 4:return zv(jl(r),jl(e));case 5:return gm(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Fr(c),y=Fr(d);return p.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),y=d.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=Oe(p[g],y[g]);if(T!==0)return T}return Oe(p.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Oe(dt(c.latitude),dt(d.latitude));return p!==0?p:Oe(dt(c.longitude),dt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Bv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},y=d.fields||{},g=p[rh]?.arrayValue,T=y[rh]?.arrayValue,R=Oe(g?.values?.length||0,T?.values?.length||0);return R!==0?R:Bv(g,T)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Mc.mapValue&&d===Mc.mapValue)return 0;if(c===Mc.mapValue)return 1;if(d===Mc.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=d.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let R=0;R<y.length&&R<T.length;++R){const I=gm(y[R],T[R]);if(I!==0)return I;const z=Ja(p[y[R]],g[T[R]]);if(z!==0)return z}return Oe(y.length,T.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function zv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const n=Hr(r),s=Hr(e),l=Oe(n.seconds,s.seconds);return l!==0?l:Oe(n.nanos,s.nanos)}function Bv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ja(n[l],s[l]);if(c)return c}return Oe(n.length,s.length)}function eo(r){return ym(r)}function ym(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Hr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Fr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return fe.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=ym(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${ym(n.fields[d])}`;return l+"}"})(r.mapValue):_e(61005,{value:r})}function qc(r){switch(Gr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wh(r);return e?16+qc(e):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+qc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Zr(s.fields,((c,d)=>{l+=c.length+qc(d)})),l})(r.mapValue);default:throw _e(13486,{value:r})}}function qv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function _m(r){return!!r&&"integerValue"in r}function Ym(r){return!!r&&"arrayValue"in r}function Hv(r){return!!r&&"nullValue"in r}function Fv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hc(r){return!!r&&"mapValue"in r}function cI(r){return(r?.mapValue?.fields||{})[q0]?.stringValue===H0}function Nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Zr(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Nl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(r.arrayValue.values[n]);return e}return{...r}}function hI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===uI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=Ft.emptyPath(),s={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Nl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Hc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){Zr(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new un(Nl(this.value))}}function F0(r){const e=[];return Zr(r.fields,((n,s)=>{const l=new Ft([n]);if(Hc(s)){const c=F0(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,s,l,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Zt(e,0,Te.min(),Te.min(),Te.min(),un.empty(),0)}static newFoundDocument(e,n,s,l){return new Zt(e,1,n,Te.min(),s,l,0)}static newNoDocument(e,n){return new Zt(e,2,n,Te.min(),Te.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Te.min(),Te.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.position=e,this.inclusive=n}}function Gv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=fe.comparator(fe.fromName(d.referenceValue),n.key):s=Ja(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!_i(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function fI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{}class Tt extends G0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new mI(e,n,s):n==="array-contains"?new yI(e,s):n==="in"?new _I(e,s):n==="not-in"?new vI(e,s):n==="array-contains-any"?new EI(e,s):new Tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new pI(e,s):new gI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ja(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends G0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kn(e,n)}matches(e){return Q0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Q0(r){return r.op==="and"}function K0(r){return dI(r)&&Q0(r)}function dI(r){for(const e of r.filters)if(e instanceof Kn)return!1;return!0}function vm(r){if(r instanceof Tt)return r.field.canonicalString()+r.op.toString()+eo(r.value);if(K0(r))return r.filters.map((e=>vm(e))).join(",");{const e=r.filters.map((n=>vm(n))).join(",");return`${r.op}(${e})`}}function Y0(r,e){return r instanceof Tt?(function(s,l){return l instanceof Tt&&s.op===l.op&&s.field.isEqual(l.field)&&_i(s.value,l.value)})(r,e):r instanceof Kn?(function(s,l){return l instanceof Kn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&Y0(d,l.filters[p])),!0):!1})(r,e):void _e(19439)}function X0(r){return r instanceof Tt?(function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`})(r):r instanceof Kn?(function(n){return n.op.toString()+" {"+n.getFilters().map(X0).join(" ,")+"}"})(r):"Filter"}class mI extends Tt{constructor(e,n,s){super(e,n,s),this.key=fe.fromName(s.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class pI extends Tt{constructor(e,n){super(e,"in",n),this.keys=$0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gI extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=$0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $0(r,e){return(e.arrayValue?.values||[]).map((n=>fe.fromName(n.referenceValue)))}class yI extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ym(n)&&Bl(n.arrayValue,this.value)}}class _I extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class vI extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class EI extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n=null,s=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Kv(r,e=null,n=[],s=[],l=null,c=null,d=null){return new TI(r,e,n,s,l,c,d)}function Xm(r){const e=Se(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>vm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>eo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>eo(s))).join(",")),e.Te=n}return e.Te}function $m(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!fI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Y0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qv(r.startAt,e.startAt)&&Qv(r.endAt,e.endAt)}function Em(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n=null,s=[],l=[],c=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(r,e,n,s,l,c,d,p){return new Jl(r,e,n,s,l,c,d,p)}function Rh(r){return new Jl(r)}function Yv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Z0(r){return r.collectionGroup!==null}function Dl(r){const e=Se(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Nt(Ft.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ah(c,s))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new ah(Ft.keyField(),s))}return e.Ie}function mi(r){const e=Se(r);return e.Ee||(e.Ee=SI(e,Dl(r))),e.Ee}function SI(r,e){if(r.limitType==="F")return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ah(l.field,c)}));const n=r.endAt?new sh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new sh(r.startAt.position,r.startAt.inclusive):null;return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Tm(r,e){const n=r.filters.concat([e]);return new Jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function oh(r,e,n){return new Jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Ih(r,e){return $m(mi(r),mi(e))&&r.limitType===e.limitType}function W0(r){return`${Xm(mi(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>X0(l))).join(", ")}]`),bh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>eo(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>eo(l))).join(",")),`Target(${s})`})(mi(r))}; limitType=${r.limitType})`}function Ch(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):fe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,p,y){const g=Gv(d,p,y);return d.inclusive?g<=0:g<0})(s.startAt,Dl(s),l)||s.endAt&&!(function(d,p,y){const g=Gv(d,p,y);return d.inclusive?g>=0:g>0})(s.endAt,Dl(s),l))})(r,e)}function bI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function J0(r){return(e,n)=>{let s=!1;for(const l of Dl(r)){const c=wI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function wI(r,e,n){const s=r.field.isKeyField()?fe.comparator(e.key,n.key):(function(c,d,p){const y=d.data.field(c),g=p.data.field(c);return y!==null&&g!==null?Ja(y,g):_e(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return k0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new st(fe.comparator);function Ji(){return RI}const eT=new st(fe.comparator);function bl(...r){let e=eT;for(const n of r)e=e.insert(n.key,n);return e}function tT(r){let e=eT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Us(){return xl()}function nT(){return xl()}function xl(){return new Ks((r=>r.toString()),((r,e)=>r.isEqual(e)))}const II=new st(fe.comparator),CI=new Nt(fe.comparator);function Ve(...r){let e=CI;for(const n of r)e=e.add(n);return e}const NI=new Nt(Oe);function DI(){return NI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function iT(r){return{integerValue:""+r}}function xI(r,e){return rI(e)?iT(e):Zm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this._=void 0}}function OI(r,e,n){return r instanceof ql?(function(l,c){const d={fields:{[j0]:{stringValue:U0},[B0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Km(c)&&(c=wh(c)),c&&(d.fields[z0]=c),{mapValue:d}})(n,e):r instanceof Hl?sT(r,e):r instanceof Fl?aT(r,e):(function(l,c){const d=rT(l,c),p=Xv(d)+Xv(l.Ae);return _m(d)&&_m(l.Ae)?iT(p):Zm(l.serializer,p)})(r,e)}function VI(r,e,n){return r instanceof Hl?sT(r,e):r instanceof Fl?aT(r,e):n}function rT(r,e){return r instanceof lh?(function(s){return _m(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class ql extends Nh{}class Hl extends Nh{constructor(e){super(),this.elements=e}}function sT(r,e){const n=oT(e);for(const s of r.elements)n.some((l=>_i(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Fl extends Nh{constructor(e){super(),this.elements=e}}function aT(r,e){let n=oT(e);for(const s of r.elements)n=n.filter((l=>!_i(l,s)));return{arrayValue:{values:n}}}class lh extends Nh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xv(r){return dt(r.integerValue||r.doubleValue)}function oT(r){return Ym(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.field=e,this.transform=n}}function PI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Hl&&l instanceof Hl||s instanceof Fl&&l instanceof Fl?Wa(s.elements,l.elements,_i):s instanceof lh&&l instanceof lh?_i(s.Ae,l.Ae):s instanceof ql&&l instanceof ql})(r.transform,e.transform)}class kI{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Dh{}function lT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wm(r.key,Tn.none()):new eu(r.key,r.data,Tn.none());{const n=r.data,s=un.empty();let l=new Nt(Ft.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Wr(r.key,s,new En(l.toArray()),Tn.none())}}function LI(r,e,n){r instanceof eu?(function(l,c,d){const p=l.value.clone(),y=Zv(l.fieldTransforms,c,d.transformResults);p.setAll(y),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof Wr?(function(l,c,d){if(!Fc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Zv(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(uT(l)),y.setAll(p),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Ol(r,e,n,s){return r instanceof eu?(function(c,d,p,y){if(!Fc(c.precondition,d))return p;const g=c.value.clone(),T=Wv(c.fieldTransforms,y,d);return g.setAll(T),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof Wr?(function(c,d,p,y){if(!Fc(c.precondition,d))return p;const g=Wv(c.fieldTransforms,y,d),T=d.data;return T.setAll(uT(c)),T.setAll(g),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(r,e,n,s):(function(c,d,p){return Fc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function UI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=rT(s.transform,l||null);c!=null&&(n===null&&(n=un.empty()),n.set(s.field,c))}return n||null}function $v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Wa(s,l,((c,d)=>PI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class eu extends Dh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Wr extends Dh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function uT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Zv(r,e,n){const s=new Map;He(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=e.data.field(c.field);s.set(c.field,VI(d,p,n[l]))}return s}function Wv(r,e,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,OI(c,d,e))}return s}class Wm extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&LI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ol(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ol(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=nT();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const y=lT(d,p);y!==null&&s.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,((n,s)=>$v(n,s)))&&Wa(this.baseMutations,e.baseMutations,((n,s)=>$v(n,s)))}}class Jm{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){He(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return II})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Jm(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Ue;function HI(r){switch(r){case Y.OK:return _e(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function cT(r){if(r===void 0)return Wi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case vt.OK:return Y.OK;case vt.CANCELLED:return Y.CANCELLED;case vt.UNKNOWN:return Y.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Y.INTERNAL;case vt.UNAVAILABLE:return Y.UNAVAILABLE;case vt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case vt.NOT_FOUND:return Y.NOT_FOUND;case vt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case vt.ABORTED:return Y.ABORTED;case vt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case vt.DATA_LOSS:return Y.DATA_LOSS;default:return _e(39323,{code:r})}}(Ue=vt||(vt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new jr([4294967295,4294967295],0);function Jv(r){const e=FI().encode(r),n=new w0;return n.update(e),new Uint8Array(n.digest())}function eE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new jr([n,s],0),new jr([l,c],0)]}class ep{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(jr.fromNumber(s)));return l.compare(GI)===1&&(l=new jr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jv(e),[s,l]=eE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new ep(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Jv(e),[s,l]=eE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new xh(Te.min(),l,new st(Oe),Ji(),Ve())}}class tu{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new tu(s,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class hT{constructor(e,n){this.targetId=e,this.Ce=n}}class fT{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class tE{constructor(){this.ve=0,this.Fe=nE(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),s=Ve();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:_e(38017,{changeType:c})}})),new tu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=nE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ji(),this.Je=Pc(),this.He=Pc(),this.Ye=new st(Oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Em(c))if(s===0){const d=new fe(c.path);this.et(n,d,Zt.newNoDocument(d,Te.min()))}else He(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Fr(s).toUint8Array()}catch(y){if(y instanceof L0)return Za("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ep(d,l,c)}catch(y){return Za(y instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Em(p.target)){const y=new fe(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,Zt.newNoDocument(y,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Ve();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new xh(e,n,this.Ye,this.je,s);return this.je=Ji(),this.Je=Pc(),this.He=Pc(),this.Ye=new st(Oe),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nt(Oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nt(Oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pc(){return new st(fe.comparator)}function nE(){return new st(fe.comparator)}const KI={asc:"ASCENDING",desc:"DESCENDING"},YI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XI={and:"AND",or:"OR"};class $I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Am(r,e){return r.useProto3Json||bh(e)?e:{value:e}}function uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(r,e){return uh(r,e.toTimestamp())}function pi(r){return He(!!r,49232),Te.fromTimestamp((function(n){const s=Hr(n);return new tt(s.seconds,s.nanos)})(r))}function tp(r,e){return Sm(r,e).canonicalString()}function Sm(r,e){const n=(function(l){return new et(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function mT(r){const e=et.fromString(r);return He(vT(e),10190,{key:e.toString()}),e}function bm(r,e){return tp(r.databaseId,e.path)}function tm(r,e){const n=mT(e);if(n.get(1)!==r.databaseId.projectId)throw new oe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new oe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new fe(gT(n))}function pT(r,e){return tp(r.databaseId,e)}function WI(r){const e=mT(r);return e.length===4?et.emptyPath():gT(e)}function wm(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gT(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function iE(r,e,n){return{name:bm(r,e),fields:n.value.mapValue.fields}}function JI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(g,T){return g.useProto3Json?(He(T===void 0||typeof T=="string",58123),Gt.fromBase64String(T||"")):(He(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Gt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(g){const T=g.code===void 0?Y.UNKNOWN:cT(g.code);return new oe(T,g.message||"")})(d);n=new fT(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=tm(r,s.document.name),c=pi(s.document.updateTime),d=s.document.createTime?pi(s.document.createTime):Te.min(),p=new un({mapValue:{fields:s.document.fields}}),y=Zt.newFoundDocument(l,c,d,p),g=s.targetIds||[],T=s.removedTargetIds||[];n=new Gc(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=tm(r,s.document),c=s.readTime?pi(s.readTime):Te.min(),d=Zt.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Gc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=tm(r,s.document),c=s.removedTargetIds||[];n=new Gc([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new qI(l,c),p=s.targetId;n=new hT(p,d)}}return n}function e2(r,e){let n;if(e instanceof eu)n={update:iE(r,e.key,e.value)};else if(e instanceof Wm)n={delete:bm(r,e.key)};else if(e instanceof Wr)n={update:iE(r,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof jI))return _e(16599,{Vt:e.type});n={verify:bm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof ql)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Hl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Fl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof lh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:ZI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(r,e.precondition)),n}function t2(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?pi(l.updateTime):pi(c);return d.isEqual(Te.min())&&(d=pi(c)),new kI(d,l.transformResults||[])})(n,e)))):[]}function n2(r,e){return{documents:[pT(r,e.path)]}}function i2(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=pT(r,l);const c=(function(g){if(g.length!==0)return _T(Kn.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((T=>(function(I){return{field:Ha(I.field),direction:a2(I.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Am(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:l}}function r2(r){let e=WI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){He(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(R){const I=yT(R);return I instanceof Kn&&K0(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(R){return R.map((I=>(function(F){return new ah(Fa(F.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(n.orderBy));let p=null;n.limit&&(p=(function(R){let I;return I=typeof R=="object"?R.value:R,bh(I)?null:I})(n.limit));let y=null;n.startAt&&(y=(function(R){const I=!!R.before,z=R.values||[];return new sh(z,I)})(n.startAt));let g=null;return n.endAt&&(g=(function(R){const I=!R.before,z=R.values||[];return new sh(z,I)})(n.endAt)),AI(e,l,d,c,p,"F",y,g)}function s2(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fa(n.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Fa(n.unaryFilter.field);return Tt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fa(n.unaryFilter.field);return Tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Fa(n.unaryFilter.field);return Tt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Tt.create(Fa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Kn.create(n.compositeFilter.filters.map((s=>yT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(r):_e(30097,{filter:r})}function a2(r){return KI[r]}function o2(r){return YI[r]}function l2(r){return XI[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Fa(r){return Ft.fromServerFormat(r.fieldPath)}function _T(r){return r instanceof Tt?(function(n){if(n.op==="=="){if(Fv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(Hv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(Hv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:o2(n.op),value:n.value}}})(r):r instanceof Kn?(function(n){const s=n.getFilters().map((l=>_T(l)));return s.length===1?s[0]:{compositeFilter:{op:l2(n.op),filters:s}}})(r):_e(54877,{filter:r})}function u2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function vT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,s,l,c=Te.min(),d=Te.min(),p=Gt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.yt=e}}function h2(r){const e=r2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Cn=new d2}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(qr.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class d2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Nt(et.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Nt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ET=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(ET,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",m2=1048576;function aE([r,e],[n,s]){const l=Oe(r,n);return l===0?Oe(e,s):l}class p2{constructor(e){this.Ir=e,this.buffer=new Nt(aE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();aE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(sE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?le(sE,"Ignoring IndexedDB error during garbage collection: ",n):await oo(n)}await this.Vr(3e5)}))}}class y2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Sh.ce);const s=new p2(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(rE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,d,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,d=Date.now(),this.nthSequenceNumber(e,l)))).next((R=>(s=R,p=Date.now(),this.removeTargets(e,s,n)))).next((R=>(c=R,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((R=>(g=Date.now(),Ba()<=xe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${R} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function _2(r,e){return new y2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.changes=new Ks((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ol(s.mutation,l,En.empty(),tt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ve()){const l=Us();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let d=bl();return c.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Us();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ve())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,l){let c=Ji();const d=xl(),p=(function(){return xl()})();return n.forEach(((y,g)=>{const T=s.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof Wr)?c=c.insert(g.key,g):T!==void 0?(d.set(g.key,T.mutation.getFieldMask()),Ol(T.mutation,g,T.mutation.getFieldMask(),tt.now())):d.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,T)=>d.set(g,T))),n.forEach(((g,T)=>p.set(g,new E2(T,d.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=xl();let l=new st(((d,p)=>d-p)),c=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let T=s.get(y)||En.empty();T=p.applyToLocalView(g,T),s.set(y,T);const R=(l.get(p.batchId)||Ve()).add(y);l=l.insert(p.batchId,R)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,R=nT();T.forEach((I=>{if(!c.has(I)){const z=lT(n.get(I),s.get(I));z!==null&&R.set(I,z),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,R))}return $.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(d){return fe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):$.resolve(Us());let p=Ul,y=c;return d.next((g=>$.forEach(g,((T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(e,T).next((I=>{y=y.insert(T,I)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,Ve()))).next((T=>({batchId:p,changes:tT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next((s=>{let l=bl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let d=bl();return this.indexManager.getCollectionParents(e,c).next((p=>$.forEach(p,(y=>{const g=(function(R,I){return new Jl(I,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,s,l).next((T=>{T.forEach(((R,I)=>{d=d.insert(R,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((d=>{c.forEach(((y,g)=>{const T=g.getKey();d.get(T)===null&&(d=d.insert(T,Zt.newInvalidDocument(T)))}));let p=bl();return d.forEach(((y,g)=>{const T=c.get(y);T!==void 0&&Ol(T.mutation,g,En.empty(),tt.now()),Ch(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:pi(l.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:h2(l.bundledQuery),readTime:pi(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.overlays=new st(fe.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Us();return $.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),$.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const l=Us(),c=n.length+1,d=new fe(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>s&&l.set(y.getKey(),y)}return $.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new st(((g,T)=>g-T));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let T=c.get(g.largestBatchId);T===null&&(T=Us(),c=c.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Us(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return $.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new BI(n,s));let c=this.qr.get(n);c===void 0&&(c=Ve(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Qr=new Nt(kt.$r),this.Ur=new Nt(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new kt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new fe(new et([])),s=new kt(n,e),l=new kt(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new et([])),s=new kt(n,e),l=new kt(n,e+1);let c=Ve();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new kt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||Oe(e.Yr,n.Yr)}static Kr(e,n){return Oe(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(kt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new zI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new kt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Qm:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),l=new kt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Nt(Oe);return n.forEach((l=>{const c=new kt(l,0),d=new kt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;fe.isDocumentKey(c)||(c=c.child(""));const d=new kt(new fe(c),0);let p=new Nt(Oe);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!s.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),d),$.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new kt(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new kt(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.ri=e,this.docs=(function(){return new st(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let s=Ji();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Zt.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Ji();const d=n.path,p=new fe(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||eI(JR(T),s)<=0||(l.has(T.key)||Ch(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,s,l){_e(9500)}ii(e,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new I2(this)}getSize(e){return $.resolve(this.size)}}class I2 extends v2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.persistence=e,this.si=new Ks((n=>Xm(n)),$m),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new np,this.targetCount=0,this.ai=to.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new to(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sh(0),this.li=!1,this.li=!0,this.hi=new b2,this.referenceDelegate=e(this),this.Pi=new C2(this),this.indexManager=new f2,this.remoteDocumentCache=(function(l){return new R2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new c2(n),this.Ii=new A2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new S2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new w2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){le("MemoryPersistence","Starting transaction:",e);const l=new N2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class N2 extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ri=new np,this.Vi=null}static mi(e){return new ip(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=fe.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ch{constructor(e,n){this.persistence=e,this.pi=new Ks((s=>sI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=_2(this,n)}static mi(e,n){return new ch(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return $.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,c.removeEntry(d,Te.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qc(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Ve(),l=Ve();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new rp(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return a1()?8:iI(Wt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new D2;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Ba()<=xe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ba()<=xe.DEBUG&&le("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=xe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):$.resolve())}ys(e,n){if(Yv(n))return $.resolve(null);let s=mi(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=oh(n,null,"F"),s=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Ve(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,d,y.readTime)?this.ys(e,oh(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,s,l){return Yv(n)||l.isEqual(Te.min())?$.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?$.resolve(null):(Ba()<=xe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(n)),this.vs(e,d,n,WR(l,Ul)).next((p=>p)))}))}Ds(e,n){let s=new Nt(J0(e));return n.forEach(((l,c)=>{Ch(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Ba()<=xe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(e,n,qr.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",O2=3e8;class V2{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new st(Oe),this.xs=new Ks((c=>Xm(c)),$m),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function M2(r,e,n,s){return new V2(r,e,n,s)}async function AT(r,e){const n=Se(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let y=Ve();for(const g of l){d.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of c){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(s,y).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:p})))}))}))}function P2(r,e){const n=Se(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const R=g.batch,I=R.keys();let z=$.resolve();return I.forEach((F=>{z=z.next((()=>T.getEntry(y,F))).next((J=>{const W=g.docVersions.get(F);He(W!==null,48541),J.version.compareTo(W)<0&&(R.applyToRemoteDocument(J,g),J.isValidDocument()&&(J.setReadTime(g.commitVersion),T.addEntry(J)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(y,R)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let y=Ve();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function ST(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function k2(r,e){const n=Se(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,R)=>{const I=l.get(R);if(!I)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,R))));let z=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?z=z.withResumeToken(Gt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,s)),l=l.insert(R,z),(function(J,W,ie){return J.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=O2?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(I,z,T)&&p.push(n.Pi.updateTargetData(c,z))}));let y=Ji(),g=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(L2(c,d,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!s.isEqual(Te.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((R=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return $.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function L2(r,e,n){let s=Ve(),l=Ve();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Ji();return n.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Te.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):le(sp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function U2(r,e){const n=Se(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Qm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j2(r,e){const n=Se(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Pr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Rm(r,e,n){const s=Se(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!lo(d))throw d;le(sp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function oE(r,e,n){const s=Se(r);let l=Te.min(),c=Ve();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,g,T){const R=Se(y),I=R.xs.get(T);return I!==void 0?$.resolve(R.Ms.get(I)):R.Pi.getTargetData(g,T)})(s,d,mi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?l:Te.min(),n?c:Ve()))).next((p=>(z2(s,bI(e),p),{documents:p,Qs:c})))))}function z2(r,e,n){let s=r.Os.get(e)||Te.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class lE{constructor(){this.activeTargetIds=DI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(uE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc=null;function Im(){return kc===null?kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():kc++,"0x"+kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",H2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===ih?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const d=Im(),p=this.zo(e,n.toUriEncodedString());le(nm,`Sending RPC '${e}' ${d}:`,p,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:g}=new URL(p),T=io(g);return this.Jo(e,p,y,s,T).then((R=>(le(nm,`Received RPC '${e}' ${d}: `,R),R)),(R=>{throw Za(nm,`RPC '${e}' ${d} failed with error: `,R,"url: ",p,"request:",s),R}))}Ho(e,n,s,l,c,d){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ao})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=H2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class Q2 extends F2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const d=Im();return new Promise(((p,y)=>{const g=new R0;g.setWithCredentials(!0),g.listenOnce(I0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Bc.NO_ERROR:const R=g.getResponseJson();le(Xt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(R)),p(R);break;case Bc.TIMEOUT:le(Xt,`RPC '${e}' ${d} timed out`),y(new oe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const I=g.getStatus();if(le(Xt,`RPC '${e}' ${d} failed with status:`,I,"response text:",g.getResponseText()),I>0){let z=g.getResponseJson();Array.isArray(z)&&(z=z[0]);const F=z?.error;if(F&&F.status&&F.message){const J=(function(ie){const ee=ie.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ee)>=0?ee:Y.UNKNOWN})(F.status);y(new oe(J,F.message))}else y(new oe(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new oe(Y.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{le(Xt,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(l);le(Xt,`RPC '${e}' ${d} sending request:`,l),g.send(n,"POST",T,s,15)}))}T_(e,n,s){const l=Im(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=D0(),p=N0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const T=c.join("");le(Xt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const R=d.createWebChannel(T,y);this.I_(R);let I=!1,z=!1;const F=new G2({Yo:W=>{z?le(Xt,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(I||(le(Xt,`Opening RPC '${e}' stream ${l} transport.`),R.open(),I=!0),le(Xt,`RPC '${e}' stream ${l} sending:`,W),R.send(W))},Zo:()=>R.close()}),J=(W,ie,ee)=>{W.listen(ie,(re=>{try{ee(re)}catch(Ae){setTimeout((()=>{throw Ae}),0)}}))};return J(R,Sl.EventType.OPEN,(()=>{z||(le(Xt,`RPC '${e}' stream ${l} transport opened.`),F.o_())})),J(R,Sl.EventType.CLOSE,(()=>{z||(z=!0,le(Xt,`RPC '${e}' stream ${l} transport closed`),F.a_(),this.E_(R))})),J(R,Sl.EventType.ERROR,(W=>{z||(z=!0,Za(Xt,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),F.a_(new oe(Y.UNAVAILABLE,"The operation could not be completed")))})),J(R,Sl.EventType.MESSAGE,(W=>{if(!z){const ie=W.data[0];He(!!ie,16349);const ee=ie,re=ee?.error||ee[0]?.error;if(re){le(Xt,`RPC '${e}' stream ${l} received error:`,re);const Ae=re.status;let me=(function(b){const N=vt[b];if(N!==void 0)return cT(N)})(Ae),Re=re.message;me===void 0&&(me=Y.INTERNAL,Re="Unknown error status: "+Ae+" with message "+re.message),z=!0,F.a_(new oe(me,Re)),R.close()}else le(Xt,`RPC '${e}' stream ${l} received:`,ie),F.u_(ie)}})),J(p,C0.STAT_EVENT,(W=>{W.stat===pm.PROXY?le(Xt,`RPC '${e}' stream ${l} detected buffering proxy`):W.stat===pm.NOPROXY&&le(Xt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(r){return new $I(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&le("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="PersistentStream";class wT{constructor(e,n,s,l,c,d,p,y){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Wi(n.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new oe(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(le(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K2 extends wT{constructor(e,n,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Te.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Te.min():d.readTime?pi(d.readTime):Te.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=wm(this.serializer),n.addTarget=(function(c,d){let p;const y=d.target;if(p=Em(y)?{documents:n2(c,y)}:{query:i2(c,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=dT(c,d.resumeToken);const g=Am(c,d.expectedCount);g!==null&&(p.expectedCount=g)}else if(d.snapshotVersion.compareTo(Te.min())>0){p.readTime=uh(c,d.snapshotVersion.toTimestamp());const g=Am(c,d.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=s2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.q_(n)}}class Y2 extends wT{constructor(e,n,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=t2(e.writeResults,e.commitTime),s=pi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>e2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{}class $2 extends X2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new oe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Sm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(Y.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Sm(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new oe(Y.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wi(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class W2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ys(this)&&(le(Gs,"Restarting streams for network reachability change."),await(async function(y){const g=Se(y);g.Ea.add(4),await nu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Vh(g)})(this))}))})),this.Ra=new Z2(s,l)}}async function Vh(r){if(Ys(r))for(const e of r.da)await e(!0)}async function nu(r){for(const e of r.da)await e(!1)}function RT(r,e){const n=Se(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),up(n)?lp(n):uo(n).O_()&&op(n,e))}function ap(r,e){const n=Se(r),s=uo(n);n.Ia.delete(e),s.O_()&&IT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ys(n)&&n.Ra.set("Unknown"))}function op(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(r).Y_(e)}function IT(r,e){r.Va.Ue(e),uo(r).Z_(e)}function lp(r){r.Va=new QI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),uo(r).start(),r.Ra.ua()}function up(r){return Ys(r)&&!uo(r).x_()&&r.Ia.size>0}function Ys(r){return Se(r).Ea.size===0}function CT(r){r.Va=void 0}async function J2(r){r.Ra.set("Online")}async function eC(r){r.Ia.forEach(((e,n)=>{op(r,e)}))}async function tC(r,e){CT(r),up(r)?(r.Ra.ha(e),lp(r)):r.Ra.set("Unknown")}async function nC(r,e,n){if(r.Ra.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){le(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await hh(r,s)}else if(e instanceof Gc?r.Va.Ze(e):e instanceof hT?r.Va.st(e):r.Va.tt(e),!n.isEqual(Te.min()))try{const s=await ST(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(g);T&&c.Ia.set(g,T.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,g)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Gt.EMPTY_BYTE_STRING,T.snapshotVersion)),IT(c,y);const R=new Pr(T.target,y,g,T.sequenceNumber);op(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){le(Gs,"Failed to raise snapshot:",s),await hh(r,s)}}async function hh(r,e,n){if(!lo(e))throw e;r.Ea.add(1),await nu(r),r.Ra.set("Offline"),n||(n=()=>ST(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{le(Gs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Vh(r)}))}function NT(r,e){return e().catch((n=>hh(r,n,e)))}async function Mh(r){const e=Se(r),n=Qr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qm;for(;iC(e);)try{const l=await U2(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,rC(e,l)}catch(l){await hh(e,l)}DT(e)&&xT(e)}function iC(r){return Ys(r)&&r.Ta.length<10}function rC(r,e){r.Ta.push(e);const n=Qr(r);n.O_()&&n.X_&&n.ea(e.mutations)}function DT(r){return Ys(r)&&!Qr(r).x_()&&r.Ta.length>0}function xT(r){Qr(r).start()}async function sC(r){Qr(r).ra()}async function aC(r){const e=Qr(r);for(const n of r.Ta)e.ea(n.mutations)}async function oC(r,e,n){const s=r.Ta.shift(),l=Jm.from(s,e,n);await NT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Mh(r)}async function lC(r,e){e&&Qr(r).X_&&await(async function(s,l){if((function(d){return HI(d)&&d!==Y.ABORTED})(l.code)){const c=s.Ta.shift();Qr(s).B_(),await NT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Mh(s)}})(r,e),DT(r)&&xT(r)}async function fE(r,e){const n=Se(r);n.asyncQueue.verifyOperationInProgress(),le(Gs,"RemoteStore received new credentials");const s=Ys(n);n.Ea.add(3),await nu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function uC(r,e){const n=Se(r);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await nu(n),n.Ra.set("Unknown"))}function uo(r){return r.ma||(r.ma=(function(n,s,l){const c=Se(n);return c.sa(),new K2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:J2.bind(null,r),t_:eC.bind(null,r),r_:tC.bind(null,r),H_:nC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),up(r)?lp(r):r.Ra.set("Unknown")):(await r.ma.stop(),CT(r))}))),r.ma}function Qr(r){return r.fa||(r.fa=(function(n,s,l){const c=Se(n);return c.sa(),new Y2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:sC.bind(null,r),r_:lC.bind(null,r),ta:aC.bind(null,r),na:oC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Mh(r)):(await r.fa.stop(),r.Ta.length>0&&(le(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const d=Date.now()+s,p=new cp(e,n,d,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(Wi("AsyncQueue",`${e}: ${r}`),lo(r))return new oe(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(e){return new Xa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||fe.comparator(n.key,s.key):(n,s)=>fe.comparator(n.key,s.key),this.keyedMap=bl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Xa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new st(fe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class no{constructor(e,n,s,l,c,d,p,y,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new no(e,n,Xa.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hC{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Se(n),c=l.queries;l.queries=mE(),c.forEach(((d,p)=>{for(const y of p.Sa)y.onError(s)}))})(this,new oe(Y.ABORTED,"Firestore shutting down"))}}function mE(){return new Ks((r=>W0(r)),Ih)}async function fp(r,e){const n=Se(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new cC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=hp(d,`Initialization of query '${qa(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&mp(n)}async function dp(r,e){const n=Se(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fC(r,e){const n=Se(r);let s=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&mp(n)}function dC(r,e,n){const s=Se(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function mp(r){r.Ca.forEach((e=>{e.next()}))}var Cm,pE;(pE=Cm||(Cm={})).Ma="default",pE.Cache="cache";class pp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new no(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class mC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=J0(e),this.tu=new Xa(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new dE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,R)=>{const I=l.get(T),z=Ch(this.query,R)?R:null,F=!!I&&this.mutatedKeys.has(I.key),J=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let W=!1;I&&z?I.data.isEqual(z.data)?F!==J&&(s.track({type:3,doc:z}),W=!0):this.su(I,z)||(s.track({type:2,doc:z}),W=!0,(y&&this.eu(z,y)>0||g&&this.eu(z,g)<0)&&(p=!0)):!I&&z?(s.track({type:0,doc:z}),W=!0):I&&!z&&(s.track({type:1,doc:I}),W=!0,(y||g)&&(p=!0)),W&&(z?(d=d.add(z),c=J?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,R)=>(function(z,F){const J=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:W})}};return J(z)-J(F)})(T.type,R.type)||this.eu(T.doc,R.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,d.length!==0||g?{snapshot:new no(this.query,e.tu,c,d,e.mutatedKeys,y===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new VT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new OT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return no.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gp="SyncEngine";class pC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gC{constructor(e){this.key=e,this.hu=!1}}class yC{constructor(e,n,s,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ks((p=>W0(p)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new st(fe.comparator),this.Au=new Map,this.Ru=new np,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _C(r,e,n=!0){const s=jT(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await MT(s,e,n,!0),l}async function vC(r,e){const n=jT(r);await MT(n,e,!0,!1)}async function MT(r,e,n,s){const l=await j2(r.localStore,mi(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await EC(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&RT(r.remoteStore,l),p}async function EC(r,e,n,s,l){r.pu=(R,I,z)=>(async function(J,W,ie,ee){let re=W.view.ru(ie);re.Cs&&(re=await oE(J.localStore,W.query,!1).then((({documents:V})=>W.view.ru(V,re))));const Ae=ee&&ee.targetChanges.get(W.targetId),me=ee&&ee.targetMismatches.get(W.targetId)!=null,Re=W.view.applyChanges(re,J.isPrimaryClient,Ae,me);return yE(J,W.targetId,Re.au),Re.snapshot})(r,R,I,z);const c=await oE(r.localStore,e,!0),d=new mC(e,c.Qs),p=d.ru(c.documents),y=tu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),g=d.applyChanges(p,r.isPrimaryClient,y);yE(r,n,g.au);const T=new pC(e,n,d);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function TC(r,e,n){const s=Se(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Ih(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Rm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&ap(s.remoteStore,l.targetId),Nm(s,l.targetId)})).catch(oo)):(Nm(s,l.targetId),await Rm(s.localStore,l.targetId,!0))}async function AC(r,e){const n=Se(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ap(n.remoteStore,s.targetId))}async function SC(r,e,n){const s=DC(r);try{const l=await(function(d,p){const y=Se(d),g=tt.now(),T=p.reduce(((z,F)=>z.add(F.key)),Ve());let R,I;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let F=Ji(),J=Ve();return y.Ns.getEntries(z,T).next((W=>{F=W,F.forEach(((ie,ee)=>{ee.isValidDocument()||(J=J.add(ie))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,F))).next((W=>{R=W;const ie=[];for(const ee of p){const re=UI(ee,R.get(ee.key).overlayedDocument);re!=null&&ie.push(new Wr(ee.key,re,F0(re.value.mapValue),Tn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,g,ie,p)})).next((W=>{I=W;const ie=W.applyToLocalDocumentSet(R,J);return y.documentOverlayCache.saveOverlays(z,W.batchId,ie)}))})).then((()=>({batchId:I.batchId,changes:tT(R)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let g=d.Vu[d.currentUser.toKey()];g||(g=new st(Oe)),g=g.insert(p,y),d.Vu[d.currentUser.toKey()]=g})(s,l.batchId,n),await iu(s,l.changes),await Mh(s.remoteStore)}catch(l){const c=hp(l,"Failed to persist write");n.reject(c)}}async function PT(r,e){const n=Se(r);try{const s=await k2(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(He(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?He(d.hu,14607):l.removedDocuments.size>0&&(He(d.hu,42227),d.hu=!1))})),await iu(n,s,e)}catch(s){await oo(s)}}function gE(r,e,n){const s=Se(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=Se(d);y.onlineState=p;let g=!1;y.queries.forEach(((T,R)=>{for(const I of R.Sa)I.va(p)&&(g=!0)})),g&&mp(y)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function bC(r,e,n){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new st(fe.comparator);d=d.insert(c,Zt.newNoDocument(c,Te.min()));const p=Ve().add(c),y=new xh(Te.min(),new Map,new st(Oe),d,p);await PT(s,y),s.du=s.du.remove(c),s.Au.delete(e),yp(s)}else await Rm(s.localStore,e,!1).then((()=>Nm(s,e,n))).catch(oo)}async function wC(r,e){const n=Se(r),s=e.batch.batchId;try{const l=await P2(n.localStore,e);LT(n,s,null),kT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await iu(n,l)}catch(l){await oo(l)}}async function RC(r,e,n){const s=Se(r);try{const l=await(function(d,p){const y=Se(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((R=>(He(R!==null,37113),T=R.keys(),y.mutationQueue.removeMutationBatch(g,R)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(s.localStore,e);LT(s,e,n),kT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await iu(s,l)}catch(l){await oo(l)}}function kT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function LT(r,e,n){const s=Se(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Nm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||UT(r,s)}))}function UT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(ap(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),yp(r))}function yE(r,e,n){for(const s of n)s instanceof OT?(r.Ru.addReference(s.key,e),IC(r,s)):s instanceof VT?(le(gp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||UT(r,s.key)):_e(19791,{wu:s})}function IC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(le(gp,"New document in limbo: "+n),r.Eu.add(s),yp(r))}function yp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new fe(et.fromString(e)),s=r.fu.next();r.Au.set(s,new gC(n)),r.du=r.du.insert(n,s),RT(r.remoteStore,new Pr(mi(Rh(n.path)),s,"TargetPurposeLimboResolution",Sh.ce))}}async function iu(r,e,n){const s=Se(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,y)=>{d.push(s.pu(y,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const T=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=rp.As(y.targetId,g);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(y,g){const T=Se(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>$.forEach(g,(I=>$.forEach(I.Es,(z=>T.persistence.referenceDelegate.addReference(R,I.targetId,z))).next((()=>$.forEach(I.ds,(z=>T.persistence.referenceDelegate.removeReference(R,I.targetId,z)))))))))}catch(R){if(!lo(R))throw R;le(sp,"Failed to update sequence numbers: "+R)}for(const R of g){const I=R.targetId;if(!R.fromCache){const z=T.Ms.get(I),F=z.snapshotVersion,J=z.withLastLimboFreeSnapshotVersion(F);T.Ms=T.Ms.insert(I,J)}}})(s.localStore,c))}async function CC(r,e){const n=Se(r);if(!n.currentUser.isEqual(e)){le(gp,"User change. New user:",e.toKey());const s=await AT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new oe(Y.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await iu(n,s.Ls)}}function NC(r,e){const n=Se(r),s=n.Au.get(e);if(s&&s.hu)return Ve().add(s.key);{let l=Ve();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function jT(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bC.bind(null,e),e.Pu.H_=fC.bind(null,e.eventManager),e.Pu.yu=dC.bind(null,e.eventManager),e}function DC(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RC.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return M2(this.persistence,new x2,e.initialUser,this.serializer)}Cu(e){return new TT(ip.mi,this.serializer)}Du(e){return new B2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class xC extends fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof ch,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new g2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new TT((s=>ch.mi(s,n)),this.serializer)}}class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),await uC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hC})()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),s=(function(c){return new Q2(c)})(e.databaseInfo);return(function(c,d,p,y){return new $2(c,d,p,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,d,p){return new W2(s,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>gE(this.syncEngine,n,0)),(function(){return cE.v()?new cE:new q2})())}createSyncEngine(e,n){return(function(l,c,d,p,y,g,T){const R=new yC(l,c,d,p,y,g);return T&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Se(n);le(Gs,"RemoteStore shutting down."),s.Ea.add(5),await nu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class OC{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=$t.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{le(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(le(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=hp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rm(r,e){r.asyncQueue.verifyOperationInProgress(),le(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await AT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function _E(r,e){r.asyncQueue.verifyOperationInProgress();const n=await VC(r);le(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>fE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>fE(e.remoteStore,l))),r._onlineComponents=e}async function VC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le(Kr,"Using user provided OfflineComponentProvider");try{await rm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Za("Error using user provided cache. Falling back to memory cache: "+n),await rm(r,new fh)}}else le(Kr,"Using default OfflineComponentProvider"),await rm(r,new xC(void 0));return r._offlineComponents}async function zT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le(Kr,"Using user provided OnlineComponentProvider"),await _E(r,r._uninitializedComponentsProvider._online)):(le(Kr,"Using default OnlineComponentProvider"),await _E(r,new Dm))),r._onlineComponents}function MC(r){return zT(r).then((e=>e.syncEngine))}async function dh(r){const e=await zT(r),n=e.eventManager;return n.onListen=_C.bind(null,e.syncEngine),n.onUnlisten=TC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AC.bind(null,e.syncEngine),n}function PC(r,e,n={}){const s=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,g){const T=new _p({next:I=>{T.Nu(),d.enqueueAndForget((()=>dp(c,R)));const z=I.docs.has(p);!z&&I.fromCache?g.reject(new oe(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&I.fromCache&&y&&y.source==="server"?g.reject(new oe(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),R=new pp(Rh(p.path),T,{includeMetadataChanges:!0,qa:!0});return fp(c,R)})(await dh(r),r.asyncQueue,e,n,s))),s.promise}function kC(r,e,n={}){const s=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,g){const T=new _p({next:I=>{T.Nu(),d.enqueueAndForget((()=>dp(c,R))),I.fromCache&&y.source==="server"?g.reject(new oe(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),R=new pp(p,T,{includeMetadataChanges:!0,qa:!0});return fp(c,R)})(await dh(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firestore.googleapis.com",EE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=EE}else this.host=e.host,this.ssl=e.ssl??EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ET;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m2)throw new oe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new BR;switch(s.type){case"firstParty":return new GR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vE.get(n);s&&(le("ComponentProvider","Removing Datastore"),vE.delete(n),s.terminate())})(this),Promise.resolve()}}function LC(r,e,n,s={}){r=Ln(r,Ph);const l=io(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(kE(`https://${p}`),LE("Firestore",!0)),c.host!==qT&&c.host!==p&&Za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:s};if(!Bs(y,d)&&(r._setSettings(y),s.mockUserToken)){let g,T;if(typeof s.mockUserToken=="string")g=s.mockUserToken,T=$t.MOCK_USER;else{g=ZS(s.mockUserToken,r._app?.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new oe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $t(R)}r._authCredentials=new qR(new O0(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Wl(n,mt._jsonSchema))return new mt(e,s||null,new fe(et.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:At("string",mt._jsonSchemaVersion),referencePath:At("string")};class zr extends Jr{constructor(e,n,s){super(e,n,Rh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new fe(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Ki(r,e,...n){if(r=St(r),V0("collection","path",e),r instanceof Ph){const s=et.fromString(e,...n);return Mv(s),new zr(r,null,s)}{if(!(r instanceof mt||r instanceof zr))throw new oe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return Mv(s),new zr(r.firestore,null,s)}}function Vl(r,e,...n){if(r=St(r),arguments.length===1&&(e=Gm.newId()),V0("doc","path",e),r instanceof Ph){const s=et.fromString(e,...n);return Vv(s),new mt(r,null,new fe(s))}{if(!(r instanceof mt||r instanceof zr))throw new oe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return Vv(s),new mt(r.firestore,r instanceof zr?r.converter:null,new fe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const s=im();s&&le(AE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;le(AE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wi("INTERNAL UNHANDLED ERROR: ",bE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=cp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Yr extends Ph{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new SE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function UC(r,e){const n=typeof r=="object"?r:BE(),s=typeof r=="string"?r:ih,l=Pm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=XS("firestore");c&&LC(l,...c)}return l}function ru(r){if(r._terminated)throw new oe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||jC(r),r._firestoreClient}function jC(r){const e=r._freezeSettings(),n=(function(l,c,d,p){return new lI(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,BT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new OC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Gt.fromBase64String(e))}catch(n){throw new oe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:At("string",kn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:At("string",gi._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new yi(e.vectorValues);throw new oe(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:At("string",yi._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^__.*__$/;class BC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}class HT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class vp{constructor(e,n,s,l,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&zC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Oh(e)}Cc(e,n,s,l=!1){return new vp({Ac:e,methodName:n,Dc:s,path:Ft.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uh(r){const e=r._freezeSettings(),n=Oh(r._databaseId);return new qC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ep(r,e,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Ap("Data must be an object, but it was:",d,s);const p=GT(s,d);let y,g;if(c.merge)y=new En(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const I=xm(e,R,n);if(!d.contains(I))throw new oe(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);KT(T,I)||T.push(I)}y=new En(T),g=d.fieldTransforms.filter((R=>y.covers(R.field)))}else y=null,g=d.fieldTransforms;return new BC(new un(p),y,g)}class jh extends Lh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}class Tp extends Lh{_toFieldTransform(e){return new MI(e.path,new ql)}isEqual(e){return e instanceof Tp}}function HC(r,e,n,s){const l=r.Cc(1,e,n);Ap("Data must be an object, but it was:",l,s);const c=[],d=un.empty();Zr(s,((y,g)=>{const T=Sp(e,y,n);g=St(g);const R=l.yc(T);if(g instanceof jh)c.push(T);else{const I=su(g,R);I!=null&&(c.push(T),d.set(T,I))}}));const p=new En(c);return new HT(d,p,l.fieldTransforms)}function FC(r,e,n,s,l,c){const d=r.Cc(1,e,n),p=[xm(e,s,n)],y=[l];if(c.length%2!=0)throw new oe(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(xm(e,c[I])),y.push(c[I+1]);const g=[],T=un.empty();for(let I=p.length-1;I>=0;--I)if(!KT(g,p[I])){const z=p[I];let F=y[I];F=St(F);const J=d.yc(z);if(F instanceof jh)g.push(z);else{const W=su(F,J);W!=null&&(g.push(z),T.set(z,W))}}const R=new En(g);return new HT(T,R,d.fieldTransforms)}function GC(r,e,n,s=!1){return su(n,r.Cc(s?4:3,e))}function su(r,e){if(QT(r=St(r)))return Ap("Unsupported field value:",e,r),GT(r,e);if(r instanceof Lh)return(function(s,l){if(!FT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let y=su(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=tt.fromDate(s);return{timestampValue:uh(l.serializer,c)}}if(s instanceof tt){const c=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:uh(l.serializer,c)}}if(s instanceof gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:dT(l.serializer,s._byteString)};if(s instanceof mt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof yi)return(function(d,p){return{mapValue:{fields:{[q0]:{stringValue:H0},[rh]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Zm(p.serializer,g)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Ah(s)}`)})(r,e)}function GT(r,e){const n={};return k0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(r,((s,l)=>{const c=su(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function QT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof gi||r instanceof kn||r instanceof mt||r instanceof Lh||r instanceof yi)}function Ap(r,e,n){if(!QT(n)||!M0(n)){const s=Ah(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function xm(r,e,n){if((e=St(e))instanceof kh)return e._internalPath;if(typeof e=="string")return Sp(r,e);throw mh("Field path arguments must be of type string or ",r,!1,void 0,n)}const QC=new RegExp("[~\\*/\\[\\]]");function Sp(r,e,n){if(e.search(QC)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new kh(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function mh(r,e,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${s}`),d&&(y+=` in document ${l}`),y+=")"),new oe(Y.INVALID_ARGUMENT,p+r+y)}function KT(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(XT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KC extends YT{data(){return super.data()}}function XT(r,e){return typeof e=="string"?Sp(r,e):e instanceof kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class ZT extends bp{}function Ml(r,e,...n){let s=[];e instanceof bp&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((y=>y instanceof Rp)).length,p=c.filter((y=>y instanceof wp)).length;if(d>1||d>0&&p>0)throw new oe(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class wp extends ZT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new wp(e,n,s)}_apply(e){const n=this._parse(e);return WT(e._query,n),new Jr(e.firestore,e.converter,Tm(e._query,n))}_parse(e){const n=Uh(e.firestore);return(function(c,d,p,y,g,T,R){let I;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new oe(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){IE(R,T);const F=[];for(const J of R)F.push(RE(y,c,J));I={arrayValue:{values:F}}}else I=RE(y,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||IE(R,T),I=GC(p,d,R,T==="in"||T==="not-in");return Tt.create(g,T,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rp extends bp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const y of p)WT(d,y),d=Tm(d,y)})(e._query,n),new Jr(e.firestore,e.converter,Tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends ZT{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Ip(e,n,s)}_apply(e){return new Jr(e.firestore,e.converter,oh(e._query,this._limit,this._limitType))}}function YC(r){return Ip._create("limit",r,"F")}function RE(r,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new oe(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z0(e)&&n.indexOf("/")!==-1)throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(et.fromString(n));if(!fe.isDocumentKey(s))throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qv(r,new fe(s))}if(n instanceof mt)return qv(r,n._key);throw new oe(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function IE(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(r,e){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new oe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XC{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zr(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[rh].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new yi(n)}convertGeoPoint(e){return new gi(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=wh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);He(vT(s),9688,{name:e});const l=new zl(s.get(1),s.get(3)),c=new fe(s.popFirst(5));return l.isEqual(n)||Wi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Rl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends YT{constructor(e,n,s,l,c,d){super(e,n,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(XT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:At("string",js._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Qc extends js{data(e={}){return super.data(e)}}class zs{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Rl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Qc(this._firestore,this._userDataWriter,s.key,s,new Rl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new Qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:$C(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $C(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r){r=Ln(r,mt);const e=Ln(r.firestore,Yr);return PC(ru(e),r._key).then((n=>JT(e,r,n)))}zs._jsonSchemaVersion="firestore/querySnapshot/1.0",zs._jsonSchema={type:At("string",zs._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class Np extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function ZC(r){r=Ln(r,Jr);const e=Ln(r.firestore,Yr),n=ru(e),s=new Np(e);return $T(r._query),kC(n,r._query).then((l=>new zs(e,s,r,l)))}function WC(r,e,n){r=Ln(r,mt);const s=Ln(r.firestore,Yr),l=Cp(r.converter,e,n);return xp(s,[Ep(Uh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Tn.none())])}function Dp(r,e){const n=Ln(r.firestore,Yr),s=Vl(r),l=Cp(r.converter,e);return xp(n,[Ep(Uh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Tn.exists(!1))]).then((()=>s))}function Kc(r,...e){r=St(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wE(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wE(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,d,p;if(r instanceof mt)d=Ln(r.firestore,Yr),p=Rh(r._key.path),c={next:y=>{e[s]&&e[s](JT(d,r,y))},error:e[s+1],complete:e[s+2]};else{const y=Ln(r,Jr);d=Ln(y.firestore,Yr),p=y._query;const g=new Np(d);c={next:T=>{e[s]&&e[s](new zs(d,g,y,T))},error:e[s+1],complete:e[s+2]},$T(r._query)}return(function(g,T,R,I){const z=new _p(I),F=new pp(T,z,R);return g.asyncQueue.enqueueAndForget((async()=>fp(await dh(g),F))),()=>{z.Nu(),g.asyncQueue.enqueueAndForget((async()=>dp(await dh(g),F)))}})(ru(d),p,l,c)}function xp(r,e){return(function(s,l){const c=new Xi;return s.asyncQueue.enqueueAndForget((async()=>SC(await MC(s),l,c))),c.promise})(ru(r),e)}function JT(r,e,n){const s=n.docs.get(e._key),l=new Np(r);return new js(r,l,e._key,s,new Rl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uh(e)}set(e,n,s){this._verifyNotCommitted();const l=sm(e,this._firestore),c=Cp(l.converter,n,s),d=Ep(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,Tn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=sm(e,this._firestore);let d;return d=typeof(n=St(n))=="string"||n instanceof kh?FC(this._dataReader,"WriteBatch.update",c._key,n,s,l):HC(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sm(e,this._firestore);return this._mutations=this._mutations.concat(new Wm(n._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sm(r,e){if((r=St(r)).firestore!==e)throw new oe(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ph(){return new Tp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(r){return ru(r=Ln(r,Yr)),new JC(r,(e=>xp(r,e)))}(function(e,n=!0){(function(l){ao=l})(ro),$a(new qs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Yr(new HR(s.getProvider("auth-internal")),new QR(d,s.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(g.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ur(Nv,Dv,e),Ur(Nv,Dv,"esm2020")})();const Et={dashboard:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),sales:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),purchases:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),inventory:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),reports:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),logout:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),plus:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),user:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),money:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),close:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),trash:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),edit:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})})},tN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyA6pwcMnIn0y0HcKRWQhfpvPKwmbH-Jc4Y",authDomain:"sofwipad-erp-contable.firebaseapp.com",projectId:"sofwipad-erp-contable",storageBucket:"sofwipad-erp-contable.appspot.com",messagingSenderId:"902895181248",appId:"1:902895181248:web:dfb884b039dedacfb3bc25",measurementId:"G-D22KTMEDP6"};const eA=zE(tN),Gl=UR(eA),vn=UC(eA);zR("debug");const tA=Me.createContext(),nN=({children:r})=>{const[e,n]=Me.useState(null),[s,l]=Me.useState(null),[c,d]=Me.useState(null),[p,y]=Me.useState(!0),[g,T]=Me.useState(""),R=async z=>{const F=eN(vn),J=Ki(vn,`companies/${z}/chart_of_accounts`);[{code:"1105",name:"Caja",class:"Activo"},{code:"1110",name:"Bancos",class:"Activo"},{code:"1305",name:"Clientes",class:"Activo"},{code:"1435",name:"Inventarios",class:"Activo"},{code:"2205",name:"Proveedores Nacionales",class:"Pasivo"},{code:"2105",name:"Obligaciones Financieras",class:"Pasivo"},{code:"3115",name:"Aportes Sociales",class:"Patrimonio"},{code:"4135",name:"Comercio al por mayor y al por menor",class:"Ingreso"},{code:"5105",name:"Gastos de Personal",class:"Gasto"},{code:"5195",name:"Diversos",class:"Gasto"},{code:"6135",name:"Costo de Ventas",class:"Costo"}].forEach(ie=>{const ee=Vl(J,ie.code);F.set(ee,ie)});try{await F.commit(),console.log(`Plan de cuentas inicial creado para la empresa: ${z}`)}catch(ie){console.error("Error creando el plan de cuentas inicial:",ie),T("No se pudo completar la configuración inicial de la empresa.")}};Me.useEffect(()=>{const F=Iw(Gl,async J=>{if(J&&!J.isAnonymous){const W=Vl(vn,"users",J.uid),ie=await CE(W);if(ie.exists()){const ee={uid:J.uid,...ie.data()};if(n(J),l(ee),ee.companyId){const re=Vl(vn,"companies",ee.companyId),Ae=await CE(re);if(Ae.exists()){d({id:Ae.id,...Ae.data()});const me=Ki(vn,`companies/${ee.companyId}/chart_of_accounts`),Re=Ml(me,YC(1));(await ZC(Re)).empty&&(console.log("Plan de cuentas no encontrado, iniciando configuración..."),await R(ee.companyId))}else T(`Error: La empresa con ID ${ee.companyId} no fue encontrada.`),d(null)}else T("Usuario no está asociado a ninguna empresa."),d(null)}else T("No se encontró el perfil del usuario en la base de datos."),await m0(Gl)}else n(null),l(null),d(null);y(!1)});return()=>F()},[]);const I={user:e,userData:s,companyData:c,loading:p,error:g,setError:T};return S.jsx(tA.Provider,{value:I,children:r})},au=()=>Me.useContext(tA),nA=({isOpen:r,onClose:e,title:n,children:s})=>r?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-full overflow-y-auto",children:[S.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),S.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:Et.close})]}),S.jsx("div",{className:"p-6",children:s})]})}):null,rn=({id:r,label:e,...n})=>S.jsxs("div",{children:[S.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),S.jsx("input",{id:r,...n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),gh=({id:r,label:e,children:n,...s})=>S.jsxs("div",{children:[S.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),S.jsx("select",{id:r,...s,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n})]}),Gn=({children:r,onClick:e,type:n="button",variant:s="primary",...l})=>{const c="inline-flex items-center justify-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"border-transparent text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"};return S.jsx("button",{type:n,onClick:e,className:`${c} ${d[s]}`,...l,children:r})},yh=({title:r,children:e,actions:n})=>S.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[S.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),n&&S.jsx("div",{className:"flex space-x-2",children:n})]}),S.jsx("div",{className:"p-4",children:e})]}),iA=()=>S.jsx("div",{className:"flex justify-center items-center h-full",children:S.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),rA=({message:r})=>r?S.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative my-4",role:"alert",children:[S.jsx("strong",{className:"font-bold",children:"Error: "}),S.jsx("span",{className:"block sm:inline",children:r})]}):null,iN=()=>{const[r,e]=Me.useState(!0),[n,s]=Me.useState(""),[l,c]=Me.useState(""),[d,p]=Me.useState(""),[y,g]=Me.useState(""),[T,R]=Me.useState(""),[I,z]=Me.useState(""),[F,J]=Me.useState(!1),W=async ee=>{ee.preventDefault(),J(!0),z("");try{await bw(Gl,n,l)}catch(re){z(re.message)}J(!1)},ie=async ee=>{if(ee.preventDefault(),l.length<6){z("La contraseña debe tener al menos 6 caracteres.");return}J(!0),z("");try{const re=Ki(vn,"companies"),Ae=await Dp(re,{name:y,NIT:T,createdAt:ph(),taxConfig:{iva:19,ica:.414,retefuente:2.5}}),Re=(await Sw(Gl,n,l)).user;await WC(Vl(vn,"users",Re.uid),{name:d,email:n,companyId:Ae.id,role:"Admin",createdAt:ph()})}catch(re){z(re.message)}J(!1)};return S.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[S.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Sofwipad ERP Contable"}),S.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Inicia sesión en tu cuenta":"Crea una nueva cuenta y empresa"})]}),S.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:S.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[S.jsxs("form",{className:"space-y-6",onSubmit:r?W:ie,children:[!r&&S.jsxs(S.Fragment,{children:[S.jsx(rn,{id:"name",name:"name",type:"text",label:"Tu Nombre Completo",required:!0,value:d,onChange:ee=>p(ee.target.value)}),S.jsx(rn,{id:"companyName",name:"companyName",type:"text",label:"Nombre de la Empresa",required:!0,value:y,onChange:ee=>g(ee.target.value)}),S.jsx(rn,{id:"nit",name:"nit",type:"text",label:"NIT de la Empresa",required:!0,value:T,onChange:ee=>R(ee.target.value)}),S.jsx("hr",{})]}),S.jsx(rn,{id:"email",name:"email",type:"email",label:"Correo Electrónico",autoComplete:"email",required:!0,value:n,onChange:ee=>s(ee.target.value)}),S.jsx(rn,{id:"password",name:"password",type:"password",label:"Contraseña",autoComplete:"current-password",required:!0,value:l,onChange:ee=>c(ee.target.value)}),S.jsx(rA,{message:I}),S.jsx("div",{children:S.jsx(Gn,{type:"submit",variant:"primary",className:"w-full",disabled:F,children:F?"Procesando...":r?"Iniciar Sesión":"Registrar Empresa"})})]}),S.jsxs("div",{className:"mt-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),S.jsx("div",{className:"mt-6 text-center",children:S.jsx("button",{onClick:()=>{e(!r),z("")},className:"font-medium text-indigo-600 hover:text-indigo-500",children:r?"¿No tienes una cuenta? Regístrate":"¿Ya tienes una cuenta? Inicia sesión"})})]})]})})]})},rN=()=>{const{userData:r,companyData:e}=au(),[n,s]=Me.useState("dashboard"),l=async()=>{await m0(Gl)},c=({view:y,icon:g,children:T})=>S.jsxs("a",{href:"#",onClick:R=>{R.preventDefault(),s(y)},className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${n===y?"bg-indigo-600 text-white":"text-gray-300 hover:bg-indigo-800 hover:text-white"}`,children:[S.jsx("span",{className:"mr-3",children:g}),T]}),d=()=>{switch(n){case"dashboard":return S.jsx(NE,{});case"sales":return S.jsx(sN,{setActiveView:s});case"thirdparties":return S.jsx(aN,{});default:return S.jsx(NE,{})}},p={Admin:"Administrador",Contador:"Contador",Empleado:"Empleado"};return S.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[S.jsxs("aside",{className:"w-64 flex-shrink-0 bg-indigo-900 text-white flex flex-col",children:[S.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b border-indigo-800",children:S.jsx("h2",{className:"text-xl font-bold",children:e?.name||"ERP Nube"})}),S.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[S.jsx(c,{view:"dashboard",icon:Et.dashboard,children:"Dashboard"}),S.jsx(c,{view:"sales",icon:Et.sales,children:"Ventas"}),S.jsx(c,{view:"purchases",icon:Et.purchases,children:"Compras"}),S.jsx(c,{view:"inventory",icon:Et.inventory,children:"Inventario"}),S.jsx(c,{view:"reports",icon:Et.reports,children:"Reportes"}),S.jsx(c,{view:"thirdparties",icon:Et.user,children:"Clientes/Proveedores"})]}),S.jsxs("div",{className:"px-4 py-4 border-t border-indigo-800",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx("div",{className:"p-2 bg-indigo-700 rounded-full",children:Et.user}),S.jsxs("div",{className:"ml-3",children:[S.jsx("p",{className:"text-sm font-medium text-white",children:r?.name}),S.jsx("p",{className:"text-xs text-indigo-300",children:p[r?.role]||r?.role})]})]}),S.jsxs("a",{href:"#",onClick:l,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium rounded-lg text-gray-300 hover:bg-red-600 hover:text-white transition-colors",children:[S.jsx("span",{className:"mr-3",children:Et.logout}),"Cerrar Sesión"]})]})]}),S.jsxs("main",{className:"flex-1 overflow-y-auto",children:[S.jsx("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-6",children:S.jsx("h1",{className:"text-2xl font-semibold text-gray-800 capitalize",children:n})}),S.jsx("div",{className:"p-6",children:d()})]})]})},NE=()=>{const{companyData:r}=au(),e=[{title:"Ventas del Mes",value:"$12,500,000",icon:Et.sales,color:"text-green-500"},{title:"Cuentas por Cobrar",value:"$4,200,000",icon:Et.money,color:"text-yellow-500"},{title:"Compras del Mes",value:"$7,800,000",icon:Et.purchases,color:"text-red-500"},{title:"Valor Inventario",value:"$25,000,000",icon:Et.inventory,color:"text-blue-500"}];return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Bienvenido a ",r?.name]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[S.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${n.color}`,children:VS.cloneElement(n.icon,{className:"h-8 w-8"})}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"text-sm text-gray-500",children:n.title}),S.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.value})]})]},n.title))}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsx(yh,{title:"Ventas vs Compras (Últimos 6 meses)",children:S.jsx("div",{className:"h-64 bg-gray-200 rounded-md flex items-center justify-center",children:S.jsx("p",{className:"text-gray-500",children:"Gráfico de barras aquí"})})}),S.jsx(yh,{title:"Actividades Recientes",children:S.jsxs("ul",{className:"space-y-3",children:[S.jsx("li",{className:"text-sm text-gray-600",children:"Factura de venta #FV-002 creada."}),S.jsx("li",{className:"text-sm text-gray-600",children:"Pago a proveedor 'DistriPartes SAS' registrado."}),S.jsx("li",{className:"text-sm text-gray-600",children:"Nuevo producto 'Aceite 20W-50' añadido al inventario."})]})})]})]})},sN=({setActiveView:r})=>{const{companyData:e}=au(),[n,s]=Me.useState(!1),[l,c]=Me.useState([]),[d,p]=Me.useState([]),[y,g]=Me.useState([]),[T,R]=Me.useState(!0);Me.useEffect(()=>{if(!e)return;R(!0);const z=Ml(Ki(vn,`companies/${e.id}/invoices_sales`)),F=Kc(z,J=>{const W=J.docs.map(ie=>({id:ie.id,...ie.data()}));c(W),R(!1)},J=>{console.error("Error fetching invoices: ",J),R(!1)});return()=>F()},[e]),Me.useEffect(()=>{if(!e)return;const z=Ml(Ki(vn,`companies/${e.id}/thirdparties`)),F=Ml(Ki(vn,`companies/${e.id}/products`)),J=Kc(z,ie=>{p(ie.docs.map(ee=>({id:ee.id,...ee.data()})))}),W=Kc(F,ie=>{g(ie.docs.map(ee=>({id:ee.id,...ee.data()})))});return()=>{J(),W()}},[e]);const I=async z=>{if(e)try{const F=Ki(vn,`companies/${e.id}/invoices_sales`);await Dp(F,{...z,companyId:e.id,createdAt:ph(),status:"Pendiente"}),s(!1)}catch(F){console.error("Error creating invoice: ",F)}};return S.jsxs("div",{children:[S.jsx("div",{className:"border-b mb-4",children:S.jsxs("nav",{className:"flex space-x-6 text-sm font-medium text-gray-600",children:[S.jsx("button",{className:"border-b-2 border-blue-600 text-blue-600 pb-2",children:"Documentos de venta"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Facturas recurrentes"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Clientes"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Seguimiento comercial"})]})}),S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsxs("div",{className:"flex space-x-2",children:[S.jsx("input",{type:"text",placeholder:"Buscar por Identificación o Cliente",className:"border px-3 py-2 rounded-lg text-sm w-80"}),S.jsxs(Gn,{variant:"secondary",children:[Et.filter," Filtros"]})]}),S.jsxs("div",{className:"flex space-x-2",children:[S.jsxs(Gn,{type:"button",variant:"secondary",onClick:()=>r("thirdparties"),children:[Et.userPlus," Crear Cliente"]}),S.jsxs(Gn,{onClick:()=>s(!0),children:[Et.plus," Crear Factura"]})]})]}),S.jsx(yh,{title:"Facturas de Venta",children:T?S.jsx(iA,{}):S.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[S.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3",children:"Fecha"}),S.jsx("th",{className:"px-6 py-3",children:"Comprobante"}),S.jsx("th",{className:"px-6 py-3",children:"Identificación"}),S.jsx("th",{className:"px-6 py-3",children:"Cliente"}),S.jsx("th",{className:"px-6 py-3",children:"Total"}),S.jsx("th",{className:"px-6 py-3",children:"Moneda"}),S.jsx("th",{className:"px-6 py-3",children:"Estado"}),S.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),S.jsx("tbody",{children:l.map(z=>S.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4",children:z.date?.seconds?new Date(z.date.seconds*1e3).toLocaleDateString():"N/A"}),S.jsxs("td",{className:"px-6 py-4 font-medium text-blue-600",children:["FV-",z.id.substring(0,6)]}),S.jsx("td",{className:"px-6 py-4",children:d.find(F=>F.id===z.clientId)?.idNumber||"N/A"}),S.jsx("td",{className:"px-6 py-4",children:d.find(F=>F.id===z.clientId)?.name||"Consumidor Final"}),S.jsxs("td",{className:"px-6 py-4",children:["$",new Intl.NumberFormat("es-CO").format(z.total||0)]}),S.jsx("td",{className:"px-6 py-4",children:"COP"}),S.jsx("td",{className:"px-6 py-4",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${z.status==="Pagada"?"bg-green-100 text-green-800":z.status==="Vencida"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:z.status})}),S.jsxs("td",{className:"px-6 py-4 flex space-x-2",children:[S.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:Et.edit}),S.jsx("button",{className:"text-red-600 hover:text-red-900",children:Et.trash})]})]},z.id))})]})}),S.jsx(oN,{isOpen:n,onClose:()=>s(!1),onSubmit:I,clients:d,products:y})]})},aN=()=>{const{companyData:r}=au(),[e,n]=Me.useState([]),[s,l]=Me.useState(!1),[c,d]=Me.useState({type:"cliente",personType:"persona",idType:"CC",name:"",lastName:"",tradeName:"",city:"",address:"",email:"",phone:""});Me.useEffect(()=>{if(!r)return;const g=Ml(Ki(vn,`companies/${r.id}/thirdparties`)),T=Kc(g,R=>{n(R.docs.map(I=>({id:I.id,...I.data()})))});return()=>T()},[r]);const p=g=>{const{name:T,value:R}=g.target;d(I=>({...I,[T]:R})),T==="personType"&&d(I=>({...I,idType:R==="persona"?"CC":"NIT"}))},y=async g=>{if(g.preventDefault(),!!r)try{const T=Ki(vn,`companies/${r.id}/thirdparties`);await Dp(T,{...c,createdAt:ph()}),l(!1),d({type:"cliente",personType:"persona",idType:"CC",name:"",lastName:"",tradeName:"",city:"",address:"",email:"",phone:""})}catch(T){console.error("Error creando tercero:",T)}};return S.jsxs("div",{children:[S.jsx("div",{className:"flex justify-end mb-4",children:S.jsxs(Gn,{onClick:()=>l(!0),children:[Et.plus," Crear Tercero"]})}),S.jsx(yh,{title:"Clientes / Proveedores / Otros",children:S.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[S.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3",children:"Nombre"}),S.jsx("th",{className:"px-6 py-3",children:"Tipo"}),S.jsx("th",{className:"px-6 py-3",children:"Persona"}),S.jsx("th",{className:"px-6 py-3",children:"Ciudad"}),S.jsx("th",{className:"px-6 py-3",children:"Teléfono"}),S.jsx("th",{className:"px-6 py-3",children:"Correo"})]})}),S.jsx("tbody",{children:e.map(g=>S.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[S.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[g.name," ",g.lastName]}),S.jsx("td",{className:"px-6 py-4 capitalize",children:g.type}),S.jsx("td",{className:"px-6 py-4 capitalize",children:g.personType}),S.jsx("td",{className:"px-6 py-4",children:g.city}),S.jsx("td",{className:"px-6 py-4",children:g.phone}),S.jsx("td",{className:"px-6 py-4",children:g.email})]},g.id))})]})}),S.jsx(nA,{isOpen:s,onClose:()=>l(!1),children:S.jsxs("form",{onSubmit:y,className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[S.jsx("h2",{className:"text-xl font-semibold",children:"Crear un tercero"}),S.jsxs("div",{className:"space-x-2",children:[S.jsx(Gn,{type:"button",variant:"secondary",onClick:()=>l(!1),children:"Cancelar"}),S.jsx(Gn,{type:"submit",variant:"primary",children:"Guardar"})]})]}),S.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[S.jsx("p",{className:"font-medium mb-2",children:"Tipo de tercero"}),S.jsx("div",{className:"flex space-x-6",children:["cliente","proveedor","otro"].map(g=>S.jsxs("label",{className:"flex items-center space-x-2",children:[S.jsx("input",{type:"radio",name:"type",value:g,checked:c.type===g,onChange:p,className:"h-5 w-5 text-blue-600"}),S.jsx("span",{className:"capitalize",children:g})]},g))})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-white p-4 rounded-lg border",children:[S.jsxs(gh,{id:"personType",name:"personType",label:"Tipo de Persona",value:c.personType,onChange:p,children:[S.jsx("option",{value:"persona",children:"Persona"}),S.jsx("option",{value:"empresa",children:"Empresa"})]}),S.jsx(gh,{id:"idType",name:"idType",label:"Tipo de Identificación",value:c.idType,onChange:p,children:c.personType==="persona"?S.jsx("option",{value:"CC",children:"Cédula de Ciudadanía (CC)"}):S.jsx("option",{value:"NIT",children:"NIT"})}),S.jsx(rn,{id:"name",name:"name",label:"Nombres",value:c.name,onChange:p,required:!0}),c.personType==="persona"&&S.jsx(rn,{id:"lastName",name:"lastName",label:"Apellidos",value:c.lastName,onChange:p}),S.jsx(rn,{id:"tradeName",name:"tradeName",label:"Nombre Comercial",value:c.tradeName,onChange:p}),S.jsx(rn,{id:"city",name:"city",label:"Ciudad",value:c.city,onChange:p}),S.jsx(rn,{id:"address",name:"address",label:"Dirección",value:c.address,onChange:p}),S.jsx(rn,{id:"phone",name:"phone",label:"Teléfono",value:c.phone,onChange:p}),S.jsx(rn,{id:"email",name:"email",type:"email",label:"Correo Electrónico",value:c.email,onChange:p})]})]})})]})},oN=({isOpen:r,onClose:e,onSubmit:n,clients:s,products:l})=>{const[c,d]=Me.useState(""),[p,y]=Me.useState(new Date().toISOString().split("T")[0]),[g,T]=Me.useState([{productId:"",quantity:1,price:0}]),[R,I]=Me.useState(0),z=(ie,ee,re)=>{const Ae=[...g];if(Ae[ie][ee]=re,ee==="productId"){const me=l.find(Re=>Re.id===re);me&&(Ae[ie].price=me.price||0)}T(Ae)},F=()=>{T([...g,{productId:"",quantity:1,price:0}])},J=ie=>{const ee=g.filter((re,Ae)=>Ae!==ie);T(ee)};Me.useEffect(()=>{(()=>{const ee=g.reduce((re,Ae)=>{const me=parseFloat(Ae.quantity)||0,Re=parseFloat(Ae.price)||0;return re+me*Re},0);I(ee)})()},[g]);const W=ie=>{ie.preventDefault();const ee={clientId:c,date:new Date(p),items:g.map(re=>({...re,quantity:Number(re.quantity),price:Number(re.price)})),total:R};n(ee),d(""),y(new Date().toISOString().split("T")[0]),T([{productId:"",quantity:1,price:0}])};return S.jsx(nA,{isOpen:r,onClose:e,title:"Crear Nueva Factura de Venta",children:S.jsxs("form",{onSubmit:W,className:"space-y-4",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs(gh,{id:"client",label:"Cliente",value:c,onChange:ie=>d(ie.target.value),required:!0,children:[S.jsx("option",{value:"",children:"Seleccione un cliente"}),s.map(ie=>S.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),S.jsx(rn,{id:"date",label:"Fecha",type:"date",value:p,onChange:ie=>y(ie.target.value),required:!0})]}),S.jsx("h4",{className:"text-md font-semibold pt-4 border-t mt-4",children:"Ítems de la Factura"}),g.map((ie,ee)=>S.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[S.jsx("div",{className:"col-span-5",children:S.jsxs(gh,{value:ie.productId,onChange:re=>z(ee,"productId",re.target.value),children:[S.jsx("option",{value:"",children:"Seleccione producto"}),l.map(re=>S.jsx("option",{value:re.id,children:re.name},re.id))]})}),S.jsx("div",{className:"col-span-2",children:S.jsx(rn,{type:"number",value:ie.quantity,onChange:re=>z(ee,"quantity",re.target.value),placeholder:"Cant.",min:"1"})}),S.jsx("div",{className:"col-span-3",children:S.jsx(rn,{type:"number",value:ie.price,onChange:re=>z(ee,"price",re.target.value),placeholder:"Precio"})}),S.jsx("div",{className:"col-span-2 flex justify-end",children:S.jsx(Gn,{type:"button",variant:"danger",onClick:()=>J(ee),children:Et.trash})})]},ee)),S.jsx(Gn,{type:"button",variant:"secondary",onClick:F,children:"Añadir Ítem"}),S.jsx("div",{className:"text-right pt-4 border-t mt-4",children:S.jsxs("p",{className:"text-lg font-bold",children:["Total: $",new Intl.NumberFormat("es-CO").format(R)]})}),S.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[S.jsx(Gn,{type:"button",variant:"secondary",onClick:e,children:"Cancelar"}),S.jsx(Gn,{type:"submit",variant:"primary",children:"Guardar Factura"})]})]})})};function lN(){return S.jsx(nN,{children:S.jsx(uN,{})})}const uN=()=>{const{user:r,loading:e,error:n}=au();return e?S.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50",children:S.jsx(iA,{})}):n?S.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50 p-4",children:S.jsx(rA,{message:n})}):r?S.jsx(rN,{}):S.jsx(iN,{})};zS.createRoot(document.getElementById("root")).render(S.jsx(Me.StrictMode,{children:S.jsx(lN,{})}));

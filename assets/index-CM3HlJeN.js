(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function zS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gd={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function BS(){if(Y_)return bl;Y_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return bl.Fragment=e,bl.jsx=n,bl.jsxs=n,bl}var X_;function qS(){return X_||(X_=1,Gd.exports=BS()),Gd.exports}var E=qS(),Qd={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function HS(){if($_)return Ce;$_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=b&&x[b]||x["@@iterator"],typeof x=="function"?x:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,ne={};function te(x,W,oe){this.props=x,this.context=W,this.refs=ne,this.updater=oe||z}te.prototype.isReactComponent={},te.prototype.setState=function(x,W){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,W,"setState")},te.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function re(){}re.prototype=te.prototype;function ee(x,W,oe){this.props=x,this.context=W,this.refs=ne,this.updater=oe||z}var ue=ee.prototype=new re;ue.constructor=ee,K(ue,te.prototype),ue.isPureReactComponent=!0;var se=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function D(x,W,oe,J,_e,xe){return oe=xe.ref,{$$typeof:r,type:x,key:W,ref:oe!==void 0?oe:null,props:xe}}function w(x,W){return D(x.type,W,void 0,void 0,void 0,x.props)}function C(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function V(x){var W={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(oe){return W[oe]})}var M=/\/+/g;function k(x,W){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):W.toString(36)}function N(){}function Rt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(N,N):(x.status="pending",x.then(function(W){x.status==="pending"&&(x.status="fulfilled",x.value=W)},function(W){x.status==="pending"&&(x.status="rejected",x.reason=W)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function de(x,W,oe,J,_e){var xe=typeof x;(xe==="undefined"||xe==="boolean")&&(x=null);var be=!1;if(x===null)be=!0;else switch(xe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(x.$$typeof){case r:case e:be=!0;break;case A:return be=x._init,de(be(x._payload),W,oe,J,_e)}}if(be)return _e=_e(x),be=J===""?"."+k(x,0):J,se(_e)?(oe="",be!=null&&(oe=be.replace(M,"$&/")+"/"),de(_e,W,oe,"",function($n){return $n})):_e!=null&&(C(_e)&&(_e=w(_e,oe+(_e.key==null||x&&x.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+be)),W.push(_e)),1;be=0;var Vt=J===""?".":J+":";if(se(x))for(var Je=0;Je<x.length;Je++)J=x[Je],xe=Vt+k(J,Je),be+=de(J,W,oe,xe,_e);else if(Je=I(x),typeof Je=="function")for(x=Je.call(x),Je=0;!(J=x.next()).done;)J=J.value,xe=Vt+k(J,Je++),be+=de(J,W,oe,xe,_e);else if(xe==="object"){if(typeof x.then=="function")return de(Rt(x),W,oe,J,_e);throw W=String(x),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return be}function H(x,W,oe){if(x==null)return x;var J=[],_e=0;return de(x,J,"","",function(xe){return W.call(oe,xe,_e++)}),J}function ie(x){if(x._status===-1){var W=x._result;W=W(),W.then(function(oe){(x._status===0||x._status===-1)&&(x._status=1,x._result=oe)},function(oe){(x._status===0||x._status===-1)&&(x._status=2,x._result=oe)}),x._status===-1&&(x._status=0,x._result=W)}if(x._status===1)return x._result.default;throw x._result}var ce=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Ie(){}return Ce.Children={map:H,forEach:function(x,W,oe){H(x,function(){W.apply(this,arguments)},oe)},count:function(x){var W=0;return H(x,function(){W++}),W},toArray:function(x){return H(x,function(W){return W})||[]},only:function(x){if(!C(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ce.Component=te,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=ee,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(x){return G.H.useMemoCache(x)}},Ce.cache=function(x){return function(){return x.apply(null,arguments)}},Ce.cloneElement=function(x,W,oe){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var J=K({},x.props),_e=x.key,xe=void 0;if(W!=null)for(be in W.ref!==void 0&&(xe=void 0),W.key!==void 0&&(_e=""+W.key),W)!fe.call(W,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&W.ref===void 0||(J[be]=W[be]);var be=arguments.length-2;if(be===1)J.children=oe;else if(1<be){for(var Vt=Array(be),Je=0;Je<be;Je++)Vt[Je]=arguments[Je+2];J.children=Vt}return D(x.type,_e,void 0,void 0,xe,J)},Ce.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},Ce.createElement=function(x,W,oe){var J,_e={},xe=null;if(W!=null)for(J in W.key!==void 0&&(xe=""+W.key),W)fe.call(W,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(_e[J]=W[J]);var be=arguments.length-2;if(be===1)_e.children=oe;else if(1<be){for(var Vt=Array(be),Je=0;Je<be;Je++)Vt[Je]=arguments[Je+2];_e.children=Vt}if(x&&x.defaultProps)for(J in be=x.defaultProps,be)_e[J]===void 0&&(_e[J]=be[J]);return D(x,xe,void 0,void 0,null,_e)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(x){return{$$typeof:p,render:x}},Ce.isValidElement=C,Ce.lazy=function(x){return{$$typeof:A,_payload:{_status:-1,_result:x},_init:ie}},Ce.memo=function(x,W){return{$$typeof:y,type:x,compare:W===void 0?null:W}},Ce.startTransition=function(x){var W=G.T,oe={};G.T=oe;try{var J=x(),_e=G.S;_e!==null&&_e(oe,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Ie,ce)}catch(xe){ce(xe)}finally{G.T=W}},Ce.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Ce.use=function(x){return G.H.use(x)},Ce.useActionState=function(x,W,oe){return G.H.useActionState(x,W,oe)},Ce.useCallback=function(x,W){return G.H.useCallback(x,W)},Ce.useContext=function(x){return G.H.useContext(x)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(x,W){return G.H.useDeferredValue(x,W)},Ce.useEffect=function(x,W,oe){var J=G.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(x,W)},Ce.useId=function(){return G.H.useId()},Ce.useImperativeHandle=function(x,W,oe){return G.H.useImperativeHandle(x,W,oe)},Ce.useInsertionEffect=function(x,W){return G.H.useInsertionEffect(x,W)},Ce.useLayoutEffect=function(x,W){return G.H.useLayoutEffect(x,W)},Ce.useMemo=function(x,W){return G.H.useMemo(x,W)},Ce.useOptimistic=function(x,W){return G.H.useOptimistic(x,W)},Ce.useReducer=function(x,W,oe){return G.H.useReducer(x,W,oe)},Ce.useRef=function(x){return G.H.useRef(x)},Ce.useState=function(x){return G.H.useState(x)},Ce.useSyncExternalStore=function(x,W,oe){return G.H.useSyncExternalStore(x,W,oe)},Ce.useTransition=function(){return G.H.useTransition()},Ce.version="19.1.1",Ce}var Z_;function Lm(){return Z_||(Z_=1,Qd.exports=HS()),Qd.exports}var pe=Lm();const FS=zS(pe);var Kd={exports:{}},wl={},Yd={exports:{}},Xd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function GS(){return W_||(W_=1,(function(r){function e(H,ie){var ce=H.length;H.push(ie);e:for(;0<ce;){var Ie=ce-1>>>1,x=H[Ie];if(0<l(x,ie))H[Ie]=ie,H[ce]=x,ce=Ie;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var ie=H[0],ce=H.pop();if(ce!==ie){H[0]=ce;e:for(var Ie=0,x=H.length,W=x>>>1;Ie<W;){var oe=2*(Ie+1)-1,J=H[oe],_e=oe+1,xe=H[_e];if(0>l(J,ce))_e<x&&0>l(xe,J)?(H[Ie]=xe,H[_e]=ce,Ie=_e):(H[Ie]=J,H[oe]=ce,Ie=oe);else if(_e<x&&0>l(xe,ce))H[Ie]=xe,H[_e]=ce,Ie=_e;else break e}}return ie}function l(H,ie){var ce=H.sortIndex-ie.sortIndex;return ce!==0?ce:H.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],A=1,b=null,I=3,z=!1,K=!1,ne=!1,te=!1,re=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function se(H){for(var ie=n(y);ie!==null;){if(ie.callback===null)s(y);else if(ie.startTime<=H)s(y),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=n(y)}}function G(H){if(ne=!1,se(H),!K)if(n(g)!==null)K=!0,fe||(fe=!0,k());else{var ie=n(y);ie!==null&&de(G,ie.startTime-H)}}var fe=!1,D=-1,w=5,C=-1;function V(){return te?!0:!(r.unstable_now()-C<w)}function M(){if(te=!1,fe){var H=r.unstable_now();C=H;var ie=!0;try{e:{K=!1,ne&&(ne=!1,ee(D),D=-1),z=!0;var ce=I;try{t:{for(se(H),b=n(g);b!==null&&!(b.expirationTime>H&&V());){var Ie=b.callback;if(typeof Ie=="function"){b.callback=null,I=b.priorityLevel;var x=Ie(b.expirationTime<=H);if(H=r.unstable_now(),typeof x=="function"){b.callback=x,se(H),ie=!0;break t}b===n(g)&&s(g),se(H)}else s(g);b=n(g)}if(b!==null)ie=!0;else{var W=n(y);W!==null&&de(G,W.startTime-H),ie=!1}}break e}finally{b=null,I=ce,z=!1}ie=void 0}}finally{ie?k():fe=!1}}}var k;if(typeof ue=="function")k=function(){ue(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Rt=N.port2;N.port1.onmessage=M,k=function(){Rt.postMessage(null)}}else k=function(){re(M,0)};function de(H,ie){D=re(function(){H(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(H){switch(I){case 1:case 2:case 3:var ie=3;break;default:ie=I}var ce=I;I=ie;try{return H()}finally{I=ce}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=I;I=H;try{return ie()}finally{I=ce}},r.unstable_scheduleCallback=function(H,ie,ce){var Ie=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ie+ce:Ie):ce=Ie,H){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=ce+x,H={id:A++,callback:ie,priorityLevel:H,startTime:ce,expirationTime:x,sortIndex:-1},ce>Ie?(H.sortIndex=ce,e(y,H),n(g)===null&&H===n(y)&&(ne?(ee(D),D=-1):ne=!0,de(G,ce-Ie))):(H.sortIndex=x,e(g,H),K||z||(K=!0,fe||(fe=!0,k()))),H},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(H){var ie=I;return function(){var ce=I;I=ie;try{return H.apply(this,arguments)}finally{I=ce}}}})(Xd)),Xd}var J_;function QS(){return J_||(J_=1,Yd.exports=GS()),Yd.exports}var $d={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function KS(){if(ev)return $t;ev=1;var r=Lm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)y+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,A){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:y,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(g,y){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,A)},$t.flushSync=function(g){var y=d.T,A=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=A,s.d.f()}},$t.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},$t.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},$t.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var A=y.as,b=p(A,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;A==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:I,fetchPriority:z}):A==="script"&&s.d.X(g,{crossOrigin:b,integrity:I,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},$t.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var A=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},$t.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var A=y.as,b=p(A,y.crossOrigin);s.d.L(g,A,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},$t.preloadModule=function(g,y){if(typeof g=="string")if(y){var A=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},$t.requestFormReset=function(g){s.d.r(g)},$t.unstable_batchedUpdates=function(g,y){return g(y)},$t.useFormState=function(g,y,A){return d.H.useFormState(g,y,A)},$t.useFormStatus=function(){return d.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var tv;function YS(){if(tv)return $d.exports;tv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),$d.exports=KS(),$d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function XS(){if(nv)return wl;nv=1;var r=QS(),e=Lm(),n=YS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=f;break}if(T===o){v=!0,o=h,a=f;break}T=T.sibling}if(!v){for(T=f.child;T;){if(T===a){v=!0,a=f,o=h;break}if(T===o){v=!0,o=f,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,b=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case te:return"Profiler";case ne:return"StrictMode";case G:return"Suspense";case fe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ue:return(t.displayName||"Context")+".Provider";case ee:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Rt(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Rt(t(i))}catch{}}return null}var de=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ie=[],x=-1;function W(t){return{current:t}}function oe(t){0>x||(t.current=Ie[x],Ie[x]=null,x--)}function J(t,i){x++,Ie[x]=t.current,t.current=i}var _e=W(null),xe=W(null),be=W(null),Vt=W(null);function Je(t,i){switch(J(be,i),J(xe,t),J(_e,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?A_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=A_(i),t=S_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(_e),J(_e,t)}function $n(){oe(_e),oe(xe),oe(be)}function rr(t){t.memoizedState!==null&&J(Vt,t);var i=_e.current,a=S_(i,t.type);i!==a&&(J(xe,t),J(_e,a))}function Ai(t){xe.current===t&&(oe(_e),oe(xe)),Vt.current===t&&(oe(Vt),vl._currentValue=ce)}var is=Object.prototype.hasOwnProperty,rs=r.unstable_scheduleCallback,ss=r.unstable_cancelCallback,go=r.unstable_shouldYield,gu=r.unstable_requestPaint,bn=r.unstable_now,Fh=r.unstable_getCurrentPriorityLevel,yo=r.unstable_ImmediatePriority,Js=r.unstable_UserBlockingPriority,as=r.unstable_NormalPriority,Gh=r.unstable_LowPriority,ea=r.unstable_IdlePriority,_o=r.log,yu=r.unstable_setDisableYieldValue,ut=null,Ge=null;function dn(t){if(typeof _o=="function"&&yu(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ut,t)}catch{}}var Yt=Math.clz32?Math.clz32:os,_u=Math.log,Qh=Math.LN2;function os(t){return t>>>=0,t===0?32:31-(_u(t)/Qh|0)|0}var ls=256,us=4194304;function zn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ta(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~f,o!==0?h=zn(o):(v&=T,v!==0?h=zn(v):a||(a=T&~t,a!==0&&(h=zn(a))))):(T=o&~f,T!==0?h=zn(T):v!==0?h=zn(v):a||(a=o&~t,a!==0&&(h=zn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function cs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function vo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eo(){var t=ls;return ls<<=1,(ls&4194048)===0&&(ls=256),t}function To(){var t=us;return us<<=1,(us&62914560)===0&&(us=4194304),t}function Si(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function bi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ao(t,i,a,o,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,R=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Yt(a),$=1<<Q;T[Q]=0,R[Q]=-1;var B=j[Q];if(B!==null)for(j[Q]=null,Q=0;Q<B.length;Q++){var q=B[Q];q!==null&&(q.lane&=-536870913)}a&=~$}o!==0&&Zn(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~i))}function Zn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Yt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function So(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Yt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function na(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ar(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:q_(t.type))}function vu(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var rt=Math.random().toString(36).slice(2),It="__reactFiber$"+rt,vt="__reactProps$"+rt,wn="__reactContainer$"+rt,bo="__reactEvents$"+rt,Kh="__reactListeners$"+rt,or="__reactHandles$"+rt,Eu="__reactResources$"+rt,hs="__reactMarker$"+rt;function lr(t){delete t[It],delete t[vt],delete t[bo],delete t[Kh],delete t[or]}function wi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[wn]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=I_(t);t!==null;){if(a=t[It])return a;t=I_(t)}return i}t=a,a=t.parentNode}return null}function Wn(t){if(t=t[It]||t[wn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Jn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function tn(t){var i=t[Eu];return i||(i=t[Eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(t){t[hs]=!0}var wo=new Set,ia={};function Bn(t,i){Ri(t,i),Ri(t+"Capture",i)}function Ri(t,i){for(ia[t]=i,t=0;t<i.length;t++)wo.add(i[t])}var Tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Au={},fs={};function Su(t){return is.call(fs,t)?!0:is.call(Au,t)?!1:Tu.test(t)?fs[t]=!0:(Au[t]=!0,!1)}function ur(t,i,a){if(Su(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ei(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function zt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var ds,bu;function Ii(t){if(ds===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ds=i&&i[1]||"",bu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+t+bu}var ra=!1;function sa(t,i){if(!t||ra)return"";ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var B=q}Reflect.construct(t,[],$)}else{try{$.call()}catch(q){B=q}t.call($.prototype)}}else{try{throw Error()}catch(q){B=q}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],T=f[1];if(v&&T){var R=v.split(`
`),j=T.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===j.length)for(o=R.length-1,h=j.length-1;1<=o&&0<=h&&R[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==j[h]){var Q=`
`+R[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ra=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ii(a):""}function Ro(t){switch(t.tag){case 26:case 27:case 5:return Ii(t.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return sa(t.type,!1);case 11:return sa(t.type.render,!1);case 1:return sa(t.type,!0);case 31:return Ii("Activity");default:return""}}function aa(t){try{var i="";do i+=Ro(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Io(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yh(t){var i=Io(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function oa(t){t._valueTracker||(t._valueTracker=Yh(t))}function Co(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Io(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xh=/[\n"\\]/g;function Et(t){return t.replace(Xh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(t,i,a,o,h,f,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+nn(i)):t.value!==""+nn(i)&&(t.value=""+nn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?cr(t,v,nn(i)):a!=null?cr(t,v,nn(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+nn(T):t.removeAttribute("name")}function ps(t,i,a,o,h,f,v,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function cr(t,i,a){i==="number"&&ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ci(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ye(t,i,a){if(i!=null&&(i=""+nn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+nn(a):""}function gs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(de(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=nn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function Rn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wu(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ys.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function No(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&wu(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&wu(t,f,i[f])}function xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(t){return Zh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ni=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xi=null,Di=null;function Do(t){var i=Wn(t);if(i&&(t=i.stateNode)){var a=t[vt]||null;e:switch(t=i.stateNode,i.type){case"input":if(mn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[vt]||null;if(!h)throw Error(s(90));mn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Co(o)}break e;case"textarea":Ye(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ci(t,!!a.multiple,i,!1)}}}var ti=!1;function Ru(t,i,a){if(ti)return t(i,a);ti=!0;try{var o=t(i);return o}finally{if(ti=!1,(xi!==null||Di!==null)&&(vc(),xi&&(i=xi,t=Di,Di=xi=null,Do(i),t)))for(i=0;i<t.length;i++)Do(t[i])}}function _s(t,i){var a=t.stateNode;if(a===null)return null;var o=a[vt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cn=!1;if(qn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Cn=!1}var ni=null,hr=null,Oi=null;function Oo(){if(Oi)return Oi;var t,i=hr,a=i.length,o,h="value"in ni?ni.value:ni.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Oi=h.slice(t,1<o?1-o:void 0)}function ii(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function Vo(){return!1}function Mt(t){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ri:Vo,this.isPropagationStopped=Vo,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Mt(He),Es=A({},He,{view:0,detail:0}),Iu=Mt(Es),ca,ha,si,Ts=A({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(ca=t.screenX-si.screenX,ha=t.screenY-si.screenY):ha=ca=0,si=t),ca)},movementY:function(t){return"movementY"in t?t.movementY:ha}}),Nn=Mt(Ts),Cu=A({},Ts,{dataTransfer:0}),Wh=Mt(Cu),As=A({},Es,{relatedTarget:0}),fa=Mt(As),Mo=A({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),da=Mt(Mo),Nu=A({},He,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ma=Mt(Nu),Jh=A({},He,{data:0}),Po=Mt(Jh),Ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ko(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Du[t])?!!i[t]:!1}function bs(){return ko}var Ou=A({},Es,{key:function(t){if(t.key){var i=Ss[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pa=Mt(Ou),Vu=A({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lo=Mt(Vu),Vi=A({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Mu=Mt(Vi),Pu=A({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),ku=Mt(Pu),Lu=A({},Ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ga=Mt(Lu),rn=A({},He,{newState:0,oldState:0}),Uu=Mt(rn),ju=[9,13,27,32],ai=qn&&"CompositionEvent"in window,u=null;qn&&"documentMode"in document&&(u=document.documentMode);var m=qn&&"TextEvent"in window&&!u,_=qn&&(!ai||u&&8<u&&11>=u),S=" ",L=!1;function F(t,i){switch(t){case"keyup":return ju.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Le=!1;function Ct(t,i){switch(t){case"compositionend":return ae(i);case"keypress":return i.which!==32?null:(L=!0,S);case"textInput":return t=i.data,t===S&&L?null:t;default:return null}}function Ue(t,i){if(Le)return t==="compositionend"||!ai&&F(t,i)?(t=Oo(),Oi=hr=ni=null,Le=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Pt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Pt[t.type]:i==="textarea"}function Mi(t,i,a,o){xi?Di?Di.push(o):Di=[o]:xi=o,i=wc(i,"onChange"),0<i.length&&(a=new ua("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Bt=null,oi=null;function Uo(t){y_(t,0)}function zu(t){var i=Jn(t);if(Co(i))return t}function Up(t,i){if(t==="change")return i}var jp=!1;if(qn){var ef;if(qn){var tf="oninput"in document;if(!tf){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),tf=typeof zp.oninput=="function"}ef=tf}else ef=!1;jp=ef&&(!document.documentMode||9<document.documentMode)}function Bp(){Bt&&(Bt.detachEvent("onpropertychange",qp),oi=Bt=null)}function qp(t){if(t.propertyName==="value"&&zu(oi)){var i=[];Mi(i,oi,t,In(t)),Ru(Uo,i)}}function gA(t,i,a){t==="focusin"?(Bp(),Bt=i,oi=a,Bt.attachEvent("onpropertychange",qp)):t==="focusout"&&Bp()}function yA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(oi)}function _A(t,i){if(t==="click")return zu(i)}function vA(t,i){if(t==="input"||t==="change")return zu(i)}function EA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var pn=typeof Object.is=="function"?Object.is:EA;function jo(t,i){if(pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!is.call(i,h)||!pn(t[h],i[h]))return!1}return!0}function Hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,i){var a=Hp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hp(a)}}function Gp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Gp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Qp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ms(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ms(t.document)}return i}function nf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var TA=qn&&"documentMode"in document&&11>=document.documentMode,ya=null,rf=null,zo=null,sf=!1;function Kp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sf||ya==null||ya!==ms(o)||(o=ya,"selectionStart"in o&&nf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zo&&jo(zo,o)||(zo=o,o=wc(rf,"onSelect"),0<o.length&&(i=new ua("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ya)))}function ws(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var _a={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},af={},Yp={};qn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Rs(t){if(af[t])return af[t];if(!_a[t])return t;var i=_a[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Yp)return af[t]=i[a];return t}var Xp=Rs("animationend"),$p=Rs("animationiteration"),Zp=Rs("animationstart"),AA=Rs("transitionrun"),SA=Rs("transitionstart"),bA=Rs("transitioncancel"),Wp=Rs("transitionend"),Jp=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function Hn(t,i){Jp.set(t,i),Bn(i,[t])}var eg=new WeakMap;function xn(t,i){if(typeof t=="object"&&t!==null){var a=eg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:aa(i)},eg.set(t,i),i)}return{value:t,source:i,stack:aa(i)}}var Dn=[],va=0,lf=0;function Bu(){for(var t=va,i=lf=va=0;i<t;){var a=Dn[i];Dn[i++]=null;var o=Dn[i];Dn[i++]=null;var h=Dn[i];Dn[i++]=null;var f=Dn[i];if(Dn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&tg(a,h,f)}}function qu(t,i,a,o){Dn[va++]=t,Dn[va++]=i,Dn[va++]=a,Dn[va++]=o,lf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function uf(t,i,a,o){return qu(t,i,a,o),Hu(t)}function Ea(t,i){return qu(t,null,null,i),Hu(t)}function tg(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Yt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Hu(t){if(50<hl)throw hl=0,pd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ta={};function wA(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,o){return new wA(t,i,a,o)}function cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ng(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Fu(t,i,a,o,h,f){var v=0;if(o=t,typeof t=="function")cf(t)&&(v=1);else if(typeof t=="string")v=IS(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=gn(31,a,i,h),t.elementType=C,t.lanes=f,t;case K:return Is(a.children,h,f,i);case ne:v=8,h|=24;break;case te:return t=gn(12,a,i,h|2),t.elementType=te,t.lanes=f,t;case G:return t=gn(13,a,i,h),t.elementType=G,t.lanes=f,t;case fe:return t=gn(19,a,i,h),t.elementType=fe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:case ue:v=10;break e;case ee:v=9;break e;case se:v=11;break e;case D:v=14;break e;case w:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=gn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function Is(t,i,a,o){return t=gn(7,t,o,i),t.lanes=a,t}function hf(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function ff(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Aa=[],Sa=0,Gu=null,Qu=0,On=[],Vn=0,Cs=null,ki=1,Li="";function Ns(t,i){Aa[Sa++]=Qu,Aa[Sa++]=Gu,Gu=t,Qu=i}function ig(t,i,a){On[Vn++]=ki,On[Vn++]=Li,On[Vn++]=Cs,Cs=t;var o=ki;t=Li;var h=32-Yt(o)-1;o&=~(1<<h),a+=1;var f=32-Yt(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,ki=1<<32-Yt(i)+h|a<<h|o,Li=f+t}else ki=1<<f|a<<h|o,Li=t}function df(t){t.return!==null&&(Ns(t,1),ig(t,1,0))}function mf(t){for(;t===Gu;)Gu=Aa[--Sa],Aa[Sa]=null,Qu=Aa[--Sa],Aa[Sa]=null;for(;t===Cs;)Cs=On[--Vn],On[Vn]=null,Li=On[--Vn],On[Vn]=null,ki=On[--Vn],On[Vn]=null}var sn=null,ct=null,qe=!1,xs=null,li=!1,pf=Error(s(519));function Ds(t){var i=Error(s(418,""));throw Ho(xn(i,t)),pf}function rg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[It]=t,i[vt]=o,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<dl.length;a++)Ve(dl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),ps(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),oa(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),gs(i,o.value,o.defaultValue,o.children),oa(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||T_(i.textContent,a)?(o.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),o.onScroll!=null&&Ve("scroll",i),o.onScrollEnd!=null&&Ve("scrollend",i),o.onClick!=null&&(i.onclick=Rc),i=!0):i=!1,i||Ds(t)}function sg(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:sn=sn.return}}function Bo(t){if(t!==sn)return!1;if(!qe)return sg(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Dd(t.type,t.memoizedProps)),a=!a),a&&ct&&Ds(t),sg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ct=Gn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ct=null}}else i===27?(i=ct,Ir(t.type)?(t=Pd,Pd=null,ct=t):ct=i):ct=sn?Gn(t.stateNode.nextSibling):null;return!0}function qo(){ct=sn=null,qe=!1}function ag(){var t=xs;return t!==null&&(cn===null?cn=t:cn.push.apply(cn,t),xs=null),t}function Ho(t){xs===null?xs=[t]:xs.push(t)}var gf=W(null),Os=null,Ui=null;function fr(t,i,a){J(gf,i._currentValue),i._currentValue=a}function ji(t){t._currentValue=gf.current,oe(gf)}function yf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function _f(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var R=0;R<i.length;R++)if(T.context===i[R]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),yf(f.return,a,t),o||(v=null);break e}f=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),yf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Fo(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;pn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===Vt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(vl):t=[vl])}h=h.return}t!==null&&_f(i,t,a,o),i.flags|=262144}function Ku(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vs(t){Os=t,Ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return og(Os,t)}function Yu(t,i){return Os===null&&Vs(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ui===null){if(t===null)throw Error(s(308));Ui=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ui=Ui.next=i;return a}var RA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},IA=r.unstable_scheduleCallback,CA=r.unstable_NormalPriority,xt={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new RA,data:new Map,refCount:0}}function Go(t){t.refCount--,t.refCount===0&&IA(CA,function(){t.controller.abort()})}var Qo=null,Ef=0,ba=0,wa=null;function NA(t,i){if(Qo===null){var a=Qo=[];Ef=0,ba=Ad(),wa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ef++,i.then(lg,lg),i}function lg(){if(--Ef===0&&Qo!==null){wa!==null&&(wa.status="fulfilled");var t=Qo;Qo=null,ba=0,wa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function xA(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var ug=H.S;H.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&NA(t,i),ug!==null&&ug(t,i)};var Ms=W(null);function Tf(){var t=Ms.current;return t!==null?t:et.pooledCache}function Xu(t,i){i===null?J(Ms,Ms.current):J(Ms,i.pool)}function cg(){var t=Tf();return t===null?null:{parent:xt._currentValue,pool:t}}var Ko=Error(s(460)),hg=Error(s(474)),$u=Error(s(542)),Af={then:function(){}};function fg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zu(){}function dg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Zu,Zu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t;default:if(typeof i.status=="string")i.then(Zu,Zu);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,pg(t),t}throw Yo=i,Ko}}var Yo=null;function mg(){if(Yo===null)throw Error(s(459));var t=Yo;return Yo=null,t}function pg(t){if(t===Ko||t===$u)throw Error(s(483))}var dr=!1;function Sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Qe&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Hu(t),tg(t,null,a),i}return qu(t,o,i,a),Hu(t)}function Xo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,So(t,a)}}function wf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Rf=!1;function $o(){if(Rf){var t=wa;if(t!==null)throw t}}function Zo(t,i,a,o){Rf=!1;var h=t.updateQueue;dr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,j=R.next;R.next=null,v===null?f=j:v.next=j,v=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=j:T.next=j,Q.lastBaseUpdate=R))}if(f!==null){var $=h.baseState;v=0,Q=j=R=null,T=f;do{var B=T.lane&-536870913,q=B!==T.lane;if(q?(je&B)===B:(o&B)===B){B!==0&&B===ba&&(Rf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Se=t,ve=T;B=i;var Ze=a;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){$=Se.call(Ze,$,B);break e}$=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,B=typeof Se=="function"?Se.call(Ze,$,B):Se,B==null)break e;$=A({},$,B);break e;case 2:dr=!0}}B=T.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(j=Q=q,R=$):Q=Q.next=q,v|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(R=$),h.baseState=R,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),Sr|=v,t.lanes=v,t.memoizedState=$}}function gg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function yg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)gg(a[t],i)}var Ra=W(null),Wu=W(0);function _g(t,i){t=Qi,J(Wu,t),J(Ra,i),Qi=t|i.baseLanes}function If(){J(Wu,Qi),J(Ra,Ra.current)}function Cf(){Qi=Wu.current,oe(Ra),oe(Wu)}var gr=0,Ne=null,Xe=null,Tt=null,Ju=!1,Ia=!1,Ps=!1,ec=0,Wo=0,Ca=null,DA=0;function pt(){throw Error(s(321))}function Nf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!pn(t[a],i[a]))return!1;return!0}function xf(t,i,a,o,h,f){return gr=f,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?ty:ny,Ps=!1,f=a(o,h),Ps=!1,Ia&&(f=Eg(i,a,o,h)),vg(t),f}function vg(t){H.H=ac;var i=Xe!==null&&Xe.next!==null;if(gr=0,Tt=Xe=Ne=null,Ju=!1,Wo=0,Ca=null,i)throw Error(s(300));t===null||kt||(t=t.dependencies,t!==null&&Ku(t)&&(kt=!0))}function Eg(t,i,a,o){Ne=t;var h=0;do{if(Ia&&(Ca=null),Wo=0,Ia=!1,25<=h)throw Error(s(301));if(h+=1,Tt=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=UA,f=i(a,o)}while(Ia);return f}function OA(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?Jo(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ne.flags|=1024),i}function Df(){var t=ec!==0;return ec=0,t}function Of(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Vf(t){if(Ju){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ju=!1}gr=0,Tt=Xe=Ne=null,Ia=!1,Wo=ec=0,Ca=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function At(){if(Xe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=Tt===null?Ne.memoizedState:Tt.next;if(i!==null)Tt=i,Xe=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jo(t){var i=Wo;return Wo+=1,Ca===null&&(Ca=[]),t=dg(Ca,t,i),i=Ne,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?ty:ny),t}function tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Jo(t);if(t.$$typeof===ue)return Xt(t)}throw Error(s(438,String(t)))}function Pf(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Mf(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=V;return i.index++,a}function zi(t,i){return typeof i=="function"?i(t):i}function nc(t){var i=At();return kf(i,Xe,t)}function kf(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=v=null,R=null,j=i,Q=!1;do{var $=j.lane&-536870913;if($!==j.lane?(je&$)===$:(gr&$)===$){var B=j.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),$===ba&&(Q=!0);else if((gr&B)===B){j=j.next,B===ba&&(Q=!0);continue}else $={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=$,v=f):R=R.next=$,Ne.lanes|=B,Sr|=B;$=j.action,Ps&&a(f,$),f=j.hasEagerState?j.eagerState:a(f,$)}else B={lane:$,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=B,v=f):R=R.next=B,Ne.lanes|=$,Sr|=$;j=j.next}while(j!==null&&j!==i);if(R===null?v=f:R.next=T,!pn(f,t.memoizedState)&&(kt=!0,Q&&(a=wa,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=R,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Lf(t){var i=At(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);pn(f,i.memoizedState)||(kt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Tg(t,i,a){var o=Ne,h=At(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!pn((Xe||h).memoizedState,a);v&&(h.memoizedState=a,kt=!0),h=h.queue;var T=bg.bind(null,o,h,t);if(el(2048,8,T,[t]),h.getSnapshot!==i||v||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,Na(9,ic(),Sg.bind(null,o,h,a,i),null),et===null)throw Error(s(349));f||(gr&124)!==0||Ag(o,i,a)}return a}function Ag(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=Mf(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Sg(t,i,a,o){i.value=a,i.getSnapshot=o,wg(i)&&Rg(t)}function bg(t,i,a){return a(function(){wg(i)&&Rg(t)})}function wg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!pn(t,a)}catch{return!0}}function Rg(t){var i=Ea(t,2);i!==null&&Tn(i,t,2)}function Uf(t){var i=ln();if(typeof t=="function"){var a=t;if(t=a(),Ps){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},i}function Ig(t,i,a,o){return t.baseState=a,kf(t,Xe,typeof o=="function"?o:zi)}function VA(t,i,a,o,h){if(sc(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Cg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Cg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var T=a(h,o),R=H.S;R!==null&&R(v,T),Ng(t,i,T)}catch(j){jf(t,i,j)}finally{H.T=f}}else try{f=a(h,o),Ng(t,i,f)}catch(j){jf(t,i,j)}}function Ng(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){xg(t,i,o)},function(o){return jf(t,i,o)}):xg(t,i,a)}function xg(t,i,a){i.status="fulfilled",i.value=a,Dg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Cg(t,a)))}function jf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Dg(i),i=i.next;while(i!==o)}t.action=null}function Dg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Og(t,i){return i}function Vg(t,i){if(qe){var a=et.formState;if(a!==null){e:{var o=Ne;if(qe){if(ct){t:{for(var h=ct,f=li;h.nodeType!==8;){if(!f){h=null;break t}if(h=Gn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ct=Gn(h.nextSibling),o=h.data==="F!";break e}}Ds(o)}o=!1}o&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:i},a.queue=o,a=Wg.bind(null,Ne,o),o.dispatch=a,o=Uf(!1),f=Ff.bind(null,Ne,!1,o.queue),o=ln(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=VA.bind(null,Ne,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Mg(t){var i=At();return Pg(i,Xe,t)}function Pg(t,i,a){if(i=kf(t,i,Og)[0],t=nc(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Jo(i)}catch(v){throw v===Ko?$u:v}else o=i;i=At();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,Na(9,ic(),MA.bind(null,h,a),null)),[o,f,t]}function MA(t,i){t.action=i}function kg(t){var i=At(),a=Xe;if(a!==null)return Pg(i,a,t);At(),i=i.memoizedState,a=At();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Na(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Mf(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function ic(){return{destroy:void 0,resource:void 0}}function Lg(){return At().memoizedState}function rc(t,i,a,o){var h=ln();o=o===void 0?null:o,Ne.flags|=t,h.memoizedState=Na(1|i,ic(),a,o)}function el(t,i,a,o){var h=At();o=o===void 0?null:o;var f=h.memoizedState.inst;Xe!==null&&o!==null&&Nf(o,Xe.memoizedState.deps)?h.memoizedState=Na(i,f,a,o):(Ne.flags|=t,h.memoizedState=Na(1|i,f,a,o))}function Ug(t,i){rc(8390656,8,t,i)}function jg(t,i){el(2048,8,t,i)}function zg(t,i){return el(4,2,t,i)}function Bg(t,i){return el(4,4,t,i)}function qg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Hg(t,i,a){a=a!=null?a.concat([t]):null,el(4,4,qg.bind(null,i,t),a)}function zf(){}function Fg(t,i){var a=At();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Nf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Gg(t,i){var a=At();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Nf(i,o[1]))return o[0];if(o=t(),Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o}function Bf(t,i,a){return a===void 0||(gr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Yy(),Ne.lanes|=t,Sr|=t,a)}function Qg(t,i,a,o){return pn(a,i)?a:Ra.current!==null?(t=Bf(t,a,o),pn(t,i)||(kt=!0),t):(gr&42)===0?(kt=!0,t.memoizedState=a):(t=Yy(),Ne.lanes|=t,Sr|=t,i)}function Kg(t,i,a,o,h){var f=ie.p;ie.p=f!==0&&8>f?f:8;var v=H.T,T={};H.T=T,Ff(t,!1,i,a);try{var R=h(),j=H.S;if(j!==null&&j(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Q=xA(R,o);tl(t,i,Q,En(t))}else tl(t,i,o,En(t))}catch($){tl(t,i,{then:function(){},status:"rejected",reason:$},En())}finally{ie.p=f,H.T=v}}function PA(){}function qf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=Yg(t).queue;Kg(t,h,i,ce,a===null?PA:function(){return Xg(t),a(o)})}function Yg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Xg(t){var i=Yg(t).next.queue;tl(t,i,{},En())}function Hf(){return Xt(vl)}function $g(){return At().memoizedState}function Zg(){return At().memoizedState}function kA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();t=mr(a);var o=pr(i,t,a);o!==null&&(Tn(o,i,a),Xo(o,i,a)),i={cache:vf()},t.payload=i;return}i=i.return}}function LA(t,i,a){var o=En();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},sc(t)?Jg(i,a):(a=uf(t,i,a,o),a!==null&&(Tn(a,t,o),ey(a,i,o)))}function Wg(t,i,a){var o=En();tl(t,i,a,o)}function tl(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(sc(t))Jg(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,T=f(v,a);if(h.hasEagerState=!0,h.eagerState=T,pn(T,v))return qu(t,i,h,0),et===null&&Bu(),!1}catch{}finally{}if(a=uf(t,i,h,o),a!==null)return Tn(a,t,o),ey(a,i,o),!0}return!1}function Ff(t,i,a,o){if(o={lane:2,revertLane:Ad(),action:o,hasEagerState:!1,eagerState:null,next:null},sc(t)){if(i)throw Error(s(479))}else i=uf(t,a,o,2),i!==null&&Tn(i,t,2)}function sc(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function Jg(t,i){Ia=Ju=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ey(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,So(t,a)}}var ac={readContext:Xt,use:tc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},ty={readContext:Xt,use:tc,useCallback:function(t,i){return ln().memoizedState=[t,i===void 0?null:i],t},useContext:Xt,useEffect:Ug,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,rc(4194308,4,qg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return rc(4194308,4,t,i)},useInsertionEffect:function(t,i){rc(4,2,t,i)},useMemo:function(t,i){var a=ln();i=i===void 0?null:i;var o=t();if(Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=ln();if(a!==void 0){var h=a(i);if(Ps){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=LA.bind(null,Ne,t),[o.memoizedState,t]},useRef:function(t){var i=ln();return t={current:t},i.memoizedState=t},useState:function(t){t=Uf(t);var i=t.queue,a=Wg.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:zf,useDeferredValue:function(t,i){var a=ln();return Bf(a,t,i)},useTransition:function(){var t=Uf(!1);return t=Kg.bind(null,Ne,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ne,h=ln();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),et===null)throw Error(s(349));(je&124)!==0||Ag(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Ug(bg.bind(null,o,f,t),[t]),o.flags|=2048,Na(9,ic(),Sg.bind(null,o,f,a,i),null),a},useId:function(){var t=ln(),i=et.identifierPrefix;if(qe){var a=Li,o=ki;a=(o&~(1<<32-Yt(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=ec++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=DA++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Hf,useFormState:Vg,useActionState:Vg,useOptimistic:function(t){var i=ln();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ff.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:Pf,useCacheRefresh:function(){return ln().memoizedState=kA.bind(null,Ne)}},ny={readContext:Xt,use:tc,useCallback:Fg,useContext:Xt,useEffect:jg,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:Bg,useMemo:Gg,useReducer:nc,useRef:Lg,useState:function(){return nc(zi)},useDebugValue:zf,useDeferredValue:function(t,i){var a=At();return Qg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=nc(zi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:Jo(t),i]},useSyncExternalStore:Tg,useId:$g,useHostTransitionStatus:Hf,useFormState:Mg,useActionState:Mg,useOptimistic:function(t,i){var a=At();return Ig(a,Xe,t,i)},useMemoCache:Pf,useCacheRefresh:Zg},UA={readContext:Xt,use:tc,useCallback:Fg,useContext:Xt,useEffect:jg,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:Bg,useMemo:Gg,useReducer:Lf,useRef:Lg,useState:function(){return Lf(zi)},useDebugValue:zf,useDeferredValue:function(t,i){var a=At();return Xe===null?Bf(a,t,i):Qg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Lf(zi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:Jo(t),i]},useSyncExternalStore:Tg,useId:$g,useHostTransitionStatus:Hf,useFormState:kg,useActionState:kg,useOptimistic:function(t,i){var a=At();return Xe!==null?Ig(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Pf,useCacheRefresh:Zg},xa=null,nl=0;function oc(t){var i=nl;return nl+=1,xa===null&&(xa=[]),dg(xa,t,i)}function il(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function lc(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function iy(t){var i=t._init;return i(t._payload)}function ry(t){function i(P,O){if(t){var U=P.deletions;U===null?(P.deletions=[O],P.flags|=16):U.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)i(P,O),O=O.sibling;return null}function o(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=Pi(P,O),P.index=0,P.sibling=null,P}function f(P,O,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<O?(P.flags|=67108866,O):U):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,O,U,Y){return O===null||O.tag!==6?(O=hf(U,P.mode,Y),O.return=P,O):(O=h(O,U),O.return=P,O)}function R(P,O,U,Y){var me=U.type;return me===K?Q(P,O,U.props.children,Y,U.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&iy(me)===O.type)?(O=h(O,U.props),il(O,U),O.return=P,O):(O=Fu(U.type,U.key,U.props,null,P.mode,Y),il(O,U),O.return=P,O)}function j(P,O,U,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=ff(U,P.mode,Y),O.return=P,O):(O=h(O,U.children||[]),O.return=P,O)}function Q(P,O,U,Y,me){return O===null||O.tag!==7?(O=Is(U,P.mode,Y,me),O.return=P,O):(O=h(O,U),O.return=P,O)}function $(P,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=hf(""+O,P.mode,U),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return U=Fu(O.type,O.key,O.props,null,P.mode,U),il(U,O),U.return=P,U;case z:return O=ff(O,P.mode,U),O.return=P,O;case w:var Y=O._init;return O=Y(O._payload),$(P,O,U)}if(de(O)||k(O))return O=Is(O,P.mode,U,null),O.return=P,O;if(typeof O.then=="function")return $(P,oc(O),U);if(O.$$typeof===ue)return $(P,Yu(P,O),U);lc(P,O)}return null}function B(P,O,U,Y){var me=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return me!==null?null:T(P,O,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===me?R(P,O,U,Y):null;case z:return U.key===me?j(P,O,U,Y):null;case w:return me=U._init,U=me(U._payload),B(P,O,U,Y)}if(de(U)||k(U))return me!==null?null:Q(P,O,U,Y,null);if(typeof U.then=="function")return B(P,O,oc(U),Y);if(U.$$typeof===ue)return B(P,O,Yu(P,U),Y);lc(P,U)}return null}function q(P,O,U,Y,me){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(U)||null,T(O,P,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return P=P.get(Y.key===null?U:Y.key)||null,R(O,P,Y,me);case z:return P=P.get(Y.key===null?U:Y.key)||null,j(O,P,Y,me);case w:var De=Y._init;return Y=De(Y._payload),q(P,O,U,Y,me)}if(de(Y)||k(Y))return P=P.get(U)||null,Q(O,P,Y,me,null);if(typeof Y.then=="function")return q(P,O,U,oc(Y),me);if(Y.$$typeof===ue)return q(P,O,U,Yu(O,Y),me);lc(O,Y)}return null}function Se(P,O,U,Y){for(var me=null,De=null,ge=O,Ee=O=0,Ut=null;ge!==null&&Ee<U.length;Ee++){ge.index>Ee?(Ut=ge,ge=null):Ut=ge.sibling;var Be=B(P,ge,U[Ee],Y);if(Be===null){ge===null&&(ge=Ut);break}t&&ge&&Be.alternate===null&&i(P,ge),O=f(Be,O,Ee),De===null?me=Be:De.sibling=Be,De=Be,ge=Ut}if(Ee===U.length)return a(P,ge),qe&&Ns(P,Ee),me;if(ge===null){for(;Ee<U.length;Ee++)ge=$(P,U[Ee],Y),ge!==null&&(O=f(ge,O,Ee),De===null?me=ge:De.sibling=ge,De=ge);return qe&&Ns(P,Ee),me}for(ge=o(ge);Ee<U.length;Ee++)Ut=q(ge,P,Ee,U[Ee],Y),Ut!==null&&(t&&Ut.alternate!==null&&ge.delete(Ut.key===null?Ee:Ut.key),O=f(Ut,O,Ee),De===null?me=Ut:De.sibling=Ut,De=Ut);return t&&ge.forEach(function(Or){return i(P,Or)}),qe&&Ns(P,Ee),me}function ve(P,O,U,Y){if(U==null)throw Error(s(151));for(var me=null,De=null,ge=O,Ee=O=0,Ut=null,Be=U.next();ge!==null&&!Be.done;Ee++,Be=U.next()){ge.index>Ee?(Ut=ge,ge=null):Ut=ge.sibling;var Or=B(P,ge,Be.value,Y);if(Or===null){ge===null&&(ge=Ut);break}t&&ge&&Or.alternate===null&&i(P,ge),O=f(Or,O,Ee),De===null?me=Or:De.sibling=Or,De=Or,ge=Ut}if(Be.done)return a(P,ge),qe&&Ns(P,Ee),me;if(ge===null){for(;!Be.done;Ee++,Be=U.next())Be=$(P,Be.value,Y),Be!==null&&(O=f(Be,O,Ee),De===null?me=Be:De.sibling=Be,De=Be);return qe&&Ns(P,Ee),me}for(ge=o(ge);!Be.done;Ee++,Be=U.next())Be=q(ge,P,Ee,Be.value,Y),Be!==null&&(t&&Be.alternate!==null&&ge.delete(Be.key===null?Ee:Be.key),O=f(Be,O,Ee),De===null?me=Be:De.sibling=Be,De=Be);return t&&ge.forEach(function(jS){return i(P,jS)}),qe&&Ns(P,Ee),me}function Ze(P,O,U,Y){if(typeof U=="object"&&U!==null&&U.type===K&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:e:{for(var me=U.key;O!==null;){if(O.key===me){if(me=U.type,me===K){if(O.tag===7){a(P,O.sibling),Y=h(O,U.props.children),Y.return=P,P=Y;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===w&&iy(me)===O.type){a(P,O.sibling),Y=h(O,U.props),il(Y,U),Y.return=P,P=Y;break e}a(P,O);break}else i(P,O);O=O.sibling}U.type===K?(Y=Is(U.props.children,P.mode,Y,U.key),Y.return=P,P=Y):(Y=Fu(U.type,U.key,U.props,null,P.mode,Y),il(Y,U),Y.return=P,P=Y)}return v(P);case z:e:{for(me=U.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(P,O.sibling),Y=h(O,U.children||[]),Y.return=P,P=Y;break e}else{a(P,O);break}else i(P,O);O=O.sibling}Y=ff(U,P.mode,Y),Y.return=P,P=Y}return v(P);case w:return me=U._init,U=me(U._payload),Ze(P,O,U,Y)}if(de(U))return Se(P,O,U,Y);if(k(U)){if(me=k(U),typeof me!="function")throw Error(s(150));return U=me.call(U),ve(P,O,U,Y)}if(typeof U.then=="function")return Ze(P,O,oc(U),Y);if(U.$$typeof===ue)return Ze(P,O,Yu(P,U),Y);lc(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(P,O.sibling),Y=h(O,U),Y.return=P,P=Y):(a(P,O),Y=hf(U,P.mode,Y),Y.return=P,P=Y),v(P)):a(P,O)}return function(P,O,U,Y){try{nl=0;var me=Ze(P,O,U,Y);return xa=null,me}catch(ge){if(ge===Ko||ge===$u)throw ge;var De=gn(29,ge,null,P.mode);return De.lanes=Y,De.return=P,De}finally{}}}var Da=ry(!0),sy=ry(!1),Mn=W(null),ui=null;function yr(t){var i=t.alternate;J(Dt,Dt.current&1),J(Mn,t),ui===null&&(i===null||Ra.current!==null||i.memoizedState!==null)&&(ui=t)}function ay(t){if(t.tag===22){if(J(Dt,Dt.current),J(Mn,t),ui===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ui=t)}}else _r()}function _r(){J(Dt,Dt.current),J(Mn,Mn.current)}function Bi(t){oe(Mn),ui===t&&(ui=null),oe(Dt)}var Dt=W(0);function uc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Md(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Gf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Qf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=En(),h=mr(o);h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,o),i!==null&&(Tn(i,t,o),Xo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=En(),h=mr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,o),i!==null&&(Tn(i,t,o),Xo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=En(),o=mr(a);o.tag=2,i!=null&&(o.callback=i),i=pr(t,o,a),i!==null&&(Tn(i,t,a),Xo(i,t,a))}};function oy(t,i,a,o,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!jo(a,o)||!jo(h,f):!0}function ly(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Qf.enqueueReplaceState(i,i.state,null)}function ks(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var cc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function uy(t){cc(t)}function cy(t){console.error(t)}function hy(t){cc(t)}function hc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function fy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Kf(t,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){hc(t,i)},a}function dy(t){return t=mr(t),t.tag=3,t}function my(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){fy(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){fy(i,a,o),typeof h!="function"&&(br===null?br=new Set([this]):br.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function jA(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Fo(i,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return ui===null?yd():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Af?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),vd(t,o,h)),!1;case 22:return a.flags|=65536,o===Af?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),vd(t,o,h)),!1}throw Error(s(435,a.tag))}return vd(t,o,h),yd(),!1}if(qe)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==pf&&(t=Error(s(422),{cause:o}),Ho(xn(t,a)))):(o!==pf&&(i=Error(s(423),{cause:o}),Ho(xn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=xn(o,a),h=Kf(t.stateNode,o,h),wf(t,h),ht!==4&&(ht=2)),!1;var f=Error(s(520),{cause:o});if(f=xn(f,a),cl===null?cl=[f]:cl.push(f),ht!==4&&(ht=2),i===null)return!0;o=xn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Kf(a.stateNode,o,t),wf(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(br===null||!br.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=dy(h),my(h,t,a,o),wf(a,h),!1}a=a.return}while(a!==null);return!1}var py=Error(s(461)),kt=!1;function qt(t,i,a,o){i.child=t===null?sy(i,null,a,o):Da(i,t.child,a,o)}function gy(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Vs(i),o=xf(t,i,a,v,f,h),T=Df(),t!==null&&!kt?(Of(t,i,h),qi(t,i,h)):(qe&&T&&df(i),i.flags|=1,qt(t,i,o,h),i.child)}function yy(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!cf(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,_y(t,i,f,o,h)):(t=Fu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!td(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:jo,a(v,o)&&t.ref===i.ref)return qi(t,i,h)}return i.flags|=1,t=Pi(f,o),t.ref=i.ref,t.return=i,i.child=t}function _y(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(jo(f,o)&&t.ref===i.ref)if(kt=!1,i.pendingProps=o=f,td(t,h))(t.flags&131072)!==0&&(kt=!0);else return i.lanes=t.lanes,qi(t,i,h)}return Yf(t,i,a,o,h)}function vy(t,i,a){var o=i.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Ey(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xu(i,f!==null?f.cachePool:null),f!==null?_g(i,f):If(),ay(i);else return i.lanes=i.childLanes=536870912,Ey(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Xu(i,f.cachePool),_g(i,f),_r(),i.memoizedState=null):(t!==null&&Xu(i,null),If(),_r());return qt(t,i,h,a),i.child}function Ey(t,i,a,o){var h=Tf();return h=h===null?null:{parent:xt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Xu(i,null),If(),ay(i),t!==null&&Fo(t,i,o,!0),null}function fc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Yf(t,i,a,o,h){return Vs(i),a=xf(t,i,a,o,void 0,h),o=Df(),t!==null&&!kt?(Of(t,i,h),qi(t,i,h)):(qe&&o&&df(i),i.flags|=1,qt(t,i,a,h),i.child)}function Ty(t,i,a,o,h,f){return Vs(i),i.updateQueue=null,a=Eg(i,o,a,h),vg(t),o=Df(),t!==null&&!kt?(Of(t,i,f),qi(t,i,f)):(qe&&o&&df(i),i.flags|=1,qt(t,i,a,f),i.child)}function Ay(t,i,a,o,h){if(Vs(i),i.stateNode===null){var f=Ta,v=a.contextType;typeof v=="object"&&v!==null&&(f=Xt(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},Sf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Xt(v):Ta,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Gf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Qf.enqueueReplaceState(f,f.state,null),Zo(i,o,f,h),$o(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,R=ks(a,T);f.props=R;var j=f.context,Q=a.contextType;v=Ta,typeof Q=="object"&&Q!==null&&(v=Xt(Q));var $=a.getDerivedStateFromProps;Q=typeof $=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||j!==v)&&ly(i,f,o,v),dr=!1;var B=i.memoizedState;f.state=B,Zo(i,o,f,h),$o(),j=i.memoizedState,T||B!==j||dr?(typeof $=="function"&&(Gf(i,a,$,o),j=i.memoizedState),(R=dr||oy(i,a,R,o,B,j,v))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=v,o=R):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,bf(t,i),v=i.memoizedProps,Q=ks(a,v),f.props=Q,$=i.pendingProps,B=f.context,j=a.contextType,R=Ta,typeof j=="object"&&j!==null&&(R=Xt(j)),T=a.getDerivedStateFromProps,(j=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==$||B!==R)&&ly(i,f,o,R),dr=!1,B=i.memoizedState,f.state=B,Zo(i,o,f,h),$o();var q=i.memoizedState;v!==$||B!==q||dr||t!==null&&t.dependencies!==null&&Ku(t.dependencies)?(typeof T=="function"&&(Gf(i,a,T,o),q=i.memoizedState),(Q=dr||oy(i,a,Q,o,B,q,R)||t!==null&&t.dependencies!==null&&Ku(t.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,R)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),f.props=o,f.state=q,f.context=R,o=Q):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,fc(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Da(i,t.child,null,h),i.child=Da(i,null,a,h)):qt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=qi(t,i,h),t}function Sy(t,i,a,o){return qo(),i.flags|=256,qt(t,i,a,o),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(t){return{baseLanes:t,cachePool:cg()}}function Zf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Pn),t}function by(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?yr(i):_r(),qe){var T=ct,R;if(R=T){e:{for(R=T,T=li;R.nodeType!==8;){if(!T){T=null;break e}if(R=Gn(R.nextSibling),R===null){T=null;break e}}T=R}T!==null?(i.memoizedState={dehydrated:T,treeContext:Cs!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},R=gn(18,null,null,0),R.stateNode=T,R.return=i,i.child=R,sn=i,ct=null,R=!0):R=!1}R||Ds(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Md(T)?i.lanes=32:i.lanes=536870912,null;Bi(i)}return T=o.children,o=o.fallback,h?(_r(),h=i.mode,T=dc({mode:"hidden",children:T},h),o=Is(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,h=i.child,h.memoizedState=$f(a),h.childLanes=Zf(t,v,a),i.memoizedState=Xf,o):(yr(i),Wf(i,T))}if(R=t.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(f)i.flags&256?(yr(i),i.flags&=-257,i=Jf(t,i,a)):i.memoizedState!==null?(_r(),i.child=t.child,i.flags|=128,i=null):(_r(),h=o.fallback,T=i.mode,o=dc({mode:"visible",children:o.children},T),h=Is(h,T,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Da(i,t.child,null,a),o=i.child,o.memoizedState=$f(a),o.childLanes=Zf(t,v,a),i.memoizedState=Xf,i=h);else if(yr(i),Md(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,Ho({value:o,source:null,stack:null}),i=Jf(t,i,a)}else if(kt||Fo(t,i,a,!1),v=(a&t.childLanes)!==0,kt||v){if(v=et,v!==null&&(o=a&-a,o=(o&42)!==0?1:sr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,Ea(t,o),Tn(v,t,o),py;T.data==="$?"||yd(),i=Jf(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,ct=Gn(T.nextSibling),sn=i,qe=!0,xs=null,li=!1,t!==null&&(On[Vn++]=ki,On[Vn++]=Li,On[Vn++]=Cs,ki=t.id,Li=t.overflow,Cs=i),i=Wf(i,o.children),i.flags|=4096);return i}return h?(_r(),h=o.fallback,T=i.mode,R=t.child,j=R.sibling,o=Pi(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,j!==null?h=Pi(j,h):(h=Is(h,T,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,T=t.child.memoizedState,T===null?T=$f(a):(R=T.cachePool,R!==null?(j=xt._currentValue,R=R.parent!==j?{parent:j,pool:j}:R):R=cg(),T={baseLanes:T.baseLanes|a,cachePool:R}),h.memoizedState=T,h.childLanes=Zf(t,v,a),i.memoizedState=Xf,o):(yr(i),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Wf(t,i){return i=dc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function dc(t,i){return t=gn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Jf(t,i,a){return Da(i,t.child,null,a),t=Wf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function wy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),yf(t.return,i,a)}function ed(t,i,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Ry(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(qt(t,i,o.children,a),o=Dt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wy(t,a,i);else if(t.tag===19)wy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(J(Dt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&uc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ed(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&uc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ed(i,!0,a,null,f);break;case"together":ed(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Sr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Fo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Pi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function td(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ku(t)))}function zA(t,i,a){switch(i.tag){case 3:Je(i,i.stateNode.containerInfo),fr(i,xt,t.memoizedState.cache),qo();break;case 27:case 5:rr(i);break;case 4:Je(i,i.stateNode.containerInfo);break;case 10:fr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?by(t,i,a):(yr(i),t=qi(t,i,a),t!==null?t.sibling:null);yr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Fo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Ry(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Dt,Dt.current),o)break;return null;case 22:case 23:return i.lanes=0,vy(t,i,a);case 24:fr(i,xt,t.memoizedState.cache)}return qi(t,i,a)}function Iy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)kt=!0;else{if(!td(t,a)&&(i.flags&128)===0)return kt=!1,zA(t,i,a);kt=(t.flags&131072)!==0}else kt=!1,qe&&(i.flags&1048576)!==0&&ig(i,Qu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")cf(o)?(t=ks(o,t),i.tag=1,i=Ay(null,i,o,t,a)):(i.tag=0,i=Yf(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===se){i.tag=11,i=gy(null,i,o,t,a);break e}else if(h===D){i.tag=14,i=yy(null,i,o,t,a);break e}}throw i=Rt(o)||o,Error(s(306,i,""))}}return i;case 0:return Yf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ks(o,i.pendingProps),Ay(t,i,o,h,a);case 3:e:{if(Je(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,bf(t,i),Zo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,fr(i,xt,o),o!==f.cache&&_f(i,[xt],a,!0),$o(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Sy(t,i,o,a);break e}else if(o!==h){h=xn(Error(s(424)),i),Ho(h),i=Sy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ct=Gn(t.firstChild),sn=i,qe=!0,xs=null,li=!0,a=sy(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qo(),o===h){i=qi(t,i,a);break e}qt(t,i,o,a)}i=i.child}return i;case 26:return fc(t,i),t===null?(a=D_(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,o=Ic(be.current).createElement(a),o[It]=i,o[vt]=t,Ft(o,a,t),mt(o),i.stateNode=o):i.memoizedState=D_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return rr(i),t===null&&qe&&(o=i.stateNode=C_(i.type,i.pendingProps,be.current),sn=i,li=!0,h=ct,Ir(i.type)?(Pd=h,ct=Gn(o.firstChild)):ct=h),qt(t,i,i.pendingProps.children,a),fc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=o=ct)&&(o=mS(o,i.type,i.pendingProps,li),o!==null?(i.stateNode=o,sn=i,ct=Gn(o.firstChild),li=!1,h=!0):h=!1),h||Ds(i)),rr(i),h=i.type,f=i.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,Dd(h,f)?o=null:v!==null&&Dd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=xf(t,i,OA,null,null,a),vl._currentValue=h),fc(t,i),qt(t,i,o,a),i.child;case 6:return t===null&&qe&&((t=a=ct)&&(a=pS(a,i.pendingProps,li),a!==null?(i.stateNode=a,sn=i,ct=null,t=!0):t=!1),t||Ds(i)),null;case 13:return by(t,i,a);case 4:return Je(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Da(i,null,o,a):qt(t,i,o,a),i.child;case 11:return gy(t,i,i.type,i.pendingProps,a);case 7:return qt(t,i,i.pendingProps,a),i.child;case 8:return qt(t,i,i.pendingProps.children,a),i.child;case 12:return qt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,fr(i,i.type,o.value),qt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Vs(i),h=Xt(h),o=o(h),i.flags|=1,qt(t,i,o,a),i.child;case 14:return yy(t,i,i.type,i.pendingProps,a);case 15:return _y(t,i,i.type,i.pendingProps,a);case 19:return Ry(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=dc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Pi(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return vy(t,i,a);case 24:return Vs(i),o=Xt(xt),t===null?(h=Tf(),h===null&&(h=et,f=vf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},Sf(i),fr(i,xt,h)):((t.lanes&a)!==0&&(bf(t,i),Zo(i,null,null,a),$o()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fr(i,xt,o)):(o=f.cache,fr(i,xt,o),o!==h.cache&&_f(i,[xt],a,!0))),qt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Hi(t){t.flags|=4}function Cy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!k_(i)){if(i=Mn.current,i!==null&&((je&4194048)===je?ui!==null:(je&62914560)!==je&&(je&536870912)===0||i!==ui))throw Yo=Af,hg;t.flags|=8192}}function mc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?To():536870912,t.lanes|=i,Pa|=i)}function rl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function at(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function BA(t,i,a){var o=i.pendingProps;switch(mf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ji(xt),$n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Bo(i)?Hi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ag())),at(i),null;case 26:return a=i.memoizedState,t===null?(Hi(i),a!==null?(at(i),Cy(i,a)):(at(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Hi(i),at(i),Cy(i,a)):(at(i),i.flags&=-16777217):(t.memoizedProps!==o&&Hi(i),at(i),i.flags&=-16777217),null;case 27:Ai(i),a=be.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return at(i),null}t=_e.current,Bo(i)?rg(i):(t=C_(h,o,a),i.stateNode=t,Hi(i))}return at(i),null;case 5:if(Ai(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return at(i),null}if(t=_e.current,Bo(i))rg(i);else{switch(h=Ic(be.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[It]=i,t[vt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Ft(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Hi(i)}}return at(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=be.current,Bo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||T_(t.nodeValue,a)),t||Ds(i)}else t=Ic(t).createTextNode(o),t[It]=i,i.stateNode=t}return at(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Bo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[It]=i}else qo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),h=!1}else h=ag(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),mc(i,i.updateQueue),at(i),null;case 4:return $n(),t===null&&Rd(i.stateNode.containerInfo),at(i),null;case 10:return ji(i.type),at(i),null;case 19:if(oe(Dt),h=i.memoizedState,h===null)return at(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)rl(h,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=uc(t),f!==null){for(i.flags|=128,rl(h,!1),t=f.updateQueue,i.updateQueue=t,mc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ng(a,t),a=a.sibling;return J(Dt,Dt.current&1|2),i.child}t=t.sibling}h.tail!==null&&bn()>yc&&(i.flags|=128,o=!0,rl(h,!1),i.lanes=4194304)}else{if(!o)if(t=uc(f),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,mc(i,t),rl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return at(i),null}else 2*bn()-h.renderingStartTime>yc&&a!==536870912&&(i.flags|=128,o=!0,rl(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=bn(),i.sibling=null,t=Dt.current,J(Dt,o?t&1|2:t&1),i):(at(i),null);case 22:case 23:return Bi(i),Cf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&mc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&oe(Ms),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(xt),at(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function qA(t,i){switch(mf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ji(xt),$n(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 13:if(Bi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));qo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Dt),null;case 4:return $n(),null;case 10:return ji(i.type),null;case 22:case 23:return Bi(i),Cf(),t!==null&&oe(Ms),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ji(xt),null;case 25:return null;default:return null}}function Ny(t,i){switch(mf(i),i.tag){case 3:ji(xt),$n();break;case 26:case 27:case 5:Ai(i);break;case 4:$n();break;case 13:Bi(i);break;case 19:oe(Dt);break;case 10:ji(i.type);break;case 22:case 23:Bi(i),Cf(),t!==null&&oe(Ms);break;case 24:ji(xt)}}function sl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){We(i,i.return,T)}}function vr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var R=a,j=T;try{j()}catch(Q){We(h,R,Q)}}}o=o.next}while(o!==f)}}catch(Q){We(i,i.return,Q)}}function xy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{yg(i,a)}catch(o){We(t,t.return,o)}}}function Dy(t,i,a){a.props=ks(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){We(t,i,o)}}function al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){We(t,i,h)}}function ci(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function Oy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function nd(t,i,a){try{var o=t.stateNode;uS(o,t.type,a,i),o[vt]=i}catch(h){We(t,t.return,h)}}function Vy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ir(t.type)||t.tag===4}function id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Rc));else if(o!==4&&(o===27&&Ir(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(rd(t,i,a),t=t.sibling;t!==null;)rd(t,i,a),t=t.sibling}function pc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Ir(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(pc(t,i,a),t=t.sibling;t!==null;)pc(t,i,a),t=t.sibling}function My(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,o,a),i[It]=t,i[vt]=a}catch(f){We(t,t.return,f)}}var Fi=!1,gt=!1,sd=!1,Py=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function HA(t,i){if(t=t.containerInfo,Nd=Vc,t=Qp(t),nf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,T=-1,R=-1,j=0,Q=0,$=t,B=null;t:for(;;){for(var q;$!==a||h!==0&&$.nodeType!==3||(T=v+h),$!==f||o!==0&&$.nodeType!==3||(R=v+o),$.nodeType===3&&(v+=$.nodeValue.length),(q=$.firstChild)!==null;)B=$,$=q;for(;;){if($===t)break t;if(B===a&&++j===h&&(T=v),B===f&&++Q===o&&(R=v),(q=$.nextSibling)!==null)break;$=B,B=$.parentNode}$=q}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(xd={focusedElem:t,selectionRange:a},Vc=!1,Lt=i;Lt!==null;)if(i=Lt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Lt=t;else for(;Lt!==null;){switch(i=Lt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Se=ks(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Se,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(ve){We(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Lt=t;break}Lt=i.return}}function ky(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(t,a),o&4&&sl(5,a);break;case 1:if(Er(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){We(a,a.return,v)}else{var h=ks(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}o&64&&xy(a),o&512&&al(a,a.return);break;case 3:if(Er(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{yg(t,i)}catch(v){We(a,a.return,v)}}break;case 27:i===null&&o&4&&My(a);case 26:case 5:Er(t,a),i===null&&o&4&&Oy(a),o&512&&al(a,a.return);break;case 12:Er(t,a);break;case 13:Er(t,a),o&4&&jy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=WA.bind(null,a),gS(t,a))));break;case 22:if(o=a.memoizedState!==null||Fi,!o){i=i!==null&&i.memoizedState!==null||gt,h=Fi;var f=gt;Fi=o,(gt=i)&&!f?Tr(t,a,(a.subtreeFlags&8772)!==0):Er(t,a),Fi=h,gt=f}break;case 30:break;default:Er(t,a)}}function Ly(t){var i=t.alternate;i!==null&&(t.alternate=null,Ly(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&lr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,un=!1;function Gi(t,i,a){for(a=a.child;a!==null;)Uy(t,i,a),a=a.sibling}function Uy(t,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:gt||ci(a,i),Gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||ci(a,i);var o=st,h=un;Ir(a.type)&&(st=a.stateNode,un=!1),Gi(t,i,a),pl(a.stateNode),st=o,un=h;break;case 5:gt||ci(a,i);case 6:if(o=st,h=un,st=null,Gi(t,i,a),st=o,un=h,st!==null)if(un)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(f){We(a,i,f)}else try{st.removeChild(a.stateNode)}catch(f){We(a,i,f)}break;case 18:st!==null&&(un?(t=st,R_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Sl(t)):R_(st,a.stateNode));break;case 4:o=st,h=un,st=a.stateNode.containerInfo,un=!0,Gi(t,i,a),st=o,un=h;break;case 0:case 11:case 14:case 15:gt||vr(2,a,i),gt||vr(4,a,i),Gi(t,i,a);break;case 1:gt||(ci(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Dy(a,i,o)),Gi(t,i,a);break;case 21:Gi(t,i,a);break;case 22:gt=(o=gt)||a.memoizedState!==null,Gi(t,i,a),gt=o;break;default:Gi(t,i,a)}}function jy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Sl(t)}catch(a){We(i,i.return,a)}}function FA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Py),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Py),i;default:throw Error(s(435,t.tag))}}function ad(t,i){var a=FA(t);i.forEach(function(o){var h=JA.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function yn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Ir(T.type)){st=T.stateNode,un=!1;break e}break;case 5:st=T.stateNode,un=!1;break e;case 3:case 4:st=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(st===null)throw Error(s(160));Uy(f,v,h),st=null,un=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)zy(i,t),i=i.sibling}var Fn=null;function zy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yn(i,t),_n(t),o&4&&(vr(3,t,t.return),sl(3,t),vr(5,t,t.return));break;case 1:yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),o&64&&Fi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Fn;if(yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[hs]||f[It]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ft(f,o,a),f[It]=t,mt(f),o=f;break e;case"link":var v=M_("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(f=v[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}f=h.createElement(o),Ft(f,o,a),h.head.appendChild(f);break;case"meta":if(v=M_("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(f=v[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}f=h.createElement(o),Ft(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[It]=t,mt(f),o=f}t.stateNode=o}else P_(h,t.type,t.stateNode);else t.stateNode=V_(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?P_(h,t.type,t.stateNode):V_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&nd(t,t.memoizedProps,a.memoizedProps)}break;case 27:yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),a!==null&&o&4&&nd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),t.flags&32){h=t.stateNode;try{Rn(h,"")}catch(q){We(t,t.return,q)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,nd(t,h,a!==null?a.memoizedProps:h)),o&1024&&(sd=!0);break;case 6:if(yn(i,t),_n(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(q){We(t,t.return,q)}}break;case 3:if(xc=null,h=Fn,Fn=Cc(i.containerInfo),yn(i,t),Fn=h,_n(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Sl(i.containerInfo)}catch(q){We(t,t.return,q)}sd&&(sd=!1,By(t));break;case 4:o=Fn,Fn=Cc(t.stateNode.containerInfo),yn(i,t),_n(t),Fn=o;break;case 12:yn(i,t),_n(t);break;case 13:yn(i,t),_n(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fd=bn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ad(t,o)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,j=Fi,Q=gt;if(Fi=j||h,gt=Q||R,yn(i,t),gt=Q,Fi=j,_n(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Fi||gt||Ls(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(f=R.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=R.stateNode;var $=R.memoizedProps.style,B=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){We(R,R.return,q)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(q){We(R,R.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ad(t,a))));break;case 19:yn(i,t),_n(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ad(t,o)));break;case 30:break;case 21:break;default:yn(i,t),_n(t)}}function _n(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Vy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=id(t);pc(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Rn(v,""),a.flags&=-33);var T=id(t);pc(t,T,v);break;case 3:case 4:var R=a.stateNode.containerInfo,j=id(t);rd(t,j,R);break;default:throw Error(s(161))}}catch(Q){We(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function By(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;By(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Er(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ky(t,i.alternate,i),i=i.sibling}function Ls(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:vr(4,i,i.return),Ls(i);break;case 1:ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Dy(i,i.return,a),Ls(i);break;case 27:pl(i.stateNode);case 26:case 5:ci(i,i.return),Ls(i);break;case 22:i.memoizedState===null&&Ls(i);break;case 30:Ls(i);break;default:Ls(i)}t=t.sibling}}function Tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),sl(4,f);break;case 1:if(Tr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){We(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var T=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)gg(R[h],T)}catch(j){We(o,o.return,j)}}a&&v&64&&xy(f),al(f,f.return);break;case 27:My(f);case 26:case 5:Tr(h,f,a),a&&o===null&&v&4&&Oy(f),al(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&v&4&&jy(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),al(f,f.return);break;case 30:break;default:Tr(h,f,a)}i=i.sibling}}function od(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Go(a))}function ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Go(t))}function hi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qy(t,i,a,o),i=i.sibling}function qy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:hi(t,i,a,o),h&2048&&sl(9,i);break;case 1:hi(t,i,a,o);break;case 3:hi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Go(t)));break;case 12:if(h&2048){hi(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,v=f.id,T=f.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){We(i,i.return,R)}}else hi(t,i,a,o);break;case 13:hi(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?hi(t,i,a,o):ol(t,i):f._visibility&2?hi(t,i,a,o):(f._visibility|=2,Oa(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&od(v,i);break;case 24:hi(t,i,a,o),h&2048&&ld(i.alternate,i);break;default:hi(t,i,a,o)}}function Oa(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,v=i,T=a,R=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Oa(f,v,T,R,h),sl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Oa(f,v,T,R,h):ol(f,v):(Q._visibility|=2,Oa(f,v,T,R,h)),h&&j&2048&&od(v.alternate,v);break;case 24:Oa(f,v,T,R,h),h&&j&2048&&ld(v.alternate,v);break;default:Oa(f,v,T,R,h)}i=i.sibling}}function ol(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ol(a,o),h&2048&&od(o.alternate,o);break;case 24:ol(a,o),h&2048&&ld(o.alternate,o);break;default:ol(a,o)}i=i.sibling}}var ll=8192;function Va(t){if(t.subtreeFlags&ll)for(t=t.child;t!==null;)Hy(t),t=t.sibling}function Hy(t){switch(t.tag){case 26:Va(t),t.flags&ll&&t.memoizedState!==null&&NS(Fn,t.memoizedState,t.memoizedProps);break;case 5:Va(t);break;case 3:case 4:var i=Fn;Fn=Cc(t.stateNode.containerInfo),Va(t),Fn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=ll,ll=16777216,Va(t),ll=i):Va(t));break;default:Va(t)}}function Fy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ul(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Qy(o,t)}Fy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gy(t),t=t.sibling}function Gy(t){switch(t.tag){case 0:case 11:case 15:ul(t),t.flags&2048&&vr(9,t,t.return);break;case 3:ul(t);break;case 12:ul(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,gc(t)):ul(t);break;default:ul(t)}}function gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Qy(o,t)}Fy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:vr(8,i,i.return),gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,gc(i));break;default:gc(i)}t=t.sibling}}function Qy(t,i){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Go(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Lt=o;else e:for(a=t;Lt!==null;){o=Lt;var h=o.sibling,f=o.return;if(Ly(o),o===a){Lt=null;break e}if(h!==null){h.return=f,Lt=h;break e}Lt=f}}}var GA={getCacheForType:function(t){var i=Xt(xt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},QA=typeof WeakMap=="function"?WeakMap:Map,Qe=0,et=null,Oe=null,je=0,Ke=0,vn=null,Ar=!1,Ma=!1,ud=!1,Qi=0,ht=0,Sr=0,Us=0,cd=0,Pn=0,Pa=0,cl=null,cn=null,hd=!1,fd=0,yc=1/0,_c=null,br=null,Ht=0,wr=null,ka=null,La=0,dd=0,md=null,Ky=null,hl=0,pd=null;function En(){if((Qe&2)!==0&&je!==0)return je&-je;if(H.T!==null){var t=ba;return t!==0?t:Ad()}return ar()}function Yy(){Pn===0&&(Pn=(je&536870912)===0||qe?Eo():536870912);var t=Mn.current;return t!==null&&(t.flags|=32),Pn}function Tn(t,i,a){(t===et&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Ua(t,0),Rr(t,je,Pn,!1)),bi(t,a),((Qe&2)===0||t!==et)&&(t===et&&((Qe&2)===0&&(Us|=a),ht===4&&Rr(t,je,Pn,!1)),fi(t))}function Xy(t,i,a){if((Qe&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||cs(t,i),h=o?XA(t,i):_d(t,i,!0),f=o;do{if(h===0){Ma&&!o&&Rr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!KA(a)){h=_d(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=cl;var R=T.current.memoizedState.isDehydrated;if(R&&(Ua(T,v).flags|=256),v=_d(T,v,!1),v!==2){if(ud&&!R){T.errorRecoveryDisabledLanes|=f,Us|=f,h=4;break e}f=cn,cn=h,f!==null&&(cn===null?cn=f:cn.push.apply(cn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ua(t,0),Rr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(o,i,Pn,!Ar);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=fd+300-bn(),10<h)){if(Rr(o,i,Pn,!Ar),ta(o,0,!0)!==0)break e;o.timeoutHandle=b_($y.bind(null,o,a,cn,_c,hd,i,Pn,Us,Pa,Ar,f,2,-0,0),h);break e}$y(o,a,cn,_c,hd,i,Pn,Us,Pa,Ar,f,0,-0,0)}}break}while(!0);fi(t)}function $y(t,i,a,o,h,f,v,T,R,j,Q,$,B,q){if(t.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(_l={stylesheets:null,count:0,unsuspend:CS},Hy(i),$=xS(),$!==null)){t.cancelPendingCommit=$(i_.bind(null,t,i,f,a,o,h,v,T,R,Q,1,B,q)),Rr(t,f,v,!j);return}i_(t,i,f,a,o,h,v,T,R)}function KA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!pn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(t,i,a,o){i&=~cd,i&=~Us,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-Yt(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Zn(t,a,i)}function vc(){return(Qe&6)===0?(fl(0),!1):!0}function gd(){if(Oe!==null){if(Ke===0)var t=Oe.return;else t=Oe,Ui=Os=null,Vf(t),xa=null,nl=0,t=Oe;for(;t!==null;)Ny(t.alternate,t),t=t.return;Oe=null}}function Ua(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,hS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),gd(),et=t,Oe=a=Pi(t.current,null),je=i,Ke=0,vn=null,Ar=!1,Ma=cs(t,i),ud=!1,Pa=Pn=cd=Us=Sr=ht=0,cn=cl=null,hd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Yt(o),f=1<<h;i|=t[h],o&=~f}return Qi=i,Bu(),a}function Zy(t,i){Ne=null,H.H=ac,i===Ko||i===$u?(i=mg(),Ke=3):i===hg?(i=mg(),Ke=4):Ke=i===py?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Oe===null&&(ht=1,hc(t,xn(i,t.current)))}function Wy(){var t=H.H;return H.H=ac,t===null?ac:t}function Jy(){var t=H.A;return H.A=GA,t}function yd(){ht=4,Ar||(je&4194048)!==je&&Mn.current!==null||(Ma=!0),(Sr&134217727)===0&&(Us&134217727)===0||et===null||Rr(et,je,Pn,!1)}function _d(t,i,a){var o=Qe;Qe|=2;var h=Wy(),f=Jy();(et!==t||je!==i)&&(_c=null,Ua(t,i)),i=!1;var v=ht;e:do try{if(Ke!==0&&Oe!==null){var T=Oe,R=vn;switch(Ke){case 8:gd(),v=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var j=Ke;if(Ke=0,vn=null,ja(t,T,R,j),a&&Ma){v=0;break e}break;default:j=Ke,Ke=0,vn=null,ja(t,T,R,j)}}YA(),v=ht;break}catch(Q){Zy(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Ui=Os=null,Qe=o,H.H=h,H.A=f,Oe===null&&(et=null,je=0,Bu()),v}function YA(){for(;Oe!==null;)e_(Oe)}function XA(t,i){var a=Qe;Qe|=2;var o=Wy(),h=Jy();et!==t||je!==i?(_c=null,yc=bn()+500,Ua(t,i)):Ma=cs(t,i);e:do try{if(Ke!==0&&Oe!==null){i=Oe;var f=vn;t:switch(Ke){case 1:Ke=0,vn=null,ja(t,i,f,1);break;case 2:case 9:if(fg(f)){Ke=0,vn=null,t_(i);break}i=function(){Ke!==2&&Ke!==9||et!==t||(Ke=7),fi(t)},f.then(i,i);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:fg(f)?(Ke=0,vn=null,t_(i)):(Ke=0,vn=null,ja(t,i,f,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var T=Oe;if(!v||k_(v)){Ke=0,vn=null;var R=T.sibling;if(R!==null)Oe=R;else{var j=T.return;j!==null?(Oe=j,Ec(j)):Oe=null}break t}}Ke=0,vn=null,ja(t,i,f,5);break;case 6:Ke=0,vn=null,ja(t,i,f,6);break;case 8:gd(),ht=6;break e;default:throw Error(s(462))}}$A();break}catch(Q){Zy(t,Q)}while(!0);return Ui=Os=null,H.H=o,H.A=h,Qe=a,Oe!==null?0:(et=null,je=0,Bu(),ht)}function $A(){for(;Oe!==null&&!go();)e_(Oe)}function e_(t){var i=Iy(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,i===null?Ec(t):Oe=i}function t_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Ty(a,i,i.pendingProps,i.type,void 0,je);break;case 11:i=Ty(a,i,i.pendingProps,i.type.render,i.ref,je);break;case 5:Vf(i);default:Ny(a,i),i=Oe=ng(i,Qi),i=Iy(a,i,Qi)}t.memoizedProps=t.pendingProps,i===null?Ec(t):Oe=i}function ja(t,i,a,o){Ui=Os=null,Vf(i),xa=null,nl=0;var h=i.return;try{if(jA(t,h,i,a,je)){ht=1,hc(t,xn(a,t.current)),Oe=null;return}}catch(f){if(h!==null)throw Oe=h,f;ht=1,hc(t,xn(a,t.current)),Oe=null;return}i.flags&32768?(qe||o===1?t=!0:Ma||(je&536870912)!==0?t=!1:(Ar=t=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),n_(i,t)):Ec(i)}function Ec(t){var i=t;do{if((i.flags&32768)!==0){n_(i,Ar);return}t=i.return;var a=BA(i.alternate,i,Qi);if(a!==null){Oe=a;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);ht===0&&(ht=5)}function n_(t,i){do{var a=qA(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ht=6,Oe=null}function i_(t,i,a,o,h,f,v,T,R){t.cancelPendingCommit=null;do Tc();while(Ht!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=lf,Ao(t,a,f,v,T,R),t===et&&(Oe=et=null,je=0),ka=i,wr=t,La=a,dd=f,md=h,Ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,eS(as,function(){return l_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=ie.p,ie.p=2,v=Qe,Qe|=4;try{HA(t,i,a)}finally{Qe=v,ie.p=h,H.T=o}}Ht=1,r_(),s_(),a_()}}function r_(){if(Ht===1){Ht=0;var t=wr,i=ka,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=ie.p;ie.p=2;var h=Qe;Qe|=4;try{zy(i,t);var f=xd,v=Qp(t.containerInfo),T=f.focusedElem,R=f.selectionRange;if(v!==T&&T&&T.ownerDocument&&Gp(T.ownerDocument.documentElement,T)){if(R!==null&&nf(T)){var j=R.start,Q=R.end;if(Q===void 0&&(Q=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(Q,T.value.length);else{var $=T.ownerDocument||document,B=$&&$.defaultView||window;if(B.getSelection){var q=B.getSelection(),Se=T.textContent.length,ve=Math.min(R.start,Se),Ze=R.end===void 0?ve:Math.min(R.end,Se);!q.extend&&ve>Ze&&(v=Ze,Ze=ve,ve=v);var P=Fp(T,ve),O=Fp(T,Ze);if(P&&O&&(q.rangeCount!==1||q.anchorNode!==P.node||q.anchorOffset!==P.offset||q.focusNode!==O.node||q.focusOffset!==O.offset)){var U=$.createRange();U.setStart(P.node,P.offset),q.removeAllRanges(),ve>Ze?(q.addRange(U),q.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),q.addRange(U))}}}}for($=[],q=T;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Vc=!!Nd,xd=Nd=null}finally{Qe=h,ie.p=o,H.T=a}}t.current=i,Ht=2}}function s_(){if(Ht===2){Ht=0;var t=wr,i=ka,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=ie.p;ie.p=2;var h=Qe;Qe|=4;try{ky(t,i.alternate,i)}finally{Qe=h,ie.p=o,H.T=a}}Ht=3}}function a_(){if(Ht===4||Ht===3){Ht=0,gu();var t=wr,i=ka,a=La,o=Ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,ka=wr=null,o_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(br=null),na(a),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=ie.p,ie.p=2,H.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];f(T.value,{componentStack:T.stack})}}finally{H.T=i,ie.p=h}}(La&3)!==0&&Tc(),fi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===pd?hl++:(hl=0,pd=t):hl=0,fl(0)}}function o_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Go(i)))}function Tc(t){return r_(),s_(),a_(),l_()}function l_(){if(Ht!==5)return!1;var t=wr,i=dd;dd=0;var a=na(La),o=H.T,h=ie.p;try{ie.p=32>a?32:a,H.T=null,a=md,md=null;var f=wr,v=La;if(Ht=0,ka=wr=null,La=0,(Qe&6)!==0)throw Error(s(331));var T=Qe;if(Qe|=4,Gy(f.current),qy(f,f.current,v,a),Qe=T,fl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ut,f)}catch{}return!0}finally{ie.p=h,H.T=o,o_(t,i)}}function u_(t,i,a){i=xn(a,i),i=Kf(t.stateNode,i,2),t=pr(t,i,2),t!==null&&(bi(t,2),fi(t))}function We(t,i,a){if(t.tag===3)u_(t,t,a);else for(;i!==null;){if(i.tag===3){u_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(br===null||!br.has(o))){t=xn(a,t),a=dy(2),o=pr(i,a,2),o!==null&&(my(a,o,i,t),bi(o,2),fi(o));break}}i=i.return}}function vd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new QA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(ud=!0,h.add(a),t=ZA.bind(null,t,i,a),i.then(t,t))}function ZA(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(je&a)===a&&(ht===4||ht===3&&(je&62914560)===je&&300>bn()-fd?(Qe&2)===0&&Ua(t,0):cd|=a,Pa===je&&(Pa=0)),fi(t)}function c_(t,i){i===0&&(i=To()),t=Ea(t,i),t!==null&&(bi(t,i),fi(t))}function WA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),c_(t,a)}function JA(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),c_(t,a)}function eS(t,i){return rs(t,i)}var Ac=null,za=null,Ed=!1,Sc=!1,Td=!1,js=0;function fi(t){t!==za&&t.next===null&&(za===null?Ac=za=t:za=za.next=t),Sc=!0,Ed||(Ed=!0,nS())}function fl(t,i){if(!Td&&Sc){Td=!0;do for(var a=!1,o=Ac;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,T=o.pingedLanes;f=(1<<31-Yt(42|t)+1)-1,f&=h&~(v&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,m_(o,f))}else f=je,f=ta(o,o===et?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||cs(o,f)||(a=!0,m_(o,f));o=o.next}while(a);Td=!1}}function tS(){h_()}function h_(){Sc=Ed=!1;var t=0;js!==0&&(cS()&&(t=js),js=0);for(var i=bn(),a=null,o=Ac;o!==null;){var h=o.next,f=f_(o,i);f===0?(o.next=null,a===null?Ac=h:a.next=h,h===null&&(za=a)):(a=o,(t!==0||(f&3)!==0)&&(Sc=!0)),o=h}fl(t)}function f_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Yt(f),T=1<<v,R=h[v];R===-1?((T&a)===0||(T&o)!==0)&&(h[v]=vo(T,i)):R<=i&&(t.expiredLanes|=T),f&=~T}if(i=et,a=je,a=ta(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ss(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||cs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ss(o),na(a)){case 2:case 8:a=Js;break;case 32:a=as;break;case 268435456:a=ea;break;default:a=as}return o=d_.bind(null,t),a=rs(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ss(o),t.callbackPriority=2,t.callbackNode=null,2}function d_(t,i){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Tc()&&t.callbackNode!==a)return null;var o=je;return o=ta(t,t===et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xy(t,o,i),f_(t,bn()),t.callbackNode!=null&&t.callbackNode===a?d_.bind(null,t):null)}function m_(t,i){if(Tc())return null;Xy(t,i,!0)}function nS(){fS(function(){(Qe&6)!==0?rs(yo,tS):h_()})}function Ad(){return js===0&&(js=Eo()),js}function p_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:la(""+t)}function g_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function iS(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=p_((h[vt]||null).action),v=o.submitter;v&&(i=(i=v[vt]||null)?p_(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var T=new ua("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(js!==0){var R=v?g_(h,v):new FormData(h);qf(a,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(T.preventDefault(),R=v?g_(h,v):new FormData(h),qf(a,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var Sd=0;Sd<of.length;Sd++){var bd=of[Sd],rS=bd.toLowerCase(),sS=bd[0].toUpperCase()+bd.slice(1);Hn(rS,"on"+sS)}Hn(Xp,"onAnimationEnd"),Hn($p,"onAnimationIteration"),Hn(Zp,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(AA,"onTransitionRun"),Hn(SA,"onTransitionStart"),Hn(bA,"onTransitionCancel"),Hn(Wp,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function y_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var T=o[v],R=T.instance,j=T.currentTarget;if(T=T.listener,R!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=j;try{f(h)}catch(Q){cc(Q)}h.currentTarget=null,f=R}else for(v=0;v<o.length;v++){if(T=o[v],R=T.instance,j=T.currentTarget,T=T.listener,R!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=j;try{f(h)}catch(Q){cc(Q)}h.currentTarget=null,f=R}}}}function Ve(t,i){var a=i[bo];a===void 0&&(a=i[bo]=new Set);var o=t+"__bubble";a.has(o)||(__(i,t,2,!1),a.add(o))}function wd(t,i,a){var o=0;i&&(o|=4),__(a,t,o,i)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[bc]){t[bc]=!0,wo.forEach(function(a){a!=="selectionchange"&&(aS.has(a)||wd(a,!1,t),wd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[bc]||(i[bc]=!0,wd("selectionchange",!1,i))}}function __(t,i,a,o){switch(q_(i)){case 2:var h=VS;break;case 8:h=MS;break;default:h=zd}a=h.bind(null,i,a,t),h=void 0,!Cn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Id(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=wi(T),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){o=f=v;continue e}T=T.parentNode}}o=o.return}Ru(function(){var j=f,Q=In(a),$=[];e:{var B=Jp.get(t);if(B!==void 0){var q=ua,Se=t;switch(t){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":q=pa;break;case"focusin":Se="focus",q=fa;break;case"focusout":Se="blur",q=fa;break;case"beforeblur":case"afterblur":q=fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Mu;break;case Xp:case $p:case Zp:q=da;break;case Wp:q=ku;break;case"scroll":case"scrollend":q=Iu;break;case"wheel":q=ga;break;case"copy":case"cut":case"paste":q=ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Lo;break;case"toggle":case"beforetoggle":q=Uu}var ve=(i&4)!==0,Ze=!ve&&(t==="scroll"||t==="scrollend"),P=ve?B!==null?B+"Capture":null:B;ve=[];for(var O=j,U;O!==null;){var Y=O;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||P===null||(Y=_s(O,P),Y!=null&&ve.push(ml(O,Y,U))),Ze)break;O=O.return}0<ve.length&&(B=new q(B,Se,null,a,Q),$.push({event:B,listeners:ve}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Ni&&(Se=a.relatedTarget||a.fromElement)&&(wi(Se)||Se[wn]))break e;if((q||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,q?(Se=a.relatedTarget||a.toElement,q=j,Se=Se?wi(Se):null,Se!==null&&(Ze=c(Se),ve=Se.tag,Se!==Ze||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(q=null,Se=j),q!==Se)){if(ve=Nn,Y="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Lo,Y="onPointerLeave",P="onPointerEnter",O="pointer"),Ze=q==null?B:Jn(q),U=Se==null?B:Jn(Se),B=new ve(Y,O+"leave",q,a,Q),B.target=Ze,B.relatedTarget=U,Y=null,wi(Q)===j&&(ve=new ve(P,O+"enter",Se,a,Q),ve.target=U,ve.relatedTarget=Ze,Y=ve),Ze=Y,q&&Se)t:{for(ve=q,P=Se,O=0,U=ve;U;U=Ba(U))O++;for(U=0,Y=P;Y;Y=Ba(Y))U++;for(;0<O-U;)ve=Ba(ve),O--;for(;0<U-O;)P=Ba(P),U--;for(;O--;){if(ve===P||P!==null&&ve===P.alternate)break t;ve=Ba(ve),P=Ba(P)}ve=null}else ve=null;q!==null&&v_($,B,q,ve,!1),Se!==null&&Ze!==null&&v_($,Ze,Se,ve,!0)}}e:{if(B=j?Jn(j):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var me=Up;else if(Nt(B))if(jp)me=vA;else{me=yA;var De=gA}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&xo(j.elementType)&&(me=Up):me=_A;if(me&&(me=me(t,j))){Mi($,me,a,Q);break e}De&&De(t,B,j),t==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&cr(B,"number",B.value)}switch(De=j?Jn(j):window,t){case"focusin":(Nt(De)||De.contentEditable==="true")&&(ya=De,rf=j,zo=null);break;case"focusout":zo=rf=ya=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Kp($,a,Q);break;case"selectionchange":if(TA)break;case"keydown":case"keyup":Kp($,a,Q)}var ge;if(ai)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Le?F(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(Le||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Le&&(ge=Oo()):(ni=Q,hr="value"in ni?ni.value:ni.textContent,Le=!0)),De=wc(j,Ee),0<De.length&&(Ee=new Po(Ee,t,null,a,Q),$.push({event:Ee,listeners:De}),ge?Ee.data=ge:(ge=ae(a),ge!==null&&(Ee.data=ge)))),(ge=m?Ct(t,a):Ue(t,a))&&(Ee=wc(j,"onBeforeInput"),0<Ee.length&&(De=new Po("onBeforeInput","beforeinput",null,a,Q),$.push({event:De,listeners:Ee}),De.data=ge)),iS($,t,j,a,Q)}y_($,i)})}function ml(t,i,a){return{instance:t,listener:i,currentTarget:a}}function wc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=_s(t,a),h!=null&&o.unshift(ml(t,h,f)),h=_s(t,i),h!=null&&o.push(ml(t,h,f))),t.tag===3)return o;t=t.return}return[]}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function v_(t,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var T=a,R=T.alternate,j=T.stateNode;if(T=T.tag,R!==null&&R===o)break;T!==5&&T!==26&&T!==27||j===null||(R=j,h?(j=_s(a,f),j!=null&&v.unshift(ml(a,j,R))):h||(j=_s(a,f),j!=null&&v.push(ml(a,j,R)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var oS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(oS,`
`).replace(lS,"")}function T_(t,i){return i=E_(i),E_(t)===i}function Rc(){}function $e(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Rn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Rn(t,""+o);break;case"className":ei(t,"class",o);break;case"tabIndex":ei(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(t,a,o);break;case"style":No(t,o,f);break;case"data":if(i!=="object"){ei(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=la(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&$e(t,i,"name",h.name,h,null),$e(t,i,"formEncType",h.formEncType,h,null),$e(t,i,"formMethod",h.formMethod,h,null),$e(t,i,"formTarget",h.formTarget,h,null)):($e(t,i,"encType",h.encType,h,null),$e(t,i,"method",h.method,h,null),$e(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=la(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Rc);break;case"onScroll":o!=null&&Ve("scroll",t);break;case"onScrollEnd":o!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=la(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),ur(t,"popover",o);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$h.get(a)||a,ur(t,a,o))}}function Cd(t,i,a,o,h,f){switch(a){case"style":No(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Rn(t,o):(typeof o=="number"||typeof o=="bigint")&&Rn(t,""+o);break;case"onScroll":o!=null&&Ve("scroll",t);break;case"onScrollEnd":o!=null&&Ve("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Rc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ia.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[vt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ur(t,a,o)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$e(t,i,f,v,a,null)}}h&&$e(t,i,"srcSet",a.srcSet,a,null),o&&$e(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=f=v=h=null,R=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":R=Q;break;case"defaultChecked":j=Q;break;case"value":f=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:$e(t,i,o,Q,a,null)}}ps(t,f,T,R,j,v,h,!1),oa(t);return;case"select":Ve("invalid",t),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:$e(t,i,h,T,a,null)}i=f,a=v,t.multiple=!!o,i!=null?Ci(t,!!o,i,!1):a!=null&&Ci(t,!!o,a,!0);return;case"textarea":Ve("invalid",t),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:$e(t,i,v,T,a,null)}gs(t,o,h,f),oa(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$e(t,i,R,o,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(o=0;o<dl.length;o++)Ve(dl[o],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$e(t,i,j,o,a,null)}return;default:if(xo(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&Cd(t,i,Q,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&$e(t,i,T,o,a,null))}function uS(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,T=null,R=null,j=null,Q=null;for(q in a){var $=a[q];if(a.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=$;default:o.hasOwnProperty(q)||$e(t,i,q,null,o,$)}}for(var B in o){var q=o[B];if($=a[B],o.hasOwnProperty(B)&&(q!=null||$!=null))switch(B){case"type":f=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":Q=q;break;case"value":v=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==$&&$e(t,i,B,q,o,$)}}mn(t,v,T,R,j,Q,f,h);return;case"select":q=v=T=B=null;for(f in a)if(R=a[f],a.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":q=R;default:o.hasOwnProperty(f)||$e(t,i,f,null,o,R)}for(h in o)if(f=o[h],R=a[h],o.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":B=f;break;case"defaultValue":T=f;break;case"multiple":v=f;default:f!==R&&$e(t,i,h,f,o,R)}i=T,a=v,o=q,B!=null?Ci(t,!!a,B,!1):!!o!=!!a&&(i!=null?Ci(t,!!a,i,!0):Ci(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:$e(t,i,T,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&$e(t,i,v,h,o,f)}Ye(t,B,q);return;case"option":for(var Se in a)if(B=a[Se],a.hasOwnProperty(Se)&&B!=null&&!o.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:$e(t,i,Se,null,o,B)}for(R in o)if(B=o[R],q=a[R],o.hasOwnProperty(R)&&B!==q&&(B!=null||q!=null))switch(R){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:$e(t,i,R,B,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)B=a[ve],a.hasOwnProperty(ve)&&B!=null&&!o.hasOwnProperty(ve)&&$e(t,i,ve,null,o,B);for(j in o)if(B=o[j],q=a[j],o.hasOwnProperty(j)&&B!==q&&(B!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:$e(t,i,j,B,o,q)}return;default:if(xo(i)){for(var Ze in a)B=a[Ze],a.hasOwnProperty(Ze)&&B!==void 0&&!o.hasOwnProperty(Ze)&&Cd(t,i,Ze,void 0,o,B);for(Q in o)B=o[Q],q=a[Q],!o.hasOwnProperty(Q)||B===q||B===void 0&&q===void 0||Cd(t,i,Q,B,o,q);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&$e(t,i,P,null,o,B);for($ in o)B=o[$],q=a[$],!o.hasOwnProperty($)||B===q||B==null&&q==null||$e(t,i,$,B,o,q)}var Nd=null,xd=null;function Ic(t){return t.nodeType===9?t:t.ownerDocument}function A_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Dd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Od=null;function cS(){var t=window.event;return t&&t.type==="popstate"?t===Od?!1:(Od=t,!0):(Od=null,!1)}var b_=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(dS)}:b_;function dS(t){setTimeout(function(){throw t})}function Ir(t){return t==="head"}function R_(t,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&pl(v.documentElement),a&2&&pl(v.body),a&4)for(a=v.head,pl(a),v=a.firstChild;v;){var T=v.nextSibling,R=v.nodeName;v[hs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(f),Sl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);Sl(i)}function Vd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function mS(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[hs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function pS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function Md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function gS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Gn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Pd=null;function I_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function C_(t,i,a){switch(i=Ic(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function pl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);lr(t)}var kn=new Map,N_=new Set;function Cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ki=ie.d;ie.d={f:yS,r:_S,D:vS,C:ES,L:TS,m:AS,X:bS,S:SS,M:wS};function yS(){var t=Ki.f(),i=vc();return t||i}function _S(t){var i=Wn(t);i!==null&&i.tag===5&&i.type==="form"?Xg(i):Ki.r(t)}var qa=typeof document>"u"?null:document;function x_(t,i,a){var o=qa;if(o&&typeof i=="string"&&i){var h=Et(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),N_.has(h)||(N_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ft(i,"link",t),mt(i),o.head.appendChild(i)))}}function vS(t){Ki.D(t),x_("dns-prefetch",t,null)}function ES(t,i){Ki.C(t,i),x_("preconnect",t,i)}function TS(t,i,a){Ki.L(t,i,a);var o=qa;if(o&&t&&i){var h='link[rel="preload"][as="'+Et(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Et(a.imageSizes)+'"]')):h+='[href="'+Et(t)+'"]';var f=h;switch(i){case"style":f=Ha(t);break;case"script":f=Fa(t)}kn.has(f)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),kn.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(gl(f))||i==="script"&&o.querySelector(yl(f))||(i=o.createElement("link"),Ft(i,"link",t),mt(i),o.head.appendChild(i)))}}function AS(t,i){Ki.m(t,i);var a=qa;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Et(o)+'"][href="'+Et(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Fa(t)}if(!kn.has(f)&&(t=A({rel:"modulepreload",href:t},i),kn.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yl(f)))return}o=a.createElement("link"),Ft(o,"link",t),mt(o),a.head.appendChild(o)}}}function SS(t,i,a){Ki.S(t,i,a);var o=qa;if(o&&t){var h=tn(o).hoistableStyles,f=Ha(t);i=i||"default";var v=h.get(f);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(gl(f)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=kn.get(f))&&kd(t,a);var R=v=o.createElement("link");mt(R),Ft(R,"link",t),R._p=new Promise(function(j,Q){R.onload=j,R.onerror=Q}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(f,v)}}}function bS(t,i){Ki.X(t,i);var a=qa;if(a&&t){var o=tn(a).hoistableScripts,h=Fa(t),f=o.get(h);f||(f=a.querySelector(yl(h)),f||(t=A({src:t,async:!0},i),(i=kn.get(h))&&Ld(t,i),f=a.createElement("script"),mt(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function wS(t,i){Ki.M(t,i);var a=qa;if(a&&t){var o=tn(a).hoistableScripts,h=Fa(t),f=o.get(h);f||(f=a.querySelector(yl(h)),f||(t=A({src:t,async:!0,type:"module"},i),(i=kn.get(h))&&Ld(t,i),f=a.createElement("script"),mt(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function D_(t,i,a,o){var h=(h=be.current)?Cc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ha(a.href),a=tn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ha(a.href);var f=tn(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(gl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(t,a),f||RS(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Fa(a),a=tn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ha(t){return'href="'+Et(t)+'"'}function gl(t){return'link[rel="stylesheet"]['+t+"]"}function O_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function RS(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ft(i,"link",a),mt(i),t.head.appendChild(i))}function Fa(t){return'[src="'+Et(t)+'"]'}function yl(t){return"script[async]"+t}function V_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Et(a.href)+'"]');if(o)return i.instance=o,mt(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),mt(o),Ft(o,"style",h),Nc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ha(a.href);var f=t.querySelector(gl(h));if(f)return i.state.loading|=4,i.instance=f,mt(f),f;o=O_(a),(h=kn.get(h))&&kd(o,h),f=(t.ownerDocument||t).createElement("link"),mt(f);var v=f;return v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Ft(f,"link",o),i.state.loading|=4,Nc(f,a.precedence,t),i.instance=f;case"script":return f=Fa(a.src),(h=t.querySelector(yl(f)))?(i.instance=h,mt(h),h):(o=a,(h=kn.get(f))&&(o=A({},a),Ld(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),Ft(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Nc(o,a.precedence,t));return i.instance}function Nc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function kd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Ld(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var xc=null;function M_(t,i,a){if(xc===null){var o=new Map,h=xc=new Map;h.set(a,o)}else h=xc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[hs]||f[It]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=t+v;var T=o.get(v);T?T.push(f):o.set(v,[f])}}return o}function P_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function IS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function k_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var _l=null;function CS(){}function NS(t,i,a){if(_l===null)throw Error(s(475));var o=_l;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ha(a.href),f=t.querySelector(gl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Dc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=f,mt(f);return}f=t.ownerDocument||t,a=O_(a),(h=kn.get(h))&&kd(a,h),f=f.createElement("link"),mt(f);var v=f;v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Ft(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Dc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function xS(){if(_l===null)throw Error(s(475));var t=_l;return t.stylesheets&&t.count===0&&Ud(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Ud(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Dc(){if(this.count--,this.count===0){if(this.stylesheets)Ud(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oc=null;function Ud(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oc=new Map,i.forEach(DS,t),Oc=null,Dc.call(t))}function DS(t,i){if(!(i.state.loading&4)){var a=Oc.get(t);if(a)var o=a.get(null);else{a=new Map,Oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Dc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var vl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function OS(t,i,a,o,h,f,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function L_(t,i,a,o,h,f,v,T,R,j,Q,$){return t=new OS(t,i,a,v,T,R,j,$),i=1,f===!0&&(i|=24),f=gn(3,null,null,i),t.current=f,f.stateNode=t,i=vf(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},Sf(f),t}function U_(t){return t?(t=Ta,t):Ta}function j_(t,i,a,o,h,f){h=U_(h),o.context===null?o.context=h:o.pendingContext=h,o=mr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=pr(t,o,i),a!==null&&(Tn(a,t,i),Xo(a,t,i))}function z_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function jd(t,i){z_(t,i),(t=t.alternate)&&z_(t,i)}function B_(t){if(t.tag===13){var i=Ea(t,67108864);i!==null&&Tn(i,t,67108864),jd(t,67108864)}}var Vc=!0;function VS(t,i,a,o){var h=H.T;H.T=null;var f=ie.p;try{ie.p=2,zd(t,i,a,o)}finally{ie.p=f,H.T=h}}function MS(t,i,a,o){var h=H.T;H.T=null;var f=ie.p;try{ie.p=8,zd(t,i,a,o)}finally{ie.p=f,H.T=h}}function zd(t,i,a,o){if(Vc){var h=Bd(o);if(h===null)Id(t,i,o,Mc,a),H_(t,o);else if(kS(h,t,i,a,o))o.stopPropagation();else if(H_(t,o),i&4&&-1<PS.indexOf(t)){for(;h!==null;){var f=Wn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=zn(f.pendingLanes);if(v!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var R=1<<31-Yt(v);T.entanglements[1]|=R,v&=~R}fi(f),(Qe&6)===0&&(yc=bn()+500,fl(0))}}break;case 13:T=Ea(f,2),T!==null&&Tn(T,f,2),vc(),jd(f,2)}if(f=Bd(o),f===null&&Id(t,i,o,Mc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Id(t,i,o,null,a)}}function Bd(t){return t=In(t),qd(t)}var Mc=null;function qd(t){if(Mc=null,t=wi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Mc=t,null}function q_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fh()){case yo:return 2;case Js:return 8;case as:case Gh:return 32;case ea:return 268435456;default:return 32}default:return 32}}var Hd=!1,Cr=null,Nr=null,xr=null,El=new Map,Tl=new Map,Dr=[],PS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H_(t,i){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":El.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(i.pointerId)}}function Al(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Wn(i),i!==null&&B_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function kS(t,i,a,o,h){switch(i){case"focusin":return Cr=Al(Cr,t,i,a,o,h),!0;case"dragenter":return Nr=Al(Nr,t,i,a,o,h),!0;case"mouseover":return xr=Al(xr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return El.set(f,Al(El.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Tl.set(f,Al(Tl.get(f)||null,t,i,a,o,h)),!0}return!1}function F_(t){var i=wi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,vu(t.priority,function(){if(a.tag===13){var o=En();o=sr(o);var h=Ea(a,o);h!==null&&Tn(h,a,o),jd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Bd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ni=o,a.target.dispatchEvent(o),Ni=null}else return i=Wn(a),i!==null&&B_(i),t.blockedOn=a,!1;i.shift()}return!0}function G_(t,i,a){Pc(t)&&a.delete(i)}function LS(){Hd=!1,Cr!==null&&Pc(Cr)&&(Cr=null),Nr!==null&&Pc(Nr)&&(Nr=null),xr!==null&&Pc(xr)&&(xr=null),El.forEach(G_),Tl.forEach(G_)}function kc(t,i){t.blockedOn===i&&(t.blockedOn=null,Hd||(Hd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,LS)))}var Lc=null;function Q_(t){Lc!==t&&(Lc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Lc===t&&(Lc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(qd(o||a)===null)continue;break}var f=Wn(a);f!==null&&(t.splice(i,3),i-=3,qf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Sl(t){function i(R){return kc(R,t)}Cr!==null&&kc(Cr,t),Nr!==null&&kc(Nr,t),xr!==null&&kc(xr,t),El.forEach(i),Tl.forEach(i);for(var a=0;a<Dr.length;a++){var o=Dr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)F_(a),a.blockedOn===null&&Dr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[vt]||null;if(typeof f=="function")v||Q_(a);else if(v){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[vt]||null)T=v.formAction;else if(qd(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),Q_(a)}}}function Fd(t){this._internalRoot=t}Uc.prototype.render=Fd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=En();j_(a,o,t,i,null,null)},Uc.prototype.unmount=Fd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;j_(t.current,2,null,t,null,null),vc(),i[wn]=null}};function Uc(t){this._internalRoot=t}Uc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ar();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Dr.length&&i!==0&&i<Dr[a].priority;a++);Dr.splice(a,0,t),a===0&&F_(t)}};var K_=e.version;if(K_!=="19.1.1")throw Error(s(527,K_,"19.1.1"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var US={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{ut=jc.inject(US),Ge=jc}catch{}}return wl.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=uy,f=cy,v=hy,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=L_(t,1,!1,null,null,a,o,h,f,v,T,null),t[wn]=i.current,Rd(t),new Fd(i)},wl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",f=uy,v=cy,T=hy,R=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=L_(t,1,!0,i,a??null,o,h,f,v,T,R,j),i.context=U_(null),a=i.current,o=En(),o=sr(o),h=mr(o),h.callback=null,pr(a,h,o),a=o,i.current.lanes=a,bi(i,a),fi(i),t[wn]=i.current,Rd(t),new Uc(i)},wl.version="19.1.1",wl}var iv;function $S(){if(iv)return Kd.exports;iv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kd.exports=XS(),Kd.exports}var ZS=$S();const WS=()=>{};var rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},JS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},L0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,A=c>>2,b=(c&3)<<4|p>>4;let I=(p&15)<<2|y>>6,z=y&63;g||(z=64,d||(I=64)),s.push(n[A],n[b],n[I],n[z])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(k0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):JS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const b=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||b==null)throw new eb;const I=c<<2|p>>4;if(s.push(I),y!==64){const z=p<<4&240|y>>2;if(s.push(z),b!==64){const K=y<<6&192|b;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class eb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tb=function(r){const e=k0(r);return L0.encodeByteArray(e,!0)},nh=function(r){return tb(r).replace(/\./g,"")},U0=function(r){try{return L0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=()=>nb().__FIREBASE_DEFAULTS__,rb=()=>{if(typeof process>"u"||typeof rv>"u")return;const r=rv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},sb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&U0(r[1]);return e&&JSON.parse(e)},Ah=()=>{try{return WS()||ib()||rb()||sb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},j0=r=>Ah()?.emulatorHosts?.[r],ab=r=>{const e=j0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},z0=()=>Ah()?.config,B0=r=>Ah()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[nh(JSON.stringify(n)),nh(JSON.stringify(d)),""].join(".")}const Ol={};function ub(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ol))Ol[e]?r.emulator.push(e):r.prod.push(e);return r}function cb(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let sv=!1;function H0(r,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||Ol[r]===e||Ol[r]||sv)return;Ol[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=ub().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,z){I.setAttribute("width","24"),I.setAttribute("id",z),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{sv=!0,d()},I}function A(I,z){I.setAttribute("id",z),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function b(){const I=cb(s),z=n("text"),K=document.getElementById(z)||document.createElement("span"),ne=n("learnmore"),te=document.getElementById(ne)||document.createElement("a"),re=n("preprendIcon"),ee=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ue=I.element;p(ue),A(te,ne);const se=y();g(ee,re),ue.append(ee,K,te,se),document.body.appendChild(ue)}c?(K.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function fb(){const r=Ah()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function db(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gb(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function yb(){return!fb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _b(){try{return typeof indexedDB=="object"}catch{return!1}}function vb(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="FirebaseError";class ir extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Eb,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?Tb(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new ir(l,p,s)}}function Tb(r,e){return r.replace(Ab,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const Ab=/\{\$([^}]+)}/g;function Sb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Fs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(av(c)&&av(d)){if(!Fs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function av(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Rl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Il(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function bb(r,e){const n=new wb(r,e);return n.subscribe.bind(n)}class wb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Rb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Zd),l.error===void 0&&(l.error=Zd),l.complete===void 0&&(l.complete=Zd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Zd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r){return r&&r._delegate?r._delegate:r}class Gs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ob;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nb(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Cb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cb(r){return r===zs?void 0:r}function Nb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ib(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const Db={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Ob=Me.INFO,Vb={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Mb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=Vb[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=Ob,this._logHandler=Mb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Db[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const Pb=(r,e)=>e.some(n=>r instanceof n);let ov,lv;function kb(){return ov||(ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lb(){return lv||(lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F0=new WeakMap,cm=new WeakMap,G0=new WeakMap,Wd=new WeakMap,jm=new WeakMap;function Ub(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(jr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&F0.set(n,r)}).catch(()=>{}),jm.set(e,r),e}function jb(r){if(cm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});cm.set(r,e)}let hm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return cm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||G0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zb(r){hm=r(hm)}function Bb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Jd(this),e,...n);return G0.set(s,e.sort?e.sort():[e]),jr(s)}:Lb().includes(r)?function(...e){return r.apply(Jd(this),e),jr(F0.get(this))}:function(...e){return jr(r.apply(Jd(this),e))}}function qb(r){return typeof r=="function"?Bb(r):(r instanceof IDBTransaction&&jb(r),Pb(r,kb())?new Proxy(r,hm):r)}function jr(r){if(r instanceof IDBRequest)return Ub(r);if(Wd.has(r))return Wd.get(r);const e=qb(r);return e!==r&&(Wd.set(r,e),jm.set(e,r)),e}const Jd=r=>jm.get(r);function Hb(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),p=jr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(jr(d.result),g.oldVersion,g.newVersion,jr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Fb=["get","getKey","getAll","getAllKeys","count"],Gb=["put","add","delete","clear"],em=new Map;function uv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(em.get(e))return em.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=Gb.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Fb.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return em.set(e,c),c}zb(r=>({...r,get:(e,n,s)=>uv(e,n)||r.get(e,n,s),has:(e,n)=>!!uv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kb(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Kb(r){return r.getComponent()?.type==="VERSION"}const fm="@firebase/app",cv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Um("@firebase/app"),Yb="@firebase/app-compat",Xb="@firebase/analytics-compat",$b="@firebase/analytics",Zb="@firebase/app-check-compat",Wb="@firebase/app-check",Jb="@firebase/auth",e1="@firebase/auth-compat",t1="@firebase/database",n1="@firebase/data-connect",i1="@firebase/database-compat",r1="@firebase/functions",s1="@firebase/functions-compat",a1="@firebase/installations",o1="@firebase/installations-compat",l1="@firebase/messaging",u1="@firebase/messaging-compat",c1="@firebase/performance",h1="@firebase/performance-compat",f1="@firebase/remote-config",d1="@firebase/remote-config-compat",m1="@firebase/storage",p1="@firebase/storage-compat",g1="@firebase/firestore",y1="@firebase/ai",_1="@firebase/firestore-compat",v1="firebase",E1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]",T1={[fm]:"fire-core",[Yb]:"fire-core-compat",[$b]:"fire-analytics",[Xb]:"fire-analytics-compat",[Wb]:"fire-app-check",[Zb]:"fire-app-check-compat",[Jb]:"fire-auth",[e1]:"fire-auth-compat",[t1]:"fire-rtdb",[n1]:"fire-data-connect",[i1]:"fire-rtdb-compat",[r1]:"fire-fn",[s1]:"fire-fn-compat",[a1]:"fire-iid",[o1]:"fire-iid-compat",[l1]:"fire-fcm",[u1]:"fire-fcm-compat",[c1]:"fire-perf",[h1]:"fire-perf-compat",[f1]:"fire-rc",[d1]:"fire-rc-compat",[m1]:"fire-gcs",[p1]:"fire-gcs-compat",[g1]:"fire-fst",[_1]:"fire-fst-compat",[y1]:"fire-vertex","fire-js":"fire-js",[v1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,A1=new Map,mm=new Map;function hv(r,e){try{r.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function to(r){const e=r.name;if(mm.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,r);for(const n of ih.values())hv(n,r);for(const n of A1.values())hv(n,r);return!0}function zm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ln(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Wl("app","Firebase",S1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=E1;function Q0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:dm,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw zr.create("bad-app-name",{appName:String(l)});if(n||(n=z0()),!n)throw zr.create("no-options");const c=ih.get(l);if(c){if(Fs(n,c.options)&&Fs(s,c.config))return c;throw zr.create("duplicate-app",{appName:l})}const d=new xb(l);for(const g of mm.values())d.addComponent(g);const p=new b1(n,s,d);return ih.set(l,p),p}function K0(r=dm){const e=ih.get(r);if(!e&&r===dm&&z0())return Q0();if(!e)throw zr.create("no-app",{appName:r});return e}function Br(r,e,n){let s=T1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(d.join(" "));return}to(new Gs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebase-heartbeat-database",R1=1,jl="firebase-heartbeat-store";let tm=null;function Y0(){return tm||(tm=Hb(w1,R1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(jl)}catch(n){console.warn(n)}}}}).catch(r=>{throw zr.create("idb-open",{originalErrorMessage:r.message})})),tm}async function I1(r){try{const n=(await Y0()).transaction(jl),s=await n.objectStore(jl).get(X0(r));return await n.done,s}catch(e){if(e instanceof ir)Ji.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e?.message});Ji.warn(n.message)}}}async function fv(r,e){try{const s=(await Y0()).transaction(jl,"readwrite");await s.objectStore(jl).put(e,X0(r)),await s.done}catch(n){if(n instanceof ir)Ji.warn(n.message);else{const s=zr.create("idb-set",{originalErrorMessage:n?.message});Ji.warn(s.message)}}}function X0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=1024,N1=30;class x1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>N1){const l=V1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dv(),{heartbeatsToSend:n,unsentEntries:s}=D1(this._heartbeatsCache.heartbeats),l=nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ji.warn(e),""}}}function dv(){return new Date().toISOString().substring(0,10)}function D1(r,e=C1){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),mv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),mv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class O1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _b()?vb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mv(r){return nh(JSON.stringify({version:2,heartbeats:r})).length}function V1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(r){to(new Gs("platform-logger",e=>new Qb(e),"PRIVATE")),to(new Gs("heartbeat",e=>new x1(e),"PRIVATE")),Br(fm,cv,r),Br(fm,cv,"esm2020"),Br("fire-js","")}M1("");var P1="firebase",k1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(P1,k1,"app");function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L1=$0,Z0=new Wl("auth","Firebase",$0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Um("@firebase/auth");function U1(r,...e){rh.logLevel<=Me.WARN&&rh.warn(`Auth (${uo}): ${r}`,...e)}function Qc(r,...e){rh.logLevel<=Me.ERROR&&rh.error(`Auth (${uo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(r,...e){throw Bm(r,...e)}function mi(r,...e){return Bm(r,...e)}function W0(r,e,n){const s={...L1(),[e]:n};return new Wl("auth","Firebase",s).create(e,{appName:r.name})}function Zi(r){return W0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Z0.create(r,...e)}function Te(r,e,...n){if(!r)throw Bm(e,...n)}function Xi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qc(e),new Error(e)}function er(r,e){r||Xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(){return typeof self<"u"&&self.location?.href||""}function j1(){return pv()==="http:"||pv()==="https:"}function pv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j1()||mb()||"connection"in navigator)?navigator.onLine:!0}function B1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=hb()||pb()}get(){return z1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r,e){er(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F1=new eu(3e4,6e4);function Wr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Jr(r,e,n,s,l={}){return eE(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=Jl({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return db()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&lo(r.emulatorConfig.host)&&(y.credentials="include"),J0.fetch()(await tE(r,r.config.apiHost,n,p),y)})}async function eE(r,e,n){r._canInitEmulator=!1;const s={...q1,...e};try{const l=new Q1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw zc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw zc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw zc(r,"user-disabled",d);const A=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw W0(r,A,y);Yn(r,A)}}catch(l){if(l instanceof ir)throw l;Yn(r,"network-request-failed",{message:String(l)})}}async function tu(r,e,n,s,l={}){const c=await Jr(r,e,n,s,l);return"mfaPendingCredential"in c&&Yn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function tE(r,e,n,s){const l=`${e}${n}?${s}`,c=r,d=c.config.emulator?qm(r.config,l):`${r.config.apiScheme}://${l}`;return H1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function G1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),F1.get())})}}function zc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=mi(r,e,s);return l.customData._tokenResponse=n,l}function gv(r){return r!==void 0&&r.enterprise!==void 0}class K1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return G1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y1(r,e){return Jr(r,"GET","/v2/recaptchaConfig",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(r,e){return Jr(r,"POST","/v1/accounts:delete",e)}async function sh(r,e){return Jr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $1(r,e=!1){const n=_t(r),s=await n.getIdToken(e),l=Hm(s);Te(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Vl(nm(l.auth_time)),issuedAtTime:Vl(nm(l.iat)),expirationTime:Vl(nm(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function nm(r){return Number(r)*1e3}function Hm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const l=U0(n);return l?JSON.parse(l):(Qc("Failed to decode base64 JWT payload"),null)}catch(l){return Qc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function yv(r){const e=Hm(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ir&&Z1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Z1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vl(this.lastLoginAt),this.creationTime=Vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(r){const e=r.auth,n=await r.getIdToken(),s=await zl(r,sh(e,{idToken:n}));Te(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?nE(l.providerUserInfo):[],d=ew(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,A)}async function J1(r){const e=_t(r);await ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ew(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function nE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tw(r,e){const n=await eE(r,{},async()=>{const s=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await tE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&lo(r.emulatorConfig.host)&&(g.credentials="include"),J0.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nw(r,e){return Jr(r,"POST","/v2/accounts:revokeToken",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=yv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await tw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new $a;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Te(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Te(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new W1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await zl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $1(this,e)}reload(){return J1(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ah(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await zl(this,X1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,A=n.lastLoginAt??void 0,{uid:b,emailVerified:I,isAnonymous:z,providerData:K,stsTokenManager:ne}=n;Te(b&&ne,e,"internal-error");const te=$a.fromJSON(this.name,ne);Te(typeof b=="string",e,"internal-error"),Vr(s,e.name),Vr(l,e.name),Te(typeof I=="boolean",e,"internal-error"),Te(typeof z=="boolean",e,"internal-error"),Vr(c,e.name),Vr(d,e.name),Vr(p,e.name),Vr(g,e.name),Vr(y,e.name),Vr(A,e.name);const re=new Qn({uid:b,auth:e,email:l,emailVerified:I,displayName:s,isAnonymous:z,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:te,createdAt:y,lastLoginAt:A});return K&&Array.isArray(K)&&(re.providerData=K.map(ee=>({...ee}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,n,s=!1){const l=new $a;l.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await ah(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Te(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?nE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new $a;p.updateFromIdToken(s);const g=new Qn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;function $i(r){er(r instanceof Function,"Expected a class definition");let e=_v.get(r);return e?(er(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,_v.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iE.type="NONE";const vv=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r,e,n){return`firebase:${r}:${e}:${n}`}class Za{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Kc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Kc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Za($i(vv),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||$i(vv);const d=Kc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const A=await y._get(d);if(A){let b;if(typeof A=="string"){const I=await sh(e,{idToken:A}).catch(()=>{});if(!I)break;b=await Qn._fromGetAccountInfoResponse(e,I,A)}else b=Qn._fromJSON(e,A);y!==c&&(p=b),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Za(c,e,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Za(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uE(e))return"Blackberry";if(cE(e))return"Webos";if(sE(e))return"Safari";if((e.includes("chrome/")||aE(e))&&!e.includes("edge/"))return"Chrome";if(lE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function rE(r=en()){return/firefox\//i.test(r)}function sE(r=en()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aE(r=en()){return/crios\//i.test(r)}function oE(r=en()){return/iemobile/i.test(r)}function lE(r=en()){return/android/i.test(r)}function uE(r=en()){return/blackberry/i.test(r)}function cE(r=en()){return/webos/i.test(r)}function Fm(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function iw(r=en()){return Fm(r)&&!!window.navigator?.standalone}function rw(){return gb()&&document.documentMode===10}function hE(r=en()){return Fm(r)||lE(r)||cE(r)||uE(r)||/windows phone/i.test(r)||oE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(r,e=[]){let n;switch(r){case"Browser":n=Ev(en());break;case"Worker":n=`${Ev(en())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(r,e={}){return Jr(r,"GET","/v2/passwordPolicy",Wr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=6;class lw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ow,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tv(this),this.idTokenSubscription=new Tv(this),this.beforeStateQueue=new sw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sh(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ln(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Zi(this));const n=e?_t(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aw(this),n=new lw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&U1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xs(r){return _t(r)}class Tv{constructor(e){this.auth=e,this.observer=null,this.addObserver=bb(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cw(r){Sh=r}function dE(r){return Sh.loadJS(r)}function hw(){return Sh.recaptchaEnterpriseScript}function fw(){return Sh.gapiScript}function dw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class mw{constructor(){this.enterprise=new pw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class pw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gw="recaptcha-enterprise",mE="NO_RECAPTCHA";class yw{constructor(e){this.type=gw,this.auth=Xs(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{Y1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new K1(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;gv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(mE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mw().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&gv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=hw();g.length!==0&&(g+=p),dE(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function Av(r,e,n,s=!1,l=!1){const c=new yw(r);let d;if(l)d=mE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ym(r,e,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Av(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Av(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(r,e){const n=zm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Fs(c,e??{}))return l;Yn(l,"already-initialized")}return n.initialize({options:e})}function vw(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map($i);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function Ew(r,e,n){const s=Xs(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=pE(e),{host:d,port:p}=Tw(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},A=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Fs(y,s.config.emulator)&&Fs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,lo(d)?(q0(`${c}//${d}${g}`),H0("Auth",!0)):Aw()}function pE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Tw(r){const e=pE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Sv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Sv(d)}}}function Sv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Aw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,n){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}async function Sw(r,e){return Jr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(r,e){return tu(r,"POST","/v1/accounts:signInWithPassword",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(r,e){return tu(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}async function Rw(r,e){return tu(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Gm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Bl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,n,"signInWithPassword",bw);case"emailLink":return ww(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,s,"signUpPassword",Sw);case"emailLink":return Rw(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(r,e){return tu(r,"POST","/v1/accounts:signInWithIdp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="http://localhost";class Qs extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new Qs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Wa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Wa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wa(e,n)}buildRequest(){const e={requestUri:Iw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nw(r){const e=Rl(Il(r)).link,n=e?Rl(Il(e)).deep_link_id:null,s=Rl(Il(r)).deep_link_id;return(s?Rl(Il(s)).link:null)||s||n||e||r}class Qm{constructor(e){const n=Rl(Il(e)),s=n.apiKey??null,l=n.oobCode??null,c=Cw(n.mode??null);Te(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Nw(e);try{return new Qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.providerId=co.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Qm.parseLink(n);return Te(s,"argument-error"),Bl._fromEmailAndCode(e,s.code,s.tenantId)}}co.PROVIDER_ID="password";co.EMAIL_PASSWORD_SIGN_IN_METHOD="password";co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends gE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends nu{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Pr.credential(n,s)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends nu{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends nu{constructor(){super("twitter.com")}static credential(e,n){return Qs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Lr.credential(n,s)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(r,e){return tu(r,"POST","/v1/accounts:signUp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Qn._fromIdTokenResponse(e,s,l),d=bv(s);return new Ks({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=bv(s);return new Ks({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function bv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends ir{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new oh(e,n,s,l)}}function yE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(r,c,e,s):c})}async function Dw(r,e,n=!1){const s=await zl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ks._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(r,e,n=!1){const{auth:s}=r;if(Ln(s.app))return Promise.reject(Zi(s));const l="reauthenticate";try{const c=await zl(r,yE(s,l,e,r),n);Te(c.idToken,s,"internal-error");const d=Hm(c.idToken);Te(d,s,"internal-error");const{sub:p}=d;return Te(r.uid===p,s,"user-mismatch"),Ks._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(r,e,n=!1){if(Ln(r.app))return Promise.reject(Zi(r));const s="signIn",l=await yE(r,s,e),c=await Ks._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function Vw(r,e){return _E(Xs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(r){const e=Xs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mw(r,e,n){if(Ln(r.app))return Promise.reject(Zi(r));const s=Xs(r),d=await ym(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xw).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&vE(r),g}),p=await Ks._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function Pw(r,e,n){return Ln(r.app)?Promise.reject(Zi(r)):Vw(_t(r),co.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&vE(r),s})}function kw(r,e,n,s){return _t(r).onIdTokenChanged(e,n,s)}function Lw(r,e,n){return _t(r).beforeAuthStateChanged(e,n)}function Uw(r,e,n,s){return _t(r).onAuthStateChanged(e,n,s)}function EE(r){return _t(r).signOut()}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=1e3,zw=10;class AE extends TE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);rw()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,zw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},jw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const Bw=AE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends TE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SE.type="SESSION";const bE=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new bh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await qw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Km("",20);l.port1.start();const A=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(b){const I=b;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(A),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function Fw(r){pi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function Gw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qw(){return navigator?.serviceWorker?.controller||null}function Kw(){return wE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firebaseLocalStorageDb",Yw=1,uh="firebaseLocalStorage",IE="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wh(r,e){return r.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function Xw(){const r=indexedDB.deleteDatabase(RE);return new iu(r).toPromise()}function _m(){const r=indexedDB.open(RE,Yw);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(uh,{keyPath:IE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(uh)?e(s):(s.close(),await Xw(),e(await _m()))})})}async function wv(r,e,n){const s=wh(r,!0).put({[IE]:e,value:n});return new iu(s).toPromise()}async function $w(r,e){const n=wh(r,!1).get(e),s=await new iu(n).toPromise();return s===void 0?null:s.value}function Rv(r,e){const n=wh(r,!0).delete(e);return new iu(n).toPromise()}const Zw=800,Ww=3;class CE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Ww)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(Kw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Gw(),!this.activeServiceWorker)return;this.sender=new Hw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Qw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await wv(e,lh,"1"),await Rv(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>$w(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=wh(l,!1).getAll();return new iu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CE.type="LOCAL";const Jw=CE;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(r,e){return e?$i(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tR(r){return _E(r.auth,new Ym(r),r.bypassAuthState)}function nR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Ow(n,new Ym(r),r.bypassAuthState)}async function iR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Dw(n,new Ym(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tR;case"linkViaPopup":case"linkViaRedirect":return iR;case"reauthViaPopup":case"reauthViaRedirect":return nR;default:Yn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new eu(2e3,1e4);class Xa extends NE{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rR.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",Yc=new Map;class aR extends NE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const s=await oR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oR(r,e){const n=cR(e),s=uR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function lR(r,e){Yc.set(r._key(),e)}function uR(r){return $i(r._redirectPersistence)}function cR(r){return Kc(sR,r.config.apiKey,r.name)}async function hR(r,e,n=!1){if(Ln(r.app))return Promise.reject(Zi(r));const s=Xs(r),l=eR(s,e),d=await new aR(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=600*1e3;class dR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!xE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}}function Iv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function xE({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function mR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(r,e={}){return Jr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function _R(r){if(r.config.emulator)return;const{authorizedDomains:e}=await pR(r);for(const n of e)try{if(vR(n))return}catch{}Yn(r,"unauthorized-domain")}function vR(r){const e=pm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!yR.test(n))return!1;if(gR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new eu(3e4,6e4);function Cv(){const r=pi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function TR(r){return new Promise((e,n)=>{function s(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(mi(r,"network-request-failed"))},timeout:ER.get()})}if(pi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(pi().gapi?.load)s();else{const l=dw("iframefcb");return pi()[l]=()=>{gapi.load?s():n(mi(r,"network-request-failed"))},dE(`${fw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function AR(r){return Xc=Xc||TR(r),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new eu(5e3,15e3),bR="__/auth/iframe",wR="emulator/auth/iframe",RR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?qm(e,wR):`https://${r.config.authDomain}/${bR}`,s={apiKey:e.apiKey,appName:r.name,v:uo},l=IR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Jl(s).slice(1)}`}async function NR(r){const e=await AR(r),n=pi().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:CR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=mi(r,"network-request-failed"),p=pi().setTimeout(()=>{c(d)},SR.get());function g(){pi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DR=500,OR=600,VR="_blank",MR="http://localhost";class Nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(r,e,n,s=DR,l=OR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...xR,width:s.toString(),height:l.toString(),top:c,left:d},y=en().toLowerCase();n&&(p=aE(y)?VR:n),rE(y)&&(e=e||MR,g.scrollbars="yes");const A=Object.entries(g).reduce((I,[z,K])=>`${I}${z}=${K},`,"");if(iw(y)&&p!=="_self")return kR(e||"",p),new Nv(null);const b=window.open(e||"",p,A);Te(b,r,"popup-blocked");try{b.focus()}catch{}return new Nv(b)}function kR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="__/auth/handler",UR="emulator/auth/handler",jR=encodeURIComponent("fac");async function xv(r,e,n,s,l,c){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:uo,eventId:l};if(e instanceof gE){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",Sb(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,b]of Object.entries({}))d[A]=b}if(e instanceof nu){const A=e.getScopes().filter(b=>b!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const A of Object.keys(p))p[A]===void 0&&delete p[A];const g=await r._getAppCheckToken(),y=g?`#${jR}=${encodeURIComponent(g)}`:"";return`${zR(r)}?${Jl(p).slice(1)}${y}`}function zR({config:r}){return r.emulator?qm(r,UR):`https://${r.authDomain}/${LR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="webStorageSupport";class BR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bE,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(e,n,s,l){er(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await xv(e,n,s,pm(),l);return PR(e,c,Km())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await xv(e,n,s,pm(),l);return Fw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(er(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await NR(e),s=new dR(e);return n.register("authEvent",l=>(Te(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(im,{type:im},l=>{const c=l?.[0]?.[im];c!==void 0&&n(!!c),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_R(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hE()||sE()||Fm()}}const qR=BR;var Dv="@firebase/auth",Ov="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GR(r){to(new Gs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(r)},y=new uw(s,l,c,g);return vw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),to(new Gs("auth-internal",e=>{const n=Xs(e.getProvider("auth").getImmediate());return(s=>new HR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(Dv,Ov,FR(r)),Br(Dv,Ov,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=300,KR=B0("authIdTokenMaxAge")||QR;let Vv=null;const YR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>KR)return;const l=n?.token;Vv!==l&&(Vv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function XR(r=K0()){const e=zm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=_w(r,{popupRedirectResolver:qR,persistence:[Jw,Bw,bE]}),s=B0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=YR(c.toString());Lw(n,d,()=>d(n.currentUser)),kw(n,p=>d(p))}}const l=j0("auth");return l&&Ew(n,`http://${l}`),n}function $R(){return document.getElementsByTagName("head")?.[0]??document}cw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=mi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",$R().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GR("Browser");var Mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,DE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function C(){}C.prototype=w.prototype,D.D=w.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(V,M,k){for(var N=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)N[Rt-2]=arguments[Rt];return w.prototype[M].apply(V,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,w,C){C||(C=0);var V=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)V[M]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(M=0;16>M;++M)V[M]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=D.g[0],C=D.g[1],M=D.g[2];var k=D.g[3],N=w+(k^C&(M^k))+V[0]+3614090360&4294967295;w=C+(N<<7&4294967295|N>>>25),N=k+(M^w&(C^M))+V[1]+3905402710&4294967295,k=w+(N<<12&4294967295|N>>>20),N=M+(C^k&(w^C))+V[2]+606105819&4294967295,M=k+(N<<17&4294967295|N>>>15),N=C+(w^M&(k^w))+V[3]+3250441966&4294967295,C=M+(N<<22&4294967295|N>>>10),N=w+(k^C&(M^k))+V[4]+4118548399&4294967295,w=C+(N<<7&4294967295|N>>>25),N=k+(M^w&(C^M))+V[5]+1200080426&4294967295,k=w+(N<<12&4294967295|N>>>20),N=M+(C^k&(w^C))+V[6]+2821735955&4294967295,M=k+(N<<17&4294967295|N>>>15),N=C+(w^M&(k^w))+V[7]+4249261313&4294967295,C=M+(N<<22&4294967295|N>>>10),N=w+(k^C&(M^k))+V[8]+1770035416&4294967295,w=C+(N<<7&4294967295|N>>>25),N=k+(M^w&(C^M))+V[9]+2336552879&4294967295,k=w+(N<<12&4294967295|N>>>20),N=M+(C^k&(w^C))+V[10]+4294925233&4294967295,M=k+(N<<17&4294967295|N>>>15),N=C+(w^M&(k^w))+V[11]+2304563134&4294967295,C=M+(N<<22&4294967295|N>>>10),N=w+(k^C&(M^k))+V[12]+1804603682&4294967295,w=C+(N<<7&4294967295|N>>>25),N=k+(M^w&(C^M))+V[13]+4254626195&4294967295,k=w+(N<<12&4294967295|N>>>20),N=M+(C^k&(w^C))+V[14]+2792965006&4294967295,M=k+(N<<17&4294967295|N>>>15),N=C+(w^M&(k^w))+V[15]+1236535329&4294967295,C=M+(N<<22&4294967295|N>>>10),N=w+(M^k&(C^M))+V[1]+4129170786&4294967295,w=C+(N<<5&4294967295|N>>>27),N=k+(C^M&(w^C))+V[6]+3225465664&4294967295,k=w+(N<<9&4294967295|N>>>23),N=M+(w^C&(k^w))+V[11]+643717713&4294967295,M=k+(N<<14&4294967295|N>>>18),N=C+(k^w&(M^k))+V[0]+3921069994&4294967295,C=M+(N<<20&4294967295|N>>>12),N=w+(M^k&(C^M))+V[5]+3593408605&4294967295,w=C+(N<<5&4294967295|N>>>27),N=k+(C^M&(w^C))+V[10]+38016083&4294967295,k=w+(N<<9&4294967295|N>>>23),N=M+(w^C&(k^w))+V[15]+3634488961&4294967295,M=k+(N<<14&4294967295|N>>>18),N=C+(k^w&(M^k))+V[4]+3889429448&4294967295,C=M+(N<<20&4294967295|N>>>12),N=w+(M^k&(C^M))+V[9]+568446438&4294967295,w=C+(N<<5&4294967295|N>>>27),N=k+(C^M&(w^C))+V[14]+3275163606&4294967295,k=w+(N<<9&4294967295|N>>>23),N=M+(w^C&(k^w))+V[3]+4107603335&4294967295,M=k+(N<<14&4294967295|N>>>18),N=C+(k^w&(M^k))+V[8]+1163531501&4294967295,C=M+(N<<20&4294967295|N>>>12),N=w+(M^k&(C^M))+V[13]+2850285829&4294967295,w=C+(N<<5&4294967295|N>>>27),N=k+(C^M&(w^C))+V[2]+4243563512&4294967295,k=w+(N<<9&4294967295|N>>>23),N=M+(w^C&(k^w))+V[7]+1735328473&4294967295,M=k+(N<<14&4294967295|N>>>18),N=C+(k^w&(M^k))+V[12]+2368359562&4294967295,C=M+(N<<20&4294967295|N>>>12),N=w+(C^M^k)+V[5]+4294588738&4294967295,w=C+(N<<4&4294967295|N>>>28),N=k+(w^C^M)+V[8]+2272392833&4294967295,k=w+(N<<11&4294967295|N>>>21),N=M+(k^w^C)+V[11]+1839030562&4294967295,M=k+(N<<16&4294967295|N>>>16),N=C+(M^k^w)+V[14]+4259657740&4294967295,C=M+(N<<23&4294967295|N>>>9),N=w+(C^M^k)+V[1]+2763975236&4294967295,w=C+(N<<4&4294967295|N>>>28),N=k+(w^C^M)+V[4]+1272893353&4294967295,k=w+(N<<11&4294967295|N>>>21),N=M+(k^w^C)+V[7]+4139469664&4294967295,M=k+(N<<16&4294967295|N>>>16),N=C+(M^k^w)+V[10]+3200236656&4294967295,C=M+(N<<23&4294967295|N>>>9),N=w+(C^M^k)+V[13]+681279174&4294967295,w=C+(N<<4&4294967295|N>>>28),N=k+(w^C^M)+V[0]+3936430074&4294967295,k=w+(N<<11&4294967295|N>>>21),N=M+(k^w^C)+V[3]+3572445317&4294967295,M=k+(N<<16&4294967295|N>>>16),N=C+(M^k^w)+V[6]+76029189&4294967295,C=M+(N<<23&4294967295|N>>>9),N=w+(C^M^k)+V[9]+3654602809&4294967295,w=C+(N<<4&4294967295|N>>>28),N=k+(w^C^M)+V[12]+3873151461&4294967295,k=w+(N<<11&4294967295|N>>>21),N=M+(k^w^C)+V[15]+530742520&4294967295,M=k+(N<<16&4294967295|N>>>16),N=C+(M^k^w)+V[2]+3299628645&4294967295,C=M+(N<<23&4294967295|N>>>9),N=w+(M^(C|~k))+V[0]+4096336452&4294967295,w=C+(N<<6&4294967295|N>>>26),N=k+(C^(w|~M))+V[7]+1126891415&4294967295,k=w+(N<<10&4294967295|N>>>22),N=M+(w^(k|~C))+V[14]+2878612391&4294967295,M=k+(N<<15&4294967295|N>>>17),N=C+(k^(M|~w))+V[5]+4237533241&4294967295,C=M+(N<<21&4294967295|N>>>11),N=w+(M^(C|~k))+V[12]+1700485571&4294967295,w=C+(N<<6&4294967295|N>>>26),N=k+(C^(w|~M))+V[3]+2399980690&4294967295,k=w+(N<<10&4294967295|N>>>22),N=M+(w^(k|~C))+V[10]+4293915773&4294967295,M=k+(N<<15&4294967295|N>>>17),N=C+(k^(M|~w))+V[1]+2240044497&4294967295,C=M+(N<<21&4294967295|N>>>11),N=w+(M^(C|~k))+V[8]+1873313359&4294967295,w=C+(N<<6&4294967295|N>>>26),N=k+(C^(w|~M))+V[15]+4264355552&4294967295,k=w+(N<<10&4294967295|N>>>22),N=M+(w^(k|~C))+V[6]+2734768916&4294967295,M=k+(N<<15&4294967295|N>>>17),N=C+(k^(M|~w))+V[13]+1309151649&4294967295,C=M+(N<<21&4294967295|N>>>11),N=w+(M^(C|~k))+V[4]+4149444226&4294967295,w=C+(N<<6&4294967295|N>>>26),N=k+(C^(w|~M))+V[11]+3174756917&4294967295,k=w+(N<<10&4294967295|N>>>22),N=M+(w^(k|~C))+V[2]+718787259&4294967295,M=k+(N<<15&4294967295|N>>>17),N=C+(k^(M|~w))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+k&4294967295}s.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var C=w-this.blockSize,V=this.B,M=this.h,k=0;k<w;){if(M==0)for(;k<=C;)l(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<w;)if(V[M++]=D.charCodeAt(k++),M==this.blockSize){l(this,V),M=0;break}}else for(;k<w;)if(V[M++]=D[k++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=w},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var C=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=C&255,C/=256;for(this.u(D),D=Array(16),w=C=0;4>w;++w)for(var V=0;32>V;V+=8)D[C++]=this.g[w]>>>V&255;return D};function c(D,w){var C=p;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=w(D)}function d(D,w){this.h=w;for(var C=[],V=!0,M=D.length-1;0<=M;M--){var k=D[M]|0;V&&k==w||(C[M]=k,V=!1)}this.g=C}var p={};function g(D){return-128<=D&&128>D?c(D,function(w){return new d([w|0],0>w?-1:0)}):new d([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return te(y(-D));for(var w=[],C=1,V=0;D>=C;V++)w[V]=D/C|0,C*=4294967296;return new d(w,0)}function A(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return te(A(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(w,8)),V=b,M=0;M<D.length;M+=8){var k=Math.min(8,D.length-M),N=parseInt(D.substring(M,M+k),w);8>k?(k=y(Math.pow(w,k)),V=V.j(k).add(y(N))):(V=V.j(C),V=V.add(y(N)))}return V}var b=g(0),I=g(1),z=g(16777216);r=d.prototype,r.m=function(){if(ne(this))return-te(this).m();for(var D=0,w=1,C=0;C<this.g.length;C++){var V=this.i(C);D+=(0<=V?V:4294967296+V)*w,w*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(ne(this))return"-"+te(this).toString(D);for(var w=y(Math.pow(D,6)),C=this,V="";;){var M=se(C,w).g;C=re(C,M.j(w));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=M,K(C))return k+V;for(;6>k.length;)k="0"+k;V=k+V}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function ne(D){return D.h==-1}r.l=function(D){return D=re(this,D),ne(D)?-1:K(D)?0:1};function te(D){for(var w=D.g.length,C=[],V=0;V<w;V++)C[V]=~D.g[V];return new d(C,~D.h).add(I)}r.abs=function(){return ne(this)?te(this):this},r.add=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],V=0,M=0;M<=w;M++){var k=V+(this.i(M)&65535)+(D.i(M)&65535),N=(k>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);V=N>>>16,k&=65535,N&=65535,C[M]=N<<16|k}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(D,w){return D.add(te(w))}r.j=function(D){if(K(this)||K(D))return b;if(ne(this))return ne(D)?te(this).j(te(D)):te(te(this).j(D));if(ne(D))return te(this.j(te(D)));if(0>this.l(z)&&0>D.l(z))return y(this.m()*D.m());for(var w=this.g.length+D.g.length,C=[],V=0;V<2*w;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<D.g.length;M++){var k=this.i(V)>>>16,N=this.i(V)&65535,Rt=D.i(M)>>>16,de=D.i(M)&65535;C[2*V+2*M]+=N*de,ee(C,2*V+2*M),C[2*V+2*M+1]+=k*de,ee(C,2*V+2*M+1),C[2*V+2*M+1]+=N*Rt,ee(C,2*V+2*M+1),C[2*V+2*M+2]+=k*Rt,ee(C,2*V+2*M+2)}for(V=0;V<w;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=w;V<2*w;V++)C[V]=0;return new d(C,0)};function ee(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function ue(D,w){this.g=D,this.h=w}function se(D,w){if(K(w))throw Error("division by zero");if(K(D))return new ue(b,b);if(ne(D))return w=se(te(D),w),new ue(te(w.g),te(w.h));if(ne(w))return w=se(D,te(w)),new ue(te(w.g),w.h);if(30<D.g.length){if(ne(D)||ne(w))throw Error("slowDivide_ only works with positive integers.");for(var C=I,V=w;0>=V.l(D);)C=G(C),V=G(V);var M=fe(C,1),k=fe(V,1);for(V=fe(V,2),C=fe(C,2);!K(V);){var N=k.add(V);0>=N.l(D)&&(M=M.add(C),k=N),V=fe(V,1),C=fe(C,1)}return w=re(D,M.j(w)),new ue(M,w)}for(M=b;0<=D.l(w);){for(C=Math.max(1,Math.floor(D.m()/w.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),k=y(C),N=k.j(w);ne(N)||0<N.l(D);)C-=V,k=y(C),N=k.j(w);K(k)&&(k=I),M=M.add(k),D=re(D,N)}return new ue(M,D)}r.A=function(D){return se(this,D).h},r.and=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],V=0;V<w;V++)C[V]=this.i(V)&D.i(V);return new d(C,this.h&D.h)},r.or=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],V=0;V<w;V++)C[V]=this.i(V)|D.i(V);return new d(C,this.h|D.h)},r.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],V=0;V<w;V++)C[V]=this.i(V)^D.i(V);return new d(C,this.h^D.h)};function G(D){for(var w=D.g.length+1,C=[],V=0;V<w;V++)C[V]=D.i(V)<<1|D.i(V-1)>>>31;return new d(C,D.h)}function fe(D,w){var C=w>>5;w%=32;for(var V=D.g.length-C,M=[],k=0;k<V;k++)M[k]=0<w?D.i(k+C)>>>w|D.i(k+C+1)<<32-w:D.i(k+C);return new d(M,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,DE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=A,qr=d}).apply(typeof Mv<"u"?Mv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OE,Cl,VE,$c,vm,ME,PE,kE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in _))break e;_=_[L]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,S=!1,L={next:function(){if(!S&&_<u.length){var F=_++;return{value:m(F,u[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,_){return u.call.apply(u.bind,arguments)}function b(u,m,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:b,I.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function K(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,L,F){for(var ae=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ae[Le-2]=arguments[Le];return m.prototype[L].apply(S,ae)}}function ne(u){const m=u.length;if(0<m){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function te(u,m){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(g(S)){const L=u.length||0,F=S.length||0;u.length=L+F;for(let ae=0;ae<F;ae++)u[L+ae]=S[ae]}else u.push(S)}}class re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){return/^[\s\xa0]*$/.test(u)}function ue(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function se(u){return se[" "](u),u}se[" "]=function(){};var G=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function fe(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function w(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,m){let _,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(_ in S)u[_]=S[_];for(let F=0;F<C.length;F++)_=C[F],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function k(u){p.setTimeout(()=>{throw u},0)}function N(){var u=Ie;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Rt{constructor(){this.h=this.g=null}add(m,_){const S=de.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var de=new re(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ce=!1,Ie=new Rt,x=()=>{const u=p.Promise.resolve(void 0);ie=()=>{u.then(W)}};var W=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){k(_)}var m=de;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ce=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function xe(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(G){e:{try{se(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}K(xe,J);var be={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function $n(u,m,_,S,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=L,this.key=++Je,this.da=this.fa=!1}function rr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ai(u){this.src=u,this.g={},this.h=0}Ai.prototype.add=function(u,m,_,S,L){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var ae=rs(u,m,S,L);return-1<ae?(m=u[ae],_||(m.fa=!1)):(m=new $n(m,this.src,F,!!S,L),m.fa=_,u.push(m)),m};function is(u,m){var _=m.type;if(_ in u.g){var S=u.g[_],L=Array.prototype.indexOf.call(S,m,void 0),F;(F=0<=L)&&Array.prototype.splice.call(S,L,1),F&&(rr(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function rs(u,m,_,S){for(var L=0;L<u.length;++L){var F=u[L];if(!F.da&&F.listener==m&&F.capture==!!_&&F.ha==S)return L}return-1}var ss="closure_lm_"+(1e6*Math.random()|0),go={};function gu(u,m,_,S,L){if(Array.isArray(m)){for(var F=0;F<m.length;F++)gu(u,m[F],_,S,L);return null}return _=yu(_),u&&u[Vt]?u.K(m,_,y(S)?!!S.capture:!1,L):bn(u,m,_,!1,S,L)}function bn(u,m,_,S,L,F){if(!m)throw Error("Invalid event type");var ae=y(L)?!!L.capture:!!L,Le=ea(u);if(Le||(u[ss]=Le=new Ai(u)),_=Le.add(m,_,S,ae,F),_.proxy)return _;if(S=Fh(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)_e||(L=ae),L===void 0&&(L=!1),u.addEventListener(m.toString(),S,L);else if(u.attachEvent)u.attachEvent(as(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Fh(){function u(_){return m.call(u.src,u.listener,_)}const m=Gh;return u}function yo(u,m,_,S,L){if(Array.isArray(m))for(var F=0;F<m.length;F++)yo(u,m[F],_,S,L);else S=y(S)?!!S.capture:!!S,_=yu(_),u&&u[Vt]?(u=u.i,m=String(m).toString(),m in u.g&&(F=u.g[m],_=rs(F,_,S,L),-1<_&&(rr(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete u.g[m],u.h--)))):u&&(u=ea(u))&&(m=u.g[m.toString()],u=-1,m&&(u=rs(m,_,S,L)),(_=-1<u?m[u]:null)&&Js(_))}function Js(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Vt])is(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(as(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=ea(m))?(is(_,u),_.h==0&&(_.src=null,m[ss]=null)):rr(u)}}}function as(u){return u in go?go[u]:go[u]="on"+u}function Gh(u,m){if(u.da)u=!0;else{m=new xe(m,this);var _=u.listener,S=u.ha||u.src;u.fa&&Js(u),u=_.call(S,m)}return u}function ea(u){return u=u[ss],u instanceof Ai?u:null}var _o="__closure_events_fn_"+(1e9*Math.random()>>>0);function yu(u){return typeof u=="function"?u:(u[_o]||(u[_o]=function(m){return u.handleEvent(m)}),u[_o])}function ut(){oe.call(this),this.i=new Ai(this),this.M=this,this.F=null}K(ut,oe),ut.prototype[Vt]=!0,ut.prototype.removeEventListener=function(u,m,_,S){yo(this,u,m,_,S)};function Ge(u,m){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var L=m;m=new J(S,u),V(m,L)}if(L=!0,_)for(var F=_.length-1;0<=F;F--){var ae=m.g=_[F];L=dn(ae,S,!0,m)&&L}if(ae=m.g=u,L=dn(ae,S,!0,m)&&L,L=dn(ae,S,!1,m)&&L,_)for(F=0;F<_.length;F++)ae=m.g=_[F],L=dn(ae,S,!1,m)&&L}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],S=0;S<_.length;S++)rr(_[S]);delete u.g[m],u.h--}}this.F=null},ut.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},ut.prototype.L=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function dn(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,F=0;F<m.length;++F){var ae=m[F];if(ae&&!ae.da&&ae.capture==_){var Le=ae.listener,Ct=ae.ha||ae.src;ae.fa&&is(u.i,ae),L=Le.call(Ct,S)!==!1&&L}}return L&&!S.defaultPrevented}function Yt(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function _u(u){u.g=Yt(()=>{u.g=null,u.i&&(u.i=!1,_u(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Qh extends oe{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_u(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(u){oe.call(this),this.h=u,this.g={}}K(os,oe);var ls=[];function us(u){fe(u.g,function(m,_){this.g.hasOwnProperty(_)&&Js(m)},u),u.g={}}os.prototype.N=function(){os.aa.N.call(this),us(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=p.JSON.stringify,ta=p.JSON.parse,cs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function vo(){}vo.prototype.h=null;function Eo(u){return u.h||(u.h=u.i())}function To(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bi(){J.call(this,"d")}K(bi,J);function Ao(){J.call(this,"c")}K(Ao,J);var Zn={},So=null;function sr(){return So=So||new ut}Zn.La="serverreachability";function na(u){J.call(this,Zn.La,u)}K(na,J);function ar(u){const m=sr();Ge(m,new na(m))}Zn.STAT_EVENT="statevent";function vu(u,m){J.call(this,Zn.STAT_EVENT,u),this.stat=m}K(vu,J);function rt(u){const m=sr();Ge(m,new vu(m,u))}Zn.Ma="timingevent";function It(u,m){J.call(this,Zn.Ma,u),this.size=m}K(It,J);function vt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function bo(u,m,_,S,L,F){u.info(function(){if(u.g)if(F)for(var ae="",Le=F.split("&"),Ct=0;Ct<Le.length;Ct++){var Ue=Le[Ct].split("=");if(1<Ue.length){var Pt=Ue[0];Ue=Ue[1];var Nt=Pt.split("_");ae=2<=Nt.length&&Nt[1]=="type"?ae+(Pt+"="+Ue+"&"):ae+(Pt+"=redacted&")}}else ae=null;else ae=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+_+`
`+ae})}function Kh(u,m,_,S,L,F,ae){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+_+`
`+F+" "+ae})}function or(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hs(u,_)+(S?" "+S:"")})}function Eu(u,m){u.info(function(){return"TIMEOUT: "+m})}wn.prototype.info=function(){};function hs(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return zn(_)}catch{return m}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wn;function Jn(){}K(Jn,vo),Jn.prototype.g=function(){return new XMLHttpRequest},Jn.prototype.i=function(){return{}},Wn=new Jn;function tn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.R=S||1,this.U=new os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var wo={},ia={};function Bn(u,m,_){u.L=1,u.v=gs(mn(m)),u.m=_,u.P=!0,Ri(u,null)}function Ri(u,m){u.F=Date.now(),fs(u),u.A=mn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Do(_.i,"t",S),u.C=0,_=u.j.J,u.h=new mt,u.g=ku(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Qh(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ls[0]=L.toString()),L=ls);for(var F=0;F<L.length;F++){var ae=gu(_,L[F],S||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),bo(u.i,u.u,u.A,u.l,u.R,u.m)}tn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Nn(u)==3?m.j():this.Y(u)},tn.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Nn(this.g);var m=this.g.Ba();const Mi=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Cu(this.g)))){this.J||Nt!=4||m==7||(m==8||0>=Mi?ar(3):ar(2)),ur(this);var _=this.g.Z();this.X=_;t:if(Tu(this)){var S=Cu(this.g);u="";var L=S.length,F=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ei(this);var ae="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(S[m],{stream:!(F&&m==L-1)});S.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Kh(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Ct=this.g;if((Le=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Le)){var Ue=Le;break t}}Ue=null}if(_=Ue)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,_);else{this.o=!1,this.s=3,rt(12),zt(this),ei(this);break e}}if(this.P){_=!0;let Bt;for(;!this.J&&this.C<ae.length;)if(Bt=Au(this,ae),Bt==ia){Nt==4&&(this.s=4,rt(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==wo){this.s=4,rt(15),or(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,Bt,null),ds(this,Bt);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ae.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,ae,"[Invalid Chunked Response]"),zt(this),ei(this);else if(0<ae.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),bs(Pt),Pt.M=!0,rt(11))}}else or(this.i,this.l,ae,null),ds(this,ae);Nt==4&&zt(this),this.o&&!this.J&&(Nt==4?Vu(this.j,this):(this.o=!1,fs(this)))}else Wh(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),ei(this)}}}catch{}finally{}};function Tu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Au(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?ia:(_=Number(m.substring(_,S)),isNaN(_)?wo:(S+=1,S+_>m.length?ia:(m=m.slice(S,S+_),u.C=S+_,m)))}tn.prototype.cancel=function(){this.J=!0,zt(this)};function fs(u){u.S=Date.now()+u.I,Su(u,u.I)}function Su(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vt(I(u.ba,u),m)}function ur(u){u.B&&(p.clearTimeout(u.B),u.B=null)}tn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Eu(this.i,this.A),this.L!=2&&(ar(),rt(17)),zt(this),this.s=2,ei(this)):Su(this,this.S-u)};function ei(u){u.j.G==0||u.J||Vu(u.j,u)}function zt(u){ur(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,us(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ds(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Ro(_.h,u))){if(!u.K&&Ro(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)pa(_),da(_);else break e;ko(_),rt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=vt(I(_.Za,_),6e3));if(1>=sa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vi(_,11)}else if((u.K||_.g==u)&&pa(_),!ee(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Ue=L[m];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Pt=Ue[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const Nt=Ue[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const Mi=Ue[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(S=1.5*Mi,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Bt=u.g;if(Bt){const oi=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var F=S.h;F.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(aa(F,F.h),F.h=null))}if(S.D){const Uo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(S.ya=Uo,Ye(S.I,S.D,Uo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ae=u;if(S.qa=Pu(S,S.J?S.ia:null,S.W),ae.K){nn(S.h,ae);var Le=ae,Ct=S.L;Ct&&(Le.I=Ct),Le.B&&(ur(Le),fs(Le)),S.g=ae}else Du(S);0<_.i.length&&ma(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Vi(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Vi(_,7):Mo(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}ar(4)}catch{}}var bu=class{constructor(u,m){this.g=u,this.map=m}};function Ii(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ra(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function sa(u){return u.h?1:u.g?u.g.size:0}function Ro(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function aa(u,m){u.g?u.g.add(m):u.h=m}function nn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ii.prototype.cancel=function(){if(this.i=Io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Io(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return ne(u.i)}function Yh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,S=0;S<_;S++)m.push(u[S]);return m}m=[],_=0;for(S in u)m[_++]=u[S];return m}function oa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const S in u)m[_++]=S;return m}}}function Co(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=oa(u),S=Yh(u),L=S.length,F=0;F<L;F++)m.call(void 0,S[F],_&&_[F],u)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),L=null;if(0<=S){var F=u[_].substring(0,S);L=u[_].substring(S+1)}else F=u[_];m(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Et(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Et){this.h=u.h,ps(this,u.j),this.o=u.o,this.g=u.g,cr(this,u.s),this.l=u.l;var m=u.i,_=new Ni;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ci(this,_),this.m=u.m}else u&&(m=String(u).match(ms))?(this.h=!1,ps(this,m[1]||"",!0),this.o=Rn(m[2]||""),this.g=Rn(m[3]||"",!0),cr(this,m[4]),this.l=Rn(m[5]||"",!0),Ci(this,m[6]||"",!0),this.m=Rn(m[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Et.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ys(m,No,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ys(m,No,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ys(_,_.charAt(0)=="/"?$h:xo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ys(_,la)),u.join("")};function mn(u){return new Et(u)}function ps(u,m,_){u.j=_?Rn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ci(u,m,_){m instanceof Ni?(u.i=m,Ru(u.i,u.h)):(_||(m=ys(m,Zh)),u.i=new Ni(m,u.h))}function Ye(u,m,_){u.i.set(m,_)}function gs(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Rn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,wu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var No=/[#\/\?@]/g,xo=/[#\?:]/g,$h=/[#\?]/g,Zh=/[#\?@]/g,la=/#/g;function Ni(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function In(u){u.g||(u.g=new Map,u.h=0,u.i&&Xh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ni.prototype,r.add=function(u,m){In(this),this.i=null,u=ti(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function xi(u,m){In(u),m=ti(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Di(u,m){return In(u),m=ti(u,m),u.g.has(m)}r.forEach=function(u,m){In(this),this.g.forEach(function(_,S){_.forEach(function(L){u.call(m,L,S,this)},this)},this)},r.na=function(){In(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let S=0;S<m.length;S++){const L=u[S];for(let F=0;F<L.length;F++)_.push(m[S])}return _},r.V=function(u){In(this);let m=[];if(typeof u=="string")Di(this,u)&&(m=m.concat(this.g.get(ti(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return In(this),this.i=null,u=ti(this,u),Di(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Do(u,m,_){xi(u,m),0<_.length&&(u.i=null,u.g.set(ti(u,m),ne(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var S=m[_];const F=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var L=F;ae[S]!==""&&(L+="="+encodeURIComponent(String(ae[S]))),u.push(L)}}return this.i=u.join("&")};function ti(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ru(u,m){m&&!u.j&&(In(u),u.i=null,u.g.forEach(function(_,S){var L=S.toLowerCase();S!=L&&(xi(this,S),Do(this,L,_))},u)),u.j=m}function _s(u,m){const _=new wn;if(p.Image){const S=new Image;S.onload=z(Cn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=z(Cn,_,"TestLoadImage: error",!1,m,S),S.onabort=z(Cn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=z(Cn,_,"TestLoadImage: timeout",!1,m,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function qn(u,m){const _=new wn,S=new AbortController,L=setTimeout(()=>{S.abort(),Cn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?Cn(_,"TestPingServer: ok",!0,m):Cn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Cn(_,"TestPingServer: error",!1,m)})}function Cn(u,m,_,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(_)}catch{}}function vs(){this.g=new cs}function ni(u,m,_){const S=_||"";try{Co(u,function(L,F){let ae=L;y(L)&&(ae=zn(L)),m.push(S+F+"="+encodeURIComponent(ae))})}catch(L){throw m.push(S+"type="+encodeURIComponent("_badmap")),L}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}K(hr,vo),hr.prototype.g=function(){return new Oi(this.l,this.j)},hr.prototype.i=(function(u){return function(){return u}})({});function Oi(u,m){ut.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Oi,ut),r=Oi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):ri(this),this.readyState==3&&Oo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ii(this))},r.Qa=function(u){this.g&&(this.response=u,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ri(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vo(u){let m="";return fe(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function Mt(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Vo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ye(u,m,_))}function He(u){ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(He,ut);var ua=/^https?$/i,Es=["POST","PUT"];r=He.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wn.g(),this.v=this.o?Eo(this.o):Eo(Wn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){Iu(this,F);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)_.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())_.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Es,m,void 0))||S||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ae]of _)this.g.setRequestHeader(F,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){Iu(this,F)}};function Iu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ca(u),si(u)}function ca(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ge(this,"complete"),Ge(this,"abort"),si(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),He.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)Yt(u.Ea,0,u);else if(Ge(u,"readystatechange"),Nn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=ae===0){var L=String(u.D).match(ms)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),S=!ua.test(L?L.toLowerCase():"")}_=S}if(_)Ge(u,"complete"),Ge(u,"success");else{u.m=6;try{var F=2<Nn(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",ca(u)}}finally{si(u)}}}}function si(u,m){if(u.g){Ts(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ge(u,"ready");try{_.onreadystatechange=S}catch{}}}function Ts(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ta(m)}};function Cu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Wh(u){const m={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(ee(u[S]))continue;var _=M(u[S]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=m[L]||[];m[L]=F,F.push(_)}D(m,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function fa(u){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,u),this.cb=As("retryDelaySeedMs",1e4,u),this.Wa=As("forwardChannelMaxRetries",2,u),this.wa=As("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(u&&u.concurrentRequestLimit),this.Da=new vs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=fa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,S){rt(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Pu(this,null,this.W),ma(this)};function Mo(u){if(Nu(u),u.G==3){var m=u.U++,_=mn(u.I);if(Ye(_,"SID",u.K),Ye(_,"RID",m),Ye(_,"TYPE","terminate"),Ss(u,_),m=new tn(u,u.j,m),m.L=2,m.v=gs(mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=ku(m.j,null),m.g.ea(m.v)),m.F=Date.now(),fs(m)}Mu(u)}function da(u){u.g&&(bs(u),u.g.cancel(),u.g=null)}function Nu(u){da(u),u.u&&(p.clearTimeout(u.u),u.u=null),pa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ma(u){if(!ra(u.h)&&!u.s){u.s=!0;var m=u.Ga;ie||x(),ce||(ie(),ce=!0),Ie.add(m,u),u.B=0}}function Jh(u,m){return sa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vt(I(u.Ga,u,m),Lo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new tn(this,this.j,u);let F=this.o;if(this.S&&(F?(F=w(F),V(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=xu(this,L,m),_=mn(this.I),Ye(_,"RID",u),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),Ss(this,_),F&&(this.O?m="headers="+encodeURIComponent(String(Vo(F)))+"&"+m:this.m&&Mt(_,this.m,F)),aa(this.h,L),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",m),Ye(_,"SID","null"),L.T=!0,Bn(L,_,null)):Bn(L,_,m),this.G=2}}else this.G==3&&(u?Po(this,u):this.i.length==0||ra(this.h)||Po(this))};function Po(u,m){var _;m?_=m.l:_=u.U++;const S=mn(u.I);Ye(S,"SID",u.K),Ye(S,"RID",_),Ye(S,"AID",u.T),Ss(u,S),u.m&&u.o&&Mt(S,u.m,u.o),_=new tn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=xu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),aa(u.h,_),Bn(_,S,m)}function Ss(u,m){u.H&&fe(u.H,function(_,S){Ye(m,S,_)}),u.l&&Co({},function(_,S){Ye(m,S,_)})}function xu(u,m,_){_=Math.min(u.i.length,_);var S=u.l?I(u.l.Na,u.l,u):null;e:{var L=u.i;let F=-1;for(;;){const ae=["count="+_];F==-1?0<_?(F=L[0].g,ae.push("ofs="+F)):F=0:ae.push("ofs="+F);let Le=!0;for(let Ct=0;Ct<_;Ct++){let Ue=L[Ct].g;const Pt=L[Ct].map;if(Ue-=F,0>Ue)F=Math.max(0,L[Ct].g-100),Le=!1;else try{ni(Pt,ae,"req"+Ue+"_")}catch{S&&S(Pt)}}if(Le){S=ae.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,S}function Du(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ie||x(),ce||(ie(),ce=!0),Ie.add(m,u),u.v=0}}function ko(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vt(I(u.Fa,u),Lo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),da(this),Ou(this))};function bs(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Ou(u){u.g=new tn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=mn(u.qa);Ye(m,"RID","rpc"),Ye(m,"SID",u.K),Ye(m,"AID",u.T),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(m,"TO",u.ja),Ye(m,"TYPE","xmlhttp"),Ss(u,m),u.m&&u.o&&Mt(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=gs(mn(m)),_.m=null,_.P=!0,Ri(_,u)}r.Za=function(){this.C!=null&&(this.C=null,da(this),ko(this),rt(19))};function pa(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Vu(u,m){var _=null;if(u.g==m){pa(u),bs(u),u.g=null;var S=2}else if(Ro(u.h,m))_=m.D,nn(u.h,m),S=1;else return;if(u.G!=0){if(m.o)if(S==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;S=sr(),Ge(S,new It(S,_)),ma(u)}else Du(u);else if(L=m.s,L==3||L==0&&0<m.X||!(S==1&&Jh(u,m)||S==2&&ko(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Vi(u,5);break;case 4:Vi(u,10);break;case 3:Vi(u,6);break;default:Vi(u,2)}}}function Lo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Vi(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),S=u.Xa;const L=!S;S=new Et(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ps(S,"https"),gs(S),L?_s(S.toString(),_):qn(S.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),Mu(u),Nu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Mu(u){if(u.G=0,u.ka=[],u.l){const m=Io(u.h);(m.length!=0||u.i.length!=0)&&(te(u.ka,m),te(u.ka,u.i),u.h.i.length=0,ne(u.i),u.i.length=0),u.l.ra()}}function Pu(u,m,_){var S=_ instanceof Et?mn(_):new Et(_);if(S.g!="")m&&(S.g=m+"."+S.g),cr(S,S.s);else{var L=p.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var F=new Et(null);S&&ps(F,S),m&&(F.g=m),L&&cr(F,L),_&&(F.l=_),S=F}return _=u.D,m=u.ya,_&&m&&Ye(S,_,m),Ye(S,"VER",u.la),Ss(u,S),S}function ku(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new He(new hr({eb:_})):new He(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}r=Lu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ga(){}ga.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){ut.call(this),this.g=new fa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ee(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ee(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}K(rn,ut),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Mo(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=zn(u),u=_);m.i.push(new bu(m.Ya++,u)),m.G==3&&ma(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,rn.aa.N.call(this)};function Uu(u){bi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}K(Uu,bi);function ju(){Ao.call(this),this.status=1}K(ju,Ao);function ai(u){this.g=u}K(ai,Lu),ai.prototype.ua=function(){Ge(this.g,"a")},ai.prototype.ta=function(u){Ge(this.g,new Uu(u))},ai.prototype.sa=function(u){Ge(this.g,new ju)},ai.prototype.ra=function(){Ge(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,kE=function(){return new ga},PE=function(){return sr()},ME=Zn,vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,$c=lr,wi.COMPLETE="complete",VE=wi,To.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Cl=To,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,OE=He}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",kv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Um("@firebase/firestore");function Ga(){return Fr.logLevel}function ZR(r){Fr.setLogLevel(r)}function he(r,...e){if(Fr.logLevel<=Me.DEBUG){const n=e.map(Xm);Fr.debug(`Firestore (${ho}): ${r}`,...n)}}function tr(r,...e){if(Fr.logLevel<=Me.ERROR){const n=e.map(Xm);Fr.error(`Firestore (${ho}): ${r}`,...n)}}function no(r,...e){if(Fr.logLevel<=Me.WARN){const n=e.map(Xm);Fr.warn(`Firestore (${ho}): ${r}`,...n)}}function Xm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,LE(r,s,n)}function LE(r,e,n){let s=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw tr(s),new Error(s)}function Fe(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||LE(e,l,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class JR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eI{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wi,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new UE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class tI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new tI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const s=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Lv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Lv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=rI(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Pe(r,e){return r<e?-1:r>e?1:0}function Em(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return rm(l)===rm(c)?Pe(l,c):rm(l)?1:-1}return Pe(r.length,e.length)}const sI=55296,aI=57343;function rm(r){const e=r.charCodeAt(0);return e>=sI&&e<=aI}function io(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="__name__";class di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof di?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=di.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Pe(e.length,n.length)}static compareSegments(e,n){const s=di.isNumericId(e),l=di.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?di.extractNumericId(e).compare(di.extractNumericId(n)):Em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class nt extends di{construct(e,n,s){return new nt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new nt(n)}static emptyPath(){return new nt([])}}const oI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends di{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return oI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uv}static keyField(){return new Qt([Uv])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r,e,n){if(!n)throw new le(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lI(r,e,n,s){if(e===!0&&s===!0)throw new le(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function jv(r){if(!ye.isDocumentKey(r))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zv(r){if(ye.isDocumentKey(r))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function zE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Rh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function an(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rh(r);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r,e){const n={typeString:r};return e&&(n.value=e),n}function ru(r,e){if(!zE(r))throw new le(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new le(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=-62135596800,qv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*qv);return new it(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Bv)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:wt("string",it._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new it(0,0))}static max(){return new we(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function uI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=we.fromTimestamp(s===1e9?new it(n+1,0):new it(n,s));return new Gr(l,ye.empty(),e)}function cI(r){return new Gr(r.readTime,r.key,ql)}class Gr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(we.min(),ye.empty(),ql)}static max(){return new Gr(we.max(),ye.empty(),ql)}}function hI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(r.documentKey,e.documentKey),n!==0?n:Pe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==fI)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,s)=>{n(e)}))}static reject(e){return new Z(((n,s)=>{s(e)}))}static waitFor(e){return new Z(((n,s)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(e){let n=Z.resolve(!1);for(const s of e)n=n.next((l=>l?Z.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new Z(((s,l)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((A=>{d[y]=A,++p,p===c&&s(d)}),(A=>l(A)))}}))}static doWhile(e,n){return new Z(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function mI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ih.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function Ch(r){return r==null}function ch(r){return r===0&&1/r==-1/0}function pI(r){return typeof r=="number"&&Number.isInteger(r)&&!ch(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="";function gI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Hv(e)),e=yI(r.get(n),e);return Hv(e)}function yI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case BE:n+="";break;default:n+=c}}return n}function Hv(r){return r+BE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function es(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function qE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=l??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Gt(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Gt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new An([])}unionWith(e){let n=new Ot(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new HE("Invalid base64 string: "+c):c}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const _I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(r){if(Fe(!!r,39018),typeof r=="string"){let e=0;const n=_I.exec(r);if(Fe(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Kr(r){return typeof r=="string"?Kt.fromBase64String(r):Kt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="server_timestamp",GE="__type__",QE="__previous_value__",KE="__local_write_time__";function Wm(r){return(r?.mapValue?.fields||{})[GE]?.stringValue===FE}function Nh(r){const e=r.mapValue.fields[QE];return Wm(e)?Nh(e):e}function Hl(r){const e=Qr(r.mapValue.fields[KE].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,s,l,c,d,p,g,y,A){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=A}}const hh="(default)";class Fl{constructor(e,n){this.projectId=e,this.database=n||hh}static empty(){return new Fl("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__type__",EI="__max__",Hc={mapValue:{}},XE="__vector__",fh="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Wm(r)?4:AI(r)?9007199254740991:TI(r)?10:11:Ae(28295,{value:r})}function Ei(r,e){if(r===e)return!0;const n=Yr(r);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Hl(r).isEqual(Hl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Qr(l.timestampValue),p=Qr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Kr(l.bytesValue).isEqual(Kr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return yt(l.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return yt(l.integerValue)===yt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=yt(l.doubleValue),p=yt(c.doubleValue);return d===p?ch(d)===ch(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return io(r.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Fv(d)!==Fv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ei(d[g],p[g])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function Gl(r,e){return(r.values||[]).find((n=>Ei(n,e)))!==void 0}function ro(r,e){if(r===e)return 0;const n=Yr(r),s=Yr(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=yt(c.integerValue||c.doubleValue),g=yt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Qv(r.timestampValue,e.timestampValue);case 4:return Qv(Hl(r),Hl(e));case 5:return Em(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Kr(c),g=Kr(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const A=Pe(p[y],g[y]);if(A!==0)return A}return Pe(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Pe(yt(c.latitude),yt(d.latitude));return p!==0?p:Pe(yt(c.longitude),yt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Kv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[fh]?.arrayValue,A=g[fh]?.arrayValue,b=Pe(y?.values?.length||0,A?.values?.length||0);return b!==0?b:Kv(y,A)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Hc.mapValue&&d===Hc.mapValue)return 0;if(c===Hc.mapValue)return 1;if(d===Hc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},A=Object.keys(y);g.sort(),A.sort();for(let b=0;b<g.length&&b<A.length;++b){const I=Em(g[b],A[b]);if(I!==0)return I;const z=ro(p[g[b]],y[A[b]]);if(z!==0)return z}return Pe(g.length,A.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Qv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pe(r,e);const n=Qr(r),s=Qr(e),l=Pe(n.seconds,s.seconds);return l!==0?l:Pe(n.nanos,s.nanos)}function Kv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=ro(n[l],s[l]);if(c)return c}return Pe(n.length,s.length)}function so(r){return Tm(r)}function Tm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Qr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Kr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ye.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Tm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Tm(n.fields[d])}`;return l+"}"})(r.mapValue):Ae(61005,{value:r})}function Zc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(r);return e?16+Zc(e):16;case 5:return 2*r.stringValue.length;case 6:return Kr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Zc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return es(s.fields,((c,d)=>{l+=c.length+Zc(d)})),l})(r.mapValue);default:throw Ae(13486,{value:r})}}function Yv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Am(r){return!!r&&"integerValue"in r}function Jm(r){return!!r&&"arrayValue"in r}function Xv(r){return!!r&&"nullValue"in r}function $v(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wc(r){return!!r&&"mapValue"in r}function TI(r){return(r?.mapValue?.fields||{})[YE]?.stringValue===XE}function Ml(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return es(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ml(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(r.arrayValue.values[n]);return e}return{...r}}function AI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===EI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=Qt.emptyPath(),s={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Ml(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Wc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){es(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new fn(Ml(this.value))}}function $E(r){const e=[];return es(r.fields,((n,s)=>{const l=new Qt([n]);if(Wc(s)){const c=$E(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,s,l,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Jt(e,0,we.min(),we.min(),we.min(),fn.empty(),0)}static newFoundDocument(e,n,s,l){return new Jt(e,1,n,we.min(),s,l,0)}static newNoDocument(e,n){return new Jt(e,2,n,we.min(),we.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,we.min(),we.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.position=e,this.inclusive=n}}function Zv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=ye.comparator(ye.fromName(d.referenceValue),n.key):s=ro(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ei(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n="asc"){this.field=e,this.dir=n}}function SI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class bt extends ZE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new wI(e,n,s):n==="array-contains"?new CI(e,s):n==="in"?new NI(e,s):n==="not-in"?new xI(e,s):n==="array-contains-any"?new DI(e,s):new bt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new RI(e,s):new II(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends ZE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return WE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WE(r){return r.op==="and"}function JE(r){return bI(r)&&WE(r)}function bI(r){for(const e of r.filters)if(e instanceof Xn)return!1;return!0}function Sm(r){if(r instanceof bt)return r.field.canonicalString()+r.op.toString()+so(r.value);if(JE(r))return r.filters.map((e=>Sm(e))).join(",");{const e=r.filters.map((n=>Sm(n))).join(",");return`${r.op}(${e})`}}function eT(r,e){return r instanceof bt?(function(s,l){return l instanceof bt&&s.op===l.op&&s.field.isEqual(l.field)&&Ei(s.value,l.value)})(r,e):r instanceof Xn?(function(s,l){return l instanceof Xn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&eT(d,l.filters[p])),!0):!1})(r,e):void Ae(19439)}function tT(r){return r instanceof bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`})(r):r instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(tT).join(" ,")+"}"})(r):"Filter"}class wI extends bt{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class RI extends bt{constructor(e,n){super(e,"in",n),this.keys=nT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class II extends bt{constructor(e,n){super(e,"not-in",n),this.keys=nT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function nT(r,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class CI extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&Gl(n.arrayValue,this.value)}}class NI extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gl(this.value.arrayValue,n)}}class xI extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gl(this.value.arrayValue,n)}}class DI extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Gl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n=null,s=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Jv(r,e=null,n=[],s=[],l=null,c=null,d=null){return new OI(r,e,n,s,l,c,d)}function ep(r){const e=Re(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Sm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>so(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>so(s))).join(",")),e.Te=n}return e.Te}function tp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!SI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!eT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Wv(r.startAt,e.startAt)&&Wv(r.endAt,e.endAt)}function bm(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VI(r,e,n,s,l,c,d,p){return new su(r,e,n,s,l,c,d,p)}function xh(r){return new su(r)}function e0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function iT(r){return r.collectionGroup!==null}function Pl(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ot(Qt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new mh(c,s))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new mh(Qt.keyField(),s))}return e.Ie}function gi(r){const e=Re(r);return e.Ee||(e.Ee=MI(e,Pl(r))),e.Ee}function MI(r,e){if(r.limitType==="F")return Jv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new mh(l.field,c)}));const n=r.endAt?new dh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new dh(r.startAt.position,r.startAt.inclusive):null;return Jv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function wm(r,e){const n=r.filters.concat([e]);return new su(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function ph(r,e,n){return new su(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Dh(r,e){return tp(gi(r),gi(e))&&r.limitType===e.limitType}function rT(r){return`${ep(gi(r))}|lt:${r.limitType}`}function Qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>tT(l))).join(", ")}]`),Ch(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>so(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>so(l))).join(",")),`Target(${s})`})(gi(r))}; limitType=${r.limitType})`}function Oh(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ye.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Pl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Zv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Pl(s),l)||s.endAt&&!(function(d,p,g){const y=Zv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Pl(s),l))})(r,e)}function PI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function sT(r){return(e,n)=>{let s=!1;for(const l of Pl(r)){const c=kI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function kI(r,e,n){const s=r.field.isKeyField()?ye.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?ro(g,y):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new lt(ye.comparator);function nr(){return LI}const aT=new lt(ye.comparator);function Nl(...r){let e=aT;for(const n of r)e=e.insert(n.key,n);return e}function oT(r){let e=aT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Bs(){return kl()}function lT(){return kl()}function kl(){return new $s((r=>r.toString()),((r,e)=>r.isEqual(e)))}const UI=new lt(ye.comparator),jI=new Ot(ye.comparator);function ke(...r){let e=jI;for(const n of r)e=e.add(n);return e}const zI=new Ot(Pe);function BI(){return zI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function uT(r){return{integerValue:""+r}}function cT(r,e){return pI(e)?uT(e):np(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function qI(r,e,n){return r instanceof Ql?(function(l,c){const d={fields:{[GE]:{stringValue:FE},[KE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Wm(c)&&(c=Nh(c)),c&&(d.fields[QE]=c),{mapValue:d}})(n,e):r instanceof Kl?fT(r,e):r instanceof Yl?dT(r,e):(function(l,c){const d=hT(l,c),p=t0(d)+t0(l.Ae);return Am(d)&&Am(l.Ae)?uT(p):np(l.serializer,p)})(r,e)}function HI(r,e,n){return r instanceof Kl?fT(r,e):r instanceof Yl?dT(r,e):n}function hT(r,e){return r instanceof Xl?(function(s){return Am(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Ql extends Vh{}class Kl extends Vh{constructor(e){super(),this.elements=e}}function fT(r,e){const n=mT(e);for(const s of r.elements)n.some((l=>Ei(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Yl extends Vh{constructor(e){super(),this.elements=e}}function dT(r,e){let n=mT(e);for(const s of r.elements)n=n.filter((l=>!Ei(l,s)));return{arrayValue:{values:n}}}class Xl extends Vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function t0(r){return yt(r.integerValue||r.doubleValue)}function mT(r){return Jm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.field=e,this.transform=n}}function FI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Kl&&l instanceof Kl||s instanceof Yl&&l instanceof Yl?io(s.elements,l.elements,Ei):s instanceof Xl&&l instanceof Xl?Ei(s.Ae,l.Ae):s instanceof Ql&&l instanceof Ql})(r.transform,e.transform)}class GI{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mh{}function gT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ph(r.key,on.none()):new au(r.key,r.data,on.none());{const n=r.data,s=fn.empty();let l=new Ot(Qt.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ts(r.key,s,new An(l.toArray()),on.none())}}function QI(r,e,n){r instanceof au?(function(l,c,d){const p=l.value.clone(),g=i0(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ts?(function(l,c,d){if(!Jc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=i0(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(yT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Ll(r,e,n,s){return r instanceof au?(function(c,d,p,g){if(!Jc(c.precondition,d))return p;const y=c.value.clone(),A=r0(c.fieldTransforms,g,d);return y.setAll(A),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof ts?(function(c,d,p,g){if(!Jc(c.precondition,d))return p;const y=r0(c.fieldTransforms,g,d),A=d.data;return A.setAll(yT(c)),A.setAll(y),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,n,s):(function(c,d,p){return Jc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function KI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=hT(s.transform,l||null);c!=null&&(n===null&&(n=fn.empty()),n.set(s.field,c))}return n||null}function n0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&io(s,l,((c,d)=>FI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class au extends Mh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ts extends Mh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function yT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function i0(r,e,n){const s=new Map;Fe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=e.data.field(c.field);s.set(c.field,HI(d,p,n[l]))}return s}function r0(r,e,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,qI(c,d,e))}return s}class Ph extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YI extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&QI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ll(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ll(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=lT();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=gT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ke())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((n,s)=>n0(n,s)))&&io(this.baseMutations,e.baseMutations,((n,s)=>n0(n,s)))}}class ip{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return UI})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new ip(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,ze;function WI(r){switch(r){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function _T(r){if(r===void 0)return tr("GRPC error has no .code"),X.UNKNOWN;switch(r){case St.OK:return X.OK;case St.CANCELLED:return X.CANCELLED;case St.UNKNOWN:return X.UNKNOWN;case St.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case St.INTERNAL:return X.INTERNAL;case St.UNAVAILABLE:return X.UNAVAILABLE;case St.UNAUTHENTICATED:return X.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case St.NOT_FOUND:return X.NOT_FOUND;case St.ALREADY_EXISTS:return X.ALREADY_EXISTS;case St.PERMISSION_DENIED:return X.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case St.ABORTED:return X.ABORTED;case St.OUT_OF_RANGE:return X.OUT_OF_RANGE;case St.UNIMPLEMENTED:return X.UNIMPLEMENTED;case St.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:r})}}(ze=St||(St={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new qr([4294967295,4294967295],0);function s0(r){const e=JI().encode(r),n=new DE;return n.update(e),new Uint8Array(n.digest())}function a0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new qr([n,s],0),new qr([l,c],0)]}class rp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new xl(`Invalid padding: ${n}`);if(s<0)throw new xl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new xl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qr.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(qr.fromNumber(s)));return l.compare(e2)===1&&(l=new qr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=s0(e),[s,l]=a0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new rp(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=s0(e),[s,l]=a0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new kh(we.min(),l,new lt(Pe),nr(),ke())}}class ou{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ou(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class vT{constructor(e,n){this.targetId=e,this.Ce=n}}class ET{constructor(e,n,s=Kt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class o0{constructor(){this.ve=0,this.Fe=l0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),s=ke();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ae(38017,{changeType:c})}})),new ou(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=l0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class t2{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.Je=Fc(),this.He=Fc(),this.Ye=new lt(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(bm(c))if(s===0){const d=new ye(c.path);this.et(n,d,Jt.newNoDocument(d,we.min()))}else Fe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Kr(s).toUint8Array()}catch(g){if(g instanceof HE)return no("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new rp(d,l,c)}catch(g){return no(g instanceof xl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&bm(p.target)){const g=new ye(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Jt.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=ke();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new kh(e,n,this.Ye,this.je,s);return this.je=nr(),this.Je=Fc(),this.He=Fc(),this.Ye=new lt(Pe),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new o0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fc(){return new lt(ye.comparator)}function l0(){return new lt(ye.comparator)}const n2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r2={and:"AND",or:"OR"};class s2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rm(r,e){return r.useProto3Json||Ch(e)?e:{value:e}}function gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function a2(r,e){return gh(r,e.toTimestamp())}function yi(r){return Fe(!!r,49232),we.fromTimestamp((function(n){const s=Qr(n);return new it(s.seconds,s.nanos)})(r))}function sp(r,e){return Im(r,e).canonicalString()}function Im(r,e){const n=(function(l){return new nt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function AT(r){const e=nt.fromString(r);return Fe(IT(e),10190,{key:e.toString()}),e}function Cm(r,e){return sp(r.databaseId,e.path)}function sm(r,e){const n=AT(e);if(n.get(1)!==r.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ye(bT(n))}function ST(r,e){return sp(r.databaseId,e)}function o2(r){const e=AT(r);return e.length===4?nt.emptyPath():bT(e)}function Nm(r){return new nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bT(r){return Fe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function u0(r,e,n){return{name:Cm(r,e),fields:n.value.mapValue.fields}}function l2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,A){return y.useProto3Json?(Fe(A===void 0||typeof A=="string",58123),Kt.fromBase64String(A||"")):(Fe(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Kt.fromUint8Array(A||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const A=y.code===void 0?X.UNKNOWN:_T(y.code);return new le(A,y.message||"")})(d);n=new ET(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=sm(r,s.document.name),c=yi(s.document.updateTime),d=s.document.createTime?yi(s.document.createTime):we.min(),p=new fn({mapValue:{fields:s.document.fields}}),g=Jt.newFoundDocument(l,c,d,p),y=s.targetIds||[],A=s.removedTargetIds||[];n=new eh(y,A,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=sm(r,s.document),c=s.readTime?yi(s.readTime):we.min(),d=Jt.newNoDocument(l,c),p=s.removedTargetIds||[];n=new eh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=sm(r,s.document),c=s.removedTargetIds||[];n=new eh([],c,l,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new ZI(l,c),p=s.targetId;n=new vT(p,d)}}return n}function u2(r,e){let n;if(e instanceof au)n={update:u0(r,e.key,e.value)};else if(e instanceof Ph)n={delete:Cm(r,e.key)};else if(e instanceof ts)n={update:u0(r,e.key,e.data),updateMask:_2(e.fieldMask)};else{if(!(e instanceof YI))return Ae(16599,{Vt:e.type});n={verify:Cm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Ql)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Kl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Yl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Xl)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:a2(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(r,e.precondition)),n}function c2(r,e){return r&&r.length>0?(Fe(e!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?yi(l.updateTime):yi(c);return d.isEqual(we.min())&&(d=yi(c)),new GI(d,l.transformResults||[])})(n,e)))):[]}function h2(r,e){return{documents:[ST(r,e.path)]}}function f2(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ST(r,l);const c=(function(y){if(y.length!==0)return RT(Xn.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((A=>(function(I){return{field:Ka(I.field),direction:p2(I.dir)}})(A)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Rm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function d2(r){let e=o2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Fe(s===1,65062);const A=n.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let c=[];n.where&&(c=(function(b){const I=wT(b);return I instanceof Xn&&JE(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((I=>(function(K){return new mh(Ya(K.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(I)))})(n.orderBy));let p=null;n.limit&&(p=(function(b){let I;return I=typeof b=="object"?b.value:b,Ch(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(b){const I=!!b.before,z=b.values||[];return new dh(z,I)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const I=!b.before,z=b.values||[];return new dh(z,I)})(n.endAt)),VI(e,l,d,c,p,"F",g,y)}function m2(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ya(n.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ya(n.unaryFilter.field);return bt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ya(n.unaryFilter.field);return bt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ya(n.unaryFilter.field);return bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return bt.create(Ya(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((s=>wT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function p2(r){return n2[r]}function g2(r){return i2[r]}function y2(r){return r2[r]}function Ka(r){return{fieldPath:r.canonicalString()}}function Ya(r){return Qt.fromServerFormat(r.fieldPath)}function RT(r){return r instanceof bt?(function(n){if(n.op==="=="){if($v(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(Xv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($v(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(Xv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:g2(n.op),value:n.value}}})(r):r instanceof Xn?(function(n){const s=n.getFilters().map((l=>RT(l)));return s.length===1?s[0]:{compositeFilter:{op:y2(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function _2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function IT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,s,l,c=we.min(),d=we.min(),p=Kt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.yt=e}}function E2(r){const e=d2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.Cn=new A2}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Gr.min())}updateCollectionGroup(e,n,s){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class A2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Ot(nt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Ot(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CT=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(CT,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="LruGarbageCollector",S2=1048576;function f0([r,e],[n,s]){const l=Pe(r,n);return l===0?Pe(e,s):l}class b2{constructor(e){this.Ir=e,this.buffer=new Ot(f0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();f0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class w2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(h0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?he(h0,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Vr(3e5)}))}}class R2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Ih.ce);const s=new b2(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(c0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,d,p,g,y;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(s=b,p=Date.now(),this.removeTargets(e,s,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(y=Date.now(),Ga()<=Me.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-A}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function I2(r,e){return new R2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.changes=new $s((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ll(s.mutation,l,An.empty(),it.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ke()){const l=Bs();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let d=Nl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ke())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,l){let c=nr();const d=kl(),p=(function(){return kl()})();return n.forEach(((g,y)=>{const A=s.get(y.key);l.has(y.key)&&(A===void 0||A.mutation instanceof ts)?c=c.insert(y.key,y):A!==void 0?(d.set(y.key,A.mutation.getFieldMask()),Ll(A.mutation,y,A.mutation.getFieldMask(),it.now())):d.set(y.key,An.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,A)=>d.set(y,A))),n.forEach(((y,A)=>p.set(y,new N2(A,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=kl();let l=new lt(((d,p)=>d-p)),c=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let A=s.get(g)||An.empty();A=p.applyToLocalView(y,A),s.set(g,A);const b=(l.get(p.batchId)||ke()).add(g);l=l.insert(p.batchId,b)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,A=g.value,b=lT();A.forEach((I=>{if(!c.has(I)){const z=gT(n.get(I),s.get(I));z!==null&&b.set(I,z),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,b))}return Z.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):Z.resolve(Bs());let p=ql,g=c;return d.next((y=>Z.forEach(y,((A,b)=>(p<b.largestBatchId&&(p=b.largestBatchId),c.get(A)?Z.resolve():this.remoteDocumentCache.getEntry(e,A).next((I=>{g=g.insert(A,I)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,ke()))).next((A=>({batchId:p,changes:oT(A)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((s=>{let l=Nl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let d=Nl();return this.indexManager.getCollectionParents(e,c).next((p=>Z.forEach(p,(g=>{const y=(function(b,I){return new su(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next((A=>{A.forEach(((b,I)=>{d=d.insert(b,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const A=y.getKey();d.get(A)===null&&(d=d.insert(A,Jt.newInvalidDocument(A)))}));let p=Nl();return d.forEach(((g,y)=>{const A=c.get(g);A!==void 0&&Ll(A.mutation,y,An.empty(),it.now()),Oh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:yi(l.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:E2(l.bundledQuery),readTime:yi(l.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.overlays=new lt(ye.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return Z.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),Z.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,n,s){const l=Bs(),c=n.length+1,d=new ye(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return Z.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new lt(((y,A)=>y-A));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let A=c.get(y.largestBatchId);A===null&&(A=Bs(),c=c.insert(y.largestBatchId,A)),A.set(y.getKey(),y)}}const p=Bs(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,A)=>p.set(y,A))),!(p.size()>=l)););return Z.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new $I(n,s));let c=this.qr.get(n);c===void 0&&(c=ke(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.Qr=new Ot(jt.$r),this.Ur=new Ot(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new jt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ye(new nt([])),s=new jt(n,e),l=new jt(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new nt([])),s=new jt(n,e),l=new jt(n,e+1);let c=ke();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new jt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(jt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new XI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new jt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new jt(n,0),l=new jt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ot(Pe);return n.forEach((l=>{const c=new jt(l,0),d=new jt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;ye.isDocumentKey(c)||(c=c.child(""));const d=new jt(new ye(c),0);let p=new Ot(Pe);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),Z.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,(l=>{const c=new jt(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new jt(n,0),l=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.ri=e,this.docs=(function(){return new lt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let s=nr();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Jt.newInvalidDocument(l))})),Z.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=nr();const d=n.path,p=new ye(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:A}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||hI(cI(A),s)<=0||(l.has(A.key)||Oh(n,A))&&(c=c.insert(A.key,A.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,n,s,l){Ae(9500)}ii(e,n){return Z.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new k2(this)}getSize(e){return Z.resolve(this.size)}}class k2 extends C2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.persistence=e,this.si=new $s((n=>ep(n)),tp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new ap,this.targetCount=0,this.ai=ao.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Z.waitFor(c).next((()=>l))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new V2,this.referenceDelegate=e(this),this.Pi=new L2(this),this.indexManager=new T2,this.remoteDocumentCache=(function(l){return new P2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new v2(n),this.Ii=new D2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new O2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new M2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const l=new U2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class U2 extends dI{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ri=new ap,this.Vi=null}static mi(e){return new op(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const l=ye.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,we.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new $s((s=>gI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=I2(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?Z.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,c.removeEntry(d,we.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zc(e.data.value)),n}br(e,n,s){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return Z.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=ke(),l=ke();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new lp(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yb()?8:mI(en())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new j2;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Ga()<=Me.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Ga()<=Me.DEBUG&&he("QueryEngine","Query:",Qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ga()<=Me.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):Z.resolve())}ys(e,n){if(e0(n))return Z.resolve(null);let s=gi(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=ph(n,null,"F"),s=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=ke(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,ph(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,l){return e0(n)||l.isEqual(we.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?Z.resolve(null):(Ga()<=Me.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Qa(n)),this.vs(e,d,n,uI(l,ql)).next((p=>p)))}))}Ds(e,n){let s=new Ot(sT(e));return n.forEach(((l,c)=>{Oh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Ga()<=Me.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="LocalStore",B2=3e8;class q2{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new lt(Pe),this.xs=new $s((c=>ep(c)),tp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function H2(r,e,n,s){return new q2(r,e,n,s)}async function xT(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=ke();for(const y of l){d.push(y.batchId);for(const A of y.mutations)g=g.add(A.key)}for(const y of c){p.push(y.batchId);for(const A of y.mutations)g=g.add(A.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function F2(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,A){const b=y.batch,I=b.keys();let z=Z.resolve();return I.forEach((K=>{z=z.next((()=>A.getEntry(g,K))).next((ne=>{const te=y.docVersions.get(K);Fe(te!==null,48541),ne.version.compareTo(te)<0&&(b.applyToRemoteDocument(ne,y),ne.isValidDocument()&&(ne.setReadTime(y.commitVersion),A.addEntry(ne)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(g,b)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=ke();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function DT(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function G2(r,e){const n=Re(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((A,b)=>{const I=l.get(b);if(!I)return;p.push(n.Pi.removeMatchingKeys(c,A.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,A.addedDocuments,b))));let z=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?z=z.withResumeToken(Kt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,s)),l=l.insert(b,z),(function(ne,te,re){return ne.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=B2?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(I,z,A)&&p.push(n.Pi.updateTargetData(c,z))}));let g=nr(),y=ke();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,A))})),p.push(Q2(c,d,e.documentUpdates).next((A=>{g=A.ks,y=A.qs}))),!s.isEqual(we.min())){const A=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(A)}return Z.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function Q2(r,e,n){let s=ke(),l=ke();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=nr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):he(up,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function K2(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Zm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Y2(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,Z.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Ur(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function xm(r,e,n){const s=Re(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!mo(d))throw d;he(up,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function d0(r,e,n){const s=Re(r);let l=we.min(),c=ke();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,A){const b=Re(g),I=b.xs.get(A);return I!==void 0?Z.resolve(b.Ms.get(I)):b.Pi.getTargetData(y,A)})(s,d,gi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?l:we.min(),n?c:ke()))).next((p=>(X2(s,PI(e),p),{documents:p,Qs:c})))))}function X2(r,e,n){let s=r.Os.get(e)||we.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class m0{constructor(){this.activeTargetIds=BI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $2{constructor(){this.Mo=new m0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new m0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="ConnectivityMonitor";class g0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(p0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(p0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function Dm(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",W2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===hh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const d=Dm(),p=this.zo(e,n.toUriEncodedString());he(am,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),A=lo(y);return this.Jo(e,p,g,s,A).then((b=>(he(am,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw no(am,`RPC '${e}' ${d} failed with error: `,b,"url: ",p,"request:",s),b}))}Ho(e,n,s,l,c,d){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=W2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class tC extends J2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const d=Dm();return new Promise(((p,g)=>{const y=new OE;y.setWithCredentials(!0),y.listenOnce(VE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case $c.NO_ERROR:const b=y.getResponseJson();he(Zt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),p(b);break;case $c.TIMEOUT:he(Zt,`RPC '${e}' ${d} timed out`),g(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:const I=y.getStatus();if(he(Zt,`RPC '${e}' ${d} failed with status:`,I,"response text:",y.getResponseText()),I>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=z?.error;if(K&&K.status&&K.message){const ne=(function(re){const ee=re.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ee)>=0?ee:X.UNKNOWN})(K.status);g(new le(ne,K.message))}else g(new le(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new le(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(Zt,`RPC '${e}' ${d} completed.`)}}));const A=JSON.stringify(l);he(Zt,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",A,s,15)}))}T_(e,n,s){const l=Dm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=kE(),p=PE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const A=c.join("");he(Zt,`Creating RPC '${e}' stream ${l}: ${A}`,g);const b=d.createWebChannel(A,g);this.I_(b);let I=!1,z=!1;const K=new eC({Yo:te=>{z?he(Zt,`Not sending because RPC '${e}' stream ${l} is closed:`,te):(I||(he(Zt,`Opening RPC '${e}' stream ${l} transport.`),b.open(),I=!0),he(Zt,`RPC '${e}' stream ${l} sending:`,te),b.send(te))},Zo:()=>b.close()}),ne=(te,re,ee)=>{te.listen(re,(ue=>{try{ee(ue)}catch(se){setTimeout((()=>{throw se}),0)}}))};return ne(b,Cl.EventType.OPEN,(()=>{z||(he(Zt,`RPC '${e}' stream ${l} transport opened.`),K.o_())})),ne(b,Cl.EventType.CLOSE,(()=>{z||(z=!0,he(Zt,`RPC '${e}' stream ${l} transport closed`),K.a_(),this.E_(b))})),ne(b,Cl.EventType.ERROR,(te=>{z||(z=!0,no(Zt,`RPC '${e}' stream ${l} transport errored. Name:`,te.name,"Message:",te.message),K.a_(new le(X.UNAVAILABLE,"The operation could not be completed")))})),ne(b,Cl.EventType.MESSAGE,(te=>{if(!z){const re=te.data[0];Fe(!!re,16349);const ee=re,ue=ee?.error||ee[0]?.error;if(ue){he(Zt,`RPC '${e}' stream ${l} received error:`,ue);const se=ue.status;let G=(function(w){const C=St[w];if(C!==void 0)return _T(C)})(se),fe=ue.message;G===void 0&&(G=X.INTERNAL,fe="Unknown error status: "+se+" with message "+ue.message),z=!0,K.a_(new le(G,fe)),b.close()}else he(Zt,`RPC '${e}' stream ${l} received:`,re),K.u_(re)}})),ne(p,ME.STAT_EVENT,(te=>{te.stat===vm.PROXY?he(Zt,`RPC '${e}' stream ${l} detected buffering proxy`):te.stat===vm.NOPROXY&&he(Zt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(r){return new s2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&he("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="PersistentStream";class VT{constructor(e,n,s,l,c,d,p,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new le(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nC extends VT{constructor(e,n,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=l2(this.serializer,e),s=(function(c){if(!("targetChange"in c))return we.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?yi(d.readTime):we.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Nm(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=bm(g)?{documents:h2(c,g)}:{query:f2(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=TT(c,d.resumeToken);const y=Rm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(we.min())>0){p.readTime=gh(c,d.snapshotVersion.toTimestamp());const y=Rm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=m2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.q_(n)}}class iC extends VT{constructor(e,n,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=c2(e.writeResults,e.commitTime),s=yi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Nm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>u2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{}class sC extends rC{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Im(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(X.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Im(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(X.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class oC{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Zs(this)&&(he(Ys,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await lu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Uh(y)})(this))}))})),this.Ra=new aC(s,l)}}async function Uh(r){if(Zs(r))for(const e of r.da)await e(!0)}async function lu(r){for(const e of r.da)await e(!1)}function MT(r,e){const n=Re(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dp(n)?fp(n):po(n).O_()&&hp(n,e))}function cp(r,e){const n=Re(r),s=po(n);n.Ia.delete(e),s.O_()&&PT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Zs(n)&&n.Ra.set("Unknown"))}function hp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(r).Y_(e)}function PT(r,e){r.Va.Ue(e),po(r).Z_(e)}function fp(r){r.Va=new t2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),po(r).start(),r.Ra.ua()}function dp(r){return Zs(r)&&!po(r).x_()&&r.Ia.size>0}function Zs(r){return Re(r).Ea.size===0}function kT(r){r.Va=void 0}async function lC(r){r.Ra.set("Online")}async function uC(r){r.Ia.forEach(((e,n)=>{hp(r,e)}))}async function cC(r,e){kT(r),dp(r)?(r.Ra.ha(e),fp(r)):r.Ra.set("Unknown")}async function hC(r,e,n){if(r.Ra.set("Online"),e instanceof ET&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){he(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _h(r,s)}else if(e instanceof eh?r.Va.Ze(e):e instanceof vT?r.Va.st(e):r.Va.tt(e),!n.isEqual(we.min()))try{const s=await DT(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const A=c.Ia.get(y);A&&c.Ia.set(y,A.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const A=c.Ia.get(g);if(!A)return;c.Ia.set(g,A.withResumeToken(Kt.EMPTY_BYTE_STRING,A.snapshotVersion)),PT(c,g);const b=new Ur(A.target,g,y,A.sequenceNumber);hp(c,b)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){he(Ys,"Failed to raise snapshot:",s),await _h(r,s)}}async function _h(r,e,n){if(!mo(e))throw e;r.Ea.add(1),await lu(r),r.Ra.set("Offline"),n||(n=()=>DT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Ys,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Uh(r)}))}function LT(r,e){return e().catch((n=>_h(r,n,e)))}async function jh(r){const e=Re(r),n=Xr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;fC(e);)try{const l=await K2(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,dC(e,l)}catch(l){await _h(e,l)}UT(e)&&jT(e)}function fC(r){return Zs(r)&&r.Ta.length<10}function dC(r,e){r.Ta.push(e);const n=Xr(r);n.O_()&&n.X_&&n.ea(e.mutations)}function UT(r){return Zs(r)&&!Xr(r).x_()&&r.Ta.length>0}function jT(r){Xr(r).start()}async function mC(r){Xr(r).ra()}async function pC(r){const e=Xr(r);for(const n of r.Ta)e.ea(n.mutations)}async function gC(r,e,n){const s=r.Ta.shift(),l=ip.from(s,e,n);await LT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await jh(r)}async function yC(r,e){e&&Xr(r).X_&&await(async function(s,l){if((function(d){return WI(d)&&d!==X.ABORTED})(l.code)){const c=s.Ta.shift();Xr(s).B_(),await LT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await jh(s)}})(r,e),UT(r)&&jT(r)}async function _0(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),he(Ys,"RemoteStore received new credentials");const s=Zs(n);n.Ea.add(3),await lu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uh(n)}async function _C(r,e){const n=Re(r);e?(n.Ea.delete(2),await Uh(n)):e||(n.Ea.add(2),await lu(n),n.Ra.set("Unknown"))}function po(r){return r.ma||(r.ma=(function(n,s,l){const c=Re(n);return c.sa(),new nC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:lC.bind(null,r),t_:uC.bind(null,r),r_:cC.bind(null,r),H_:hC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),dp(r)?fp(r):r.Ra.set("Unknown")):(await r.ma.stop(),kT(r))}))),r.ma}function Xr(r){return r.fa||(r.fa=(function(n,s,l){const c=Re(n);return c.sa(),new iC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:mC.bind(null,r),r_:yC.bind(null,r),ta:pC.bind(null,r),na:gC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await jh(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Ys,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const d=Date.now()+s,p=new mp(e,n,d,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(r,e){if(tr("AsyncQueue",`${e}: ${r}`),mo(r))return new le(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=Nl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ja;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.ga=new lt(ye.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class oo{constructor(e,n,s,l,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new oo(e,n,Ja.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EC{constructor(){this.queries=E0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Re(n),c=l.queries;l.queries=E0(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new le(X.ABORTED,"Firestore shutting down"))}}function E0(){return new $s((r=>rT(r)),Dh)}async function gp(r,e){const n=Re(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new vC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=pp(d,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&_p(n)}async function yp(r,e){const n=Re(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function TC(r,e){const n=Re(r);let s=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&_p(n)}function AC(r,e,n){const s=Re(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function _p(r){r.Ca.forEach((e=>{e.next()}))}var Om,T0;(T0=Om||(Om={})).Ma="default",T0.Cache="cache";class vp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new oo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.key=e}}class BT{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=sT(e),this.tu=new Ja(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new v0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((A,b)=>{const I=l.get(A),z=Oh(this.query,b)?b:null,K=!!I&&this.mutatedKeys.has(I.key),ne=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let te=!1;I&&z?I.data.isEqual(z.data)?K!==ne&&(s.track({type:3,doc:z}),te=!0):this.su(I,z)||(s.track({type:2,doc:z}),te=!0,(g&&this.eu(z,g)>0||y&&this.eu(z,y)<0)&&(p=!0)):!I&&z?(s.track({type:0,doc:z}),te=!0):I&&!z&&(s.track({type:1,doc:I}),te=!0,(g||y)&&(p=!0)),te&&(z?(d=d.add(z),c=ne?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((A,b)=>(function(z,K){const ne=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:te})}};return ne(z)-ne(K)})(A.type,b.type)||this.eu(A.doc,b.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new oo(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new v0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new BT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new zT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ep="SyncEngine";class bC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class wC{constructor(e){this.key=e,this.hu=!1}}class RC{constructor(e,n,s,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new $s((p=>rT(p)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ye.comparator),this.Au=new Map,this.Ru=new ap,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IC(r,e,n=!0){const s=KT(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await qT(s,e,n,!0),l}async function CC(r,e){const n=KT(r);await qT(n,e,!0,!1)}async function qT(r,e,n,s){const l=await Y2(r.localStore,gi(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await NC(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&MT(r.remoteStore,l),p}async function NC(r,e,n,s,l){r.pu=(b,I,z)=>(async function(ne,te,re,ee){let ue=te.view.ru(re);ue.Cs&&(ue=await d0(ne.localStore,te.query,!1).then((({documents:D})=>te.view.ru(D,ue))));const se=ee&&ee.targetChanges.get(te.targetId),G=ee&&ee.targetMismatches.get(te.targetId)!=null,fe=te.view.applyChanges(ue,ne.isPrimaryClient,se,G);return S0(ne,te.targetId,fe.au),fe.snapshot})(r,b,I,z);const c=await d0(r.localStore,e,!0),d=new SC(e,c.Qs),p=d.ru(c.documents),g=ou.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);S0(r,n,y.au);const A=new bC(e,n,d);return r.Tu.set(e,A),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function xC(r,e,n){const s=Re(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Dh(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await xm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&cp(s.remoteStore,l.targetId),Vm(s,l.targetId)})).catch(fo)):(Vm(s,l.targetId),await xm(s.localStore,l.targetId,!0))}async function DC(r,e){const n=Re(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),cp(n.remoteStore,s.targetId))}async function OC(r,e,n){const s=jC(r);try{const l=await(function(d,p){const g=Re(d),y=it.now(),A=p.reduce(((z,K)=>z.add(K.key)),ke());let b,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let K=nr(),ne=ke();return g.Ns.getEntries(z,A).next((te=>{K=te,K.forEach(((re,ee)=>{ee.isValidDocument()||(ne=ne.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,K))).next((te=>{b=te;const re=[];for(const ee of p){const ue=KI(ee,b.get(ee.key).overlayedDocument);ue!=null&&re.push(new ts(ee.key,ue,$E(ue.value.mapValue),on.exists(!0)))}return g.mutationQueue.addMutationBatch(z,y,re,p)})).next((te=>{I=te;const re=te.applyToLocalDocumentSet(b,ne);return g.documentOverlayCache.saveOverlays(z,te.batchId,re)}))})).then((()=>({batchId:I.batchId,changes:oT(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new lt(Pe)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await uu(s,l.changes),await jh(s.remoteStore)}catch(l){const c=pp(l,"Failed to persist write");n.reject(c)}}async function HT(r,e){const n=Re(r);try{const s=await G2(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Fe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Fe(d.hu,14607):l.removedDocuments.size>0&&(Fe(d.hu,42227),d.hu=!1))})),await uu(n,s,e)}catch(s){await fo(s)}}function A0(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Re(d);g.onlineState=p;let y=!1;g.queries.forEach(((A,b)=>{for(const I of b.Sa)I.va(p)&&(y=!0)})),y&&_p(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VC(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new lt(ye.comparator);d=d.insert(c,Jt.newNoDocument(c,we.min()));const p=ke().add(c),g=new kh(we.min(),new Map,new lt(Pe),d,p);await HT(s,g),s.du=s.du.remove(c),s.Au.delete(e),Tp(s)}else await xm(s.localStore,e,!1).then((()=>Vm(s,e,n))).catch(fo)}async function MC(r,e){const n=Re(r),s=e.batch.batchId;try{const l=await F2(n.localStore,e);GT(n,s,null),FT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await uu(n,l)}catch(l){await fo(l)}}async function PC(r,e,n){const s=Re(r);try{const l=await(function(d,p){const g=Re(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let A;return g.mutationQueue.lookupMutationBatch(y,p).next((b=>(Fe(b!==null,37113),A=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,A,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,A))).next((()=>g.localDocuments.getDocuments(y,A)))}))})(s.localStore,e);GT(s,e,n),FT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await uu(s,l)}catch(l){await fo(l)}}function FT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function GT(r,e,n){const s=Re(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Vm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||QT(r,s)}))}function QT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(cp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Tp(r))}function S0(r,e,n){for(const s of n)s instanceof zT?(r.Ru.addReference(s.key,e),kC(r,s)):s instanceof BT?(he(Ep,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||QT(r,s.key)):Ae(19791,{wu:s})}function kC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(he(Ep,"New document in limbo: "+n),r.Eu.add(s),Tp(r))}function Tp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ye(nt.fromString(e)),s=r.fu.next();r.Au.set(s,new wC(n)),r.du=r.du.insert(n,s),MT(r.remoteStore,new Ur(gi(xh(n.path)),s,"TargetPurposeLimboResolution",Ih.ce))}}async function uu(r,e,n){const s=Re(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){l.push(y);const A=lp.As(g.targetId,y);c.push(A)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const A=Re(g);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Z.forEach(y,(I=>Z.forEach(I.Es,(z=>A.persistence.referenceDelegate.addReference(b,I.targetId,z))).next((()=>Z.forEach(I.ds,(z=>A.persistence.referenceDelegate.removeReference(b,I.targetId,z)))))))))}catch(b){if(!mo(b))throw b;he(up,"Failed to update sequence numbers: "+b)}for(const b of y){const I=b.targetId;if(!b.fromCache){const z=A.Ms.get(I),K=z.snapshotVersion,ne=z.withLastLimboFreeSnapshotVersion(K);A.Ms=A.Ms.insert(I,ne)}}})(s.localStore,c))}async function LC(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){he(Ep,"User change. New user:",e.toKey());const s=await xT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new le(X.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uu(n,s.Ls)}}function UC(r,e){const n=Re(r),s=n.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let l=ke();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function KT(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VC.bind(null,e),e.Pu.H_=TC.bind(null,e.eventManager),e.Pu.yu=AC.bind(null,e.eventManager),e}function jC(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PC.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return H2(this.persistence,new z2,e.initialUser,this.serializer)}Cu(e){return new NT(op.mi,this.serializer)}Du(e){return new $2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class zC extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new w2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new NT((s=>yh.mi(s,n)),this.serializer)}}class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>A0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await _C(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EC})()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),s=(function(c){return new tC(c)})(e.databaseInfo);return(function(c,d,p,g){return new sC(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,d,p){return new oC(s,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>A0(this.syncEngine,n,0)),(function(){return g0.v()?new g0:new Z2})())}createSyncEngine(e,n){return(function(l,c,d,p,g,y,A){const b=new RC(l,c,d,p,g,y);return A&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Re(n);he(Ys,"RemoteStore shutting down."),s.Ea.add(5),await lu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class BC{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Wt.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{he($r,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(he($r,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=pp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function lm(r,e){r.asyncQueue.verifyOperationInProgress(),he($r,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await xT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function b0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await qC(r);he($r,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>_0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>_0(e.remoteStore,l))),r._onlineComponents=e}async function qC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he($r,"Using user provided OfflineComponentProvider");try{await lm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),await lm(r,new vh)}}else he($r,"Using default OfflineComponentProvider"),await lm(r,new zC(void 0));return r._offlineComponents}async function YT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he($r,"Using user provided OnlineComponentProvider"),await b0(r,r._uninitializedComponentsProvider._online)):(he($r,"Using default OnlineComponentProvider"),await b0(r,new Mm))),r._onlineComponents}function HC(r){return YT(r).then((e=>e.syncEngine))}async function Eh(r){const e=await YT(r),n=e.eventManager;return n.onListen=IC.bind(null,e.syncEngine),n.onUnlisten=xC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DC.bind(null,e.syncEngine),n}function FC(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const A=new Ap({next:I=>{A.Nu(),d.enqueueAndForget((()=>yp(c,b)));const z=I.docs.has(p);!z&&I.fromCache?y.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&I.fromCache&&g&&g.source==="server"?y.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),b=new vp(xh(p.path),A,{includeMetadataChanges:!0,qa:!0});return gp(c,b)})(await Eh(r),r.asyncQueue,e,n,s))),s.promise}function GC(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const A=new Ap({next:I=>{A.Nu(),d.enqueueAndForget((()=>yp(c,b))),I.fromCache&&g.source==="server"?y.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),b=new vp(p,A,{includeMetadataChanges:!0,qa:!0});return gp(c,b)})(await Eh(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firestore.googleapis.com",R0=!0;class I0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$T,this.ssl=R0}else this.host=e.host,this.ssl=e.ssl??R0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S2)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new WR;switch(s.type){case"firstParty":return new nI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=w0.get(n);s&&(he("ComponentProvider","Removing Datastore"),w0.delete(n),s.terminate())})(this),Promise.resolve()}}function QC(r,e,n,s={}){r=an(r,zh);const l=lo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(q0(`https://${p}`),H0("Firestore",!0)),c.host!==$T&&c.host!==p&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Fs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,A;if(typeof s.mockUserToken=="string")y=s.mockUserToken,A=Wt.MOCK_USER;else{y=lb(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Wt(b)}r._authCredentials=new JR(new UE(y,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ru(n,dt._jsonSchema))return new dt(e,s||null,new ye(nt.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:wt("string",dt._jsonSchemaVersion),referencePath:wt("string")};class Hr extends ns{constructor(e,n,s){super(e,n,xh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ye(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function Kn(r,e,...n){if(r=_t(r),jE("collection","path",e),r instanceof zh){const s=nt.fromString(e,...n);return zv(s),new Hr(r,null,s)}{if(!(r instanceof dt||r instanceof Hr))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return zv(s),new Hr(r.firestore,null,s)}}function jn(r,e,...n){if(r=_t(r),arguments.length===1&&(e=$m.newId()),jE("doc","path",e),r instanceof zh){const s=nt.fromString(e,...n);return jv(s),new dt(r,null,new ye(s))}{if(!(r instanceof dt||r instanceof Hr))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return jv(s),new dt(r.firestore,r instanceof Hr?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="AsyncQueue";class N0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OT(this,"async_queue_retry"),this._c=()=>{const s=om();s&&he(C0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mo(e))throw e;he(C0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",x0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=mp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ae(47125,{Pc:x0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function x0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Ti extends zh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new N0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N0(e),this._firestoreClient=void 0,await e}}}function KC(r,e){const n=typeof r=="object"?r:K0(),s=typeof r=="string"?r:hh,l=zm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=ab("firestore");c&&QC(l,...c)}return l}function cu(r){if(r._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YC(r),r._firestoreClient}function YC(r){const e=r._freezeSettings(),n=(function(l,c,d,p){return new vI(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,XT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new BC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Kt.fromBase64String(e))}catch(n){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:wt("string",Un._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(ru(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:wt("string",_i._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vi(e.vectorValues);throw new le(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:wt("string",vi._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^__.*__$/;class $C{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new au(e,this.data,n,this.fieldTransforms)}}class ZT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Sp{constructor(e,n,s,l,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WT(this.Ac)&&XC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Lh(e)}Cc(e,n,s,l=!1){return new Sp({Ac:e,methodName:n,Dc:s,path:Qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function du(r){const e=r._freezeSettings(),n=Lh(r._databaseId);return new ZC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function bp(r,e,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Ip("Data must be an object, but it was:",d,s);const p=tA(s,d);let g,y;if(c.merge)g=new An(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const b of c.mergeFields){const I=Pm(e,b,n);if(!d.contains(I))throw new le(X.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);iA(A,I)||A.push(I)}g=new An(A),y=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=d.fieldTransforms;return new $C(new fn(p),g,y)}class Bh extends fu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class wp extends fu{_toFieldTransform(e){return new pT(e.path,new Ql)}isEqual(e){return e instanceof wp}}class Rp extends fu{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Xl(e.serializer,cT(e.serializer,this.Fc));return new pT(e.path,n)}isEqual(e){return e instanceof Rp&&this.Fc===e.Fc}}function JT(r,e,n,s){const l=r.Cc(1,e,n);Ip("Data must be an object, but it was:",l,s);const c=[],d=fn.empty();es(s,((g,y)=>{const A=Cp(e,g,n);y=_t(y);const b=l.yc(A);if(y instanceof Bh)c.push(A);else{const I=mu(y,b);I!=null&&(c.push(A),d.set(A,I))}}));const p=new An(c);return new ZT(d,p,l.fieldTransforms)}function eA(r,e,n,s,l,c){const d=r.Cc(1,e,n),p=[Pm(e,s,n)],g=[l];if(c.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(Pm(e,c[I])),g.push(c[I+1]);const y=[],A=fn.empty();for(let I=p.length-1;I>=0;--I)if(!iA(y,p[I])){const z=p[I];let K=g[I];K=_t(K);const ne=d.yc(z);if(K instanceof Bh)y.push(z);else{const te=mu(K,ne);te!=null&&(y.push(z),A.set(z,te))}}const b=new An(y);return new ZT(A,b,d.fieldTransforms)}function WC(r,e,n,s=!1){return mu(n,r.Cc(s?4:3,e))}function mu(r,e){if(nA(r=_t(r)))return Ip("Unsupported field value:",e,r),tA(r,e);if(r instanceof fu)return(function(s,l){if(!WT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=mu(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=_t(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cT(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=it.fromDate(s);return{timestampValue:gh(l.serializer,c)}}if(s instanceof it){const c=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(l.serializer,c)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Un)return{bytesValue:TT(l.serializer,s._byteString)};if(s instanceof dt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof vi)return(function(d,p){return{mapValue:{fields:{[YE]:{stringValue:XE},[fh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return np(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Rh(s)}`)})(r,e)}function tA(r,e){const n={};return qE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(r,((s,l)=>{const c=mu(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function nA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof _i||r instanceof Un||r instanceof dt||r instanceof fu||r instanceof vi)}function Ip(r,e,n){if(!nA(n)||!zE(n)){const s=Rh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Pm(r,e,n){if((e=_t(e))instanceof hu)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw Th("Field path arguments must be of type string or ",r,!1,void 0,n)}const JC=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,n){if(e.search(JC)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Th(r,e,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new le(X.INVALID_ARGUMENT,p+r+g)}function iA(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends rA{data(){return super.data()}}function sA(r,e){return typeof e=="string"?Cp(r,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Np{}class oA extends Np{}function eo(r,e,...n){let s=[];e instanceof Np&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Dp)).length,p=c.filter((g=>g instanceof xp)).length;if(d>1||d>0&&p>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class xp extends oA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new xp(e,n,s)}_apply(e){const n=this._parse(e);return lA(e._query,n),new ns(e.firestore,e.converter,wm(e._query,n))}_parse(e){const n=du(e.firestore);return(function(c,d,p,g,y,A,b){let I;if(y.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){V0(b,A);const K=[];for(const ne of b)K.push(O0(g,c,ne));I={arrayValue:{values:K}}}else I=O0(g,c,b)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||V0(b,A),I=WC(p,d,b,A==="in"||A==="not-in");return bt.create(y,A,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Dp extends Np{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)lA(d,g),d=wm(d,g)})(e._query,n),new ns(e.firestore,e.converter,wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Op extends oA{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Op(e,n,s)}_apply(e){return new ns(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}}function tN(r){return Op._create("limit",r,"F")}function O0(r,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(e)&&n.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(nt.fromString(n));if(!ye.isDocumentKey(s))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Yv(r,new ye(s))}if(n instanceof dt)return Yv(r,n._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(n)}.`)}function V0(r,e){if(!Array.isArray(r)||r.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lA(r,e){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nN{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return es(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[fh].arrayValue?.values?.map((s=>yt(s.doubleValue)));return new vi(n)}convertGeoPoint(e){return new _i(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Nh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nt.fromString(e);Fe(IT(s),9688,{name:e});const l=new Fl(s.get(1),s.get(3)),c=new ye(s.popFirst(5));return l.isEqual(n)||tr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qs extends rA{constructor(e,n,s,l,c,d){super(e,n,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(sA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:wt("string",qs._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class th extends qs{data(e={}){return super.data(e)}}class Hs{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Dl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new th(this._firestore,this._userDataWriter,s.key,s,new Dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new th(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new th(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,A=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),A=d.indexOf(p.doc.key)),{type:iN(p.type),doc:g,oldIndex:y,newIndex:A}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(r){r=an(r,dt);const e=an(r.firestore,Ti);return FC(cu(e),r._key).then((n=>cA(e,r,n)))}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:wt("string",Hs._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Mp extends nN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function rN(r){r=an(r,ns);const e=an(r.firestore,Ti),n=cu(e),s=new Mp(e);return aA(r._query),GC(n,r._query).then((l=>new Hs(e,s,r,l)))}function uA(r,e,n){r=an(r,dt);const s=an(r.firestore,Ti),l=Vp(r.converter,e,n);return pu(s,[bp(du(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,on.none())])}function Pp(r,e,n,...s){r=an(r,dt);const l=an(r.firestore,Ti),c=du(l);let d;return d=typeof(e=_t(e))=="string"||e instanceof hu?eA(c,"updateDoc",r._key,e,n,s):JT(c,"updateDoc",r._key,e),pu(l,[d.toMutation(r._key,on.exists(!0))])}function kp(r){return pu(an(r.firestore,Ti),[new Ph(r._key,on.none())])}function qh(r,e){const n=an(r.firestore,Ti),s=jn(r),l=Vp(r.converter,e);return pu(n,[bp(du(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,on.exists(!1))]).then((()=>s))}function Ul(r,...e){r=_t(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||D0(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(D0(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof dt)d=an(r.firestore,Ti),p=xh(r._key.path),c={next:g=>{e[s]&&e[s](cA(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=an(r,ns);d=an(g.firestore,Ti),p=g._query;const y=new Mp(d);c={next:A=>{e[s]&&e[s](new Hs(d,y,g,A))},error:e[s+1],complete:e[s+2]},aA(r._query)}return(function(y,A,b,I){const z=new Ap(I),K=new vp(A,z,b);return y.asyncQueue.enqueueAndForget((async()=>gp(await Eh(y),K))),()=>{z.Nu(),y.asyncQueue.enqueueAndForget((async()=>yp(await Eh(y),K)))}})(cu(d),p,l,c)}function pu(r,e){return(function(s,l){const c=new Wi;return s.asyncQueue.enqueueAndForget((async()=>OC(await HC(s),l,c))),c.promise})(cu(r),e)}function cA(r,e,n){const s=n.docs.get(e._key),l=new Mp(r);return new qs(r,l,e._key,s,new Dl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=du(e)}set(e,n,s){this._verifyNotCommitted();const l=um(e,this._firestore),c=Vp(l.converter,n,s),d=bp(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,on.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=um(e,this._firestore);let d;return d=typeof(n=_t(n))=="string"||n instanceof hu?eA(this._dataReader,"WriteBatch.update",c._key,n,s,l):JT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=um(e,this._firestore);return this._mutations=this._mutations.concat(new Ph(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function um(r,e){if((r=_t(r)).firestore!==e)throw new le(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Zr(){return new wp("serverTimestamp")}function aN(r){return new Rp("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(r){return cu(r=an(r,Ti)),new sN(r,(e=>pu(r,e)))}(function(e,n=!0){(function(l){ho=l})(uo),to(new Gs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Ti(new eI(s.getProvider("auth-internal")),new iI(d,s.getProvider("app-check-internal")),(function(y,A){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(y.options.projectId,A)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Br(Pv,kv,e),Br(Pv,kv,"esm2020")})();/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uN=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),M0=r=>{const e=uN(r);return e.charAt(0).toUpperCase()+e.slice(1)},hA=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),cN=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=pe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...p},g)=>pe.createElement("svg",{ref:g,...hN,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:hA("lucide",l),...!c&&!cN(p)&&{"aria-hidden":"true"},...p},[...d.map(([y,A])=>pe.createElement(y,A)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=(r,e)=>{const n=pe.forwardRef(({className:s,...l},c)=>pe.createElement(fN,{ref:c,iconNode:e,className:hA(`lucide-${lN(M0(r))}`,`lucide-${r}`,s),...l}));return n.displayName=M0(r),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mN=fA("chevron-left",dN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gN=fA("chevron-right",pN),tt={dashboard:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),sales:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),products:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5L12 3l9 4.5M3 7.5v9l9 4.5m9-13.5v9l-9 4.5m0-9l9-4.5m-9 4.5L3 7.5"})}),purchases:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),inventory:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),reports:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),logout:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),plus:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),user:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),money:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),close:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),trash:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),edit:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),filter:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h18M6 12h12M10 20h4"})}),userPlus:E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 14a4 4 0 10-8 0 4 4 0 008 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14v7m-5-3h10M16 3h5m-2.5-2.5V5.5"})]})},yN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyA6pwcMnIn0y0HcKRWQhfpvPKwmbH-Jc4Y",authDomain:"sofwipad-erp-contable.firebaseapp.com",projectId:"sofwipad-erp-contable",storageBucket:"sofwipad-erp-contable.appspot.com",messagingSenderId:"902895181248",appId:"1:902895181248:web:dfb884b039dedacfb3bc25",measurementId:"G-D22KTMEDP6"};const dA=Q0(yN),$l=XR(dA),ft=KC(dA);ZR("debug");const mA=pe.createContext(),_N=({children:r})=>{const[e,n]=pe.useState(null),[s,l]=pe.useState(null),[c,d]=pe.useState(null),[p,g]=pe.useState(!0),[y,A]=pe.useState(""),b=async z=>{const K=oN(ft),ne=Kn(ft,`companies/${z}/chart_of_accounts`);[{code:"1105",name:"Caja",class:"Activo"},{code:"1110",name:"Bancos",class:"Activo"},{code:"1305",name:"Clientes",class:"Activo"},{code:"1435",name:"Inventarios",class:"Activo"},{code:"2205",name:"Proveedores Nacionales",class:"Pasivo"},{code:"2105",name:"Obligaciones Financieras",class:"Pasivo"},{code:"3115",name:"Aportes Sociales",class:"Patrimonio"},{code:"4135",name:"Comercio al por mayor y al por menor",class:"Ingreso"},{code:"5105",name:"Gastos de Personal",class:"Gasto"},{code:"5195",name:"Diversos",class:"Gasto"},{code:"6135",name:"Costo de Ventas",class:"Costo"}].forEach(re=>{const ee=jn(ne,re.code);K.set(ee,re)});try{await K.commit(),console.log(`Plan de cuentas inicial creado para la empresa: ${z}`)}catch(re){console.error("Error creando el plan de cuentas inicial:",re),A("No se pudo completar la configuración inicial de la empresa.")}};pe.useEffect(()=>{const K=Uw($l,async ne=>{if(ne&&!ne.isAnonymous){const te=jn(ft,"users",ne.uid),re=await km(te);if(re.exists()){const ee={uid:ne.uid,...re.data()};if(n(ne),l(ee),ee.companyId){const ue=jn(ft,"companies",ee.companyId),se=await km(ue);if(se.exists()){d({id:se.id,...se.data()});const G=Kn(ft,`companies/${ee.companyId}/chart_of_accounts`),fe=eo(G,tN(1));(await rN(fe)).empty&&(console.log("Plan de cuentas no encontrado, iniciando configuración..."),await b(ee.companyId))}else A(`Error: La empresa con ID ${ee.companyId} no fue encontrada.`),d(null)}else A("Usuario no está asociado a ninguna empresa."),d(null)}else A("No se encontró el perfil del usuario en la base de datos."),await EE($l)}else n(null),l(null),d(null);g(!1)});return()=>K()},[]);const I={user:e,userData:s,companyData:c,loading:p,error:y,setError:A};return E.jsx(mA.Provider,{value:I,children:r})},Ws=()=>pe.useContext(mA),Lp=({isOpen:r,onClose:e,title:n,children:s})=>r?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),E.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:tt.close})]}),E.jsx("div",{className:"p-6",children:s})]})}):null,ot=({id:r,label:e,...n})=>E.jsxs("div",{children:[E.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),E.jsx("input",{id:r,...n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),Yi=({id:r,label:e,children:n,...s})=>E.jsxs("div",{children:[E.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),E.jsx("select",{id:r,...s,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n})]}),Sn=({children:r,onClick:e,type:n="button",variant:s="primary",...l})=>{const c="inline-flex items-center justify-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"border-transparent text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"};return E.jsx("button",{type:n,onClick:e,className:`${c} ${d[s]}`,...l,children:r})},Zl=({title:r,children:e,actions:n})=>E.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[E.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),n&&E.jsx("div",{className:"flex space-x-2",children:n})]}),E.jsx("div",{className:"p-4",children:e})]}),Hh=()=>E.jsx("div",{className:"flex justify-center items-center h-full",children:E.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),pA=({message:r})=>r?E.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative my-4",role:"alert",children:[E.jsx("strong",{className:"font-bold",children:"Error: "}),E.jsx("span",{className:"block sm:inline",children:r})]}):null,vN=()=>{const[r,e]=pe.useState(!0),[n,s]=pe.useState(""),[l,c]=pe.useState(""),[d,p]=pe.useState(""),[g,y]=pe.useState(""),[A,b]=pe.useState(""),[I,z]=pe.useState(""),[K,ne]=pe.useState(!1),te=async ee=>{ee.preventDefault(),ne(!0),z("");try{await Pw($l,n,l)}catch(ue){z(ue.message)}ne(!1)},re=async ee=>{if(ee.preventDefault(),l.length<6){z("La contraseña debe tener al menos 6 caracteres.");return}ne(!0),z("");try{const ue=Kn(ft,"companies"),se=await qh(ue,{name:g,NIT:A,createdAt:Zr(),taxConfig:{iva:19,ica:.414,retefuente:2.5}}),fe=(await Mw($l,n,l)).user;await uA(jn(ft,"users",fe.uid),{name:d,email:n,companyId:se.id,role:"Admin",createdAt:Zr()})}catch(ue){z(ue.message)}ne(!1)};return E.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[E.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Sofwipad ERP Contable"}),E.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Inicia sesión en tu cuenta":"Crea una nueva cuenta y empresa"})]}),E.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:E.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[E.jsxs("form",{className:"space-y-6",onSubmit:r?te:re,children:[!r&&E.jsxs(E.Fragment,{children:[E.jsx(ot,{id:"name",name:"name",type:"text",label:"Tu Nombre Completo",required:!0,value:d,onChange:ee=>p(ee.target.value)}),E.jsx(ot,{id:"companyName",name:"companyName",type:"text",label:"Nombre de la Empresa",required:!0,value:g,onChange:ee=>y(ee.target.value)}),E.jsx(ot,{id:"nit",name:"nit",type:"text",label:"NIT de la Empresa",required:!0,value:A,onChange:ee=>b(ee.target.value)}),E.jsx("hr",{})]}),E.jsx(ot,{id:"email",name:"email",type:"email",label:"Correo Electrónico",autoComplete:"email",required:!0,value:n,onChange:ee=>s(ee.target.value)}),E.jsx(ot,{id:"password",name:"password",type:"password",label:"Contraseña",autoComplete:"current-password",required:!0,value:l,onChange:ee=>c(ee.target.value)}),E.jsx(pA,{message:I}),E.jsx("div",{children:E.jsx(Sn,{type:"submit",variant:"primary",className:"w-full",disabled:K,children:K?"Procesando...":r?"Iniciar Sesión":"Registrar Empresa"})})]}),E.jsxs("div",{className:"mt-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("button",{onClick:()=>{e(!r),z("")},className:"font-medium text-indigo-600 hover:text-indigo-500",children:r?"¿No tienes una cuenta? Regístrate":"¿Ya tienes una cuenta? Inicia sesión"})})]})]})})]})},EN=()=>{const{userData:r,companyData:e}=Ws(),[n,s]=pe.useState("dashboard"),[l,c]=pe.useState(!0),d=async()=>{await EE($l)},p=({view:A,icon:b,children:I})=>E.jsxs("a",{href:"#",onClick:z=>{z.preventDefault(),s(A)},className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${n===A?"bg-indigo-600 text-white":"text-gray-300 hover:bg-indigo-800 hover:text-white"}`,children:[E.jsx("span",{className:"mr-3",children:b}),I]}),g=()=>{switch(n){case"dashboard":return E.jsx(P0,{});case"sales":return E.jsx(TN,{setActiveView:s});case"thirdparties":return E.jsx(AN,{});case"products":return E.jsx(SN,{});default:return E.jsx(P0,{})}},y={Admin:"Administrador",Contador:"Contador",Empleado:"Empleado"};return E.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans relative",children:[E.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-indigo-900 text-white flex flex-col transform transition-transform duration-300 z-20
        ${l?"translate-x-0 w-64":"-translate-x-full w-64"}`,children:[E.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-indigo-800",children:[E.jsx("h2",{className:"text-xl font-bold truncate",children:e?.name||"ERP Nube"}),E.jsx("button",{onClick:()=>c(!1),"aria-label":"Cerrar menú",className:"text-gray-300 hover:text-white",children:E.jsx(mN,{className:"h-6 w-6"})})]}),E.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:[E.jsx(p,{view:"dashboard",icon:tt.dashboard,children:"Dashboard"}),E.jsx(p,{view:"sales",icon:tt.sales,children:"Ventas"}),E.jsx(p,{view:"purchases",icon:tt.purchases,children:"Compras"}),E.jsx(p,{view:"inventory",icon:tt.inventory,children:"Inventario"}),E.jsx(p,{view:"reports",icon:tt.reports,children:"Reportes"}),E.jsx(p,{view:"thirdparties",icon:tt.user,children:"Clientes/Proveedores"}),E.jsx(p,{view:"products",icon:tt.products,children:"Productos/Servicios"})]}),E.jsxs("div",{className:"px-4 py-4 border-t border-indigo-800",children:[E.jsxs("div",{className:"flex items-center mb-4",children:[E.jsx("div",{className:"p-2 bg-indigo-700 rounded-full",children:tt.user}),E.jsxs("div",{className:"ml-3",children:[E.jsx("p",{className:"text-sm font-medium text-white",children:r?.name}),E.jsx("p",{className:"text-xs text-indigo-300",children:y[r?.role]||r?.role})]})]}),E.jsxs("a",{href:"#",onClick:d,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium rounded-lg text-gray-300 hover:bg-red-600 hover:text-white transition-colors",children:[E.jsx("span",{className:"mr-3",children:tt.logout}),"Cerrar Sesión"]})]})]}),!l&&E.jsxs("div",{className:"fixed top-1/2 -translate-y-1/2 left-0 z-30 group",children:[E.jsx("button",{onClick:()=>c(!0),"aria-label":"Abrir menú",className:"bg-indigo-600 text-white p-2 rounded-r-md shadow-md transition-all duration-300 hover:bg-indigo-700 hover:-translate-x-1",children:E.jsx(gN,{className:"h-6 w-6"})}),E.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-300 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg pointer-events-none",children:["Abrir menú",E.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-1 w-2 h-2 bg-gray-900 rotate-45"})]})]}),E.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${l?"ml-64":"ml-0"}`,children:[E.jsx("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-6",children:E.jsx("h1",{className:"text-2xl font-semibold text-gray-800 capitalize",children:n})}),E.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:g()})]})]})},P0=()=>{const{companyData:r}=Ws(),e=[{title:"Ventas del Mes",value:"$12,500,000",icon:tt.sales,color:"text-green-500"},{title:"Cuentas por Cobrar",value:"$4,200,000",icon:tt.money,color:"text-yellow-500"},{title:"Compras del Mes",value:"$7,800,000",icon:tt.purchases,color:"text-red-500"},{title:"Valor Inventario",value:"$25,000,000",icon:tt.inventory,color:"text-blue-500"}];return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Bienvenido a ",r?.name]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[E.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${n.color}`,children:FS.cloneElement(n.icon,{className:"h-8 w-8"})}),E.jsxs("div",{className:"ml-4",children:[E.jsx("p",{className:"text-lg font-semibold text-gray-800",children:n.title}),E.jsx("p",{className:"text-sm font-medium text-gray-500",children:n.value})]})]},n.title))}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsx(Zl,{title:"Ventas vs Compras (Últimos 6 meses)",children:E.jsx("div",{className:"h-64 bg-gray-200 rounded-md flex items-center justify-center",children:E.jsx("p",{className:"text-gray-500",children:"Gráfico de barras aquí"})})}),E.jsx(Zl,{title:"Actividades Recientes",children:E.jsxs("ul",{className:"space-y-3",children:[E.jsx("li",{className:"text-sm text-gray-600",children:"Factura de venta #FV-002 creada."}),E.jsx("li",{className:"text-sm text-gray-600",children:"Pago a proveedor 'DistriPartes SAS' registrado."}),E.jsx("li",{className:"text-sm text-gray-600",children:"Nuevo producto 'Aceite 20W-50' añadido al inventario."})]})})]})]})},TN=({setActiveView:r})=>{const{companyData:e}=Ws(),[n,s]=pe.useState(!1),[l,c]=pe.useState(null),[d,p]=pe.useState([]),[g,y]=pe.useState([]),[A,b]=pe.useState([]),[I,z]=pe.useState(!0);pe.useEffect(()=>{if(!e)return;z(!0);const re=eo(Kn(ft,`companies/${e.id}/invoices_sales`)),ee=Ul(re,ue=>{const se=ue.docs.map(G=>({id:G.id,...G.data()}));p(se),z(!1)},ue=>{console.error("Error fetching invoices: ",ue),z(!1)});return()=>ee()},[e]),pe.useEffect(()=>{if(!e)return;const re=eo(Kn(ft,`companies/${e.id}/thirdparties`)),ee=eo(Kn(ft,`companies/${e.id}/products`)),ue=Ul(re,G=>{y(G.docs.map(fe=>({id:fe.id,...fe.data()})))}),se=Ul(ee,G=>{b(G.docs.map(fe=>({id:fe.id,...fe.data()})))});return()=>{ue(),se()}},[e]);const K=async re=>{if(e)try{const ee=Kn(ft,`companies/${e.id}/invoices_sales`);await qh(ee,{...re,companyId:e.id,createdAt:Zr(),status:"Pendiente"}),s(!1)}catch(ee){console.error("Error creating invoice: ",ee)}},ne=async re=>{if(!(!e||!l))try{const ee=jn(ft,`companies/${e.id}/invoices_sales/${l.id}`);await Pp(ee,{...re,updatedAt:Zr()}),c(null),s(!1)}catch(ee){console.error("Error updating invoice: ",ee)}},te=async re=>{if(e&&window.confirm("¿Seguro que deseas eliminar esta factura?"))try{await kp(jn(ft,`companies/${e.id}/invoices_sales/${re}`))}catch(ee){console.error("Error deleting invoice: ",ee)}};return E.jsxs("div",{children:[E.jsx("div",{className:"border-b mb-4",children:E.jsxs("nav",{className:"flex space-x-6 text-sm font-medium text-gray-600",children:[E.jsx("button",{className:"border-b-2 border-blue-600 text-blue-600 pb-2",children:"Documentos de venta"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Facturas recurrentes"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Clientes"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Seguimiento comercial"})]})}),E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("input",{type:"text",placeholder:"Buscar por Identificación o Cliente",className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(Sn,{variant:"secondary",children:[tt.filter," Filtros"]})]}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsxs(Sn,{type:"button",variant:"secondary",onClick:()=>r("thirdparties"),children:[tt.userPlus," Crear Cliente"]}),E.jsxs(Sn,{onClick:()=>{c(null),s(!0)},children:[tt.plus," Crear Factura"]})]})]}),E.jsx(Zl,{title:"Facturas de Venta",children:I?E.jsx(Hh,{}):E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3",children:"Fecha"}),E.jsx("th",{className:"px-6 py-3",children:"Comprobante"}),E.jsx("th",{className:"px-6 py-3",children:"Identificación"}),E.jsx("th",{className:"px-6 py-3",children:"Cliente"}),E.jsx("th",{className:"px-6 py-3",children:"Total"}),E.jsx("th",{className:"px-6 py-3",children:"Moneda"}),E.jsx("th",{className:"px-6 py-3",children:"Estado"}),E.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),E.jsx("tbody",{children:d.map(re=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-4",children:re.date?.seconds?new Date(re.date.seconds*1e3).toLocaleDateString():"N/A"}),E.jsxs("td",{className:"px-6 py-4 font-medium text-blue-600",children:["FV-",re.id.substring(0,6)]}),E.jsx("td",{className:"px-6 py-4",children:g.find(ee=>ee.id===re.clientId)?.idNumber||"N/A"}),E.jsx("td",{className:"px-6 py-4",children:g.find(ee=>ee.id===re.clientId)?.name||"Consumidor Final"}),E.jsxs("td",{className:"px-6 py-4",children:["$",new Intl.NumberFormat("es-CO").format(re.total||0)]}),E.jsx("td",{className:"px-6 py-4",children:"COP"}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re.status==="Pagada"?"bg-green-100 text-green-800":re.status==="Vencida"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:re.status})}),E.jsxs("td",{className:"px-6 py-4 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>{c(re),s(!0)},children:tt.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>te(re.id),children:tt.trash})]})]},re.id))})]})}),E.jsx(bN,{isOpen:n,onClose:()=>{s(!1),c(null)},onSubmit:l?ne:K,clients:g,products:A,initialData:l})]})},AN=()=>{const{companyData:r}=Ws(),[e,n]=pe.useState([]),[s,l]=pe.useState(!0),[c,d]=pe.useState(!1),[p,g]=pe.useState(null),[y,A]=pe.useState(""),[b,I]=pe.useState({type:"cliente",personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",phone:"",email:"",createdAt:null}),z=G=>G.personType==="empresa"?G.tradeName||`${G.name}`||"":`${G.name||""} ${G.lastName||""}`.trim(),K=G=>G==="NIT"?"NIT":"CC";pe.useEffect(()=>{if(!r)return;const G=eo(Kn(ft,`companies/${r.id}/thirdparties`)),fe=Ul(G,D=>{n(D.docs.map(w=>({id:w.id,...w.data()}))),l(!1)},D=>{console.error("Error loading third parties:",D),l(!1)});return()=>fe()},[r]);const ne=e.filter(G=>{const fe=y.toLowerCase();return(G.idNumber||"").toLowerCase().includes(fe)||(G.name||"").toLowerCase().includes(fe)||(G.lastName||"").toLowerCase().includes(fe)||(G.tradeName||"").toLowerCase().includes(fe)||(G.email||"").toLowerCase().includes(fe)}),te=()=>{g(null),I({type:"cliente",personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",phone:"",email:"",createdAt:null}),d(!0)},re=G=>{g(G.id),I({type:G.type||"cliente",personType:G.personType||"persona",idType:G.idType||(G.personType==="empresa"?"NIT":"CC"),idNumber:G.idNumber||"",name:G.name||"",lastName:G.lastName||"",tradeName:G.tradeName||"",city:G.city||"",address:G.address||"",phone:G.phone||"",email:G.email||"",createdAt:G.createdAt||null}),d(!0)},ee=G=>{const{name:fe,value:D,type:w,checked:C}=G.target;if(fe==="personType"){I(V=>({...V,personType:D,idType:D==="empresa"?"NIT":"CC"}));return}I(V=>({...V,[fe]:w==="checkbox"?C:D}))},ue=async G=>{if(G.preventDefault(),!r)return;const fe={type:b.type,personType:b.personType,idType:b.idType,idNumber:String(b.idNumber).trim(),name:String(b.name).trim(),lastName:String(b.lastName).trim(),tradeName:String(b.tradeName).trim(),city:String(b.city).trim(),address:String(b.address).trim(),phone:String(b.phone).trim(),email:String(b.email).trim(),createdAt:p?b.createdAt:Zr(),updatedAt:Zr()};try{p?await Pp(jn(ft,`companies/${r.id}/thirdparties/${p}`),fe):await qh(Kn(ft,`companies/${r.id}/thirdparties`),fe),d(!1),g(null)}catch(D){console.error("Error saving third party",D),alert("⚠️ Error guardando tercero: "+D.message)}},se=async G=>{if(r&&confirm(`¿Eliminar "${z(G)}"? Esta acción no se puede deshacer.`))try{await kp(jn(ft,`companies/${r.id}/thirdparties/${G.id}`))}catch(fe){console.error("Error deleting third party",fe),alert("⚠️ Error eliminando: "+fe.message)}};return E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("input",{type:"text",placeholder:"Buscar por identificación, nombre o correo",value:y,onChange:G=>A(G.target.value),className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(Sn,{onClick:te,children:[tt.plus," Nuevo Tercero"]})]}),E.jsx(Zl,{title:"Terceros (Clientes, Proveedores y Otros)",children:s?E.jsx(Hh,{}):E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0 z-10",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Tipo"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Tipo Persona"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Identificación"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Nombre / Razón social"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Ciudad"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Teléfono"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Correo"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Acciones"})]})}),E.jsxs("tbody",{children:[ne.map(G=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-3 capitalize",children:G.type}),E.jsx("td",{className:"px-6 py-3 capitalize",children:G.personType}),E.jsxs("td",{className:"px-6 py-3",children:[K(G.idType)," ",G.idNumber]}),E.jsx("td",{className:"px-6 py-3",children:z(G)}),E.jsx("td",{className:"px-6 py-3",children:G.city}),E.jsx("td",{className:"px-6 py-3",children:G.phone}),E.jsx("td",{className:"px-6 py-3",children:G.email}),E.jsxs("td",{className:"px-6 py-3 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>re(G),children:tt.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>se(G),children:tt.trash})]})]},G.id)),ne.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"8",className:"text-center py-4 text-gray-500",children:"No se encontraron resultados"})})]})]})})}),E.jsx(Lp,{isOpen:c,onClose:()=>d(!1),title:`${p?"Editar":"Crear"} Tercero`,children:E.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Tipo de tercero"}),E.jsx("div",{className:"flex items-center space-x-6",children:["cliente","proveedor","otro"].map(G=>E.jsxs("label",{className:"flex items-center space-x-2 capitalize",children:[E.jsx("input",{type:"radio",name:"type",value:G,checked:b.type===G,onChange:ee}),E.jsx("span",{children:G})]},G))})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs(Yi,{id:"personType",name:"personType",label:"Tipo de Persona",value:b.personType,onChange:ee,children:[E.jsx("option",{value:"persona",children:"Persona"}),E.jsx("option",{value:"empresa",children:"Empresa"})]}),E.jsx(Yi,{id:"idType",name:"idType",label:"Tipo de Identificación",value:b.idType,onChange:ee,children:b.personType==="empresa"?E.jsx("option",{value:"NIT",children:"NIT"}):E.jsx("option",{value:"CC",children:"Cédula de Ciudadanía (CC)"})}),E.jsx(ot,{id:"idNumber",name:"idNumber",label:b.personType==="empresa"?"Número de NIT":"Número de Cédula",value:b.idNumber,onChange:ee,required:!0}),E.jsx(ot,{id:"name",name:"name",label:b.personType==="empresa"?"Razón Social / Nombre Legal":"Nombres",value:b.name,onChange:ee,required:!0}),b.personType==="persona"?E.jsx(ot,{id:"lastName",name:"lastName",label:"Apellidos",value:b.lastName,onChange:ee}):E.jsx(ot,{id:"tradeName",name:"tradeName",label:"Nombre Comercial",value:b.tradeName,onChange:ee}),E.jsx(ot,{id:"city",name:"city",label:"Ciudad",value:b.city,onChange:ee}),E.jsx(ot,{id:"address",name:"address",label:"Dirección",value:b.address,onChange:ee}),E.jsx(ot,{id:"phone",name:"phone",label:"Teléfono",value:b.phone,onChange:ee}),E.jsx(ot,{id:"email",name:"email",type:"email",label:"Correo Electrónico",value:b.email,onChange:ee}),p&&E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creación"}),E.jsx("input",{type:"text",value:b.createdAt?new Date(b.createdAt.seconds*1e3).toLocaleString("es-CO"):"",readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed"})]})]}),E.jsxs("div",{className:"flex justify-end space-x-2",children:[E.jsx(Sn,{type:"button",variant:"secondary",onClick:()=>d(!1),children:"Cancelar"}),E.jsx(Sn,{type:"submit",variant:"primary",children:p?"Actualizar":"Guardar"})]})]})})]})},SN=()=>{const{companyData:r}=Ws(),[e,n]=pe.useState([]),[s,l]=pe.useState(!0),[c,d]=pe.useState(!1),[p,g]=pe.useState(null),[y,A]=pe.useState(""),[b,I]=pe.useState({type:"producto",code:"",description:"",quantity:0,unit:"unidades",unitValue:0,taxed:!0,iva:19,createdAt:null}),z=["unidades","centímetros","metros","kilogramos","litros"];pe.useEffect(()=>{if(!r)return;const se=eo(Kn(ft,`companies/${r.id}/products`)),G=Ul(se,fe=>{n(fe.docs.map(D=>({id:D.id,...D.data()}))),l(!1)});return()=>G()},[r]);const K=e.filter(se=>{const G=y.toLowerCase();return se.code?.toLowerCase().includes(G)||se.description?.toLowerCase().includes(G)||se.name?.toLowerCase().includes(G)}),ne=()=>{g(null),I({type:"producto",code:"",description:"",quantity:0,unit:"unidades",unitValue:0,taxed:!0,iva:19,createdAt:null}),d(!0)},te=se=>{g(se.id),I({type:se.type||"producto",code:se.code||"",description:se.description||"",quantity:se.quantity??0,unit:se.unit||"unidades",unitValue:se.unitValue??0,taxed:se.taxed??!0,iva:se.iva??"",createdAt:se.createdAt||null}),d(!0)},re=se=>{const{name:G,value:fe,type:D,checked:w}=se.target;I(C=>({...C,[G]:D==="checkbox"?w:fe}))},ee=async se=>{if(se.preventDefault(),!!r)try{let G=b.code;if(!p){const D=b.type==="producto"?"products":"services",w=jn(ft,`companies/${r.id}/counters/${D}`);await uA(w,{lastCode:aN(1)},{merge:!0});const C=await km(w),V=C.exists()?C.data().lastCode:1;G=`${b.type==="producto"?"P":"S"}-${String(V).padStart(3,"0")}`}const fe={type:b.type,code:G,description:String(b.description).trim(),name:String(b.description).trim(),quantity:Number(b.quantity)||0,unit:b.unit,unitValue:Number(b.unitValue)||0,taxed:!!b.taxed,iva:b.taxed?b.iva===""?null:Number(b.iva):0,createdAt:p?b.createdAt:Zr(),updatedAt:Zr()};p?await Pp(jn(ft,`companies/${r.id}/products/${p}`),fe):await qh(Kn(ft,`companies/${r.id}/products`),fe),d(!1),g(null)}catch(G){console.error("Error guardando producto/servicio",G),alert("⚠️ Error guardando producto/servicio: "+G.message)}},ue=async se=>{if(r&&confirm(`¿Eliminar "${se.description}"? Esta acción no se puede deshacer.`))try{await kp(jn(ft,`companies/${r.id}/products/${se.id}`))}catch(G){console.error("Error eliminando producto/servicio",G),alert("⚠️ Error eliminando: "+G.message)}};return E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("input",{type:"text",placeholder:"Buscar por código o descripción",value:y,onChange:se=>A(se.target.value),className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(Sn,{onClick:ne,children:[tt.plus," Nuevo Producto/Servicio"]})]}),E.jsx(Zl,{title:"Productos y Servicios",children:s?E.jsx(Hh,{}):E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3",children:"Tipo"}),E.jsx("th",{className:"px-6 py-3",children:"Código"}),E.jsx("th",{className:"px-6 py-3",children:"Descripción"}),E.jsx("th",{className:"px-6 py-3",children:"Cantidad"}),E.jsx("th",{className:"px-6 py-3",children:"Unidad"}),E.jsx("th",{className:"px-6 py-3",children:"Valor Unitario"}),E.jsx("th",{className:"px-6 py-3",children:"Gravado IVA"}),E.jsx("th",{className:"px-6 py-3",children:"IVA"}),E.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),E.jsxs("tbody",{children:[K.map(se=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-3 capitalize",children:se.type}),E.jsx("td",{className:"px-6 py-3",children:se.code}),E.jsx("td",{className:"px-6 py-3",children:se.description}),E.jsx("td",{className:"px-6 py-3 text-right",children:se.quantity}),E.jsx("td",{className:"px-6 py-3",children:se.unit}),E.jsxs("td",{className:"px-6 py-3 text-right",children:["$",new Intl.NumberFormat("es-CO").format(se.unitValue||0)]}),E.jsx("td",{className:"px-6 py-3",children:se.taxed?"Sí":"No"}),E.jsx("td",{className:"px-6 py-3",children:se.iva===null||se.iva===""?"No especificado":`${se.iva}%`}),E.jsxs("td",{className:"px-6 py-3 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>te(se),children:tt.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>ue(se),children:tt.trash})]})]},se.id)),K.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"9",className:"text-center py-4 text-gray-500",children:"No se encontraron resultados"})})]})]})}),E.jsx(Lp,{isOpen:c,onClose:()=>d(!1),title:`${p?"Editar":"Crear"} Producto/Servicio`,children:E.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Tipo"}),E.jsxs("div",{className:"flex items-center space-x-6",children:[E.jsxs("label",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"radio",name:"type",value:"producto",checked:b.type==="producto",onChange:re}),E.jsx("span",{children:"Producto"})]}),E.jsxs("label",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"radio",name:"type",value:"servicio",checked:b.type==="servicio",onChange:re}),E.jsx("span",{children:"Servicio"})]})]})]}),E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsxs("h3",{className:"font-semibold mb-2",children:["Información del ",b.type]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx(ot,{id:"description",name:"description",label:"Descripción",value:b.description,onChange:re,required:!0}),E.jsx(ot,{id:"quantity",name:"quantity",type:"number",label:"Cantidad",value:b.quantity,onChange:re,min:"0"}),E.jsx(Yi,{id:"unit",name:"unit",label:"Unidad de medida",value:b.unit,onChange:re,children:z.map(se=>E.jsx("option",{value:se,children:se},se))}),E.jsx(ot,{id:"unitValue",name:"unitValue",type:"number",label:"Valor unitario",value:b.unitValue,onChange:re,min:"0",step:"0.01"}),p&&E.jsxs("div",{className:"col-span-2",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creación"}),E.jsx("input",{type:"text",value:b.createdAt?new Date(b.createdAt.seconds*1e3).toLocaleDateString("es-CO"):"",readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed"})]})]})]}),E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Impuestos"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"checkbox",name:"taxed",checked:b.taxed,onChange:re}),E.jsx("span",{children:"Gravado con IVA"})]}),E.jsxs(Yi,{id:"iva",name:"iva",label:"IVA",value:b.iva,onChange:re,disabled:!b.taxed,children:[E.jsx("option",{value:"",children:"No especificado"}),E.jsx("option",{value:0,children:"0%"}),E.jsx("option",{value:5,children:"5%"}),E.jsx("option",{value:19,children:"19%"})]})]})]}),E.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[E.jsx(Sn,{type:"button",variant:"secondary",onClick:()=>d(!1),children:"Cancelar"}),E.jsx(Sn,{type:"submit",variant:"primary",children:"Guardar"})]})]})})]})},bN=({isOpen:r,onClose:e,onSubmit:n,clients:s,products:l,initialData:c})=>{const{userData:d}=Ws(),[p,g]=pe.useState("Electrónica"),[y,A]=pe.useState(""),[b,I]=pe.useState(()=>{const de=new Date;return new Date(de.getTime()-de.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[z,K]=pe.useState([{productId:"",code:"",name:"",quantity:1,price:0,discount:0,tax:19,retention:0}]),[ne,te]=pe.useState("Efectivo"),[re,ee]=pe.useState(""),[ue,se]=pe.useState(0),[G,fe]=pe.useState(0),[D,w]=pe.useState(0),[C,V]=pe.useState(0);pe.useEffect(()=>{c&&(g(c.tipoFactura||"Electrónica"),A(c.clientId||""),I(c.date?new Date(c.date.seconds*1e3).toISOString().split("T")[0]:b),K(c.items||[]),te(c.paymentMethod||"Efectivo"),ee(c.observaciones||""))},[c]);const M=(de,H,ie)=>{const ce=[...z];if(ce[de][H]=ie,H==="productId"){const Ie=l.find(x=>x.id===ie);Ie&&(ce[de].price=Ie.unitValue||0,ce[de].tax=Ie.iva??19,ce[de].code=Ie.code||"",ce[de].name=Ie.name||Ie.description||"")}K(ce)},k=()=>K([...z,{productId:"",code:"",name:"",quantity:1,price:0,discount:0,tax:19,retention:0}]),N=de=>K(z.filter((H,ie)=>ie!==de));pe.useEffect(()=>{let de=0,H=0,ie=0;z.forEach(ce=>{const Ie=Number(ce.quantity)||0,x=Number(ce.price)||0,W=(Number(ce.discount)||0)/100,oe=Ie*x*(1-W),J=Number(ce.tax)/100;de+=oe,H+=oe*J,ie+=Number(ce.retention)||0}),se(de),fe(H),w(ie),V(de+H-ie)},[z]);const Rt=de=>{de.preventDefault();const H={id:c?.id||null,tipoFactura:p,clientId:y,vendedor:d?.name||"Usuario",date:new Date(b),items:z.map(ie=>({...ie,quantity:Number(ie.quantity),price:Number(ie.price),discount:Number(ie.discount),tax:Number(ie.tax),retention:Number(ie.retention)})),paymentMethod:ne,observaciones:re,subtotal:ue,iva:G,retenciones:D,total:C};n(H),e()};return E.jsx(Lp,{isOpen:r,onClose:e,title:c?"Editar Factura de Venta":"Crear Nueva Factura de Venta",children:E.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs(Yi,{label:"Tipo de Factura",value:p,onChange:de=>g(de.target.value),children:[E.jsx("option",{value:"Electrónica",children:"Electrónica"}),E.jsx("option",{value:"Física",children:"Física"})]}),E.jsxs(Yi,{label:"Cliente",value:y,onChange:de=>A(de.target.value),required:!0,children:[E.jsx("option",{value:"",children:"Seleccione un cliente"}),s.map(de=>E.jsxs("option",{value:de.id,children:[de.name," - ",de.idNumber]},de.id))]}),E.jsx(ot,{label:"Vendedor",value:d?.name||"",readOnly:!0}),E.jsx(ot,{label:"Fecha",type:"date",value:b,onChange:de=>I(de.target.value)})]}),E.jsx("h4",{className:"text-md font-semibold pt-4 border-t",children:"Ítems de la Factura"}),E.jsxs("div",{className:"grid grid-cols-14 gap-2 font-semibold text-gray-600 text-sm border-b pb-1",children:[E.jsx("div",{className:"col-span-3",children:"Producto"}),E.jsx("div",{className:"col-span-2",children:"Cantidad"}),E.jsx("div",{className:"col-span-2",children:"Valor Unitario"}),E.jsx("div",{className:"col-span-2",children:"% Desc."}),E.jsx("div",{className:"col-span-2",children:"Impuesto"}),E.jsx("div",{className:"col-span-1",children:"Ret."}),E.jsx("div",{className:"col-span-1",children:"Valor Total"}),E.jsx("div",{className:"w-8 flex justify-center"})]}),z.map((de,H)=>{const ie=Number(de.quantity)||0,ce=Number(de.price)||0,Ie=(Number(de.discount)||0)/100,x=ie*ce*(1-Ie),W=Number(de.tax)/100,oe=x+x*W-(Number(de.retention)||0);return E.jsxs("div",{className:"grid grid-cols-14 gap-2 items-center",children:[E.jsx("div",{className:"col-span-3",children:E.jsxs(Yi,{value:de.productId,onChange:J=>M(H,"productId",J.target.value),children:[E.jsx("option",{value:"",children:"Seleccione producto"}),l.map(J=>E.jsxs("option",{value:J.id,children:[J.code," - ",J.name]},J.id))]})}),E.jsx("div",{className:"col-span-2",children:E.jsx(ot,{type:"number",value:de.quantity,min:"1",onChange:J=>M(H,"quantity",J.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsx(ot,{type:"number",value:de.price,onChange:J=>M(H,"price",J.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsx(ot,{type:"number",value:de.discount,onChange:J=>M(H,"discount",J.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsxs(Yi,{value:de.tax,onChange:J=>M(H,"tax",J.target.value),children:[E.jsx("option",{value:0,children:"0% (Exento)"}),E.jsx("option",{value:5,children:"5%"}),E.jsx("option",{value:19,children:"19%"})]})}),E.jsx("div",{className:"col-span-1",children:E.jsx(ot,{type:"number",value:de.retention,onChange:J=>M(H,"retention",J.target.value)})}),E.jsx("div",{className:"col-span-1 text-right font-semibold",children:new Intl.NumberFormat("es-CO").format(oe)}),E.jsx("div",{className:"w-8 flex justify-center items-center",children:E.jsx("button",{type:"button",className:"text-red-500 hover:text-red-700 p-1",onClick:()=>N(H),children:tt.trash})})]},H)}),E.jsx(Sn,{type:"button",variant:"secondary",onClick:k,children:"Añadir Ítem"}),E.jsxs("div",{className:"mt-4 border-t pt-4 space-y-2 text-right",children:[E.jsxs("p",{children:["Subtotal: ",E.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(ue)]})]}),E.jsxs("p",{children:["IVA: ",E.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(G)]})]}),E.jsxs("p",{children:["Retenciones:"," ",E.jsxs("b",{children:["-$",new Intl.NumberFormat("es-CO").format(D)]})]}),E.jsxs("p",{className:"text-lg font-bold",children:["Total Neto: $",new Intl.NumberFormat("es-CO").format(C)]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[E.jsxs(Yi,{label:"Forma de Pago",value:ne,onChange:de=>te(de.target.value),children:[E.jsx("option",{value:"Efectivo",children:"Efectivo"}),E.jsx("option",{value:"Crédito",children:"Crédito"})]}),E.jsx(ot,{label:"Observaciones",value:re,onChange:de=>ee(de.target.value)})]}),E.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[E.jsx(Sn,{type:"button",variant:"secondary",onClick:e,children:"Cancelar"}),E.jsx(Sn,{type:"submit",variant:"primary",children:c?"Actualizar Factura":"Guardar Factura"})]})]})})};function wN(){return E.jsx(_N,{children:E.jsx(RN,{})})}const RN=()=>{const{user:r,loading:e,error:n}=Ws();return e?E.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50",children:E.jsx(Hh,{})}):n?E.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50 p-4",children:E.jsx(pA,{message:n})}):r?E.jsx(EN,{}):E.jsx(vN,{})};ZS.createRoot(document.getElementById("root")).render(E.jsx(pe.StrictMode,{children:E.jsx(wN,{})}));

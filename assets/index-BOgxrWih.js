(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function CS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ld={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function NS(){if(z_)return vl;z_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return vl.Fragment=t,vl.jsx=n,vl.jsxs=n,vl}var B_;function DS(){return B_||(B_=1,Ld.exports=NS()),Ld.exports}var M=DS(),Ud={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function OS(){if(q_)return wt;q_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=R&&N[R]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,J={};function Z(N,W,at){this.props=N,this.context=W,this.refs=J,this.updater=at||B}Z.prototype.isReactComponent={},Z.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},Z.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function it(){}it.prototype=Z.prototype;function et(N,W,at){this.props=N,this.context=W,this.refs=J,this.updater=at||B}var rt=et.prototype=new it;rt.constructor=et,Y(rt,Z.prototype),rt.isPureReactComponent=!0;var At=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},Rt=Object.prototype.hasOwnProperty;function V(N,W,at,tt,dt,It){return at=It.ref,{$$typeof:r,type:N,key:W,ref:at!==void 0?at:null,props:It}}function S(N,W){return V(N.type,W,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(at){return W[at]})}var x=/\/+/g;function k(N,W){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):W.toString(36)}function I(){}function ke(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,W,at,tt,dt){var It=typeof N;(It==="undefined"||It==="boolean")&&(N=null);var Et=!1;if(N===null)Et=!0;else switch(It){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(N.$$typeof){case r:case t:Et=!0;break;case T:return Et=N._init,ae(Et(N._payload),W,at,tt,dt)}}if(Et)return dt=dt(N),Et=tt===""?"."+k(N,0):tt,At(dt)?(at="",Et!=null&&(at=Et.replace(x,"$&/")+"/"),ae(dt,W,at,"",function(Qn){return Qn})):dt!=null&&(C(dt)&&(dt=S(dt,at+(dt.key==null||N&&N.key===dt.key?"":(""+dt.key).replace(x,"$&/")+"/")+Et)),W.push(dt)),1;Et=0;var Ne=tt===""?".":tt+":";if(At(N))for(var Wt=0;Wt<N.length;Wt++)tt=N[Wt],It=Ne+k(tt,Wt),Et+=ae(tt,W,at,It,dt);else if(Wt=b(N),typeof Wt=="function")for(N=Wt.call(N),Wt=0;!(tt=N.next()).done;)tt=tt.value,It=Ne+k(tt,Wt++),Et+=ae(tt,W,at,It,dt);else if(It==="object"){if(typeof N.then=="function")return ae(ke(N),W,at,tt,dt);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Et}function F(N,W,at){if(N==null)return N;var tt=[],dt=0;return ae(N,tt,"","",function(It){return W.call(at,It,dt++)}),tt}function st(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(at){(N._status===0||N._status===-1)&&(N._status=1,N._result=at)},function(at){(N._status===0||N._status===-1)&&(N._status=2,N._result=at)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ht=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function jt(){}return wt.Children={map:F,forEach:function(N,W,at){F(N,function(){W.apply(this,arguments)},at)},count:function(N){var W=0;return F(N,function(){W++}),W},toArray:function(N){return F(N,function(W){return W})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},wt.Component=Z,wt.Fragment=n,wt.Profiler=l,wt.PureComponent=et,wt.StrictMode=s,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt,wt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return mt.H.useMemoCache(N)}},wt.cache=function(N){return function(){return N.apply(null,arguments)}},wt.cloneElement=function(N,W,at){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var tt=Y({},N.props),dt=N.key,It=void 0;if(W!=null)for(Et in W.ref!==void 0&&(It=void 0),W.key!==void 0&&(dt=""+W.key),W)!Rt.call(W,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&W.ref===void 0||(tt[Et]=W[Et]);var Et=arguments.length-2;if(Et===1)tt.children=at;else if(1<Et){for(var Ne=Array(Et),Wt=0;Wt<Et;Wt++)Ne[Wt]=arguments[Wt+2];tt.children=Ne}return V(N.type,dt,void 0,void 0,It,tt)},wt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},wt.createElement=function(N,W,at){var tt,dt={},It=null;if(W!=null)for(tt in W.key!==void 0&&(It=""+W.key),W)Rt.call(W,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(dt[tt]=W[tt]);var Et=arguments.length-2;if(Et===1)dt.children=at;else if(1<Et){for(var Ne=Array(Et),Wt=0;Wt<Et;Wt++)Ne[Wt]=arguments[Wt+2];dt.children=Ne}if(N&&N.defaultProps)for(tt in Et=N.defaultProps,Et)dt[tt]===void 0&&(dt[tt]=Et[tt]);return V(N,It,void 0,void 0,null,dt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(N){return{$$typeof:p,render:N}},wt.isValidElement=C,wt.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:st}},wt.memo=function(N,W){return{$$typeof:y,type:N,compare:W===void 0?null:W}},wt.startTransition=function(N){var W=mt.T,at={};mt.T=at;try{var tt=N(),dt=mt.S;dt!==null&&dt(at,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(jt,ht)}catch(It){ht(It)}finally{mt.T=W}},wt.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()},wt.use=function(N){return mt.H.use(N)},wt.useActionState=function(N,W,at){return mt.H.useActionState(N,W,at)},wt.useCallback=function(N,W){return mt.H.useCallback(N,W)},wt.useContext=function(N){return mt.H.useContext(N)},wt.useDebugValue=function(){},wt.useDeferredValue=function(N,W){return mt.H.useDeferredValue(N,W)},wt.useEffect=function(N,W,at){var tt=mt.H;if(typeof at=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(N,W)},wt.useId=function(){return mt.H.useId()},wt.useImperativeHandle=function(N,W,at){return mt.H.useImperativeHandle(N,W,at)},wt.useInsertionEffect=function(N,W){return mt.H.useInsertionEffect(N,W)},wt.useLayoutEffect=function(N,W){return mt.H.useLayoutEffect(N,W)},wt.useMemo=function(N,W){return mt.H.useMemo(N,W)},wt.useOptimistic=function(N,W){return mt.H.useOptimistic(N,W)},wt.useReducer=function(N,W,at){return mt.H.useReducer(N,W,at)},wt.useRef=function(N){return mt.H.useRef(N)},wt.useState=function(N){return mt.H.useState(N)},wt.useSyncExternalStore=function(N,W,at){return mt.H.useSyncExternalStore(N,W,at)},wt.useTransition=function(){return mt.H.useTransition()},wt.version="19.1.1",wt}var H_;function Om(){return H_||(H_=1,Ud.exports=OS()),Ud.exports}var Bt=Om();const VS=CS(Bt);var jd={exports:{}},El={},zd={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function xS(){return F_||(F_=1,(function(r){function t(F,st){var ht=F.length;F.push(st);t:for(;0<ht;){var jt=ht-1>>>1,N=F[jt];if(0<l(N,st))F[jt]=st,F[ht]=N,ht=jt;else break t}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var st=F[0],ht=F.pop();if(ht!==st){F[0]=ht;t:for(var jt=0,N=F.length,W=N>>>1;jt<W;){var at=2*(jt+1)-1,tt=F[at],dt=at+1,It=F[dt];if(0>l(tt,ht))dt<N&&0>l(It,tt)?(F[jt]=It,F[dt]=ht,jt=dt):(F[jt]=tt,F[at]=ht,jt=at);else if(dt<N&&0>l(It,ht))F[jt]=It,F[dt]=ht,jt=dt;else break t}}return st}function l(F,st){var ht=F.sortIndex-st.sortIndex;return ht!==0?ht:F.id-st.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,R=null,b=3,B=!1,Y=!1,J=!1,Z=!1,it=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;function At(F){for(var st=n(y);st!==null;){if(st.callback===null)s(y);else if(st.startTime<=F)s(y),st.sortIndex=st.expirationTime,t(g,st);else break;st=n(y)}}function mt(F){if(J=!1,At(F),!Y)if(n(g)!==null)Y=!0,Rt||(Rt=!0,k());else{var st=n(y);st!==null&&ae(mt,st.startTime-F)}}var Rt=!1,V=-1,S=5,C=-1;function O(){return Z?!0:!(r.unstable_now()-C<S)}function x(){if(Z=!1,Rt){var F=r.unstable_now();C=F;var st=!0;try{t:{Y=!1,J&&(J=!1,et(V),V=-1),B=!0;var ht=b;try{e:{for(At(F),R=n(g);R!==null&&!(R.expirationTime>F&&O());){var jt=R.callback;if(typeof jt=="function"){R.callback=null,b=R.priorityLevel;var N=jt(R.expirationTime<=F);if(F=r.unstable_now(),typeof N=="function"){R.callback=N,At(F),st=!0;break e}R===n(g)&&s(g),At(F)}else s(g);R=n(g)}if(R!==null)st=!0;else{var W=n(y);W!==null&&ae(mt,W.startTime-F),st=!1}}break t}finally{R=null,b=ht,B=!1}st=void 0}}finally{st?k():Rt=!1}}}var k;if(typeof rt=="function")k=function(){rt(x)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ke=I.port2;I.port1.onmessage=x,k=function(){ke.postMessage(null)}}else k=function(){it(x,0)};function ae(F,st){V=it(function(){F(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(F){switch(b){case 1:case 2:case 3:var st=3;break;default:st=b}var ht=b;b=st;try{return F()}finally{b=ht}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(F,st){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ht=b;b=F;try{return st()}finally{b=ht}},r.unstable_scheduleCallback=function(F,st,ht){var jt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?jt+ht:jt):ht=jt,F){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ht+N,F={id:T++,callback:st,priorityLevel:F,startTime:ht,expirationTime:N,sortIndex:-1},ht>jt?(F.sortIndex=ht,t(y,F),n(g)===null&&F===n(y)&&(J?(et(V),V=-1):J=!0,ae(mt,ht-jt))):(F.sortIndex=N,t(g,F),Y||B||(Y=!0,Rt||(Rt=!0,k()))),F},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(F){var st=b;return function(){var ht=b;b=st;try{return F.apply(this,arguments)}finally{b=ht}}}})(Bd)),Bd}var G_;function MS(){return G_||(G_=1,zd.exports=xS()),zd.exports}var qd={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function PS(){if(Q_)return Ke;Q_=1;var r=Om();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,T)},Ke.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ke.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ke.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin),b=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:b,fetchPriority:B}):T==="script"&&s.d.X(g,{crossOrigin:R,integrity:b,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ke.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ke.requestFormReset=function(g){s.d.r(g)},Ke.unstable_batchedUpdates=function(g,y){return g(y)},Ke.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Ke.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var K_;function kS(){if(K_)return qd.exports;K_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),qd.exports=PS(),qd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function LS(){if(Y_)return El;Y_=1;var r=MS(),t=Om(),n=kS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),e;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),et=Symbol.for("react.consumer"),rt=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=x&&e[x]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case Z:return"Profiler";case J:return"StrictMode";case mt:return"Suspense";case Rt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case rt:return(e.displayName||"Context")+".Provider";case et:return(e._context.displayName||"Context")+".Consumer";case At:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:ke(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return ke(e(i))}catch{}}return null}var ae=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},jt=[],N=-1;function W(e){return{current:e}}function at(e){0>N||(e.current=jt[N],jt[N]=null,N--)}function tt(e,i){N++,jt[N]=e.current,e.current=i}var dt=W(null),It=W(null),Et=W(null),Ne=W(null);function Wt(e,i){switch(tt(Et,i),tt(It,e),tt(dt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?m_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=m_(i),e=p_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}at(dt),tt(dt,e)}function Qn(){at(dt),at(It),at(Et)}function Wi(e){e.memoizedState!==null&&tt(Ne,e);var i=dt.current,a=p_(i,e.type);i!==a&&(tt(It,e),tt(dt,a))}function yi(e){It.current===e&&(at(dt),at(It)),Ne.current===e&&(at(Ne),ml._currentValue=ht)}var Wr=Object.prototype.hasOwnProperty,Jr=r.unstable_scheduleCallback,ts=r.unstable_cancelCallback,co=r.unstable_shouldYield,su=r.unstable_requestPaint,En=r.unstable_now,kh=r.unstable_getCurrentPriorityLevel,ho=r.unstable_ImmediatePriority,Ys=r.unstable_UserBlockingPriority,es=r.unstable_NormalPriority,Lh=r.unstable_LowPriority,Xs=r.unstable_IdlePriority,fo=r.log,au=r.unstable_setDisableYieldValue,oe=null,Ft=null;function un(e){if(typeof fo=="function"&&au(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(oe,e)}catch{}}var Ge=Math.clz32?Math.clz32:ns,ou=Math.log,Uh=Math.LN2;function ns(e){return e>>>=0,e===0?32:31-(ou(e)/Uh|0)|0}var is=256,rs=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=kn(o):(v&=E,v!==0?h=kn(v):a||(a=E&~e,a!==0&&(h=kn(a))))):(E=o&~f,E!==0?h=kn(E):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ss(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function mo(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var e=is;return is<<=1,(is&4194048)===0&&(is=256),e}function go(){var e=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),e}function _i(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function vi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yo(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,w=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Ge(a),X=1<<G;E[G]=0,w[G]=-1;var z=j[G];if(z!==null)for(j[G]=null,G=0;G<z.length;G++){var q=z[G];q!==null&&(q.lane&=-536870913)}a&=~X}o!==0&&Kn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Kn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Ge(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function _o(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Ge(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function tr(){var e=st.p;return e!==0?e:(e=window.event,e===void 0?32:M_(e.type))}function lu(e,i){var a=st.p;try{return st.p=e,i()}finally{st.p=a}}var ne=Math.random().toString(36).slice(2),Se="__reactFiber$"+ne,pe="__reactProps$"+ne,Tn="__reactContainer$"+ne,vo="__reactEvents$"+ne,jh="__reactListeners$"+ne,er="__reactHandles$"+ne,uu="__reactResources$"+ne,as="__reactMarker$"+ne;function nr(e){delete e[Se],delete e[pe],delete e[vo],delete e[jh],delete e[er]}function Ei(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Tn]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=v_(e);e!==null;){if(a=e[Se])return a;e=v_(e)}return i}e=a,a=e.parentNode}return null}function Yn(e){if(e=e[Se]||e[Tn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Xn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Je(e){var i=e[uu];return i||(i=e[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[as]=!0}var Eo=new Set,Ws={};function Ln(e,i){Ti(e,i),Ti(e+"Capture",i)}function Ti(e,i){for(Ws[e]=i,e=0;e<i.length;e++)Eo.add(i[e])}var cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},os={};function fu(e){return Wr.call(os,e)?!0:Wr.call(hu,e)?!1:cu.test(e)?os[e]=!0:(hu[e]=!0,!1)}function ir(e,i,a){if(fu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function $n(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Le(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var ls,du;function Ai(e){if(ls===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ls=i&&i[1]||"",du=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ls+e+du}var Js=!1;function ta(e,i){if(!e||Js)return"";Js=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var z=q}Reflect.construct(e,[],X)}else{try{X.call()}catch(q){z=q}e.call(X.prototype)}}else{try{throw Error()}catch(q){z=q}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),j=E.split(`
`);for(h=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===w.length||h===j.length)for(o=w.length-1,h=j.length-1;1<=o&&0<=h&&w[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(w[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||w[o]!==j[h]){var G=`
`+w[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{Js=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ai(a):""}function To(e){switch(e.tag){case 26:case 27:case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Ai("Activity");default:return""}}function ea(e){try{var i="";do i+=To(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ao(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zh(e){var i=Ao(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function na(e){e._valueTracker||(e._valueTracker=zh(e))}function So(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=Ao(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Bh=/[\n"\\]/g;function ge(e){return e.replace(Bh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cn(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+tn(i)):e.value!==""+tn(i)&&(e.value=""+tn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?rr(e,v,tn(i)):a!=null?rr(e,v,tn(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+tn(E):e.removeAttribute("name")}function cs(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function rr(e,i,a){i==="number"&&us(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Si(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Kt(e,i,a){if(i!=null&&(i=""+tn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+tn(a):""}function hs(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ae(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=tn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function An(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var fs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||fs.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function wo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&mu(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&mu(e,f,i[f])}function bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return Hh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wi=null;function Sn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bi=null,Ri=null;function Ro(e){var i=Yn(e);if(i&&(e=i.stateNode)){var a=e[pe]||null;t:switch(e=i.stateNode,i.type){case"input":if(cn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ge(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[pe]||null;if(!h)throw Error(s(90));cn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&So(o)}break t;case"textarea":Kt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Si(e,!!a.multiple,i,!1)}}}var Zn=!1;function pu(e,i,a){if(Zn)return e(i,a);Zn=!0;try{var o=e(i);return o}finally{if(Zn=!1,(bi!==null||Ri!==null)&&(lc(),bi&&(i=bi,e=Ri,Ri=bi=null,Ro(i),e)))for(i=0;i<e.length;i++)Ro(e[i])}}function ds(e,i){var a=e.stateNode;if(a===null)return null;var o=a[pe]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(Un)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){wn=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{wn=!1}var Wn=null,sr=null,Ii=null;function Io(){if(Ii)return Ii;var e,i=sr,a=i.length,o,h="value"in Wn?Wn.value:Wn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ii=h.slice(e,1<o?1-o:void 0)}function Jn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function Co(){return!1}function De(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:Co,this.isPropagationStopped=Co,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=De(qt),ps=T({},qt,{view:0,detail:0}),gu=De(ps),sa,aa,ei,gs=T({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&e.type==="mousemove"?(sa=e.screenX-ei.screenX,aa=e.screenY-ei.screenY):aa=sa=0,ei=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),bn=De(gs),yu=T({},gs,{dataTransfer:0}),Fh=De(yu),ys=T({},ps,{relatedTarget:0}),oa=De(ys),No=T({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),la=De(No),_u=T({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=De(_u),Gh=T({},qt,{data:0}),Do=De(Gh),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Eu[e])?!!i[e]:!1}function vs(){return Oo}var Tu=T({},ps,{key:function(e){if(e.key){var i=_s[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Jn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(e){return e.type==="keypress"?Jn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ca=De(Tu),Au=T({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=De(Au),Ci=T({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),Su=De(Ci),wu=T({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),bu=De(wu),Ru=T({},gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=De(Ru),en=T({},qt,{newState:0,oldState:0}),Iu=De(en),Cu=[9,13,27,32],ni=Un&&"CompositionEvent"in window,u=null;Un&&"documentMode"in document&&(u=document.documentMode);var m=Un&&"TextEvent"in window&&!u,_=Un&&(!ni||u&&8<u&&11>=u),A=" ",L=!1;function H(e,i){switch(e){case"keyup":return Cu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mt=!1;function we(e,i){switch(e){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return e=i.data,e===A&&L?null:e;default:return null}}function Pt(e,i){if(Mt)return e==="compositionend"||!ni&&H(e,i)?(e=Io(),Ii=sr=Wn=null,Mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Ni(e,i,a,o){bi?Ri?Ri.push(o):Ri=[o]:bi=o,i=mc(i,"onChange"),0<i.length&&(a=new ra("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Ue=null,ii=null;function xo(e){u_(e,0)}function Nu(e){var i=Xn(e);if(So(i))return e}function Dp(e,i){if(e==="change")return i}var Op=!1;if(Un){var Qh;if(Un){var Kh="oninput"in document;if(!Kh){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),Kh=typeof Vp.oninput=="function"}Qh=Kh}else Qh=!1;Op=Qh&&(!document.documentMode||9<document.documentMode)}function xp(){Ue&&(Ue.detachEvent("onpropertychange",Mp),ii=Ue=null)}function Mp(e){if(e.propertyName==="value"&&Nu(ii)){var i=[];Ni(i,ii,e,Sn(e)),pu(xo,i)}}function rA(e,i,a){e==="focusin"?(xp(),Ue=i,ii=a,Ue.attachEvent("onpropertychange",Mp)):e==="focusout"&&xp()}function sA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nu(ii)}function aA(e,i){if(e==="click")return Nu(i)}function oA(e,i){if(e==="input"||e==="change")return Nu(i)}function lA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var hn=typeof Object.is=="function"?Object.is:lA;function Mo(e,i){if(hn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Wr.call(i,h)||!hn(e[h],i[h]))return!1}return!0}function Pp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kp(e,i){var a=Pp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Pp(a)}}function Lp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Lp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Up(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=us(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=us(e.document)}return i}function Yh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var uA=Un&&"documentMode"in document&&11>=document.documentMode,fa=null,Xh=null,Po=null,$h=!1;function jp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$h||fa==null||fa!==us(o)||(o=fa,"selectionStart"in o&&Yh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Po&&Mo(Po,o)||(Po=o,o=mc(Xh,"onSelect"),0<o.length&&(i=new ra("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=fa)))}function Es(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var da={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Zh={},zp={};Un&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Ts(e){if(Zh[e])return Zh[e];if(!da[e])return e;var i=da[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in zp)return Zh[e]=i[a];return e}var Bp=Ts("animationend"),qp=Ts("animationiteration"),Hp=Ts("animationstart"),cA=Ts("transitionrun"),hA=Ts("transitionstart"),fA=Ts("transitioncancel"),Fp=Ts("transitionend"),Gp=new Map,Wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wh.push("scrollEnd");function jn(e,i){Gp.set(e,i),Ln(i,[e])}var Qp=new WeakMap;function Rn(e,i){if(typeof e=="object"&&e!==null){var a=Qp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ea(i)},Qp.set(e,i),i)}return{value:e,source:i,stack:ea(i)}}var In=[],ma=0,Jh=0;function Du(){for(var e=ma,i=Jh=ma=0;i<e;){var a=In[i];In[i++]=null;var o=In[i];In[i++]=null;var h=In[i];In[i++]=null;var f=In[i];if(In[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Kp(a,h,f)}}function Ou(e,i,a,o){In[ma++]=e,In[ma++]=i,In[ma++]=a,In[ma++]=o,Jh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function tf(e,i,a,o){return Ou(e,i,a,o),Vu(e)}function pa(e,i){return Ou(e,null,null,i),Vu(e)}function Kp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Ge(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Vu(e){if(50<al)throw al=0,od=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ga={};function dA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,i,a,o){return new dA(e,i,a,o)}function ef(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Di(e,i){var a=e.alternate;return a===null?(a=fn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Yp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function xu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")ef(e)&&(v=1);else if(typeof e=="string")v=pS(e,a,dt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=fn(31,a,i,h),e.elementType=C,e.lanes=f,e;case Y:return As(a.children,h,f,i);case J:v=8,h|=24;break;case Z:return e=fn(12,a,i,h|2),e.elementType=Z,e.lanes=f,e;case mt:return e=fn(13,a,i,h),e.elementType=mt,e.lanes=f,e;case Rt:return e=fn(19,a,i,h),e.elementType=Rt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case it:case rt:v=10;break t;case et:v=9;break t;case At:v=11;break t;case V:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=fn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function As(e,i,a,o){return e=fn(7,e,o,i),e.lanes=a,e}function nf(e,i,a){return e=fn(6,e,null,i),e.lanes=a,e}function rf(e,i,a){return i=fn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ya=[],_a=0,Mu=null,Pu=0,Cn=[],Nn=0,Ss=null,Oi=1,Vi="";function ws(e,i){ya[_a++]=Pu,ya[_a++]=Mu,Mu=e,Pu=i}function Xp(e,i,a){Cn[Nn++]=Oi,Cn[Nn++]=Vi,Cn[Nn++]=Ss,Ss=e;var o=Oi;e=Vi;var h=32-Ge(o)-1;o&=~(1<<h),a+=1;var f=32-Ge(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Oi=1<<32-Ge(i)+h|a<<h|o,Vi=f+e}else Oi=1<<f|a<<h|o,Vi=e}function sf(e){e.return!==null&&(ws(e,1),Xp(e,1,0))}function af(e){for(;e===Mu;)Mu=ya[--_a],ya[_a]=null,Pu=ya[--_a],ya[_a]=null;for(;e===Ss;)Ss=Cn[--Nn],Cn[Nn]=null,Vi=Cn[--Nn],Cn[Nn]=null,Oi=Cn[--Nn],Cn[Nn]=null}var nn=null,le=null,zt=!1,bs=null,ri=!1,of=Error(s(519));function Rs(e){var i=Error(s(418,""));throw Uo(Rn(i,e)),of}function $p(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[pe]=o,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<ll.length;a++)Dt(ll[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),cs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),na(i);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),hs(i,o.value,o.defaultValue,o.children),na(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||d_(i.textContent,a)?(o.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),o.onScroll!=null&&Dt("scroll",i),o.onScrollEnd!=null&&Dt("scrollend",i),o.onClick!=null&&(i.onclick=pc),i=!0):i=!1,i||Rs(e)}function Zp(e){for(nn=e.return;nn;)switch(nn.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:nn=nn.return}}function ko(e){if(e!==nn)return!1;if(!zt)return Zp(e),zt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Sd(e.type,e.memoizedProps)),a=!a),a&&le&&Rs(e),Zp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=Bn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,Tr(e.type)?(e=Id,Id=null,le=e):le=i):le=nn?Bn(e.stateNode.nextSibling):null;return!0}function Lo(){le=nn=null,zt=!1}function Wp(){var e=bs;return e!==null&&(an===null?an=e:an.push.apply(an,e),bs=null),e}function Uo(e){bs===null?bs=[e]:bs.push(e)}var lf=W(null),Is=null,xi=null;function ar(e,i,a){tt(lf,i._currentValue),i._currentValue=a}function Mi(e){e._currentValue=lf.current,at(lf)}function uf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function cf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var w=0;w<i.length;w++)if(E.context===i[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),uf(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),uf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function jo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;hn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ne.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ml):e=[ml])}h=h.return}e!==null&&cf(i,e,a,o),i.flags|=262144}function ku(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){Is=e,xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return Jp(Is,e)}function Lu(e,i){return Is===null&&Cs(e),Jp(e,i)}function Jp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},xi===null){if(e===null)throw Error(s(308));xi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else xi=xi.next=i;return a}var mA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},pA=r.unstable_scheduleCallback,gA=r.unstable_NormalPriority,Re={$$typeof:rt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new mA,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&pA(gA,function(){e.controller.abort()})}var Bo=null,ff=0,va=0,Ea=null;function yA(e,i){if(Bo===null){var a=Bo=[];ff=0,va=md(),Ea={status:"pending",value:void 0,then:function(o){a.push(o)}}}return ff++,i.then(tg,tg),i}function tg(){if(--ff===0&&Bo!==null){Ea!==null&&(Ea.status="fulfilled");var e=Bo;Bo=null,va=0,Ea=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function _A(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var eg=F.S;F.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&yA(e,i),eg!==null&&eg(e,i)};var Ns=W(null);function df(){var e=Ns.current;return e!==null?e:Jt.pooledCache}function Uu(e,i){i===null?tt(Ns,Ns.current):tt(Ns,i.pool)}function ng(){var e=df();return e===null?null:{parent:Re._currentValue,pool:e}}var qo=Error(s(460)),ig=Error(s(474)),ju=Error(s(542)),mf={then:function(){}};function rg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zu(){}function sg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(zu,zu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,og(e),e;default:if(typeof i.status=="string")i.then(zu,zu);else{if(e=Jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,og(e),e}throw Ho=i,qo}}var Ho=null;function ag(){if(Ho===null)throw Error(s(459));var e=Ho;return Ho=null,e}function og(e){if(e===qo||e===ju)throw Error(s(483))}var or=!1;function pf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function lr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ur(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Vu(e),Kp(e,null,a),i}return Ou(e,o,i,a),Vu(e)}function Fo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,_o(e,a)}}function yf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var _f=!1;function Go(){if(_f){var e=Ea;if(e!==null)throw e}}function Qo(e,i,a,o){_f=!1;var h=e.updateQueue;or=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,j=w.next;w.next=null,v===null?f=j:v.next=j,v=w;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=j:E.next=j,G.lastBaseUpdate=w))}if(f!==null){var X=h.baseState;v=0,G=j=w=null,E=f;do{var z=E.lane&-536870913,q=z!==E.lane;if(q?(kt&z)===z:(o&z)===z){z!==0&&z===va&&(_f=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var vt=e,pt=E;z=i;var $t=a;switch(pt.tag){case 1:if(vt=pt.payload,typeof vt=="function"){X=vt.call($t,X,z);break t}X=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=pt.payload,z=typeof vt=="function"?vt.call($t,X,z):vt,z==null)break t;X=T({},X,z);break t;case 2:or=!0}}z=E.callback,z!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(j=G=q,w=X):G=G.next=q,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);G===null&&(w=X),h.baseState=w,h.firstBaseUpdate=j,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),yr|=v,e.lanes=v,e.memoizedState=X}}function lg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function ug(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)lg(a[e],i)}var Ta=W(null),Bu=W(0);function cg(e,i){e=Bi,tt(Bu,e),tt(Ta,i),Bi=e|i.baseLanes}function vf(){tt(Bu,Bi),tt(Ta,Ta.current)}function Ef(){Bi=Bu.current,at(Ta),at(Bu)}var cr=0,bt=null,Yt=null,ye=null,qu=!1,Aa=!1,Ds=!1,Hu=0,Ko=0,Sa=null,vA=0;function he(){throw Error(s(321))}function Tf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!hn(e[a],i[a]))return!1;return!0}function Af(e,i,a,o,h,f){return cr=f,bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?Kg:Yg,Ds=!1,f=a(o,h),Ds=!1,Aa&&(f=fg(i,a,o,h)),hg(e),f}function hg(e){F.H=Xu;var i=Yt!==null&&Yt.next!==null;if(cr=0,ye=Yt=bt=null,qu=!1,Ko=0,Sa=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&ku(e)&&(Ve=!0))}function fg(e,i,a,o){bt=e;var h=0;do{if(Aa&&(Sa=null),Ko=0,Aa=!1,25<=h)throw Error(s(301));if(h+=1,ye=Yt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=RA,f=i(a,o)}while(Aa);return f}function EA(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?Yo(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(bt.flags|=1024),i}function Sf(){var e=Hu!==0;return Hu=0,e}function wf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function bf(e){if(qu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}qu=!1}cr=0,ye=Yt=bt=null,Aa=!1,Ko=Hu=0,Sa=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?bt.memoizedState=ye=e:ye=ye.next=e,ye}function _e(){if(Yt===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=ye===null?bt.memoizedState:ye.next;if(i!==null)ye=i,Yt=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},ye===null?bt.memoizedState=ye=e:ye=ye.next=e}return ye}function Rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(e){var i=Ko;return Ko+=1,Sa===null&&(Sa=[]),e=sg(Sa,e,i),i=bt,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Kg:Yg),e}function Fu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yo(e);if(e.$$typeof===rt)return Qe(e)}throw Error(s(438,String(e)))}function If(e){var i=null,a=bt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Rf(),bt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function Pi(e,i){return typeof i=="function"?i(e):i}function Gu(e){var i=_e();return Cf(i,Yt,e)}function Cf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,w=null,j=i,G=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(kt&X)===X:(cr&X)===X){var z=j.revertLane;if(z===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===va&&(G=!0);else if((cr&z)===z){j=j.next,z===va&&(G=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=X,v=f):w=w.next=X,bt.lanes|=z,yr|=z;X=j.action,Ds&&a(f,X),f=j.hasEagerState?j.eagerState:a(f,X)}else z={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=z,v=f):w=w.next=z,bt.lanes|=X,yr|=X;j=j.next}while(j!==null&&j!==i);if(w===null?v=f:w.next=E,!hn(f,e.memoizedState)&&(Ve=!0,G&&(a=Ea,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=w,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Nf(e){var i=_e(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);hn(f,i.memoizedState)||(Ve=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function dg(e,i,a){var o=bt,h=_e(),f=zt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!hn((Yt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=gg.bind(null,o,h,e);if(Xo(2048,8,E,[e]),h.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(o.flags|=2048,wa(9,Qu(),pg.bind(null,o,h,a,i),null),Jt===null)throw Error(s(349));f||(cr&124)!==0||mg(o,i,a)}return a}function mg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=bt.updateQueue,i===null?(i=Rf(),bt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function pg(e,i,a,o){i.value=a,i.getSnapshot=o,yg(i)&&_g(e)}function gg(e,i,a){return a(function(){yg(i)&&_g(e)})}function yg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!hn(e,a)}catch{return!0}}function _g(e){var i=pa(e,2);i!==null&&yn(i,e,2)}function Df(e){var i=rn();if(typeof e=="function"){var a=e;if(e=a(),Ds){un(!0);try{a()}finally{un(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},i}function vg(e,i,a,o){return e.baseState=a,Cf(e,Yt,typeof o=="function"?o:Pi)}function TA(e,i,a,o,h){if(Yu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};F.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Eg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Eg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=F.T,v={};F.T=v;try{var E=a(h,o),w=F.S;w!==null&&w(v,E),Tg(e,i,E)}catch(j){Of(e,i,j)}finally{F.T=f}}else try{f=a(h,o),Tg(e,i,f)}catch(j){Of(e,i,j)}}function Tg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ag(e,i,o)},function(o){return Of(e,i,o)}):Ag(e,i,a)}function Ag(e,i,a){i.status="fulfilled",i.value=a,Sg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Eg(e,a)))}function Of(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Sg(i),i=i.next;while(i!==o)}e.action=null}function Sg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function wg(e,i){return i}function bg(e,i){if(zt){var a=Jt.formState;if(a!==null){t:{var o=bt;if(zt){if(le){e:{for(var h=le,f=ri;h.nodeType!==8;){if(!f){h=null;break e}if(h=Bn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=Bn(h.nextSibling),o=h.data==="F!";break t}}Rs(o)}o=!1}o&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:i},a.queue=o,a=Fg.bind(null,bt,o),o.dispatch=a,o=Df(!1),f=kf.bind(null,bt,!1,o.queue),o=rn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=TA.bind(null,bt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function Rg(e){var i=_e();return Ig(i,Yt,e)}function Ig(e,i,a){if(i=Cf(e,i,wg)[0],e=Gu(Pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Yo(i)}catch(v){throw v===qo?ju:v}else o=i;i=_e();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(bt.flags|=2048,wa(9,Qu(),AA.bind(null,h,a),null)),[o,f,e]}function AA(e,i){e.action=i}function Cg(e){var i=_e(),a=Yt;if(a!==null)return Ig(i,a,e);_e(),i=i.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function wa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=bt.updateQueue,i===null&&(i=Rf(),bt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Qu(){return{destroy:void 0,resource:void 0}}function Ng(){return _e().memoizedState}function Ku(e,i,a,o){var h=rn();o=o===void 0?null:o,bt.flags|=e,h.memoizedState=wa(1|i,Qu(),a,o)}function Xo(e,i,a,o){var h=_e();o=o===void 0?null:o;var f=h.memoizedState.inst;Yt!==null&&o!==null&&Tf(o,Yt.memoizedState.deps)?h.memoizedState=wa(i,f,a,o):(bt.flags|=e,h.memoizedState=wa(1|i,f,a,o))}function Dg(e,i){Ku(8390656,8,e,i)}function Og(e,i){Xo(2048,8,e,i)}function Vg(e,i){return Xo(4,2,e,i)}function xg(e,i){return Xo(4,4,e,i)}function Mg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Pg(e,i,a){a=a!=null?a.concat([e]):null,Xo(4,4,Mg.bind(null,i,e),a)}function Vf(){}function kg(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Tf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Lg(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Tf(i,o[1]))return o[0];if(o=e(),Ds){un(!0);try{e()}finally{un(!1)}}return a.memoizedState=[o,i],o}function xf(e,i,a){return a===void 0||(cr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=zy(),bt.lanes|=e,yr|=e,a)}function Ug(e,i,a,o){return hn(a,i)?a:Ta.current!==null?(e=xf(e,a,o),hn(e,i)||(Ve=!0),e):(cr&42)===0?(Ve=!0,e.memoizedState=a):(e=zy(),bt.lanes|=e,yr|=e,i)}function jg(e,i,a,o,h){var f=st.p;st.p=f!==0&&8>f?f:8;var v=F.T,E={};F.T=E,kf(e,!1,i,a);try{var w=h(),j=F.S;if(j!==null&&j(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var G=_A(w,o);$o(e,i,G,gn(e))}else $o(e,i,o,gn(e))}catch(X){$o(e,i,{then:function(){},status:"rejected",reason:X},gn())}finally{st.p=f,F.T=v}}function SA(){}function Mf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=zg(e).queue;jg(e,h,i,ht,a===null?SA:function(){return Bg(e),a(o)})}function zg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:ht},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Bg(e){var i=zg(e).next.queue;$o(e,i,{},gn())}function Pf(){return Qe(ml)}function qg(){return _e().memoizedState}function Hg(){return _e().memoizedState}function wA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gn();e=lr(a);var o=ur(i,e,a);o!==null&&(yn(o,i,a),Fo(o,i,a)),i={cache:hf()},e.payload=i;return}i=i.return}}function bA(e,i,a){var o=gn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Yu(e)?Gg(i,a):(a=tf(e,i,a,o),a!==null&&(yn(a,e,o),Qg(a,i,o)))}function Fg(e,i,a){var o=gn();$o(e,i,a,o)}function $o(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yu(e))Gg(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,hn(E,v))return Ou(e,i,h,0),Jt===null&&Du(),!1}catch{}finally{}if(a=tf(e,i,h,o),a!==null)return yn(a,e,o),Qg(a,i,o),!0}return!1}function kf(e,i,a,o){if(o={lane:2,revertLane:md(),action:o,hasEagerState:!1,eagerState:null,next:null},Yu(e)){if(i)throw Error(s(479))}else i=tf(e,a,o,2),i!==null&&yn(i,e,2)}function Yu(e){var i=e.alternate;return e===bt||i!==null&&i===bt}function Gg(e,i){Aa=qu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Qg(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,_o(e,a)}}var Xu={readContext:Qe,use:Fu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Kg={readContext:Qe,use:Fu,useCallback:function(e,i){return rn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:Dg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Ku(4194308,4,Mg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ku(4194308,4,e,i)},useInsertionEffect:function(e,i){Ku(4,2,e,i)},useMemo:function(e,i){var a=rn();i=i===void 0?null:i;var o=e();if(Ds){un(!0);try{e()}finally{un(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=rn();if(a!==void 0){var h=a(i);if(Ds){un(!0);try{a(i)}finally{un(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=bA.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var i=rn();return e={current:e},i.memoizedState=e},useState:function(e){e=Df(e);var i=e.queue,a=Fg.bind(null,bt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Vf,useDeferredValue:function(e,i){var a=rn();return xf(a,e,i)},useTransition:function(){var e=Df(!1);return e=jg.bind(null,bt,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=bt,h=rn();if(zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Jt===null)throw Error(s(349));(kt&124)!==0||mg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Dg(gg.bind(null,o,f,e),[e]),o.flags|=2048,wa(9,Qu(),pg.bind(null,o,f,a,i),null),a},useId:function(){var e=rn(),i=Jt.identifierPrefix;if(zt){var a=Vi,o=Oi;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Hu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=vA++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Pf,useFormState:bg,useActionState:bg,useOptimistic:function(e){var i=rn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=kf.bind(null,bt,!0,a),a.dispatch=i,[e,i]},useMemoCache:If,useCacheRefresh:function(){return rn().memoizedState=wA.bind(null,bt)}},Yg={readContext:Qe,use:Fu,useCallback:kg,useContext:Qe,useEffect:Og,useImperativeHandle:Pg,useInsertionEffect:Vg,useLayoutEffect:xg,useMemo:Lg,useReducer:Gu,useRef:Ng,useState:function(){return Gu(Pi)},useDebugValue:Vf,useDeferredValue:function(e,i){var a=_e();return Ug(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Gu(Pi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Yo(e),i]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Pf,useFormState:Rg,useActionState:Rg,useOptimistic:function(e,i){var a=_e();return vg(a,Yt,e,i)},useMemoCache:If,useCacheRefresh:Hg},RA={readContext:Qe,use:Fu,useCallback:kg,useContext:Qe,useEffect:Og,useImperativeHandle:Pg,useInsertionEffect:Vg,useLayoutEffect:xg,useMemo:Lg,useReducer:Nf,useRef:Ng,useState:function(){return Nf(Pi)},useDebugValue:Vf,useDeferredValue:function(e,i){var a=_e();return Yt===null?xf(a,e,i):Ug(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Nf(Pi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Yo(e),i]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Pf,useFormState:Cg,useActionState:Cg,useOptimistic:function(e,i){var a=_e();return Yt!==null?vg(a,Yt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:If,useCacheRefresh:Hg},ba=null,Zo=0;function $u(e){var i=Zo;return Zo+=1,ba===null&&(ba=[]),sg(ba,e,i)}function Wo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Zu(e,i){throw i.$$typeof===R?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Xg(e){var i=e._init;return i(e._payload)}function $g(e){function i(P,D){if(e){var U=P.deletions;U===null?(P.deletions=[D],P.flags|=16):U.push(D)}}function a(P,D){if(!e)return null;for(;D!==null;)i(P,D),D=D.sibling;return null}function o(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function h(P,D){return P=Di(P,D),P.index=0,P.sibling=null,P}function f(P,D,U){return P.index=U,e?(U=P.alternate,U!==null?(U=U.index,U<D?(P.flags|=67108866,D):U):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,D,U,Q){return D===null||D.tag!==6?(D=nf(U,P.mode,Q),D.return=P,D):(D=h(D,U),D.return=P,D)}function w(P,D,U,Q){var ut=U.type;return ut===Y?G(P,D,U.props.children,Q,U.key):D!==null&&(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Xg(ut)===D.type)?(D=h(D,U.props),Wo(D,U),D.return=P,D):(D=xu(U.type,U.key,U.props,null,P.mode,Q),Wo(D,U),D.return=P,D)}function j(P,D,U,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=rf(U,P.mode,Q),D.return=P,D):(D=h(D,U.children||[]),D.return=P,D)}function G(P,D,U,Q,ut){return D===null||D.tag!==7?(D=As(U,P.mode,Q,ut),D.return=P,D):(D=h(D,U),D.return=P,D)}function X(P,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=nf(""+D,P.mode,U),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return U=xu(D.type,D.key,D.props,null,P.mode,U),Wo(U,D),U.return=P,U;case B:return D=rf(D,P.mode,U),D.return=P,D;case S:var Q=D._init;return D=Q(D._payload),X(P,D,U)}if(ae(D)||k(D))return D=As(D,P.mode,U,null),D.return=P,D;if(typeof D.then=="function")return X(P,$u(D),U);if(D.$$typeof===rt)return X(P,Lu(P,D),U);Zu(P,D)}return null}function z(P,D,U,Q){var ut=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ut!==null?null:E(P,D,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===ut?w(P,D,U,Q):null;case B:return U.key===ut?j(P,D,U,Q):null;case S:return ut=U._init,U=ut(U._payload),z(P,D,U,Q)}if(ae(U)||k(U))return ut!==null?null:G(P,D,U,Q,null);if(typeof U.then=="function")return z(P,D,$u(U),Q);if(U.$$typeof===rt)return z(P,D,Lu(P,U),Q);Zu(P,U)}return null}function q(P,D,U,Q,ut){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(U)||null,E(D,P,""+Q,ut);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return P=P.get(Q.key===null?U:Q.key)||null,w(D,P,Q,ut);case B:return P=P.get(Q.key===null?U:Q.key)||null,j(D,P,Q,ut);case S:var Ct=Q._init;return Q=Ct(Q._payload),q(P,D,U,Q,ut)}if(ae(Q)||k(Q))return P=P.get(U)||null,G(D,P,Q,ut,null);if(typeof Q.then=="function")return q(P,D,U,$u(Q),ut);if(Q.$$typeof===rt)return q(P,D,U,Lu(D,Q),ut);Zu(D,Q)}return null}function vt(P,D,U,Q){for(var ut=null,Ct=null,ct=D,gt=D=0,Me=null;ct!==null&&gt<U.length;gt++){ct.index>gt?(Me=ct,ct=null):Me=ct.sibling;var Ut=z(P,ct,U[gt],Q);if(Ut===null){ct===null&&(ct=Me);break}e&&ct&&Ut.alternate===null&&i(P,ct),D=f(Ut,D,gt),Ct===null?ut=Ut:Ct.sibling=Ut,Ct=Ut,ct=Me}if(gt===U.length)return a(P,ct),zt&&ws(P,gt),ut;if(ct===null){for(;gt<U.length;gt++)ct=X(P,U[gt],Q),ct!==null&&(D=f(ct,D,gt),Ct===null?ut=ct:Ct.sibling=ct,Ct=ct);return zt&&ws(P,gt),ut}for(ct=o(ct);gt<U.length;gt++)Me=q(ct,P,gt,U[gt],Q),Me!==null&&(e&&Me.alternate!==null&&ct.delete(Me.key===null?gt:Me.key),D=f(Me,D,gt),Ct===null?ut=Me:Ct.sibling=Me,Ct=Me);return e&&ct.forEach(function(Rr){return i(P,Rr)}),zt&&ws(P,gt),ut}function pt(P,D,U,Q){if(U==null)throw Error(s(151));for(var ut=null,Ct=null,ct=D,gt=D=0,Me=null,Ut=U.next();ct!==null&&!Ut.done;gt++,Ut=U.next()){ct.index>gt?(Me=ct,ct=null):Me=ct.sibling;var Rr=z(P,ct,Ut.value,Q);if(Rr===null){ct===null&&(ct=Me);break}e&&ct&&Rr.alternate===null&&i(P,ct),D=f(Rr,D,gt),Ct===null?ut=Rr:Ct.sibling=Rr,Ct=Rr,ct=Me}if(Ut.done)return a(P,ct),zt&&ws(P,gt),ut;if(ct===null){for(;!Ut.done;gt++,Ut=U.next())Ut=X(P,Ut.value,Q),Ut!==null&&(D=f(Ut,D,gt),Ct===null?ut=Ut:Ct.sibling=Ut,Ct=Ut);return zt&&ws(P,gt),ut}for(ct=o(ct);!Ut.done;gt++,Ut=U.next())Ut=q(ct,P,gt,Ut.value,Q),Ut!==null&&(e&&Ut.alternate!==null&&ct.delete(Ut.key===null?gt:Ut.key),D=f(Ut,D,gt),Ct===null?ut=Ut:Ct.sibling=Ut,Ct=Ut);return e&&ct.forEach(function(IS){return i(P,IS)}),zt&&ws(P,gt),ut}function $t(P,D,U,Q){if(typeof U=="object"&&U!==null&&U.type===Y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:t:{for(var ut=U.key;D!==null;){if(D.key===ut){if(ut=U.type,ut===Y){if(D.tag===7){a(P,D.sibling),Q=h(D,U.props.children),Q.return=P,P=Q;break t}}else if(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Xg(ut)===D.type){a(P,D.sibling),Q=h(D,U.props),Wo(Q,U),Q.return=P,P=Q;break t}a(P,D);break}else i(P,D);D=D.sibling}U.type===Y?(Q=As(U.props.children,P.mode,Q,U.key),Q.return=P,P=Q):(Q=xu(U.type,U.key,U.props,null,P.mode,Q),Wo(Q,U),Q.return=P,P=Q)}return v(P);case B:t:{for(ut=U.key;D!==null;){if(D.key===ut)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(P,D.sibling),Q=h(D,U.children||[]),Q.return=P,P=Q;break t}else{a(P,D);break}else i(P,D);D=D.sibling}Q=rf(U,P.mode,Q),Q.return=P,P=Q}return v(P);case S:return ut=U._init,U=ut(U._payload),$t(P,D,U,Q)}if(ae(U))return vt(P,D,U,Q);if(k(U)){if(ut=k(U),typeof ut!="function")throw Error(s(150));return U=ut.call(U),pt(P,D,U,Q)}if(typeof U.then=="function")return $t(P,D,$u(U),Q);if(U.$$typeof===rt)return $t(P,D,Lu(P,U),Q);Zu(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(P,D.sibling),Q=h(D,U),Q.return=P,P=Q):(a(P,D),Q=nf(U,P.mode,Q),Q.return=P,P=Q),v(P)):a(P,D)}return function(P,D,U,Q){try{Zo=0;var ut=$t(P,D,U,Q);return ba=null,ut}catch(ct){if(ct===qo||ct===ju)throw ct;var Ct=fn(29,ct,null,P.mode);return Ct.lanes=Q,Ct.return=P,Ct}finally{}}}var Ra=$g(!0),Zg=$g(!1),Dn=W(null),si=null;function hr(e){var i=e.alternate;tt(Ie,Ie.current&1),tt(Dn,e),si===null&&(i===null||Ta.current!==null||i.memoizedState!==null)&&(si=e)}function Wg(e){if(e.tag===22){if(tt(Ie,Ie.current),tt(Dn,e),si===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(si=e)}}else fr()}function fr(){tt(Ie,Ie.current),tt(Dn,Dn.current)}function ki(e){at(Dn),si===e&&(si=null),at(Ie)}var Ie=W(0);function Wu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Rd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Lf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Uf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=gn(),h=lr(o);h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(yn(i,e,o),Fo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=gn(),h=lr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(yn(i,e,o),Fo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gn(),o=lr(a);o.tag=2,i!=null&&(o.callback=i),i=ur(e,o,a),i!==null&&(yn(i,e,a),Fo(i,e,a))}};function Jg(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Mo(a,o)||!Mo(h,f):!0}function ty(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Uf.enqueueReplaceState(i,i.state,null)}function Os(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Ju=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function ey(e){Ju(e)}function ny(e){console.error(e)}function iy(e){Ju(e)}function tc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ry(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jf(e,i,a){return a=lr(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(e,i)},a}function sy(e){return e=lr(e),e.tag=3,e}function ay(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){ry(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ry(i,a,o),typeof h!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function IA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&jo(i,a,h,!0),a=Dn.current,a!==null){switch(a.tag){case 13:return si===null?ud():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===mf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),hd(e,o,h)),!1;case 22:return a.flags|=65536,o===mf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),hd(e,o,h)),!1}throw Error(s(435,a.tag))}return hd(e,o,h),ud(),!1}if(zt)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==of&&(e=Error(s(422),{cause:o}),Uo(Rn(e,a)))):(o!==of&&(i=Error(s(423),{cause:o}),Uo(Rn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Rn(o,a),h=jf(e.stateNode,o,h),yf(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=Rn(f,a),sl===null?sl=[f]:sl.push(f),ue!==4&&(ue=2),i===null)return!0;o=Rn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=jf(a.stateNode,o,e),yf(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(_r===null||!_r.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=sy(h),ay(h,e,a,o),yf(a,h),!1}a=a.return}while(a!==null);return!1}var oy=Error(s(461)),Ve=!1;function je(e,i,a,o){i.child=e===null?Zg(i,null,a,o):Ra(i,e.child,a,o)}function ly(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Cs(i),o=Af(e,i,a,v,f,h),E=Sf(),e!==null&&!Ve?(wf(e,i,h),Li(e,i,h)):(zt&&E&&sf(i),i.flags|=1,je(e,i,o,h),i.child)}function uy(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!ef(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,cy(e,i,f,o,h)):(e=xu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!Kf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Mo,a(v,o)&&e.ref===i.ref)return Li(e,i,h)}return i.flags|=1,e=Di(f,o),e.ref=i.ref,e.return=i,i.child=e}function cy(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Mo(f,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=f,Kf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Li(e,i,h)}return zf(e,i,a,o,h)}function hy(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return fy(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Uu(i,f!==null?f.cachePool:null),f!==null?cg(i,f):vf(),Wg(i);else return i.lanes=i.childLanes=536870912,fy(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Uu(i,f.cachePool),cg(i,f),fr(),i.memoizedState=null):(e!==null&&Uu(i,null),vf(),fr());return je(e,i,h,a),i.child}function fy(e,i,a,o){var h=df();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Uu(i,null),vf(),Wg(i),e!==null&&jo(e,i,o,!0),null}function ec(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function zf(e,i,a,o,h){return Cs(i),a=Af(e,i,a,o,void 0,h),o=Sf(),e!==null&&!Ve?(wf(e,i,h),Li(e,i,h)):(zt&&o&&sf(i),i.flags|=1,je(e,i,a,h),i.child)}function dy(e,i,a,o,h,f){return Cs(i),i.updateQueue=null,a=fg(i,o,a,h),hg(e),o=Sf(),e!==null&&!Ve?(wf(e,i,f),Li(e,i,f)):(zt&&o&&sf(i),i.flags|=1,je(e,i,a,f),i.child)}function my(e,i,a,o,h){if(Cs(i),i.stateNode===null){var f=ga,v=a.contextType;typeof v=="object"&&v!==null&&(f=Qe(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Uf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},pf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Qe(v):ga,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Lf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Uf.enqueueReplaceState(f,f.state,null),Qo(i,o,f,h),Go(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,w=Os(a,E);f.props=w;var j=f.context,G=a.contextType;v=ga,typeof G=="object"&&G!==null&&(v=Qe(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==v)&&ty(i,f,o,v),or=!1;var z=i.memoizedState;f.state=z,Qo(i,o,f,h),Go(),j=i.memoizedState,E||z!==j||or?(typeof X=="function"&&(Lf(i,a,X,o),j=i.memoizedState),(w=or||Jg(i,a,w,o,z,j,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,gf(e,i),v=i.memoizedProps,G=Os(a,v),f.props=G,X=i.pendingProps,z=f.context,j=a.contextType,w=ga,typeof j=="object"&&j!==null&&(w=Qe(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==X||z!==w)&&ty(i,f,o,w),or=!1,z=i.memoizedState,f.state=z,Qo(i,o,f,h),Go();var q=i.memoizedState;v!==X||z!==q||or||e!==null&&e.dependencies!==null&&ku(e.dependencies)?(typeof E=="function"&&(Lf(i,a,E,o),q=i.memoizedState),(G=or||Jg(i,a,G,o,z,q,w)||e!==null&&e.dependencies!==null&&ku(e.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,w)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),f.props=o,f.state=q,f.context=w,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,ec(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=Ra(i,e.child,null,h),i.child=Ra(i,null,a,h)):je(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Li(e,i,h),e}function py(e,i,a,o){return Lo(),i.flags|=256,je(e,i,a,o),i.child}var Bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(e){return{baseLanes:e,cachePool:ng()}}function Hf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=On),e}function gy(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(zt){if(h?hr(i):fr(),zt){var E=le,w;if(w=E){t:{for(w=E,E=ri;w.nodeType!==8;){if(!E){E=null;break t}if(w=Bn(w.nextSibling),w===null){E=null;break t}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ss!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},w=fn(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,nn=i,le=null,w=!0):w=!1}w||Rs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Rd(E)?i.lanes=32:i.lanes=536870912,null;ki(i)}return E=o.children,o=o.fallback,h?(fr(),h=i.mode,E=nc({mode:"hidden",children:E},h),o=As(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=qf(a),h.childLanes=Hf(e,v,a),i.memoizedState=Bf,o):(hr(i),Ff(i,E))}if(w=e.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)i.flags&256?(hr(i),i.flags&=-257,i=Gf(e,i,a)):i.memoizedState!==null?(fr(),i.child=e.child,i.flags|=128,i=null):(fr(),h=o.fallback,E=i.mode,o=nc({mode:"visible",children:o.children},E),h=As(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ra(i,e.child,null,a),o=i.child,o.memoizedState=qf(a),o.childLanes=Hf(e,v,a),i.memoizedState=Bf,i=h);else if(hr(i),Rd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),i=Gf(e,i,a)}else if(Ve||jo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Jt,v!==null&&(o=a&-a,o=(o&42)!==0?1:Ji(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,pa(e,o),yn(v,e,o),oy;E.data==="$?"||ud(),i=Gf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=w.treeContext,le=Bn(E.nextSibling),nn=i,zt=!0,bs=null,ri=!1,e!==null&&(Cn[Nn++]=Oi,Cn[Nn++]=Vi,Cn[Nn++]=Ss,Oi=e.id,Vi=e.overflow,Ss=i),i=Ff(i,o.children),i.flags|=4096);return i}return h?(fr(),h=o.fallback,E=i.mode,w=e.child,j=w.sibling,o=Di(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,j!==null?h=Di(j,h):(h=As(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=qf(a):(w=E.cachePool,w!==null?(j=Re._currentValue,w=w.parent!==j?{parent:j,pool:j}:w):w=ng(),E={baseLanes:E.baseLanes|a,cachePool:w}),h.memoizedState=E,h.childLanes=Hf(e,v,a),i.memoizedState=Bf,o):(hr(i),a=e.child,e=a.sibling,a=Di(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Ff(e,i){return i=nc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function nc(e,i){return e=fn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gf(e,i,a){return Ra(i,e.child,null,a),e=Ff(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function yy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),uf(e.return,i,a)}function Qf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function _y(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(je(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yy(e,a,i);else if(e.tag===19)yy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(tt(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Wu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Qf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Wu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Qf(i,!0,a,null,f);break;case"together":Qf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Li(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),yr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(jo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Di(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Di(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Kf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ku(e)))}function CA(e,i,a){switch(i.tag){case 3:Wt(i,i.stateNode.containerInfo),ar(i,Re,e.memoizedState.cache),Lo();break;case 27:case 5:Wi(i);break;case 4:Wt(i,i.stateNode.containerInfo);break;case 10:ar(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(hr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?gy(e,i,a):(hr(i),e=Li(e,i,a),e!==null?e.sibling:null);hr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(jo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return _y(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),tt(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,hy(e,i,a);case 24:ar(i,Re,e.memoizedState.cache)}return Li(e,i,a)}function vy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Kf(e,a)&&(i.flags&128)===0)return Ve=!1,CA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,zt&&(i.flags&1048576)!==0&&Xp(i,Pu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")ef(o)?(e=Os(o,e),i.tag=1,i=my(null,i,o,e,a)):(i.tag=0,i=zf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===At){i.tag=11,i=ly(null,i,o,e,a);break t}else if(h===V){i.tag=14,i=uy(null,i,o,e,a);break t}}throw i=ke(o)||o,Error(s(306,i,""))}}return i;case 0:return zf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Os(o,i.pendingProps),my(e,i,o,h,a);case 3:t:{if(Wt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,gf(e,i),Qo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ar(i,Re,o),o!==f.cache&&cf(i,[Re],a,!0),Go(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=py(e,i,o,a);break t}else if(o!==h){h=Rn(Error(s(424)),i),Uo(h),i=py(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=Bn(e.firstChild),nn=i,zt=!0,bs=null,ri=!0,a=Zg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=Li(e,i,a);break t}je(e,i,o,a)}i=i.child}return i;case 26:return ec(e,i),e===null?(a=S_(i.type,null,i.pendingProps,null))?i.memoizedState=a:zt||(a=i.type,e=i.pendingProps,o=gc(Et.current).createElement(a),o[Se]=i,o[pe]=e,Be(o,a,e),ce(o),i.stateNode=o):i.memoizedState=S_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Wi(i),e===null&&zt&&(o=i.stateNode=E_(i.type,i.pendingProps,Et.current),nn=i,ri=!0,h=le,Tr(i.type)?(Id=h,le=Bn(o.firstChild)):le=h),je(e,i,i.pendingProps.children,a),ec(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&zt&&((h=o=le)&&(o=nS(o,i.type,i.pendingProps,ri),o!==null?(i.stateNode=o,nn=i,le=Bn(o.firstChild),ri=!1,h=!0):h=!1),h||Rs(i)),Wi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Sd(h,f)?o=null:v!==null&&Sd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Af(e,i,EA,null,null,a),ml._currentValue=h),ec(e,i),je(e,i,o,a),i.child;case 6:return e===null&&zt&&((e=a=le)&&(a=iS(a,i.pendingProps,ri),a!==null?(i.stateNode=a,nn=i,le=null,e=!0):e=!1),e||Rs(i)),null;case 13:return gy(e,i,a);case 4:return Wt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ra(i,null,o,a):je(e,i,o,a),i.child;case 11:return ly(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ar(i,i.type,o.value),je(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Cs(i),h=Qe(h),o=o(h),i.flags|=1,je(e,i,o,a),i.child;case 14:return uy(e,i,i.type,i.pendingProps,a);case 15:return cy(e,i,i.type,i.pendingProps,a);case 19:return _y(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=nc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Di(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return hy(e,i,a);case 24:return Cs(i),o=Qe(Re),e===null?(h=df(),h===null&&(h=Jt,f=hf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},pf(i),ar(i,Re,h)):((e.lanes&a)!==0&&(gf(e,i),Qo(i,null,null,a),Go()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ar(i,Re,o)):(o=f.cache,ar(i,Re,o),o!==h.cache&&cf(i,[Re],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ui(e){e.flags|=4}function Ey(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!C_(i)){if(i=Dn.current,i!==null&&((kt&4194048)===kt?si!==null:(kt&62914560)!==kt&&(kt&536870912)===0||i!==si))throw Ho=mf,ig;e.flags|=8192}}function ic(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?go():536870912,e.lanes|=i,Da|=i)}function Jo(e,i){if(!zt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function NA(e,i,a){var o=i.pendingProps;switch(af(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Mi(Re),Qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ko(i)?Ui(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Wp())),re(i),null;case 26:return a=i.memoizedState,e===null?(Ui(i),a!==null?(re(i),Ey(i,a)):(re(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Ui(i),re(i),Ey(i,a)):(re(i),i.flags&=-16777217):(e.memoizedProps!==o&&Ui(i),re(i),i.flags&=-16777217),null;case 27:yi(i),a=Et.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=dt.current,ko(i)?$p(i):(e=E_(h,o,a),i.stateNode=e,Ui(i))}return re(i),null;case 5:if(yi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(e=dt.current,ko(i))$p(i);else{switch(h=gc(Et.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[pe]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Be(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ui(i)}}return re(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=Et.current,ko(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=nn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||d_(e.nodeValue,a)),e||Rs(i)}else e=gc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ko(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=Wp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(ki(i),i):(ki(i),null)}if(ki(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),ic(i,i.updateQueue),re(i),null;case 4:return Qn(),e===null&&_d(i.stateNode.containerInfo),re(i),null;case 10:return Mi(i.type),re(i),null;case 19:if(at(Ie),h=i.memoizedState,h===null)return re(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Jo(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Wu(e),f!==null){for(i.flags|=128,Jo(h,!1),e=f.updateQueue,i.updateQueue=e,ic(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Yp(a,e),a=a.sibling;return tt(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&En()>ac&&(i.flags|=128,o=!0,Jo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Wu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,ic(i,e),Jo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!zt)return re(i),null}else 2*En()-h.renderingStartTime>ac&&a!==536870912&&(i.flags|=128,o=!0,Jo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=En(),i.sibling=null,e=Ie.current,tt(Ie,o?e&1|2:e&1),i):(re(i),null);case 22:case 23:return ki(i),Ef(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&ic(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&at(Ns),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Mi(Re),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function DA(e,i){switch(af(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Mi(Re),Qn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return yi(i),null;case 13:if(ki(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Lo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return at(Ie),null;case 4:return Qn(),null;case 10:return Mi(i.type),null;case 22:case 23:return ki(i),Ef(),e!==null&&at(Ns),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Mi(Re),null;case 25:return null;default:return null}}function Ty(e,i){switch(af(i),i.tag){case 3:Mi(Re),Qn();break;case 26:case 27:case 5:yi(i);break;case 4:Qn();break;case 13:ki(i);break;case 19:at(Ie);break;case 10:Mi(i.type);break;case 22:case 23:ki(i),Ef(),e!==null&&at(Ns);break;case 24:Mi(Re)}}function tl(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Zt(i,i.return,E)}}function dr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var w=a,j=E;try{j()}catch(G){Zt(h,w,G)}}}o=o.next}while(o!==f)}}catch(G){Zt(i,i.return,G)}}function Ay(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{ug(i,a)}catch(o){Zt(e,e.return,o)}}}function Sy(e,i,a){a.props=Os(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(e,i,o)}}function el(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Zt(e,i,h)}}function ai(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Zt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(e,i,h)}else a.current=null}function wy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Zt(e,e.return,h)}}function Yf(e,i,a){try{var o=e.stateNode;ZA(o,e.type,a,i),o[pe]=i}catch(h){Zt(e,e.return,h)}}function by(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Tr(e.type)||e.tag===4}function Xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||by(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Tr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $f(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=pc));else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for($f(e,i,a),e=e.sibling;e!==null;)$f(e,i,a),e=e.sibling}function rc(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(rc(e,i,a),e=e.sibling;e!==null;)rc(e,i,a),e=e.sibling}function Ry(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Be(i,o,a),i[Se]=e,i[pe]=a}catch(f){Zt(e,e.return,f)}}var ji=!1,fe=!1,Zf=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,xe=null;function OA(e,i){if(e=e.containerInfo,Td=Ac,e=Up(e),Yh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,w=-1,j=0,G=0,X=e,z=null;e:for(;;){for(var q;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==f||o!==0&&X.nodeType!==3||(w=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(q=X.firstChild)!==null;)z=X,X=q;for(;;){if(X===e)break e;if(z===a&&++j===h&&(E=v),z===f&&++G===o&&(w=v),(q=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=q}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ad={focusedElem:e,selectionRange:a},Ac=!1,xe=i;xe!==null;)if(i=xe,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,xe=e;else for(;xe!==null;){switch(i=xe,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var vt=Os(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(vt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Zt(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)bd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,xe=e;break}xe=i.return}}function Cy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:mr(e,a),o&4&&tl(5,a);break;case 1:if(mr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Zt(a,a.return,v)}else{var h=Os(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Zt(a,a.return,v)}}o&64&&Ay(a),o&512&&el(a,a.return);break;case 3:if(mr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ug(e,i)}catch(v){Zt(a,a.return,v)}}break;case 27:i===null&&o&4&&Ry(a);case 26:case 5:mr(e,a),i===null&&o&4&&wy(a),o&512&&el(a,a.return);break;case 12:mr(e,a);break;case 13:mr(e,a),o&4&&Oy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=zA.bind(null,a),rS(e,a))));break;case 22:if(o=a.memoizedState!==null||ji,!o){i=i!==null&&i.memoizedState!==null||fe,h=ji;var f=fe;ji=o,(fe=i)&&!f?pr(e,a,(a.subtreeFlags&8772)!==0):mr(e,a),ji=h,fe=f}break;case 30:break;default:mr(e,a)}}function Ny(e){var i=e.alternate;i!==null&&(e.alternate=null,Ny(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&nr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,sn=!1;function zi(e,i,a){for(a=a.child;a!==null;)Dy(e,i,a),a=a.sibling}function Dy(e,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||ai(a,i),zi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ai(a,i);var o=ie,h=sn;Tr(a.type)&&(ie=a.stateNode,sn=!1),zi(e,i,a),cl(a.stateNode),ie=o,sn=h;break;case 5:fe||ai(a,i);case 6:if(o=ie,h=sn,ie=null,zi(e,i,a),ie=o,sn=h,ie!==null)if(sn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(f){Zt(a,i,f)}else try{ie.removeChild(a.stateNode)}catch(f){Zt(a,i,f)}break;case 18:ie!==null&&(sn?(e=ie,__(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),_l(e)):__(ie,a.stateNode));break;case 4:o=ie,h=sn,ie=a.stateNode.containerInfo,sn=!0,zi(e,i,a),ie=o,sn=h;break;case 0:case 11:case 14:case 15:fe||dr(2,a,i),fe||dr(4,a,i),zi(e,i,a);break;case 1:fe||(ai(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Sy(a,i,o)),zi(e,i,a);break;case 21:zi(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,zi(e,i,a),fe=o;break;default:zi(e,i,a)}}function Oy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_l(e)}catch(a){Zt(i,i.return,a)}}function VA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Iy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Iy),i;default:throw Error(s(435,e.tag))}}function Wf(e,i){var a=VA(e);i.forEach(function(o){var h=BA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function dn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Tr(E.type)){ie=E.stateNode,sn=!1;break t}break;case 5:ie=E.stateNode,sn=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,sn=!0;break t}E=E.return}if(ie===null)throw Error(s(160));Dy(f,v,h),ie=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Vy(i,e),i=i.sibling}var zn=null;function Vy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(i,e),mn(e),o&4&&(dr(3,e,e.return),tl(3,e),dr(5,e,e.return));break;case 1:dn(i,e),mn(e),o&512&&(fe||a===null||ai(a,a.return)),o&64&&ji&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=zn;if(dn(i,e),mn(e),o&512&&(fe||a===null||ai(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[as]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Be(f,o,a),f[Se]=e,ce(f),o=f;break t;case"link":var v=R_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;case"meta":if(v=R_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,ce(f),o=f}e.stateNode=o}else I_(h,e.type,e.stateNode);else e.stateNode=b_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?I_(h,e.type,e.stateNode):b_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Yf(e,e.memoizedProps,a.memoizedProps)}break;case 27:dn(i,e),mn(e),o&512&&(fe||a===null||ai(a,a.return)),a!==null&&o&4&&Yf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(dn(i,e),mn(e),o&512&&(fe||a===null||ai(a,a.return)),e.flags&32){h=e.stateNode;try{An(h,"")}catch(q){Zt(e,e.return,q)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Yf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Zf=!0);break;case 6:if(dn(i,e),mn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(q){Zt(e,e.return,q)}}break;case 3:if(vc=null,h=zn,zn=yc(i.containerInfo),dn(i,e),zn=h,mn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{_l(i.containerInfo)}catch(q){Zt(e,e.return,q)}Zf&&(Zf=!1,xy(e));break;case 4:o=zn,zn=yc(e.stateNode.containerInfo),dn(i,e),mn(e),zn=o;break;case 12:dn(i,e),mn(e);break;case 13:dn(i,e),mn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rd=En()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Wf(e,o)));break;case 22:h=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=ji,G=fe;if(ji=j||h,fe=G||w,dn(i,e),fe=G,ji=j,mn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||ji||fe||Vs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(f=w.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){Zt(w,w.return,q)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(q){Zt(w,w.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Wf(e,a))));break;case 19:dn(i,e),mn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Wf(e,o)));break;case 30:break;case 21:break;default:dn(i,e),mn(e)}}function mn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(by(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Xf(e);rc(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(An(v,""),a.flags&=-33);var E=Xf(e);rc(e,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,j=Xf(e);$f(e,j,w);break;default:throw Error(s(161))}}catch(G){Zt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function xy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;xy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function mr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cy(e,i.alternate,i),i=i.sibling}function Vs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:dr(4,i,i.return),Vs(i);break;case 1:ai(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Sy(i,i.return,a),Vs(i);break;case 27:cl(i.stateNode);case 26:case 5:ai(i,i.return),Vs(i);break;case 22:i.memoizedState===null&&Vs(i);break;case 30:Vs(i);break;default:Vs(i)}e=e.sibling}}function pr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:pr(h,f,a),tl(4,f);break;case 1:if(pr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){Zt(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)lg(w[h],E)}catch(j){Zt(o,o.return,j)}}a&&v&64&&Ay(f),el(f,f.return);break;case 27:Ry(f);case 26:case 5:pr(h,f,a),a&&o===null&&v&4&&wy(f),el(f,f.return);break;case 12:pr(h,f,a);break;case 13:pr(h,f,a),a&&v&4&&Oy(h,f);break;case 22:f.memoizedState===null&&pr(h,f,a),el(f,f.return);break;case 30:break;default:pr(h,f,a)}i=i.sibling}}function Jf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function td(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e))}function oi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)My(e,i,a,o),i=i.sibling}function My(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:oi(e,i,a,o),h&2048&&tl(9,i);break;case 1:oi(e,i,a,o);break;case 3:oi(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e)));break;case 12:if(h&2048){oi(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Zt(i,i.return,w)}}else oi(e,i,a,o);break;case 13:oi(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?oi(e,i,a,o):nl(e,i):f._visibility&2?oi(e,i,a,o):(f._visibility|=2,Ia(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Jf(v,i);break;case 24:oi(e,i,a,o),h&2048&&td(i.alternate,i);break;default:oi(e,i,a,o)}}function Ia(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,w=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(f,v,E,w,h),tl(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ia(f,v,E,w,h):nl(f,v):(G._visibility|=2,Ia(f,v,E,w,h)),h&&j&2048&&Jf(v.alternate,v);break;case 24:Ia(f,v,E,w,h),h&&j&2048&&td(v.alternate,v);break;default:Ia(f,v,E,w,h)}i=i.sibling}}function nl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:nl(a,o),h&2048&&Jf(o.alternate,o);break;case 24:nl(a,o),h&2048&&td(o.alternate,o);break;default:nl(a,o)}i=i.sibling}}var il=8192;function Ca(e){if(e.subtreeFlags&il)for(e=e.child;e!==null;)Py(e),e=e.sibling}function Py(e){switch(e.tag){case 26:Ca(e),e.flags&il&&e.memoizedState!==null&&yS(zn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var i=zn;zn=yc(e.stateNode.containerInfo),Ca(e),zn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=il,il=16777216,Ca(e),il=i):Ca(e));break;default:Ca(e)}}function ky(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function rl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];xe=o,Uy(o,e)}ky(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ly(e),e=e.sibling}function Ly(e){switch(e.tag){case 0:case 11:case 15:rl(e),e.flags&2048&&dr(9,e,e.return);break;case 3:rl(e);break;case 12:rl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,sc(e)):rl(e);break;default:rl(e)}}function sc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];xe=o,Uy(o,e)}ky(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:dr(8,i,i.return),sc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,sc(i));break;default:sc(i)}e=e.sibling}}function Uy(e,i){for(;xe!==null;){var a=xe;switch(a.tag){case 0:case 11:case 15:dr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,xe=o;else t:for(a=e;xe!==null;){o=xe;var h=o.sibling,f=o.return;if(Ny(o),o===a){xe=null;break t}if(h!==null){h.return=f,xe=h;break t}xe=f}}}var xA={getCacheForType:function(e){var i=Qe(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},MA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,Nt=null,kt=0,Qt=0,pn=null,gr=!1,Na=!1,ed=!1,Bi=0,ue=0,yr=0,xs=0,nd=0,On=0,Da=0,sl=null,an=null,id=!1,rd=0,ac=1/0,oc=null,_r=null,ze=0,vr=null,Oa=null,Va=0,sd=0,ad=null,jy=null,al=0,od=null;function gn(){if((Gt&2)!==0&&kt!==0)return kt&-kt;if(F.T!==null){var e=va;return e!==0?e:md()}return tr()}function zy(){On===0&&(On=(kt&536870912)===0||zt?po():536870912);var e=Dn.current;return e!==null&&(e.flags|=32),On}function yn(e,i,a){(e===Jt&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(xa(e,0),Er(e,kt,On,!1)),vi(e,a),((Gt&2)===0||e!==Jt)&&(e===Jt&&((Gt&2)===0&&(xs|=a),ue===4&&Er(e,kt,On,!1)),li(e))}function By(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||ss(e,i),h=o?LA(e,i):cd(e,i,!0),f=o;do{if(h===0){Na&&!o&&Er(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!PA(a)){h=cd(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=sl;var w=E.current.memoizedState.isDehydrated;if(w&&(xa(E,v).flags|=256),v=cd(E,v,!1),v!==2){if(ed&&!w){E.errorRecoveryDisabledLanes|=f,xs|=f,h=4;break t}f=an,an=h,f!==null&&(an===null?an=f:an.push.apply(an,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){xa(e,0),Er(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Er(o,i,On,!gr);break t;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=rd+300-En(),10<h)){if(Er(o,i,On,!gr),$s(o,0,!0)!==0)break t;o.timeoutHandle=g_(qy.bind(null,o,a,an,oc,id,i,On,xs,Da,gr,f,2,-0,0),h);break t}qy(o,a,an,oc,id,i,On,xs,Da,gr,f,0,-0,0)}}break}while(!0);li(e)}function qy(e,i,a,o,h,f,v,E,w,j,G,X,z,q){if(e.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(dl={stylesheets:null,count:0,unsuspend:gS},Py(i),X=_S(),X!==null)){e.cancelPendingCommit=X(Xy.bind(null,e,i,f,a,o,h,v,E,w,G,1,z,q)),Er(e,f,v,!j);return}Xy(e,i,f,a,o,h,v,E,w)}function PA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!hn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(e,i,a,o){i&=~nd,i&=~xs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Ge(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Kn(e,a,i)}function lc(){return(Gt&6)===0?(ol(0),!1):!0}function ld(){if(Nt!==null){if(Qt===0)var e=Nt.return;else e=Nt,xi=Is=null,bf(e),ba=null,Zo=0,e=Nt;for(;e!==null;)Ty(e.alternate,e),e=e.return;Nt=null}}function xa(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,JA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ld(),Jt=e,Nt=a=Di(e.current,null),kt=i,Qt=0,pn=null,gr=!1,Na=ss(e,i),ed=!1,Da=On=nd=xs=yr=ue=0,an=sl=null,id=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Ge(o),f=1<<h;i|=e[h],o&=~f}return Bi=i,Du(),a}function Hy(e,i){bt=null,F.H=Xu,i===qo||i===ju?(i=ag(),Qt=3):i===ig?(i=ag(),Qt=4):Qt=i===oy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pn=i,Nt===null&&(ue=1,tc(e,Rn(i,e.current)))}function Fy(){var e=F.H;return F.H=Xu,e===null?Xu:e}function Gy(){var e=F.A;return F.A=xA,e}function ud(){ue=4,gr||(kt&4194048)!==kt&&Dn.current!==null||(Na=!0),(yr&134217727)===0&&(xs&134217727)===0||Jt===null||Er(Jt,kt,On,!1)}function cd(e,i,a){var o=Gt;Gt|=2;var h=Fy(),f=Gy();(Jt!==e||kt!==i)&&(oc=null,xa(e,i)),i=!1;var v=ue;t:do try{if(Qt!==0&&Nt!==null){var E=Nt,w=pn;switch(Qt){case 8:ld(),v=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var j=Qt;if(Qt=0,pn=null,Ma(e,E,w,j),a&&Na){v=0;break t}break;default:j=Qt,Qt=0,pn=null,Ma(e,E,w,j)}}kA(),v=ue;break}catch(G){Hy(e,G)}while(!0);return i&&e.shellSuspendCounter++,xi=Is=null,Gt=o,F.H=h,F.A=f,Nt===null&&(Jt=null,kt=0,Du()),v}function kA(){for(;Nt!==null;)Qy(Nt)}function LA(e,i){var a=Gt;Gt|=2;var o=Fy(),h=Gy();Jt!==e||kt!==i?(oc=null,ac=En()+500,xa(e,i)):Na=ss(e,i);t:do try{if(Qt!==0&&Nt!==null){i=Nt;var f=pn;e:switch(Qt){case 1:Qt=0,pn=null,Ma(e,i,f,1);break;case 2:case 9:if(rg(f)){Qt=0,pn=null,Ky(i);break}i=function(){Qt!==2&&Qt!==9||Jt!==e||(Qt=7),li(e)},f.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:rg(f)?(Qt=0,pn=null,Ky(i)):(Qt=0,pn=null,Ma(e,i,f,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var E=Nt;if(!v||C_(v)){Qt=0,pn=null;var w=E.sibling;if(w!==null)Nt=w;else{var j=E.return;j!==null?(Nt=j,uc(j)):Nt=null}break e}}Qt=0,pn=null,Ma(e,i,f,5);break;case 6:Qt=0,pn=null,Ma(e,i,f,6);break;case 8:ld(),ue=6;break t;default:throw Error(s(462))}}UA();break}catch(G){Hy(e,G)}while(!0);return xi=Is=null,F.H=o,F.A=h,Gt=a,Nt!==null?0:(Jt=null,kt=0,Du(),ue)}function UA(){for(;Nt!==null&&!co();)Qy(Nt)}function Qy(e){var i=vy(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,i===null?uc(e):Nt=i}function Ky(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=dy(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=dy(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:bf(i);default:Ty(a,i),i=Nt=Yp(i,Bi),i=vy(a,i,Bi)}e.memoizedProps=e.pendingProps,i===null?uc(e):Nt=i}function Ma(e,i,a,o){xi=Is=null,bf(i),ba=null,Zo=0;var h=i.return;try{if(IA(e,h,i,a,kt)){ue=1,tc(e,Rn(a,e.current)),Nt=null;return}}catch(f){if(h!==null)throw Nt=h,f;ue=1,tc(e,Rn(a,e.current)),Nt=null;return}i.flags&32768?(zt||o===1?e=!0:Na||(kt&536870912)!==0?e=!1:(gr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Yy(i,e)):uc(i)}function uc(e){var i=e;do{if((i.flags&32768)!==0){Yy(i,gr);return}e=i.return;var a=NA(i.alternate,i,Bi);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);ue===0&&(ue=5)}function Yy(e,i){do{var a=DA(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);ue=6,Nt=null}function Xy(e,i,a,o,h,f,v,E,w){e.cancelPendingCommit=null;do cc();while(ze!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Jh,yo(e,a,f,v,E,w),e===Jt&&(Nt=Jt=null,kt=0),Oa=i,vr=e,Va=a,sd=f,ad=h,jy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qA(es,function(){return t_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=st.p,st.p=2,v=Gt,Gt|=4;try{OA(e,i,a)}finally{Gt=v,st.p=h,F.T=o}}ze=1,$y(),Zy(),Wy()}}function $y(){if(ze===1){ze=0;var e=vr,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Gt;Gt|=4;try{Vy(i,e);var f=Ad,v=Up(e.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Lp(E.ownerDocument.documentElement,E)){if(w!==null&&Yh(E)){var j=w.start,G=w.end;if(G===void 0&&(G=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(G,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var q=z.getSelection(),vt=E.textContent.length,pt=Math.min(w.start,vt),$t=w.end===void 0?pt:Math.min(w.end,vt);!q.extend&&pt>$t&&(v=$t,$t=pt,pt=v);var P=kp(E,pt),D=kp(E,$t);if(P&&D&&(q.rangeCount!==1||q.anchorNode!==P.node||q.anchorOffset!==P.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var U=X.createRange();U.setStart(P.node,P.offset),q.removeAllRanges(),pt>$t?(q.addRange(U),q.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),q.addRange(U))}}}}for(X=[],q=E;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Q=X[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Ac=!!Td,Ad=Td=null}finally{Gt=h,st.p=o,F.T=a}}e.current=i,ze=2}}function Zy(){if(ze===2){ze=0;var e=vr,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Gt;Gt|=4;try{Cy(e,i.alternate,i)}finally{Gt=h,st.p=o,F.T=a}}ze=3}}function Wy(){if(ze===4||ze===3){ze=0,su();var e=vr,i=Oa,a=Va,o=jy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,Oa=vr=null,Jy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(_r=null),Zs(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=st.p,st.p=2,F.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{F.T=i,st.p=h}}(Va&3)!==0&&cc(),li(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===od?al++:(al=0,od=e):al=0,ol(0)}}function Jy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,zo(i)))}function cc(e){return $y(),Zy(),Wy(),t_()}function t_(){if(ze!==5)return!1;var e=vr,i=sd;sd=0;var a=Zs(Va),o=F.T,h=st.p;try{st.p=32>a?32:a,F.T=null,a=ad,ad=null;var f=vr,v=Va;if(ze=0,Oa=vr=null,Va=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Ly(f.current),My(f,f.current,v,a),Gt=E,ol(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{st.p=h,F.T=o,Jy(e,i)}}function e_(e,i,a){i=Rn(a,i),i=jf(e.stateNode,i,2),e=ur(e,i,2),e!==null&&(vi(e,2),li(e))}function Zt(e,i,a){if(e.tag===3)e_(e,e,a);else for(;i!==null;){if(i.tag===3){e_(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_r===null||!_r.has(o))){e=Rn(a,e),a=sy(2),o=ur(i,a,2),o!==null&&(ay(a,o,i,e),vi(o,2),li(o));break}}i=i.return}}function hd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new MA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(ed=!0,h.add(a),e=jA.bind(null,e,i,a),i.then(e,e))}function jA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Jt===e&&(kt&a)===a&&(ue===4||ue===3&&(kt&62914560)===kt&&300>En()-rd?(Gt&2)===0&&xa(e,0):nd|=a,Da===kt&&(Da=0)),li(e)}function n_(e,i){i===0&&(i=go()),e=pa(e,i),e!==null&&(vi(e,i),li(e))}function zA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),n_(e,a)}function BA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),n_(e,a)}function qA(e,i){return Jr(e,i)}var hc=null,Pa=null,fd=!1,fc=!1,dd=!1,Ms=0;function li(e){e!==Pa&&e.next===null&&(Pa===null?hc=Pa=e:Pa=Pa.next=e),fc=!0,fd||(fd=!0,FA())}function ol(e,i){if(!dd&&fc){dd=!0;do for(var a=!1,o=hc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Ge(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,a_(o,f))}else f=kt,f=$s(o,o===Jt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ss(o,f)||(a=!0,a_(o,f));o=o.next}while(a);dd=!1}}function HA(){i_()}function i_(){fc=fd=!1;var e=0;Ms!==0&&(WA()&&(e=Ms),Ms=0);for(var i=En(),a=null,o=hc;o!==null;){var h=o.next,f=r_(o,i);f===0?(o.next=null,a===null?hc=h:a.next=h,h===null&&(Pa=a)):(a=o,(e!==0||(f&3)!==0)&&(fc=!0)),o=h}ol(e)}function r_(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Ge(f),E=1<<v,w=h[v];w===-1?((E&a)===0||(E&o)!==0)&&(h[v]=mo(E,i)):w<=i&&(e.expiredLanes|=E),f&=~E}if(i=Jt,a=kt,a=$s(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ts(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ss(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&ts(o),Zs(a)){case 2:case 8:a=Ys;break;case 32:a=es;break;case 268435456:a=Xs;break;default:a=es}return o=s_.bind(null,e),a=Jr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&ts(o),e.callbackPriority=2,e.callbackNode=null,2}function s_(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(cc()&&e.callbackNode!==a)return null;var o=kt;return o=$s(e,e===Jt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(By(e,o,i),r_(e,En()),e.callbackNode!=null&&e.callbackNode===a?s_.bind(null,e):null)}function a_(e,i){if(cc())return null;By(e,i,!0)}function FA(){tS(function(){(Gt&6)!==0?Jr(ho,HA):i_()})}function md(){return Ms===0&&(Ms=po()),Ms}function o_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function l_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function GA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=o_((h[pe]||null).action),v=o.submitter;v&&(i=(i=v[pe]||null)?o_(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new ra("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ms!==0){var w=v?l_(h,v):new FormData(h);Mf(a,{pending:!0,data:w,method:h.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?l_(h,v):new FormData(h),Mf(a,{pending:!0,data:w,method:h.method,action:f},f,w))},currentTarget:h}]})}}for(var pd=0;pd<Wh.length;pd++){var gd=Wh[pd],QA=gd.toLowerCase(),KA=gd[0].toUpperCase()+gd.slice(1);jn(QA,"on"+KA)}jn(Bp,"onAnimationEnd"),jn(qp,"onAnimationIteration"),jn(Hp,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(cA,"onTransitionRun"),jn(hA,"onTransitionStart"),jn(fA,"onTransitionCancel"),jn(Fp,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function u_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,j=E.currentTarget;if(E=E.listener,w!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=j;try{f(h)}catch(G){Ju(G)}h.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,j=E.currentTarget,E=E.listener,w!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=j;try{f(h)}catch(G){Ju(G)}h.currentTarget=null,f=w}}}}function Dt(e,i){var a=i[vo];a===void 0&&(a=i[vo]=new Set);var o=e+"__bubble";a.has(o)||(c_(i,e,2,!1),a.add(o))}function yd(e,i,a){var o=0;i&&(o|=4),c_(a,e,o,i)}var dc="_reactListening"+Math.random().toString(36).slice(2);function _d(e){if(!e[dc]){e[dc]=!0,Eo.forEach(function(a){a!=="selectionchange"&&(YA.has(a)||yd(a,!1,e),yd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[dc]||(i[dc]=!0,yd("selectionchange",!1,i))}}function c_(e,i,a,o){switch(M_(i)){case 2:var h=TS;break;case 8:h=AS;break;default:h=Vd}a=h.bind(null,i,a,e),h=void 0,!wn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function vd(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ei(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue t}E=E.parentNode}}o=o.return}pu(function(){var j=f,G=Sn(a),X=[];t:{var z=Gp.get(e);if(z!==void 0){var q=ra,vt=e;switch(e){case"keypress":if(Jn(a)===0)break t;case"keydown":case"keyup":q=ca;break;case"focusin":vt="focus",q=oa;break;case"focusout":vt="blur",q=oa;break;case"beforeblur":case"afterblur":q=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Su;break;case Bp:case qp:case Hp:q=la;break;case Fp:q=bu;break;case"scroll":case"scrollend":q=gu;break;case"wheel":q=ha;break;case"copy":case"cut":case"paste":q=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Vo;break;case"toggle":case"beforetoggle":q=Iu}var pt=(i&4)!==0,$t=!pt&&(e==="scroll"||e==="scrollend"),P=pt?z!==null?z+"Capture":null:z;pt=[];for(var D=j,U;D!==null;){var Q=D;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||P===null||(Q=ds(D,P),Q!=null&&pt.push(ul(D,Q,U))),$t)break;D=D.return}0<pt.length&&(z=new q(z,vt,null,a,G),X.push({event:z,listeners:pt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",z&&a!==wi&&(vt=a.relatedTarget||a.fromElement)&&(Ei(vt)||vt[Tn]))break t;if((q||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,q?(vt=a.relatedTarget||a.toElement,q=j,vt=vt?Ei(vt):null,vt!==null&&($t=c(vt),pt=vt.tag,vt!==$t||pt!==5&&pt!==27&&pt!==6)&&(vt=null)):(q=null,vt=j),q!==vt)){if(pt=bn,Q="onMouseLeave",P="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Vo,Q="onPointerLeave",P="onPointerEnter",D="pointer"),$t=q==null?z:Xn(q),U=vt==null?z:Xn(vt),z=new pt(Q,D+"leave",q,a,G),z.target=$t,z.relatedTarget=U,Q=null,Ei(G)===j&&(pt=new pt(P,D+"enter",vt,a,G),pt.target=U,pt.relatedTarget=$t,Q=pt),$t=Q,q&&vt)e:{for(pt=q,P=vt,D=0,U=pt;U;U=ka(U))D++;for(U=0,Q=P;Q;Q=ka(Q))U++;for(;0<D-U;)pt=ka(pt),D--;for(;0<U-D;)P=ka(P),U--;for(;D--;){if(pt===P||P!==null&&pt===P.alternate)break e;pt=ka(pt),P=ka(P)}pt=null}else pt=null;q!==null&&h_(X,z,q,pt,!1),vt!==null&&$t!==null&&h_(X,$t,vt,pt,!0)}}t:{if(z=j?Xn(j):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var ut=Dp;else if(be(z))if(Op)ut=oA;else{ut=sA;var Ct=rA}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&bo(j.elementType)&&(ut=Dp):ut=aA;if(ut&&(ut=ut(e,j))){Ni(X,ut,a,G);break t}Ct&&Ct(e,z,j),e==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&rr(z,"number",z.value)}switch(Ct=j?Xn(j):window,e){case"focusin":(be(Ct)||Ct.contentEditable==="true")&&(fa=Ct,Xh=j,Po=null);break;case"focusout":Po=Xh=fa=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,jp(X,a,G);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":jp(X,a,G)}var ct;if(ni)t:{switch(e){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else Mt?H(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(_&&a.locale!=="ko"&&(Mt||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Mt&&(ct=Io()):(Wn=G,sr="value"in Wn?Wn.value:Wn.textContent,Mt=!0)),Ct=mc(j,gt),0<Ct.length&&(gt=new Do(gt,e,null,a,G),X.push({event:gt,listeners:Ct}),ct?gt.data=ct:(ct=nt(a),ct!==null&&(gt.data=ct)))),(ct=m?we(e,a):Pt(e,a))&&(gt=mc(j,"onBeforeInput"),0<gt.length&&(Ct=new Do("onBeforeInput","beforeinput",null,a,G),X.push({event:Ct,listeners:gt}),Ct.data=ct)),GA(X,e,j,a,G)}u_(X,i)})}function ul(e,i,a){return{instance:e,listener:i,currentTarget:a}}function mc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ds(e,a),h!=null&&o.unshift(ul(e,h,f)),h=ds(e,i),h!=null&&o.push(ul(e,h,f))),e.tag===3)return o;e=e.return}return[]}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function h_(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,j=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||j===null||(w=j,h?(j=ds(a,f),j!=null&&v.unshift(ul(a,j,w))):h||(j=ds(a,f),j!=null&&v.push(ul(a,j,w)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var XA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function f_(e){return(typeof e=="string"?e:""+e).replace(XA,`
`).replace($A,"")}function d_(e,i){return i=f_(i),f_(e)===i}function pc(){}function Xt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||An(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&An(e,""+o);break;case"className":$n(e,"class",o);break;case"tabIndex":$n(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(e,a,o);break;case"style":wo(e,o,f);break;case"data":if(i!=="object"){$n(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=pc);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ia(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),ir(e,"popover",o);break;case"xlinkActuate":Le(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Le(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Le(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Le(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Le(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Le(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Le(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Le(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Le(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ir(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qh.get(a)||a,ir(e,a,o))}}function Ed(e,i,a,o,h,f){switch(a){case"style":wo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?An(e,o):(typeof o=="number"||typeof o=="bigint")&&An(e,""+o);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=pc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ws.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[pe]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ir(e,a,o)}}}function Be(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,f,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),o&&Xt(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var E=f=v=h=null,w=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":w=G;break;case"defaultChecked":j=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Xt(e,i,o,G,a,null)}}cs(e,f,E,w,j,v,h,!1),na(e);return;case"select":Dt("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xt(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Si(e,!!o,i,!1):a!=null&&Si(e,!!o,a,!0);return;case"textarea":Dt("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}hs(e,o,h,f),na(e);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,i,w,o,a,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(o=0;o<ll.length;o++)Dt(ll[o],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,j,o,a,null)}return;default:if(bo(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Ed(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xt(e,i,E,o,a,null))}function ZA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,w=null,j=null,G=null;for(q in a){var X=a[q];if(a.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":w=X;default:o.hasOwnProperty(q)||Xt(e,i,q,null,o,X)}}for(var z in o){var q=o[z];if(X=a[z],o.hasOwnProperty(z)&&(q!=null||X!=null))switch(z){case"type":f=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":G=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==X&&Xt(e,i,z,q,o,X)}}cn(e,v,E,w,j,G,f,h);return;case"select":q=v=E=z=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":q=w;default:o.hasOwnProperty(f)||Xt(e,i,f,null,o,w)}for(h in o)if(f=o[h],w=a[h],o.hasOwnProperty(h)&&(f!=null||w!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&Xt(e,i,h,f,o,w)}i=E,a=v,o=q,z!=null?Si(e,!!a,z,!1):!!o!=!!a&&(i!=null?Si(e,!!a,i,!0):Si(e,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xt(e,i,v,h,o,f)}Kt(e,z,q);return;case"option":for(var vt in a)if(z=a[vt],a.hasOwnProperty(vt)&&z!=null&&!o.hasOwnProperty(vt))switch(vt){case"selected":e.selected=!1;break;default:Xt(e,i,vt,null,o,z)}for(w in o)if(z=o[w],q=a[w],o.hasOwnProperty(w)&&z!==q&&(z!=null||q!=null))switch(w){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,i,w,z,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)z=a[pt],a.hasOwnProperty(pt)&&z!=null&&!o.hasOwnProperty(pt)&&Xt(e,i,pt,null,o,z);for(j in o)if(z=o[j],q=a[j],o.hasOwnProperty(j)&&z!==q&&(z!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xt(e,i,j,z,o,q)}return;default:if(bo(i)){for(var $t in a)z=a[$t],a.hasOwnProperty($t)&&z!==void 0&&!o.hasOwnProperty($t)&&Ed(e,i,$t,void 0,o,z);for(G in o)z=o[G],q=a[G],!o.hasOwnProperty(G)||z===q||z===void 0&&q===void 0||Ed(e,i,G,z,o,q);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&Xt(e,i,P,null,o,z);for(X in o)z=o[X],q=a[X],!o.hasOwnProperty(X)||z===q||z==null&&q==null||Xt(e,i,X,z,o,q)}var Td=null,Ad=null;function gc(e){return e.nodeType===9?e:e.ownerDocument}function m_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Sd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wd=null;function WA(){var e=window.event;return e&&e.type==="popstate"?e===wd?!1:(wd=e,!0):(wd=null,!1)}var g_=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(e){return y_.resolve(null).then(e).catch(eS)}:g_;function eS(e){setTimeout(function(){throw e})}function Tr(e){return e==="head"}function __(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&cl(v.documentElement),a&2&&cl(v.body),a&4)for(a=v.head,cl(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[as]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),_l(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);_l(i)}function bd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bd(a),nr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function nS(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[as])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Bn(e.nextSibling),e===null)break}return null}function iS(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bn(e.nextSibling),e===null))return null;return e}function Rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function rS(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Id=null;function v_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function E_(e,i,a){switch(i=gc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function cl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);nr(e)}var Vn=new Map,T_=new Set;function yc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qi=st.d;st.d={f:sS,r:aS,D:oS,C:lS,L:uS,m:cS,X:fS,S:hS,M:dS};function sS(){var e=qi.f(),i=lc();return e||i}function aS(e){var i=Yn(e);i!==null&&i.tag===5&&i.type==="form"?Bg(i):qi.r(e)}var La=typeof document>"u"?null:document;function A_(e,i,a){var o=La;if(o&&typeof i=="string"&&i){var h=ge(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),T_.has(h)||(T_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function oS(e){qi.D(e),A_("dns-prefetch",e,null)}function lS(e,i){qi.C(e,i),A_("preconnect",e,i)}function uS(e,i,a){qi.L(e,i,a);var o=La;if(o&&e&&i){var h='link[rel="preload"][as="'+ge(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ge(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ge(a.imageSizes)+'"]')):h+='[href="'+ge(e)+'"]';var f=h;switch(i){case"style":f=Ua(e);break;case"script":f=ja(e)}Vn.has(f)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Vn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(hl(f))||i==="script"&&o.querySelector(fl(f))||(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function cS(e,i){qi.m(e,i);var a=La;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ge(o)+'"][href="'+ge(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ja(e)}if(!Vn.has(f)&&(e=T({rel:"modulepreload",href:e},i),Vn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fl(f)))return}o=a.createElement("link"),Be(o,"link",e),ce(o),a.head.appendChild(o)}}}function hS(e,i,a){qi.S(e,i,a);var o=La;if(o&&e){var h=Je(o).hoistableStyles,f=Ua(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(hl(f)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Vn.get(f))&&Cd(e,a);var w=v=o.createElement("link");ce(w),Be(w,"link",e),w._p=new Promise(function(j,G){w.onload=j,w.onerror=G}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,_c(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function fS(e,i){qi.X(e,i);var a=La;if(a&&e){var o=Je(a).hoistableScripts,h=ja(e),f=o.get(h);f||(f=a.querySelector(fl(h)),f||(e=T({src:e,async:!0},i),(i=Vn.get(h))&&Nd(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function dS(e,i){qi.M(e,i);var a=La;if(a&&e){var o=Je(a).hoistableScripts,h=ja(e),f=o.get(h);f||(f=a.querySelector(fl(h)),f||(e=T({src:e,async:!0,type:"module"},i),(i=Vn.get(h))&&Nd(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function S_(e,i,a,o){var h=(h=Et.current)?yc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ua(a.href),a=Je(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ua(a.href);var f=Je(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(hl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Vn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vn.set(e,a),f||mS(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ja(a),a=Je(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ua(e){return'href="'+ge(e)+'"'}function hl(e){return'link[rel="stylesheet"]['+e+"]"}function w_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function mS(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Be(i,"link",a),ce(i),e.head.appendChild(i))}function ja(e){return'[src="'+ge(e)+'"]'}function fl(e){return"script[async]"+e}function b_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ge(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),Be(o,"style",h),_c(o,a.precedence,e),i.instance=o;case"stylesheet":h=Ua(a.href);var f=e.querySelector(hl(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=w_(a),(h=Vn.get(h))&&Cd(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Be(f,"link",o),i.state.loading|=4,_c(f,a.precedence,e),i.instance=f;case"script":return f=ja(a.src),(h=e.querySelector(fl(f)))?(i.instance=h,ce(h),h):(o=a,(h=Vn.get(f))&&(o=T({},a),Nd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Be(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,_c(o,a.precedence,e));return i.instance}function _c(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Cd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Nd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var vc=null;function R_(e,i,a){if(vc===null){var o=new Map,h=vc=new Map;h.set(a,o)}else h=vc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[as]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function I_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function pS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function C_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var dl=null;function gS(){}function yS(e,i,a){if(dl===null)throw Error(s(475));var o=dl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ua(a.href),f=e.querySelector(hl(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Ec.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=w_(a),(h=Vn.get(h))&&Cd(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Be(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Ec.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function _S(){if(dl===null)throw Error(s(475));var e=dl;return e.stylesheets&&e.count===0&&Dd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Dd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Ec(){if(this.count--,this.count===0){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tc=null;function Dd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tc=new Map,i.forEach(vS,e),Tc=null,Ec.call(e))}function vS(e,i){if(!(i.state.loading&4)){var a=Tc.get(e);if(a)var o=a.get(null);else{a=new Map,Tc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Ec.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var ml={$$typeof:rt,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function ES(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function N_(e,i,a,o,h,f,v,E,w,j,G,X){return e=new ES(e,i,a,v,E,w,j,X),i=1,f===!0&&(i|=24),f=fn(3,null,null,i),e.current=f,f.stateNode=e,i=hf(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},pf(f),e}function D_(e){return e?(e=ga,e):ga}function O_(e,i,a,o,h,f){h=D_(h),o.context===null?o.context=h:o.pendingContext=h,o=lr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=ur(e,o,i),a!==null&&(yn(a,e,i),Fo(a,e,i))}function V_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Od(e,i){V_(e,i),(e=e.alternate)&&V_(e,i)}function x_(e){if(e.tag===13){var i=pa(e,67108864);i!==null&&yn(i,e,67108864),Od(e,67108864)}}var Ac=!0;function TS(e,i,a,o){var h=F.T;F.T=null;var f=st.p;try{st.p=2,Vd(e,i,a,o)}finally{st.p=f,F.T=h}}function AS(e,i,a,o){var h=F.T;F.T=null;var f=st.p;try{st.p=8,Vd(e,i,a,o)}finally{st.p=f,F.T=h}}function Vd(e,i,a,o){if(Ac){var h=xd(o);if(h===null)vd(e,i,o,Sc,a),P_(e,o);else if(wS(h,e,i,a,o))o.stopPropagation();else if(P_(e,o),i&4&&-1<SS.indexOf(e)){for(;h!==null;){var f=Yn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=kn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Ge(v);E.entanglements[1]|=w,v&=~w}li(f),(Gt&6)===0&&(ac=En()+500,ol(0))}}break;case 13:E=pa(f,2),E!==null&&yn(E,f,2),lc(),Od(f,2)}if(f=xd(o),f===null&&vd(e,i,o,Sc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else vd(e,i,o,null,a)}}function xd(e){return e=Sn(e),Md(e)}var Sc=null;function Md(e){if(Sc=null,e=Ei(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Sc=e,null}function M_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kh()){case ho:return 2;case Ys:return 8;case es:case Lh:return 32;case Xs:return 268435456;default:return 32}default:return 32}}var Pd=!1,Ar=null,Sr=null,wr=null,pl=new Map,gl=new Map,br=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P_(e,i){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":pl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(i.pointerId)}}function yl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Yn(i),i!==null&&x_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function wS(e,i,a,o,h){switch(i){case"focusin":return Ar=yl(Ar,e,i,a,o,h),!0;case"dragenter":return Sr=yl(Sr,e,i,a,o,h),!0;case"mouseover":return wr=yl(wr,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return pl.set(f,yl(pl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,gl.set(f,yl(gl.get(f)||null,e,i,a,o,h)),!0}return!1}function k_(e){var i=Ei(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,lu(e.priority,function(){if(a.tag===13){var o=gn();o=Ji(o);var h=pa(a,o);h!==null&&yn(h,a,o),Od(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=xd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);wi=o,a.target.dispatchEvent(o),wi=null}else return i=Yn(a),i!==null&&x_(i),e.blockedOn=a,!1;i.shift()}return!0}function L_(e,i,a){wc(e)&&a.delete(i)}function bS(){Pd=!1,Ar!==null&&wc(Ar)&&(Ar=null),Sr!==null&&wc(Sr)&&(Sr=null),wr!==null&&wc(wr)&&(wr=null),pl.forEach(L_),gl.forEach(L_)}function bc(e,i){e.blockedOn===i&&(e.blockedOn=null,Pd||(Pd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bS)))}var Rc=null;function U_(e){Rc!==e&&(Rc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Rc===e&&(Rc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Md(o||a)===null)continue;break}var f=Yn(a);f!==null&&(e.splice(i,3),i-=3,Mf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function _l(e){function i(w){return bc(w,e)}Ar!==null&&bc(Ar,e),Sr!==null&&bc(Sr,e),wr!==null&&bc(wr,e),pl.forEach(i),gl.forEach(i);for(var a=0;a<br.length;a++){var o=br[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<br.length&&(a=br[0],a.blockedOn===null);)k_(a),a.blockedOn===null&&br.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[pe]||null;if(typeof f=="function")v||U_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[pe]||null)E=v.formAction;else if(Md(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),U_(a)}}}function kd(e){this._internalRoot=e}Ic.prototype.render=kd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=gn();O_(a,o,e,i,null,null)},Ic.prototype.unmount=kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;O_(e.current,2,null,e,null,null),lc(),i[Tn]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var i=tr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<br.length&&i!==0&&i<br[a].priority;a++);br.splice(a,0,e),a===0&&k_(e)}};var j_=t.version;if(j_!=="19.1.1")throw Error(s(527,j_,"19.1.1"));st.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var RS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{oe=Cc.inject(RS),Ft=Cc}catch{}}return El.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=ey,f=ny,v=iy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=N_(e,1,!1,null,null,a,o,h,f,v,E,null),e[Tn]=i.current,_d(e),new kd(i)},El.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=ey,v=ny,E=iy,w=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=N_(e,1,!0,i,a??null,o,h,f,v,E,w,j),i.context=D_(null),a=i.current,o=gn(),o=Ji(o),h=lr(o),h.callback=null,ur(a,h,o),a=o,i.current.lanes=a,vi(i,a),li(i),e[Tn]=i.current,_d(e),new Ic(i)},El.version="19.1.1",El}var X_;function US(){if(X_)return jd.exports;X_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),jd.exports=LS(),jd.exports}var jS=US();const zS=()=>{};var $_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},BS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},DE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,R=(c&3)<<4|p>>4;let b=(p&15)<<2|y>>6,B=y&63;g||(B=64,d||(b=64)),s.push(n[T],n[R],n[b],n[B])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(NE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):BS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const R=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||R==null)throw new qS;const b=c<<2|p>>4;if(s.push(b),y!==64){const B=p<<4&240|y>>2;if(s.push(B),R!==64){const Y=y<<6&192|R;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(r){const t=NE(r);return DE.encodeByteArray(t,!0)},Qc=function(r){return HS(r).replace(/\./g,"")},OE=function(r){try{return DE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>FS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof $_>"u")return;const r=$_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&OE(r[1]);return t&&JSON.parse(t)},dh=()=>{try{return zS()||GS()||QS()||KS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VE=r=>dh()?.emulatorHosts?.[r],YS=r=>{const t=VE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},xE=()=>dh()?.config,ME=r=>dh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Qc(JSON.stringify(n)),Qc(JSON.stringify(d)),""].join(".")}const Il={};function ZS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Il))Il[t]?r.emulator.push(t):r.prod.push(t);return r}function WS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Z_=!1;function kE(r,t){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||Il[r]===t||Il[r]||Z_)return;Il[r]=t;function n(b){return`__firebase__banner__${b}`}const s="__firebase__banner",c=ZS().prod.length>0;function d(){const b=document.getElementById(s);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,B){b.setAttribute("width","24"),b.setAttribute("id",B),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function y(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Z_=!0,d()},b}function T(b,B){b.setAttribute("id",B),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function R(){const b=WS(s),B=n("text"),Y=document.getElementById(B)||document.createElement("span"),J=n("learnmore"),Z=document.getElementById(J)||document.createElement("a"),it=n("preprendIcon"),et=document.getElementById(it)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const rt=b.element;p(rt),T(Z,J);const At=y();g(et,it),rt.append(et,Y,Z,At),document.body.appendChild(rt)}c?(Y.innerText="Preview backend disconnected.",et.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(et.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function t1(){const r=dh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function e1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function i1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r1(){const r=We();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function s1(){return!t1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a1(){try{return typeof indexedDB=="object"}catch{return!1}}function o1(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="FirebaseError";class Zi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=l1,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?u1(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Zi(l,p,s)}}function u1(r,t){return r.replace(c1,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const c1=/\{\$([^}]+)}/g;function h1(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function zs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(W_(c)&&W_(d)){if(!zs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function W_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Tl(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function Al(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function f1(r,t){const n=new d1(r,t);return n.subscribe.bind(n)}class d1{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");m1(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Hd),l.error===void 0&&(l.error=Hd),l.complete===void 0&&(l.complete=Hd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m1(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new XS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(y1(t))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ps){return this.instances.has(t)}getOptions(t=Ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:g1(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ps){return this.component?this.component.multipleInstances?t:Ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g1(r){return r===Ps?void 0:r}function y1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new p1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const v1={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},E1=Ot.INFO,T1={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},A1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=T1[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vm{constructor(t){this.name=t,this._logLevel=E1,this._logHandler=A1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?v1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const S1=(r,t)=>t.some(n=>r instanceof n);let J_,tv;function w1(){return J_||(J_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b1(){return tv||(tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,im=new WeakMap,UE=new WeakMap,Fd=new WeakMap,xm=new WeakMap;function R1(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Mr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&LE.set(n,r)}).catch(()=>{}),xm.set(t,r),t}function I1(r){if(im.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});im.set(r,t)}let rm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return im.get(r);if(t==="objectStoreNames")return r.objectStoreNames||UE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function C1(r){rm=r(rm)}function N1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Gd(this),t,...n);return UE.set(s,t.sort?t.sort():[t]),Mr(s)}:b1().includes(r)?function(...t){return r.apply(Gd(this),t),Mr(LE.get(this))}:function(...t){return Mr(r.apply(Gd(this),t))}}function D1(r){return typeof r=="function"?N1(r):(r instanceof IDBTransaction&&I1(r),S1(r,w1())?new Proxy(r,rm):r)}function Mr(r){if(r instanceof IDBRequest)return R1(r);if(Fd.has(r))return Fd.get(r);const t=D1(r);return t!==r&&(Fd.set(r,t),xm.set(t,r)),t}const Gd=r=>xm.get(r);function O1(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),p=Mr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Mr(d.result),g.oldVersion,g.newVersion,Mr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const V1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],Qd=new Map;function ev(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Qd.get(t))return Qd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=x1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||V1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Qd.set(t,c),c}C1(r=>({...r,get:(t,n,s)=>ev(t,n)||r.get(t,n,s),has:(t,n)=>!!ev(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function P1(r){return r.getComponent()?.type==="VERSION"}const sm="@firebase/app",nv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Vm("@firebase/app"),k1="@firebase/app-compat",L1="@firebase/analytics-compat",U1="@firebase/analytics",j1="@firebase/app-check-compat",z1="@firebase/app-check",B1="@firebase/auth",q1="@firebase/auth-compat",H1="@firebase/database",F1="@firebase/data-connect",G1="@firebase/database-compat",Q1="@firebase/functions",K1="@firebase/functions-compat",Y1="@firebase/installations",X1="@firebase/installations-compat",$1="@firebase/messaging",Z1="@firebase/messaging-compat",W1="@firebase/performance",J1="@firebase/performance-compat",tw="@firebase/remote-config",ew="@firebase/remote-config-compat",nw="@firebase/storage",iw="@firebase/storage-compat",rw="@firebase/firestore",sw="@firebase/ai",aw="@firebase/firestore-compat",ow="firebase",lw="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",uw={[sm]:"fire-core",[k1]:"fire-core-compat",[U1]:"fire-analytics",[L1]:"fire-analytics-compat",[z1]:"fire-app-check",[j1]:"fire-app-check-compat",[B1]:"fire-auth",[q1]:"fire-auth-compat",[H1]:"fire-rtdb",[F1]:"fire-data-connect",[G1]:"fire-rtdb-compat",[Q1]:"fire-fn",[K1]:"fire-fn-compat",[Y1]:"fire-iid",[X1]:"fire-iid-compat",[$1]:"fire-fcm",[Z1]:"fire-fcm-compat",[W1]:"fire-perf",[J1]:"fire-perf-compat",[tw]:"fire-rc",[ew]:"fire-rc-compat",[nw]:"fire-gcs",[iw]:"fire-gcs-compat",[rw]:"fire-fst",[aw]:"fire-fst-compat",[sw]:"fire-vertex","fire-js":"fire-js",[ow]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,cw=new Map,om=new Map;function iv(r,t){try{r.container.addComponent(t)}catch(n){Ki.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function $a(r){const t=r.name;if(om.has(t))return Ki.debug(`There were multiple attempts to register component ${t}.`),!1;om.set(t,r);for(const n of Kc.values())iv(n,r);for(const n of cw.values())iv(n,r);return!0}function Mm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function xn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new Gl("app","Firebase",hw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=lw;function jE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:am,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Pr.create("bad-app-name",{appName:String(l)});if(n||(n=xE()),!n)throw Pr.create("no-options");const c=Kc.get(l);if(c){if(zs(n,c.options)&&zs(s,c.config))return c;throw Pr.create("duplicate-app",{appName:l})}const d=new _1(l);for(const g of om.values())d.addComponent(g);const p=new fw(n,s,d);return Kc.set(l,p),p}function zE(r=am){const t=Kc.get(r);if(!t&&r===am&&xE())return jE();if(!t)throw Pr.create("no-app",{appName:r});return t}function kr(r,t,n){let s=uw[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ki.warn(d.join(" "));return}$a(new Bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firebase-heartbeat-database",mw=1,Ml="firebase-heartbeat-store";let Kd=null;function BE(){return Kd||(Kd=O1(dw,mw,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(r=>{throw Pr.create("idb-open",{originalErrorMessage:r.message})})),Kd}async function pw(r){try{const n=(await BE()).transaction(Ml),s=await n.objectStore(Ml).get(qE(r));return await n.done,s}catch(t){if(t instanceof Zi)Ki.warn(t.message);else{const n=Pr.create("idb-get",{originalErrorMessage:t?.message});Ki.warn(n.message)}}}async function rv(r,t){try{const s=(await BE()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(t,qE(r)),await s.done}catch(n){if(n instanceof Zi)Ki.warn(n.message);else{const s=Pr.create("idb-set",{originalErrorMessage:n?.message});Ki.warn(s.message)}}}function qE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=1024,yw=30;class _w{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ew(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>yw){const l=Tw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ki.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sv(),{heartbeatsToSend:n,unsentEntries:s}=vw(this._heartbeatsCache.heartbeats),l=Qc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ki.warn(t),""}}}function sv(){return new Date().toISOString().substring(0,10)}function vw(r,t=gw){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),av(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),av(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ew{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a1()?o1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function av(r){return Qc(JSON.stringify({version:2,heartbeats:r})).length}function Tw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(r){$a(new Bs("platform-logger",t=>new M1(t),"PRIVATE")),$a(new Bs("heartbeat",t=>new _w(t),"PRIVATE")),kr(sm,nv,r),kr(sm,nv,"esm2020"),kr("fire-js","")}Aw("");var Sw="firebase",ww="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(Sw,ww,"app");function HE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bw=HE,FE=new Gl("auth","Firebase",HE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Vm("@firebase/auth");function Rw(r,...t){Yc.logLevel<=Ot.WARN&&Yc.warn(`Auth (${ro}): ${r}`,...t)}function Pc(r,...t){Yc.logLevel<=Ot.ERROR&&Yc.error(`Auth (${ro}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r,...t){throw Pm(r,...t)}function ci(r,...t){return Pm(r,...t)}function GE(r,t,n){const s={...bw(),[t]:n};return new Gl("auth","Firebase",s).create(t,{appName:r.name})}function Gi(r){return GE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return FE.create(r,...t)}function yt(r,t,...n){if(!r)throw Pm(t,...n)}function Hi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Pc(t),new Error(t)}function Yi(r,t){r||Hi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){return typeof self<"u"&&self.location?.href||""}function Iw(){return ov()==="http:"||ov()==="https:"}function ov(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Iw()||n1()||"connection"in navigator)?navigator.onLine:!0}function Nw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yi(n>t,"Short delay should be less than long delay!"),this.isMobile=JS()||i1()}get(){return Cw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(r,t){Yi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vw=new Kl(3e4,6e4);function Kr(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Yr(r,t,n,s,l={}){return KE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const p=Ql({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return e1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&io(r.emulatorConfig.host)&&(y.credentials="include"),QE.fetch()(await YE(r,r.config.apiHost,n,p),y)})}async function KE(r,t,n){r._canInitEmulator=!1;const s={...Dw,...t};try{const l=new Mw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Nc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Nc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Nc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw GE(r,T,y);Fn(r,T)}}catch(l){if(l instanceof Zi)throw l;Fn(r,"network-request-failed",{message:String(l)})}}async function Yl(r,t,n,s,l={}){const c=await Yr(r,t,n,s,l);return"mfaPendingCredential"in c&&Fn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function YE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?km(r.config,l):`${r.config.apiScheme}://${l}`;return Ow.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function xw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ci(this.auth,"network-request-failed")),Vw.get())})}}function Nc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ci(r,t,s);return l.customData._tokenResponse=n,l}function lv(r){return r!==void 0&&r.enterprise!==void 0}class Pw{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return xw(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kw(r,t){return Yr(r,"GET","/v2/recaptchaConfig",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(r,t){return Yr(r,"POST","/v1/accounts:delete",t)}async function Xc(r,t){return Yr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Uw(r,t=!1){const n=Ae(r),s=await n.getIdToken(t),l=Lm(s);yt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Cl(Yd(l.auth_time)),issuedAtTime:Cl(Yd(l.iat)),expirationTime:Cl(Yd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Yd(r){return Number(r)*1e3}function Lm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const l=OE(n);return l?JSON.parse(l):(Pc("Failed to decode base64 JWT payload"),null)}catch(l){return Pc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function uv(r){const t=Lm(r);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Zi&&jw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function jw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(r){const t=r.auth,n=await r.getIdToken(),s=await Pl(r,Xc(t,{idToken:n}));yt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?XE(l.providerUserInfo):[],d=qw(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new um(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function Bw(r){const t=Ae(r);await $c(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qw(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function XE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(r,t){const n=await KE(r,{},async()=>{const s=Ql({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await YE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&io(r.emulatorConfig.host)&&(g.credentials="include"),QE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fw(r,t){return Yr(r,"POST","/v2/accounts:revokeToken",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):uv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const n=uv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Hw(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Qa;return s&&(yt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(yt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(yt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(r,t){yt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Hn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new zw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new um(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,t));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Uw(this,t)}reload(){return Bw(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Hn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await $c(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Gi(this.auth));const t=await this.getIdToken();return await Pl(this,Lw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:R,emailVerified:b,isAnonymous:B,providerData:Y,stsTokenManager:J}=n;yt(R&&J,t,"internal-error");const Z=Qa.fromJSON(this.name,J);yt(typeof R=="string",t,"internal-error"),Ir(s,t.name),Ir(l,t.name),yt(typeof b=="boolean",t,"internal-error"),yt(typeof B=="boolean",t,"internal-error"),Ir(c,t.name),Ir(d,t.name),Ir(p,t.name),Ir(g,t.name),Ir(y,t.name),Ir(T,t.name);const it=new Hn({uid:R,auth:t,email:l,emailVerified:b,displayName:s,isAnonymous:B,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:T});return Y&&Array.isArray(Y)&&(it.providerData=Y.map(et=>({...et}))),g&&(it._redirectEventId=g),it}static async _fromIdTokenResponse(t,n,s=!1){const l=new Qa;l.updateFromServerResponse(n);const c=new Hn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await $c(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];yt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?XE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Qa;p.updateFromIdToken(s);const g=new Hn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new um(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function Fi(r){Yi(r instanceof Function,"Expected a class definition");let t=cv.get(r);return t?(Yi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,cv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}$E.type="NONE";const hv=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(r,t,n){return`firebase:${r}:${t}:${n}`}class Ka{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=kc(this.userKey,l.apiKey,c),this.fullPersistenceKey=kc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Xc(this.auth,{idToken:t}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,t):null}return Hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ka(Fi(hv),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Fi(hv);const d=kc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let R;if(typeof T=="string"){const b=await Xc(t,{idToken:T}).catch(()=>{});if(!b)break;R=await Hn._fromGetAccountInfoResponse(t,b,T)}else R=Hn._fromJSON(t,T);y!==c&&(p=R),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ka(c,t,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ka(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(t0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ZE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(n0(t))return"Blackberry";if(i0(t))return"Webos";if(WE(t))return"Safari";if((t.includes("chrome/")||JE(t))&&!t.includes("edge/"))return"Chrome";if(e0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function ZE(r=We()){return/firefox\//i.test(r)}function WE(r=We()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function JE(r=We()){return/crios\//i.test(r)}function t0(r=We()){return/iemobile/i.test(r)}function e0(r=We()){return/android/i.test(r)}function n0(r=We()){return/blackberry/i.test(r)}function i0(r=We()){return/webos/i.test(r)}function Um(r=We()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Gw(r=We()){return Um(r)&&!!window.navigator?.standalone}function Qw(){return r1()&&document.documentMode===10}function r0(r=We()){return Um(r)||e0(r)||i0(r)||n0(r)||/windows phone/i.test(r)||t0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(r,t=[]){let n;switch(r){case"Browser":n=fv(We());break;case"Worker":n=`${fv(We())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,p)=>{try{const g=t(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(r,t={}){return Yr(r,"GET","/v2/passwordPolicy",Kr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=6;class $w{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Xw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new Kw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ka.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Xc(this,{idToken:t}),s=await Hn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await $c(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Nw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(xn(this.app))return Promise.reject(Gi(this));const n=t?Ae(t):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return xn(this.app)?Promise.reject(Gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Yw(this),n=new $w(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Fw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Fi(t)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=t.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=s0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Rw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Gs(r){return Ae(r)}class dv{constructor(t){this.auth=t,this.observer=null,this.addObserver=f1(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ww(r){mh=r}function a0(r){return mh.loadJS(r)}function Jw(){return mh.recaptchaEnterpriseScript}function tb(){return mh.gapiScript}function eb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class nb{constructor(){this.enterprise=new ib}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class ib{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const rb="recaptcha-enterprise",o0="NO_RECAPTCHA";class sb{constructor(t){this.type=rb,this.auth=Gs(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{kw(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new Pw(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;lv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:t}).then(y=>{d(y)}).catch(()=>{d(o0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nb().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&lv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Jw();g.length!==0&&(g+=p),a0(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function mv(r,t,n,s=!1,l=!1){const c=new sb(r);let d;if(l)d=o0;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function cm(r,t,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mv(r,t,n,n==="getOobCode");return s(r,c)}else return s(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await mv(r,t,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r,t){const n=Mm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(zs(c,t??{}))return l;Fn(l,"already-initialized")}return n.initialize({options:t})}function ob(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Fi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function lb(r,t,n){const s=Gs(r);yt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=l0(t),{host:d,port:p}=ub(t),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){yt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),yt(zs(y,s.config.emulator)&&zs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,io(d)?(PE(`${c}//${d}${g}`),kE("Auth",!0)):cb()}function l0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function ub(r){const t=l0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:pv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:pv(d)}}}function pv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function cb(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,n){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}}async function hb(r,t){return Yr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(r,t){return Yl(r,"POST","/v1/accounts:signInWithPassword",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(r,t){return Yl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,t))}async function mb(r,t){return Yl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends jm{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new kl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new kl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(t,n,"signInWithPassword",fb);case"emailLink":return db(t,{email:this._email,oobCode:this._password});default:Fn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(t,s,"signUpPassword",hb);case"emailLink":return mb(t,{idToken:n,email:this._email,oobCode:this._password});default:Fn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,t){return Yl(r,"POST","/v1/accounts:signInWithIdp",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="http://localhost";class qs extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new qs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Ya(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ya(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ya(t,n)}buildRequest(){const t={requestUri:pb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ql(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yb(r){const t=Tl(Al(r)).link,n=t?Tl(Al(t)).deep_link_id:null,s=Tl(Al(r)).deep_link_id;return(s?Tl(Al(s)).link:null)||s||n||t||r}class zm{constructor(t){const n=Tl(Al(t)),s=n.apiKey??null,l=n.oobCode??null,c=gb(n.mode??null);yt(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=yb(t);try{return new zm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(t,n){return kl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=zm.parseLink(n);return yt(s,"argument-error"),kl._fromEmailAndCode(t,s.code,s.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends u0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Xl{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cr.credential(t.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Xl{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Xl{constructor(){super("twitter.com")}static credential(t,n){return qs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Or.credential(n,s)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(r,t){return Yl(r,"POST","/v1/accounts:signUp",Kr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Hn._fromIdTokenResponse(t,s,l),d=gv(s);return new Hs({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=gv(s);return new Hs({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function gv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Zi{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Zc(t,n,s,l)}}function c0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(r,c,t,s):c})}async function vb(r,t,n=!1){const s=await Pl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Hs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(r,t,n=!1){const{auth:s}=r;if(xn(s.app))return Promise.reject(Gi(s));const l="reauthenticate";try{const c=await Pl(r,c0(s,l,t,r),n);yt(c.idToken,s,"internal-error");const d=Lm(c.idToken);yt(d,s,"internal-error");const{sub:p}=d;return yt(r.uid===p,s,"user-mismatch"),Hs._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Fn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h0(r,t,n=!1){if(xn(r.app))return Promise.reject(Gi(r));const s="signIn",l=await c0(r,s,t),c=await Hs._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function Tb(r,t){return h0(Gs(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(r){const t=Gs(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ab(r,t,n){if(xn(r.app))return Promise.reject(Gi(r));const s=Gs(r),d=await cm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_b).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&f0(r),g}),p=await Hs._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function Sb(r,t,n){return xn(r.app)?Promise.reject(Gi(r)):Tb(Ae(r),so.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&f0(r),s})}function wb(r,t,n,s){return Ae(r).onIdTokenChanged(t,n,s)}function bb(r,t,n){return Ae(r).beforeAuthStateChanged(t,n)}function Rb(r,t,n,s){return Ae(r).onAuthStateChanged(t,n,s)}function d0(r){return Ae(r).signOut()}const Wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wc,"1"),this.storage.removeItem(Wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=1e3,Cb=10;class p0 extends m0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Qw()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Cb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Ib)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}p0.type="LOCAL";const Nb=p0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends m0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}g0.type="SESSION";const y0=g0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ph(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await Db(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Bm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(R){const b=R;if(b.data.eventId===y)switch(b.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(b.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function Vb(r){hi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function xb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mb(){return navigator?.serviceWorker?.controller||null}function Pb(){return _0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="firebaseLocalStorageDb",kb=1,Jc="firebaseLocalStorage",E0="fbase_key";class $l{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(r,t){return r.transaction([Jc],t?"readwrite":"readonly").objectStore(Jc)}function Lb(){const r=indexedDB.deleteDatabase(v0);return new $l(r).toPromise()}function hm(){const r=indexedDB.open(v0,kb);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Jc,{keyPath:E0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Jc)?t(s):(s.close(),await Lb(),t(await hm()))})})}async function yv(r,t,n){const s=gh(r,!0).put({[E0]:t,value:n});return new $l(s).toPromise()}async function Ub(r,t){const n=gh(r,!1).get(t),s=await new $l(n).toPromise();return s===void 0?null:s.value}function _v(r,t){const n=gh(r,!0).delete(t);return new $l(n).toPromise()}const jb=800,zb=3;class T0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>zb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(Pb()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xb(),!this.activeServiceWorker)return;this.sender=new Ob(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Mb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hm();return await yv(t,Wc,"1"),await _v(t,Wc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>yv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>Ub(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_v(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=gh(l,!1).getAll();return new $l(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T0.type="LOCAL";const Bb=T0;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(r,t){return t?Fi(t):(yt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends jm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ya(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ya(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ya(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Hb(r){return h0(r.auth,new qm(r),r.bypassAuthState)}function Fb(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),Eb(n,new qm(r),r.bypassAuthState)}async function Gb(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),vb(n,new qm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=t;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Hb;case"linkViaPopup":case"linkViaRedirect":return Gb;case"reauthViaPopup":case"reauthViaRedirect":return Fb;default:Fn(this.auth,"internal-error")}}resolve(t){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Kl(2e3,1e4);class Fa extends A0{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const t=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Qb.get())};t()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="pendingRedirect",Lc=new Map;class Yb extends A0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Lc.get(this.auth._key());if(!t){try{const s=await Xb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Lc.set(this.auth._key(),t)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xb(r,t){const n=Wb(t),s=Zb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function $b(r,t){Lc.set(r._key(),t)}function Zb(r){return Fi(r._redirectPersistence)}function Wb(r){return kc(Kb,r.config.apiKey,r.name)}async function Jb(r,t,n=!1){if(xn(r.app))return Promise.reject(Gi(r));const s=Gs(r),l=qb(s,t),d=await new Yb(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=600*1e3;class eR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!nR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!S0(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ci(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=tR&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(t))}saveEventToCache(t){this.cachedEventUids.add(vv(t)),this.lastProcessedEventTime=Date.now()}}function vv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function S0({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function nR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(r,t={}){return Yr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sR=/^https?/;async function aR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await iR(r);for(const n of t)try{if(oR(n))return}catch{}Fn(r,"unauthorized-domain")}function oR(r){const t=lm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!sR.test(n))return!1;if(rR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Kl(3e4,6e4);function Ev(){const r=hi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function uR(r){return new Promise((t,n)=>{function s(){Ev(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ev(),n(ci(r,"network-request-failed"))},timeout:lR.get()})}if(hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(hi().gapi?.load)s();else{const l=eb("iframefcb");return hi()[l]=()=>{gapi.load?s():n(ci(r,"network-request-failed"))},a0(`${tb()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Uc=null,t})}let Uc=null;function cR(r){return Uc=Uc||uR(r),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Kl(5e3,15e3),fR="__/auth/iframe",dR="emulator/auth/iframe",mR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gR(r){const t=r.config;yt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?km(t,dR):`https://${r.config.authDomain}/${fR}`,s={apiKey:t.apiKey,appName:r.name,v:ro},l=pR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ql(s).slice(1)}`}async function yR(r){const t=await cR(r),n=hi().gapi;return yt(n,r,"internal-error"),t.open({where:document.body,url:gR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=ci(r,"network-request-failed"),p=hi().setTimeout(()=>{c(d)},hR.get());function g(){hi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vR=500,ER=600,TR="_blank",AR="http://localhost";class Tv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SR(r,t,n,s=vR,l=ER){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={..._R,width:s.toString(),height:l.toString(),top:c,left:d},y=We().toLowerCase();n&&(p=JE(y)?TR:n),ZE(y)&&(t=t||AR,g.scrollbars="yes");const T=Object.entries(g).reduce((b,[B,Y])=>`${b}${B}=${Y},`,"");if(Gw(y)&&p!=="_self")return wR(t||"",p),new Tv(null);const R=window.open(t||"",p,T);yt(R,r,"popup-blocked");try{R.focus()}catch{}return new Tv(R)}function wR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="__/auth/handler",RR="emulator/auth/handler",IR=encodeURIComponent("fac");async function Av(r,t,n,s,l,c){yt(r.config.authDomain,r,"auth-domain-config-required"),yt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ro,eventId:l};if(t instanceof u0){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",h1(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,R]of Object.entries({}))d[T]=R}if(t instanceof Xl){const T=t.getScopes().filter(R=>R!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${IR}=${encodeURIComponent(g)}`:"";return`${CR(r)}?${Ql(p).slice(1)}${y}`}function CR({config:r}){return r.emulator?km(r,RR):`https://${r.authDomain}/${bR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class NR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y0,this._completeRedirectFn=Jb,this._overrideRedirectResult=$b}async _openPopup(t,n,s,l){Yi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Av(t,n,s,lm(),l);return SR(t,c,Bm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await Av(t,n,s,lm(),l);return Vb(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Yi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await yR(t),s=new eR(t);return n.register("authEvent",l=>(yt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Xd,{type:Xd},l=>{const c=l?.[0]?.[Xd];c!==void 0&&n(!!c),Fn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return r0()||WE()||Um()}}const DR=NR;var Sv="@firebase/auth",wv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xR(r){$a(new Bs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;yt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s0(r)},y=new Zw(s,l,c,g);return ob(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),$a(new Bs("auth-internal",t=>{const n=Gs(t.getProvider("auth").getImmediate());return(s=>new OR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(Sv,wv,VR(r)),kr(Sv,wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=300,PR=ME("authIdTokenMaxAge")||MR;let bv=null;const kR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>PR)return;const l=n?.token;bv!==l&&(bv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function LR(r=zE()){const t=Mm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=ab(r,{popupRedirectResolver:DR,persistence:[Bb,Nb,y0]}),s=ME("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kR(c.toString());bb(n,d,()=>d(n.currentUser)),wb(n,p=>d(p))}}const l=VE("auth");return l&&lb(n,`http://${l}`),n}function UR(){return document.getElementsByTagName("head")?.[0]??document}Ww({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ci("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",UR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xR("Browser");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,w0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function C(){}C.prototype=S.prototype,V.D=S.prototype,V.prototype=new C,V.prototype.constructor=V,V.C=function(O,x,k){for(var I=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)I[ke-2]=arguments[ke];return S.prototype[x].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)O[x]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(x=0;16>x;++x)O[x]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=V.g[0],C=V.g[1],x=V.g[2];var k=V.g[3],I=S+(k^C&(x^k))+O[0]+3614090360&4294967295;S=C+(I<<7&4294967295|I>>>25),I=k+(x^S&(C^x))+O[1]+3905402710&4294967295,k=S+(I<<12&4294967295|I>>>20),I=x+(C^k&(S^C))+O[2]+606105819&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(S^x&(k^S))+O[3]+3250441966&4294967295,C=x+(I<<22&4294967295|I>>>10),I=S+(k^C&(x^k))+O[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(x^S&(C^x))+O[5]+1200080426&4294967295,k=S+(I<<12&4294967295|I>>>20),I=x+(C^k&(S^C))+O[6]+2821735955&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(S^x&(k^S))+O[7]+4249261313&4294967295,C=x+(I<<22&4294967295|I>>>10),I=S+(k^C&(x^k))+O[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(x^S&(C^x))+O[9]+2336552879&4294967295,k=S+(I<<12&4294967295|I>>>20),I=x+(C^k&(S^C))+O[10]+4294925233&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(S^x&(k^S))+O[11]+2304563134&4294967295,C=x+(I<<22&4294967295|I>>>10),I=S+(k^C&(x^k))+O[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=k+(x^S&(C^x))+O[13]+4254626195&4294967295,k=S+(I<<12&4294967295|I>>>20),I=x+(C^k&(S^C))+O[14]+2792965006&4294967295,x=k+(I<<17&4294967295|I>>>15),I=C+(S^x&(k^S))+O[15]+1236535329&4294967295,C=x+(I<<22&4294967295|I>>>10),I=S+(x^k&(C^x))+O[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(S^C))+O[6]+3225465664&4294967295,k=S+(I<<9&4294967295|I>>>23),I=x+(S^C&(k^S))+O[11]+643717713&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(x^k))+O[0]+3921069994&4294967295,C=x+(I<<20&4294967295|I>>>12),I=S+(x^k&(C^x))+O[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(S^C))+O[10]+38016083&4294967295,k=S+(I<<9&4294967295|I>>>23),I=x+(S^C&(k^S))+O[15]+3634488961&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(x^k))+O[4]+3889429448&4294967295,C=x+(I<<20&4294967295|I>>>12),I=S+(x^k&(C^x))+O[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(S^C))+O[14]+3275163606&4294967295,k=S+(I<<9&4294967295|I>>>23),I=x+(S^C&(k^S))+O[3]+4107603335&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(x^k))+O[8]+1163531501&4294967295,C=x+(I<<20&4294967295|I>>>12),I=S+(x^k&(C^x))+O[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=k+(C^x&(S^C))+O[2]+4243563512&4294967295,k=S+(I<<9&4294967295|I>>>23),I=x+(S^C&(k^S))+O[7]+1735328473&4294967295,x=k+(I<<14&4294967295|I>>>18),I=C+(k^S&(x^k))+O[12]+2368359562&4294967295,C=x+(I<<20&4294967295|I>>>12),I=S+(C^x^k)+O[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^x)+O[8]+2272392833&4294967295,k=S+(I<<11&4294967295|I>>>21),I=x+(k^S^C)+O[11]+1839030562&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^S)+O[14]+4259657740&4294967295,C=x+(I<<23&4294967295|I>>>9),I=S+(C^x^k)+O[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^x)+O[4]+1272893353&4294967295,k=S+(I<<11&4294967295|I>>>21),I=x+(k^S^C)+O[7]+4139469664&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^S)+O[10]+3200236656&4294967295,C=x+(I<<23&4294967295|I>>>9),I=S+(C^x^k)+O[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^x)+O[0]+3936430074&4294967295,k=S+(I<<11&4294967295|I>>>21),I=x+(k^S^C)+O[3]+3572445317&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^S)+O[6]+76029189&4294967295,C=x+(I<<23&4294967295|I>>>9),I=S+(C^x^k)+O[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=k+(S^C^x)+O[12]+3873151461&4294967295,k=S+(I<<11&4294967295|I>>>21),I=x+(k^S^C)+O[15]+530742520&4294967295,x=k+(I<<16&4294967295|I>>>16),I=C+(x^k^S)+O[2]+3299628645&4294967295,C=x+(I<<23&4294967295|I>>>9),I=S+(x^(C|~k))+O[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~x))+O[7]+1126891415&4294967295,k=S+(I<<10&4294967295|I>>>22),I=x+(S^(k|~C))+O[14]+2878612391&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~S))+O[5]+4237533241&4294967295,C=x+(I<<21&4294967295|I>>>11),I=S+(x^(C|~k))+O[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~x))+O[3]+2399980690&4294967295,k=S+(I<<10&4294967295|I>>>22),I=x+(S^(k|~C))+O[10]+4293915773&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~S))+O[1]+2240044497&4294967295,C=x+(I<<21&4294967295|I>>>11),I=S+(x^(C|~k))+O[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~x))+O[15]+4264355552&4294967295,k=S+(I<<10&4294967295|I>>>22),I=x+(S^(k|~C))+O[6]+2734768916&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~S))+O[13]+1309151649&4294967295,C=x+(I<<21&4294967295|I>>>11),I=S+(x^(C|~k))+O[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=k+(C^(S|~x))+O[11]+3174756917&4294967295,k=S+(I<<10&4294967295|I>>>22),I=x+(S^(k|~C))+O[2]+718787259&4294967295,x=k+(I<<15&4294967295|I>>>17),I=C+(k^(x|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+k&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var C=S-this.blockSize,O=this.B,x=this.h,k=0;k<S;){if(x==0)for(;k<=C;)l(this,V,k),k+=this.blockSize;if(typeof V=="string"){for(;k<S;)if(O[x++]=V.charCodeAt(k++),x==this.blockSize){l(this,O),x=0;break}}else for(;k<S;)if(O[x++]=V[k++],x==this.blockSize){l(this,O),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var C=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=C&255,C/=256;for(this.u(V),V=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)V[C++]=this.g[S]>>>O&255;return V};function c(V,S){var C=p;return Object.prototype.hasOwnProperty.call(C,V)?C[V]:C[V]=S(V)}function d(V,S){this.h=S;for(var C=[],O=!0,x=V.length-1;0<=x;x--){var k=V[x]|0;O&&k==S||(C[x]=k,O=!1)}this.g=C}var p={};function g(V){return-128<=V&&128>V?c(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return R;if(0>V)return Z(y(-V));for(var S=[],C=1,O=0;V>=C;O++)S[O]=V/C|0,C*=4294967296;return new d(S,0)}function T(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return Z(T(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),O=R,x=0;x<V.length;x+=8){var k=Math.min(8,V.length-x),I=parseInt(V.substring(x,x+k),S);8>k?(k=y(Math.pow(S,k)),O=O.j(k).add(y(I))):(O=O.j(C),O=O.add(y(I)))}return O}var R=g(0),b=g(1),B=g(16777216);r=d.prototype,r.m=function(){if(J(this))return-Z(this).m();for(var V=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Y(this))return"0";if(J(this))return"-"+Z(this).toString(V);for(var S=y(Math.pow(V,6)),C=this,O="";;){var x=At(C,S).g;C=it(C,x.j(S));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(V);if(C=x,Y(C))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Y(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function J(V){return V.h==-1}r.l=function(V){return V=it(this,V),J(V)?-1:Y(V)?0:1};function Z(V){for(var S=V.g.length,C=[],O=0;O<S;O++)C[O]=~V.g[O];return new d(C,~V.h).add(b)}r.abs=function(){return J(this)?Z(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0,x=0;x<=S;x++){var k=O+(this.i(x)&65535)+(V.i(x)&65535),I=(k>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);O=I>>>16,k&=65535,I&=65535,C[x]=I<<16|k}return new d(C,C[C.length-1]&-2147483648?-1:0)};function it(V,S){return V.add(Z(S))}r.j=function(V){if(Y(this)||Y(V))return R;if(J(this))return J(V)?Z(this).j(Z(V)):Z(Z(this).j(V));if(J(V))return Z(this.j(Z(V)));if(0>this.l(B)&&0>V.l(B))return y(this.m()*V.m());for(var S=this.g.length+V.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var x=0;x<V.g.length;x++){var k=this.i(O)>>>16,I=this.i(O)&65535,ke=V.i(x)>>>16,ae=V.i(x)&65535;C[2*O+2*x]+=I*ae,et(C,2*O+2*x),C[2*O+2*x+1]+=k*ae,et(C,2*O+2*x+1),C[2*O+2*x+1]+=I*ke,et(C,2*O+2*x+1),C[2*O+2*x+2]+=k*ke,et(C,2*O+2*x+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new d(C,0)};function et(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function rt(V,S){this.g=V,this.h=S}function At(V,S){if(Y(S))throw Error("division by zero");if(Y(V))return new rt(R,R);if(J(V))return S=At(Z(V),S),new rt(Z(S.g),Z(S.h));if(J(S))return S=At(V,Z(S)),new rt(Z(S.g),S.h);if(30<V.g.length){if(J(V)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var C=b,O=S;0>=O.l(V);)C=mt(C),O=mt(O);var x=Rt(C,1),k=Rt(O,1);for(O=Rt(O,2),C=Rt(C,2);!Y(O);){var I=k.add(O);0>=I.l(V)&&(x=x.add(C),k=I),O=Rt(O,1),C=Rt(C,1)}return S=it(V,x.j(S)),new rt(x,S)}for(x=R;0<=V.l(S);){for(C=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=y(C),I=k.j(S);J(I)||0<I.l(V);)C-=O,k=y(C),I=k.j(S);Y(k)&&(k=b),x=x.add(k),V=it(V,I)}return new rt(x,V)}r.A=function(V){return At(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&V.i(O);return new d(C,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|V.i(O);return new d(C,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^V.i(O);return new d(C,this.h^V.h)};function mt(V){for(var S=V.g.length+1,C=[],O=0;O<S;O++)C[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(C,V.h)}function Rt(V,S){var C=S>>5;S%=32;for(var O=V.g.length-C,x=[],k=0;k<O;k++)x[k]=0<S?V.i(k+C)>>>S|V.i(k+C+1)<<32-S:V.i(k+C);return new d(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,w0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,Lr=d}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b0,Sl,R0,jc,fm,I0,C0,N0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dc=="object"&&Dc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in _))break t;_=_[L]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,L={next:function(){if(!A&&_<u.length){var H=_++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function R(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function b(u,m,_){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:R,b.apply(null,arguments)}function B(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function Y(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,L,H){for(var nt=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)nt[Mt-2]=arguments[Mt];return m.prototype[L].apply(A,nt)}}function J(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function Z(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const L=u.length||0,H=A.length||0;u.length=L+H;for(let nt=0;nt<H;nt++)u[L+nt]=A[nt]}else u.push(A)}}class it{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function et(u){return/^[\s\xa0]*$/.test(u)}function rt(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function At(u){return At[" "](u),u}At[" "]=function(){};var mt=rt().indexOf("Gecko")!=-1&&!(rt().toLowerCase().indexOf("webkit")!=-1&&rt().indexOf("Edge")==-1)&&!(rt().indexOf("Trident")!=-1||rt().indexOf("MSIE")!=-1)&&rt().indexOf("Edge")==-1;function Rt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function V(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)u[_]=A[_];for(let H=0;H<C.length;H++)_=C[H],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function x(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function k(u){p.setTimeout(()=>{throw u},0)}function I(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ke{constructor(){this.h=this.g=null}add(m,_){const A=ae.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new it(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let st,ht=!1,jt=new ke,N=()=>{const u=p.Promise.resolve(void 0);st=()=>{u.then(W)}};var W=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(_){k(_)}var m=ae;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ht=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var dt=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function It(u,m){if(tt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(mt){t:{try{At(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&It.aa.h.call(this)}}Y(It,tt);var Et={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Qn(u,m,_,A,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=L,this.key=++Wt,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yi(u){this.src=u,this.g={},this.h=0}yi.prototype.add=function(u,m,_,A,L){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var nt=Jr(u,m,A,L);return-1<nt?(m=u[nt],_||(m.fa=!1)):(m=new Qn(m,this.src,H,!!A,L),m.fa=_,u.push(m)),m};function Wr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],L=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Jr(u,m,_,A){for(var L=0;L<u.length;++L){var H=u[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return L}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),co={};function su(u,m,_,A,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)su(u,m[H],_,A,L);return null}return _=au(_),u&&u[Ne]?u.K(m,_,y(A)?!!A.capture:!1,L):En(u,m,_,!1,A,L)}function En(u,m,_,A,L,H){if(!m)throw Error("Invalid event type");var nt=y(L)?!!L.capture:!!L,Mt=Xs(u);if(Mt||(u[ts]=Mt=new yi(u)),_=Mt.add(m,_,A,nt,H),_.proxy)return _;if(A=kh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)dt||(L=nt),L===void 0&&(L=!1),u.addEventListener(m.toString(),A,L);else if(u.attachEvent)u.attachEvent(es(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function kh(){function u(_){return m.call(u.src,u.listener,_)}const m=Lh;return u}function ho(u,m,_,A,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)ho(u,m[H],_,A,L);else A=y(A)?!!A.capture:!!A,_=au(_),u&&u[Ne]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],_=Jr(H,_,A,L),-1<_&&(Wi(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Jr(m,_,A,L)),(_=-1<u?m[u]:null)&&Ys(_))}function Ys(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ne])Wr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(es(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Xs(m))?(Wr(_,u),_.h==0&&(_.src=null,m[ts]=null)):Wi(u)}}}function es(u){return u in co?co[u]:co[u]="on"+u}function Lh(u,m){if(u.da)u=!0;else{m=new It(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Ys(u),u=_.call(A,m)}return u}function Xs(u){return u=u[ts],u instanceof yi?u:null}var fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function au(u){return typeof u=="function"?u:(u[fo]||(u[fo]=function(m){return u.handleEvent(m)}),u[fo])}function oe(){at.call(this),this.i=new yi(this),this.M=this,this.F=null}Y(oe,at),oe.prototype[Ne]=!0,oe.prototype.removeEventListener=function(u,m,_,A){ho(this,u,m,_,A)};function Ft(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new tt(m,u);else if(m instanceof tt)m.target=m.target||u;else{var L=m;m=new tt(A,u),O(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var nt=m.g=_[H];L=un(nt,A,!0,m)&&L}if(nt=m.g=u,L=un(nt,A,!0,m)&&L,L=un(nt,A,!1,m)&&L,_)for(H=0;H<_.length;H++)nt=m.g=_[H],L=un(nt,A,!1,m)&&L}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Wi(_[A]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},oe.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function un(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var nt=m[H];if(nt&&!nt.da&&nt.capture==_){var Mt=nt.listener,we=nt.ha||nt.src;nt.fa&&Wr(u.i,nt),L=Mt.call(we,A)!==!1&&L}}return L&&!A.defaultPrevented}function Ge(u,m,_){if(typeof u=="function")_&&(u=b(u,_));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function ou(u){u.g=Ge(()=>{u.g=null,u.i&&(u.i=!1,ou(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Uh extends at{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){at.call(this),this.h=u,this.g={}}Y(ns,at);var is=[];function rs(u){Rt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Ys(m)},u),u.g={}}ns.prototype.N=function(){ns.aa.N.call(this),rs(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=p.JSON.stringify,$s=p.JSON.parse,ss=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function mo(){}mo.prototype.h=null;function po(u){return u.h||(u.h=u.i())}function go(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){tt.call(this,"d")}Y(vi,tt);function yo(){tt.call(this,"c")}Y(yo,tt);var Kn={},_o=null;function Ji(){return _o=_o||new oe}Kn.La="serverreachability";function Zs(u){tt.call(this,Kn.La,u)}Y(Zs,tt);function tr(u){const m=Ji();Ft(m,new Zs(m))}Kn.STAT_EVENT="statevent";function lu(u,m){tt.call(this,Kn.STAT_EVENT,u),this.stat=m}Y(lu,tt);function ne(u){const m=Ji();Ft(m,new lu(m,u))}Kn.Ma="timingevent";function Se(u,m){tt.call(this,Kn.Ma,u),this.size=m}Y(Se,tt);function pe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Tn(){this.g=!0}Tn.prototype.xa=function(){this.g=!1};function vo(u,m,_,A,L,H){u.info(function(){if(u.g)if(H)for(var nt="",Mt=H.split("&"),we=0;we<Mt.length;we++){var Pt=Mt[we].split("=");if(1<Pt.length){var Oe=Pt[0];Pt=Pt[1];var be=Oe.split("_");nt=2<=be.length&&be[1]=="type"?nt+(Oe+"="+Pt+"&"):nt+(Oe+"=redacted&")}}else nt=null;else nt=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+_+`
`+nt})}function jh(u,m,_,A,L,H,nt){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+nt})}function er(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+as(u,_)+(A?" "+A:"")})}function uu(u,m){u.info(function(){return"TIMEOUT: "+m})}Tn.prototype.info=function(){};function as(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var nt=1;nt<L.length;nt++)L[nt]=""}}}}return kn(_)}catch{return m}}var nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Xn(){}Y(Xn,mo),Xn.prototype.g=function(){return new XMLHttpRequest},Xn.prototype.i=function(){return{}},Yn=new Xn;function Je(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Eo={},Ws={};function Ln(u,m,_){u.L=1,u.v=hs(cn(m)),u.m=_,u.P=!0,Ti(u,null)}function Ti(u,m){u.F=Date.now(),os(u),u.A=cn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Ro(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=bu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Uh(b(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(is[0]=L.toString()),L=is);for(var H=0;H<L.length;H++){var nt=su(_,L[H],A||m.handleEvent,!1,m.h||m);if(!nt)break;m.g[nt.key]=nt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),tr(),vo(u.i,u.u,u.A,u.l,u.R,u.m)}Je.prototype.ca=function(u){u=u.target;const m=this.M;m&&bn(u)==3?m.j():this.Y(u)},Je.prototype.Y=function(u){try{if(u==this.g)t:{const be=bn(this.g);var m=this.g.Ba();const Ni=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||be!=4||m==7||(m==8||0>=Ni?tr(3):tr(2)),ir(this);var _=this.g.Z();this.X=_;e:if(cu(this)){var A=yu(this.g);u="";var L=A.length,H=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Le(this),$n(this);var nt="";break e}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==L-1)});A.length=0,this.h.g+=u,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=_==200,jh(this.i,this.u,this.A,this.l,this.R,be,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Mt,we=this.g;if((Mt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(Mt)){var Pt=Mt;break e}}Pt=null}if(_=Pt)er(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,_);else{this.o=!1,this.s=3,ne(12),Le(this),$n(this);break t}}if(this.P){_=!0;let Ue;for(;!this.J&&this.C<nt.length;)if(Ue=hu(this,nt),Ue==Ws){be==4&&(this.s=4,ne(14),_=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Eo){this.s=4,ne(15),er(this.i,this.l,nt,"[Invalid Chunk]"),_=!1;break}else er(this.i,this.l,Ue,null),ls(this,Ue);if(cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||nt.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)er(this.i,this.l,nt,"[Invalid Chunked Response]"),Le(this),$n(this);else if(0<nt.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),vs(Oe),Oe.M=!0,ne(11))}}else er(this.i,this.l,nt,null),ls(this,nt);be==4&&Le(this),this.o&&!this.J&&(be==4?Au(this.j,this):(this.o=!1,os(this)))}else Fh(this.g),_==400&&0<nt.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Le(this),$n(this)}}}catch{}finally{}};function cu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function hu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Ws:(_=Number(m.substring(_,A)),isNaN(_)?Eo:(A+=1,A+_>m.length?Ws:(m=m.slice(A,A+_),u.C=A+_,m)))}Je.prototype.cancel=function(){this.J=!0,Le(this)};function os(u){u.S=Date.now()+u.I,fu(u,u.I)}function fu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pe(b(u.ba,u),m)}function ir(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Je.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(uu(this.i,this.A),this.L!=2&&(tr(),ne(17)),Le(this),this.s=2,$n(this)):fu(this,this.S-u)};function $n(u){u.j.G==0||u.J||Au(u.j,u)}function Le(u){ir(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,rs(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ls(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||To(_.h,u))){if(!u.K&&To(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ca(_),la(_);else break t;Oo(_),ne(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=pe(b(_.Za,_),6e3));if(1>=ta(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ci(_,11)}else if((u.K||_.g==u)&&ca(_),!et(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Pt=L[m];if(_.T=Pt[0],Pt=Pt[1],_.G==2)if(Pt[0]=="c"){_.K=Pt[1],_.ia=Pt[2];const Oe=Pt[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const be=Pt[4];be!=null&&(_.Aa=be,_.j.info("SVER="+_.Aa));const Ni=Pt[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(A=1.5*Ni,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Ue=u.g;if(Ue){const ii=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var H=A.h;H.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ea(H,H.h),H.h=null))}if(A.D){const xo=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(A.ya=xo,Kt(A.I,A.D,xo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var nt=u;if(A.qa=wu(A,A.J?A.ia:null,A.W),nt.K){tn(A.h,nt);var Mt=nt,we=A.L;we&&(Mt.I=we),Mt.B&&(ir(Mt),os(Mt)),A.g=nt}else Eu(A);0<_.i.length&&ua(_)}else Pt[0]!="stop"&&Pt[0]!="close"||Ci(_,7);else _.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Ci(_,7):No(_):Pt[0]!="noop"&&_.l&&_.l.ta(Pt),_.v=0)}}tr(4)}catch{}}var du=class{constructor(u,m){this.g=u,this.map=m}};function Ai(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function To(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function tn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ai.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return J(u.i)}function zh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=na(u),A=zh(u),L=A.length,H=0;H<L;H++)m.call(void 0,A[H],_&&_[H],u)}var us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),L=null;if(0<=A){var H=u[_].substring(0,A);L=u[_].substring(A+1)}else H=u[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ge(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ge){this.h=u.h,cs(this,u.j),this.o=u.o,this.g=u.g,rr(this,u.s),this.l=u.l;var m=u.i,_=new wi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Si(this,_),this.m=u.m}else u&&(m=String(u).match(us))?(this.h=!1,cs(this,m[1]||"",!0),this.o=An(m[2]||""),this.g=An(m[3]||"",!0),rr(this,m[4]),this.l=An(m[5]||"",!0),Si(this,m[6]||"",!0),this.m=An(m[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}ge.prototype.toString=function(){var u=[],m=this.j;m&&u.push(fs(m,wo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(fs(m,wo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(fs(_,_.charAt(0)=="/"?qh:bo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",fs(_,ia)),u.join("")};function cn(u){return new ge(u)}function cs(u,m,_){u.j=_?An(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function rr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Si(u,m,_){m instanceof wi?(u.i=m,pu(u.i,u.h)):(_||(m=fs(m,Hh)),u.i=new wi(m,u.h))}function Kt(u,m,_){u.i.set(m,_)}function hs(u){return Kt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function An(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fs(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,mu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wo=/[#\/\?@]/g,bo=/[#\?:]/g,qh=/[#\?]/g,Hh=/[#\?@]/g,ia=/#/g;function wi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Sn(u){u.g||(u.g=new Map,u.h=0,u.i&&Bh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=wi.prototype,r.add=function(u,m){Sn(this),this.i=null,u=Zn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function bi(u,m){Sn(u),m=Zn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ri(u,m){return Sn(u),m=Zn(u,m),u.g.has(m)}r.forEach=function(u,m){Sn(this),this.g.forEach(function(_,A){_.forEach(function(L){u.call(m,L,A,this)},this)},this)},r.na=function(){Sn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const L=u[A];for(let H=0;H<L.length;H++)_.push(m[A])}return _},r.V=function(u){Sn(this);let m=[];if(typeof u=="string")Ri(this,u)&&(m=m.concat(this.g.get(Zn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Sn(this),this.i=null,u=Zn(this,u),Ri(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ro(u,m,_){bi(u,m),0<_.length&&(u.i=null,u.g.set(Zn(u,m),J(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),nt=this.V(A);for(A=0;A<nt.length;A++){var L=H;nt[A]!==""&&(L+="="+encodeURIComponent(String(nt[A]))),u.push(L)}}return this.i=u.join("&")};function Zn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function pu(u,m){m&&!u.j&&(Sn(u),u.i=null,u.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(bi(this,A),Ro(this,L,_))},u)),u.j=m}function ds(u,m){const _=new Tn;if(p.Image){const A=new Image;A.onload=B(wn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=B(wn,_,"TestLoadImage: error",!1,m,A),A.onabort=B(wn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=B(wn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Un(u,m){const _=new Tn,A=new AbortController,L=setTimeout(()=>{A.abort(),wn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?wn(_,"TestPingServer: ok",!0,m):wn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),wn(_,"TestPingServer: error",!1,m)})}function wn(u,m,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function ms(){this.g=new ss}function Wn(u,m,_){const A=_||"";try{So(u,function(L,H){let nt=L;y(L)&&(nt=kn(L)),m.push(A+H+"="+encodeURIComponent(nt))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function sr(u){this.l=u.Ub||null,this.j=u.eb||!1}Y(sr,mo),sr.prototype.g=function(){return new Ii(this.l,this.j)},sr.prototype.i=(function(u){return function(){return u}})({});function Ii(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Ii,oe),r=Ii.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ti(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Io(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Io(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jn(this):ti(this),this.readyState==3&&Io(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},r.Qa=function(u){this.g&&(this.response=u,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ti(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ti(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Co(u){let m="";return Rt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function De(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Co(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Kt(u,m,_))}function qt(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(qt,oe);var ra=/^https?$/i,ps=["POST","PUT"];r=qt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?po(this.o):po(Yn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){gu(this,H);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ps,m,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,nt]of _)this.g.setRequestHeader(H,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gs(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){gu(this,H)}};function gu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,sa(u),ei(u)}function sa(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},r.bb=function(){aa(this)};function aa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||bn(u)!=4||u.Z()!=2)){if(u.u&&bn(u)==4)Ge(u.Ea,0,u);else if(Ft(u,"readystatechange"),bn(u)==4){u.h=!1;try{const nt=u.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=nt===0){var L=String(u.D).match(us)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),A=!ra.test(L?L.toLowerCase():"")}_=A}if(_)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var H=2<bn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",sa(u)}}finally{ei(u)}}}}function ei(u,m){if(u.g){gs(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ft(u,"ready");try{_.onreadystatechange=A}catch{}}}function gs(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function bn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),$s(m)}};function yu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fh(u){const m={};u=(u.g&&2<=bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(et(u[A]))continue;var _=x(u[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}V(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function oa(u){this.Aa=0,this.i=[],this.j=new Tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,u),this.cb=ys("retryDelaySeedMs",1e4,u),this.Wa=ys("forwardChannelMaxRetries",2,u),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(u&&u.concurrentRequestLimit),this.Da=new ms,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=oa.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ne(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=wu(this,null,this.W),ua(this)};function No(u){if(_u(u),u.G==3){var m=u.U++,_=cn(u.I);if(Kt(_,"SID",u.K),Kt(_,"RID",m),Kt(_,"TYPE","terminate"),_s(u,_),m=new Je(u,u.j,m),m.L=2,m.v=hs(cn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=bu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),os(m)}Su(u)}function la(u){u.g&&(vs(u),u.g.cancel(),u.g=null)}function _u(u){la(u),u.u&&(p.clearTimeout(u.u),u.u=null),ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ua(u){if(!Js(u.h)&&!u.s){u.s=!0;var m=u.Ga;st||N(),ht||(st(),ht=!0),jt.add(m,u),u.B=0}}function Gh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pe(b(u.Ga,u,m),Vo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Je(this,this.j,u);let H=this.o;if(this.S&&(H?(H=S(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=vu(this,L,m),_=cn(this.I),Kt(_,"RID",u),Kt(_,"CVER",22),this.D&&Kt(_,"X-HTTP-Session-Id",this.D),_s(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(Co(H)))+"&"+m:this.m&&De(_,this.m,H)),ea(this.h,L),this.Ua&&Kt(_,"TYPE","init"),this.P?(Kt(_,"$req",m),Kt(_,"SID","null"),L.T=!0,Ln(L,_,null)):Ln(L,_,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||Js(this.h)||Do(this))};function Do(u,m){var _;m?_=m.l:_=u.U++;const A=cn(u.I);Kt(A,"SID",u.K),Kt(A,"RID",_),Kt(A,"AID",u.T),_s(u,A),u.m&&u.o&&De(A,u.m,u.o),_=new Je(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=vu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,_),Ln(_,A,m)}function _s(u,m){u.H&&Rt(u.H,function(_,A){Kt(m,A,_)}),u.l&&So({},function(_,A){Kt(m,A,_)})}function vu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?b(u.l.Na,u.l,u):null;t:{var L=u.i;let H=-1;for(;;){const nt=["count="+_];H==-1?0<_?(H=L[0].g,nt.push("ofs="+H)):H=0:nt.push("ofs="+H);let Mt=!0;for(let we=0;we<_;we++){let Pt=L[we].g;const Oe=L[we].map;if(Pt-=H,0>Pt)H=Math.max(0,L[we].g-100),Mt=!1;else try{Wn(Oe,nt,"req"+Pt+"_")}catch{A&&A(Oe)}}if(Mt){A=nt.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function Eu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;st||N(),ht||(st(),ht=!0),jt.add(m,u),u.v=0}}function Oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pe(b(u.Fa,u),Vo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pe(b(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),la(this),Tu(this))};function vs(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Tu(u){u.g=new Je(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=cn(u.qa);Kt(m,"RID","rpc"),Kt(m,"SID",u.K),Kt(m,"AID",u.T),Kt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Kt(m,"TO",u.ja),Kt(m,"TYPE","xmlhttp"),_s(u,m),u.m&&u.o&&De(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=hs(cn(m)),_.m=null,_.P=!0,Ti(_,u)}r.Za=function(){this.C!=null&&(this.C=null,la(this),Oo(this),ne(19))};function ca(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Au(u,m){var _=null;if(u.g==m){ca(u),vs(u),u.g=null;var A=2}else if(To(u.h,m))_=m.D,tn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;A=Ji(),Ft(A,new Se(A,_)),ua(u)}else Eu(u);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Gh(u,m)||A==2&&Oo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Ci(u,5);break;case 4:Ci(u,10);break;case 3:Ci(u,6);break;default:Ci(u,2)}}}function Vo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ci(u,m){if(u.j.info("Error code "+m),m==2){var _=b(u.fb,u),A=u.Xa;const L=!A;A=new ge(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||cs(A,"https"),hs(A),L?ds(A.toString(),_):Un(A.toString(),_)}else ne(2);u.G=0,u.l&&u.l.sa(m),Su(u),_u(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Su(u){if(u.G=0,u.ka=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,J(u.i),u.i.length=0),u.l.ra()}}function wu(u,m,_){var A=_ instanceof ge?cn(_):new ge(_);if(A.g!="")m&&(A.g=m+"."+A.g),rr(A,A.s);else{var L=p.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new ge(null);A&&cs(H,A),m&&(H.g=m),L&&rr(H,L),_&&(H.l=_),A=H}return _=u.D,m=u.ya,_&&m&&Kt(A,_,m),Kt(A,"VER",u.la),_s(u,A),A}function bu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qt(new sr({eb:_})):new qt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}r=Ru.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ha(){}ha.prototype.g=function(u,m){return new en(u,m)};function en(u,m){oe.call(this),this.g=new oa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!et(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!et(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ni(this)}Y(en,oe),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){No(this.g)},en.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=kn(u),u=_);m.i.push(new du(m.Ya++,u)),m.G==3&&ua(m)},en.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,en.aa.N.call(this)};function Iu(u){vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Y(Iu,vi);function Cu(){yo.call(this),this.status=1}Y(Cu,yo);function ni(u){this.g=u}Y(ni,Ru),ni.prototype.ua=function(){Ft(this.g,"a")},ni.prototype.ta=function(u){Ft(this.g,new Iu(u))},ni.prototype.sa=function(u){Ft(this.g,new Cu)},ni.prototype.ra=function(){Ft(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,N0=function(){return new ha},C0=function(){return Ji()},I0=Kn,fm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nr.NO_ERROR=0,nr.TIMEOUT=8,nr.HTTP_ERROR=6,jc=nr,Ei.COMPLETE="complete",R0=Ei,go.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",oe.prototype.listen=oe.prototype.K,Sl=go,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,b0=qt}).apply(typeof Dc<"u"?Dc:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Cv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Vm("@firebase/firestore");function za(){return jr.logLevel}function jR(r){jr.setLogLevel(r)}function lt(r,...t){if(jr.logLevel<=Ot.DEBUG){const n=t.map(Hm);jr.debug(`Firestore (${ao}): ${r}`,...n)}}function Xi(r,...t){if(jr.logLevel<=Ot.ERROR){const n=t.map(Hm);jr.error(`Firestore (${ao}): ${r}`,...n)}}function Za(r,...t){if(jr.logLevel<=Ot.WARN){const n=t.map(Hm);jr.warn(`Firestore (${ao}): ${r}`,...n)}}function Hm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,D0(r,s,n)}function D0(r,t,n){let s=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Xi(s),new Error(s)}function Ht(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||D0(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends Zi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class BR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qR{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ht(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qi)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ht(typeof s.accessToken=="string",31837,{l:s}),new O0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ht(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class HR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new HR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ht(this.o===void 0,3512);const s=c=>{c.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,lt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=QR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function dm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return $d(l)===$d(c)?Vt(l,c):$d(l)?1:-1}return Vt(r.length,t.length)}const KR=55296,YR=57343;function $d(r){const t=r.charCodeAt(0);return t>=KR&&t<=YR}function Wa(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class ui{constructor(t,n,s){n===void 0?n=0:n>t.length&&_t(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&_t(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ui.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ui?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ui.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Vt(t.length,n.length)}static compareSegments(t,n){const s=ui.isNumericId(t),l=ui.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ui.extractNumericId(t).compare(ui.extractNumericId(n)):dm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Lr.fromString(t.substring(4,t.length-2))}}class te extends ui{construct(t,n,s){return new te(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ot(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new te(n)}static emptyPath(){return new te([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ui{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return XR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new He([Dv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ot(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new ot(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ot(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new ot(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(te.fromString(t))}static fromName(t){return new ft(te.fromString(t).popFirst(5))}static empty(){return new ft(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&te.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return te.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new te(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r,t,n){if(!n)throw new ot(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function $R(r,t,n,s){if(t===!0&&s===!0)throw new ot(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Ov(r){if(!ft.isDocumentKey(r))throw new ot(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vv(r){if(ft.isDocumentKey(r))throw new ot(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function x0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":_t(12329,{type:typeof r})}function Pn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(r);throw new ot(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,t){const n={typeString:r};return t&&(n.value=t),n}function Zl(r,t){if(!x0(r))throw new ot(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ot(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-62135596800,Mv=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Mv);return new ee(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ot(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<xv)throw new ot(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mv}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Zl(t,ee._jsonSchema))return new ee(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-xv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:Te("string",ee._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new ee(0,0))}static max(){return new Tt(new ee(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function ZR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Tt.fromTimestamp(s===1e9?new ee(n+1,0):new ee(n,s));return new zr(l,ft.empty(),t)}function WR(r){return new zr(r.readTime,r.key,Ll)}class zr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new zr(Tt.min(),ft.empty(),Ll)}static max(){return new zr(Tt.max(),ft.empty(),Ll)}}function JR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==tI)throw r;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):$.reject(n)}static resolve(t){return new $(((n,s)=>{n(t)}))}static reject(t){return new $(((n,s)=>{s(t)}))}static waitFor(t){return new $(((n,s)=>{let l=0,c=0,d=!1;t.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new $(((s,l)=>{const c=t.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(t,n){return new $(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function nI(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=-1;function vh(r){return r==null}function th(r){return r===0&&1/r==-1/0}function iI(r){return typeof r=="number"&&Number.isInteger(r)&&!th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="";function rI(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Pv(t)),t=sI(r.get(n),t);return Pv(t)}function sI(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case M0:n+="";break;default:n+=c}}return n}function Pv(r){return r+M0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Xr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function P0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Oc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Oc(this.root,t,this.comparator,!0)}}class Oc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(t){return new Lv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class Lv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new _n([])}unionWith(t){let n=new Ce(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new _n(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wa(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new k0("Invalid base64 string: "+c):c}})(t);return new Fe(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const aI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(r){if(Ht(!!r,39018),typeof r=="string"){let t=0;const n=aI.exec(r);if(Ht(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qr(r){return typeof r=="string"?Fe.fromBase64String(r):Fe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="server_timestamp",U0="__type__",j0="__previous_value__",z0="__local_write_time__";function Qm(r){return(r?.mapValue?.fields||{})[U0]?.stringValue===L0}function Eh(r){const t=r.mapValue.fields[j0];return Qm(t)?Eh(t):t}function Ul(r){const t=Br(r.mapValue.fields[z0].timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,s,l,c,d,p,g,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const eh="(default)";class jl{constructor(t,n){this.projectId=t,this.database=n||eh}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===eh}isEqual(t){return t instanceof jl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__type__",lI="__max__",Vc={mapValue:{}},q0="__vector__",nh="value";function Hr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qm(r)?4:cI(r)?9007199254740991:uI(r)?10:11:_t(28295,{value:r})}function gi(r,t){if(r===t)return!0;const n=Hr(r);if(n!==Hr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ul(r).isEqual(Ul(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Br(l.timestampValue),p=Br(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return qr(l.bytesValue).isEqual(qr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),p=de(c.doubleValue);return d===p?th(d)===th(p):isNaN(d)&&isNaN(p)}return!1})(r,t);case 9:return Wa(r.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(kv(d)!==kv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!gi(d[g],p[g])))return!1;return!0})(r,t);default:return _t(52216,{left:r})}}function zl(r,t){return(r.values||[]).find((n=>gi(n,t)))!==void 0}function Ja(r,t){if(r===t)return 0;const n=Hr(r),s=Hr(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const p=de(c.integerValue||c.doubleValue),g=de(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Uv(r.timestampValue,t.timestampValue);case 4:return Uv(Ul(r),Ul(t));case 5:return dm(r.stringValue,t.stringValue);case 6:return(function(c,d){const p=qr(c),g=qr(d);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=Vt(p[y],g[y]);if(T!==0)return T}return Vt(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const p=Vt(de(c.latitude),de(d.latitude));return p!==0?p:Vt(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return jv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[nh]?.arrayValue,T=g[nh]?.arrayValue,R=Vt(y?.values?.length||0,T?.values?.length||0);return R!==0?R:jv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Vc.mapValue&&d===Vc.mapValue)return 0;if(c===Vc.mapValue)return 1;if(d===Vc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let R=0;R<g.length&&R<T.length;++R){const b=dm(g[R],T[R]);if(b!==0)return b;const B=Ja(p[g[R]],y[T[R]]);if(B!==0)return B}return Vt(g.length,T.length)})(r.mapValue,t.mapValue);default:throw _t(23264,{he:n})}}function Uv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Br(r),s=Br(t),l=Vt(n.seconds,s.seconds);return l!==0?l:Vt(n.nanos,s.nanos)}function jv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ja(n[l],s[l]);if(c)return c}return Vt(n.length,s.length)}function to(r){return mm(r)}function mm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Br(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return qr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ft.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=mm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${mm(n.fields[d])}`;return l+"}"})(r.mapValue):_t(61005,{value:r})}function zc(r){switch(Hr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eh(r);return t?16+zc(t):16;case 5:return 2*r.stringValue.length;case 6:return qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+zc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Xr(s.fields,((c,d)=>{l+=c.length+zc(d)})),l})(r.mapValue);default:throw _t(13486,{value:r})}}function zv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function pm(r){return!!r&&"integerValue"in r}function Km(r){return!!r&&"arrayValue"in r}function Bv(r){return!!r&&"nullValue"in r}function qv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bc(r){return!!r&&"mapValue"in r}function uI(r){return(r?.mapValue?.fields||{})[B0]?.stringValue===q0}function Nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Xr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Nl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nl(r.arrayValue.values[n]);return t}return{...r}}function cI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===lI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.value=t}static empty(){return new ln({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Bc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nl(n)}setAll(t){let n=He.emptyPath(),s={},l=[];t.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Nl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Bc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Xr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new ln(Nl(this.value))}}function H0(r){const t=[];return Xr(r.fields,((n,s)=>{const l=new He([n]);if(Bc(s)){const c=H0(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new _n(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,s,l,c,d,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(t){return new Ze(t,0,Tt.min(),Tt.min(),Tt.min(),ln.empty(),0)}static newFoundDocument(t,n,s,l){return new Ze(t,1,n,Tt.min(),s,l,0)}static newNoDocument(t,n){return new Ze(t,2,n,Tt.min(),Tt.min(),ln.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,Tt.min(),Tt.min(),ln.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n){this.position=t,this.inclusive=n}}function Hv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),n.key):s=Ja(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Fv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!gi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,n="asc"){this.field=t,this.dir=n}}function hI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{}class Ee extends F0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new dI(t,n,s):n==="array-contains"?new gI(t,s):n==="in"?new yI(t,s):n==="not-in"?new _I(t,s):n==="array-contains-any"?new vI(t,s):new Ee(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new mI(t,s):new pI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ja(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends F0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Gn(t,n)}matches(t){return G0(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function G0(r){return r.op==="and"}function Q0(r){return fI(r)&&G0(r)}function fI(r){for(const t of r.filters)if(t instanceof Gn)return!1;return!0}function gm(r){if(r instanceof Ee)return r.field.canonicalString()+r.op.toString()+to(r.value);if(Q0(r))return r.filters.map((t=>gm(t))).join(",");{const t=r.filters.map((n=>gm(n))).join(",");return`${r.op}(${t})`}}function K0(r,t){return r instanceof Ee?(function(s,l){return l instanceof Ee&&s.op===l.op&&s.field.isEqual(l.field)&&gi(s.value,l.value)})(r,t):r instanceof Gn?(function(s,l){return l instanceof Gn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&K0(d,l.filters[p])),!0):!1})(r,t):void _t(19439)}function Y0(r){return r instanceof Ee?(function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`})(r):r instanceof Gn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Y0).join(" ,")+"}"})(r):"Filter"}class dI extends Ee{constructor(t,n,s){super(t,n,s),this.key=ft.fromName(s.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class mI extends Ee{constructor(t,n){super(t,"in",n),this.keys=X0("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class pI extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=X0("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function X0(r,t){return(t.arrayValue?.values||[]).map((n=>ft.fromName(n.referenceValue)))}class gI extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Km(n)&&zl(n.arrayValue,this.value)}}class yI extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class _I extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class vI extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Km(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>zl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n=null,s=[],l=[],c=null,d=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Gv(r,t=null,n=[],s=[],l=null,c=null,d=null){return new EI(r,t,n,s,l,c,d)}function Ym(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>gm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),vh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>to(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>to(s))).join(",")),t.Te=n}return t.Te}function Xm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!hI(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!K0(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Fv(r.startAt,t.startAt)&&Fv(r.endAt,t.endAt)}function ym(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TI(r,t,n,s,l,c,d,p){return new Wl(r,t,n,s,l,c,d,p)}function Th(r){return new Wl(r)}function Qv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function $0(r){return r.collectionGroup!==null}function Dl(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ce(He.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new rh(c,s))})),n.has(He.keyField().canonicalString())||t.Ie.push(new rh(He.keyField(),s))}return t.Ie}function fi(r){const t=St(r);return t.Ee||(t.Ee=AI(t,Dl(r))),t.Ee}function AI(r,t){if(r.limitType==="F")return Gv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new rh(l.field,c)}));const n=r.endAt?new ih(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ih(r.startAt.position,r.startAt.inclusive):null;return Gv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function _m(r,t){const n=r.filters.concat([t]);return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function sh(r,t,n){return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Ah(r,t){return Xm(fi(r),fi(t))&&r.limitType===t.limitType}function Z0(r){return`${Ym(fi(r))}|lt:${r.limitType}`}function Ba(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>Y0(l))).join(", ")}]`),vh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>to(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>to(l))).join(",")),`Target(${s})`})(fi(r))}; limitType=${r.limitType})`}function Sh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Hv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Dl(s),l)||s.endAt&&!(function(d,p,g){const y=Hv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Dl(s),l))})(r,t)}function SI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function W0(r){return(t,n)=>{let s=!1;for(const l of Dl(r)){const c=wI(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function wI(r,t,n){const s=r.field.isKeyField()?ft.comparator(t.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Ja(g,y):_t(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _t(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return P0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new se(ft.comparator);function $i(){return bI}const J0=new se(ft.comparator);function wl(...r){let t=J0;for(const n of r)t=t.insert(n.key,n);return t}function tT(r){let t=J0;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function ks(){return Ol()}function eT(){return Ol()}function Ol(){return new Qs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const RI=new se(ft.comparator),II=new Ce(ft.comparator);function xt(...r){let t=II;for(const n of r)t=t.add(n);return t}const CI=new Ce(Vt);function NI(){return CI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(t)?"-0":t}}function nT(r){return{integerValue:""+r}}function DI(r,t){return iI(t)?nT(t):$m(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function OI(r,t,n){return r instanceof Bl?(function(l,c){const d={fields:{[U0]:{stringValue:L0},[z0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Qm(c)&&(c=Eh(c)),c&&(d.fields[j0]=c),{mapValue:d}})(n,t):r instanceof ql?rT(r,t):r instanceof Hl?sT(r,t):(function(l,c){const d=iT(l,c),p=Kv(d)+Kv(l.Ae);return pm(d)&&pm(l.Ae)?nT(p):$m(l.serializer,p)})(r,t)}function VI(r,t,n){return r instanceof ql?rT(r,t):r instanceof Hl?sT(r,t):n}function iT(r,t){return r instanceof ah?(function(s){return pm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Bl extends wh{}class ql extends wh{constructor(t){super(),this.elements=t}}function rT(r,t){const n=aT(t);for(const s of r.elements)n.some((l=>gi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Hl extends wh{constructor(t){super(),this.elements=t}}function sT(r,t){let n=aT(t);for(const s of r.elements)n=n.filter((l=>!gi(l,s)));return{arrayValue:{values:n}}}class ah extends wh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Kv(r){return de(r.integerValue||r.doubleValue)}function aT(r){return Km(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,n){this.field=t,this.transform=n}}function MI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?Wa(s.elements,l.elements,gi):s instanceof ah&&l instanceof ah?gi(s.Ae,l.Ae):s instanceof Bl&&l instanceof Bl})(r.transform,t.transform)}class PI{constructor(t,n){this.version=t,this.transformResults=n}}class vn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new vn}static exists(t){return new vn(void 0,t)}static updateTime(t){return new vn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class bh{}function oT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Zm(r.key,vn.none()):new Jl(r.key,r.data,vn.none());{const n=r.data,s=ln.empty();let l=new Ce(He.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new $r(r.key,s,new _n(l.toArray()),vn.none())}}function kI(r,t,n){r instanceof Jl?(function(l,c,d){const p=l.value.clone(),g=Xv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):r instanceof $r?(function(l,c,d){if(!qc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Xv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(lT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Vl(r,t,n,s){return r instanceof Jl?(function(c,d,p,g){if(!qc(c.precondition,d))return p;const y=c.value.clone(),T=$v(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof $r?(function(c,d,p,g){if(!qc(c.precondition,d))return p;const y=$v(c.fieldTransforms,g,d),T=d.data;return T.setAll(lT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(r,t,n,s):(function(c,d,p){return qc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,t,n)}function LI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=iT(s.transform,l||null);c!=null&&(n===null&&(n=ln.empty()),n.set(s.field,c))}return n||null}function Yv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Wa(s,l,((c,d)=>MI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Jl extends bh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class $r extends bh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function lT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Xv(r,t,n){const s=new Map;Ht(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=t.data.field(c.field);s.set(c.field,VI(d,p,n[l]))}return s}function $v(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,OI(c,d,t))}return s}class Zm extends bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UI extends bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&kI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=eT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=oT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Tt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),xt())}isEqual(t){return this.batchId===t.batchId&&Wa(this.mutations,t.mutations,((n,s)=>Yv(n,s)))&&Wa(this.baseMutations,t.baseMutations,((n,s)=>Yv(n,s)))}}class Wm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ht(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return RI})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Wm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Lt;function qI(r){switch(r){case K.OK:return _t(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return _t(15467,{code:r})}}function uT(r){if(r===void 0)return Xi("GRPC error has no .code"),K.UNKNOWN;switch(r){case ve.OK:return K.OK;case ve.CANCELLED:return K.CANCELLED;case ve.UNKNOWN:return K.UNKNOWN;case ve.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ve.INTERNAL:return K.INTERNAL;case ve.UNAVAILABLE:return K.UNAVAILABLE;case ve.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ve.NOT_FOUND:return K.NOT_FOUND;case ve.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ve.ABORTED:return K.ABORTED;case ve.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ve.DATA_LOSS:return K.DATA_LOSS;default:return _t(39323,{code:r})}}(Lt=ve||(ve={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Lr([4294967295,4294967295],0);function Zv(r){const t=HI().encode(r),n=new w0;return n.update(t),new Uint8Array(n.digest())}function Wv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Lr([n,s],0),new Lr([l,c],0)]}class Jm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(s<0)throw new bl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Lr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Lr.fromNumber(s)));return l.compare(FI)===1&&(l=new Lr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Zv(t),[s,l]=Wv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Jm(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(t){if(this.ge===0)return;const n=Zv(t),[s,l]=Wv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,tu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Rh(Tt.min(),l,new se(Vt),$i(),xt())}}class tu{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new tu(s,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class cT{constructor(t,n){this.targetId=t,this.Ce=n}}class hT{constructor(t,n,s=Fe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Jv{constructor(){this.ve=0,this.Fe=tE(),this.Me=Fe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xt(),n=xt(),s=xt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:_t(38017,{changeType:c})}})),new tu(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=tE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GI{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=xc(),this.He=xc(),this.Ye=new se(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(ym(c))if(s===0){const d=new ft(c.path);this.et(n,d,Ze.newNoDocument(d,Tt.min()))}else Ht(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(t),g=p?this.ct(p,t,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=qr(s).toUint8Array()}catch(g){if(g instanceof k0)return Za("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Jm(d,l,c)}catch(g){return Za(g instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&ym(p.target)){const g=new ft(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Ze.newNoDocument(g,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=xt();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Rh(t,n,this.Ye,this.je,s);return this.je=$i(),this.Je=xc(),this.He=xc(),this.Ye=new se(Vt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Jv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Jv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function xc(){return new se(ft.comparator)}function tE(){return new se(ft.comparator)}const QI={asc:"ASCENDING",desc:"DESCENDING"},KI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YI={and:"AND",or:"OR"};class XI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function vm(r,t){return r.useProto3Json||vh(t)?t:{value:t}}function oh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function $I(r,t){return oh(r,t.toTimestamp())}function di(r){return Ht(!!r,49232),Tt.fromTimestamp((function(n){const s=Br(n);return new ee(s.seconds,s.nanos)})(r))}function tp(r,t){return Em(r,t).canonicalString()}function Em(r,t){const n=(function(l){return new te(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function dT(r){const t=te.fromString(r);return Ht(_T(t),10190,{key:t.toString()}),t}function Tm(r,t){return tp(r.databaseId,t.path)}function Zd(r,t){const n=dT(t);if(n.get(1)!==r.databaseId.projectId)throw new ot(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ot(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ft(pT(n))}function mT(r,t){return tp(r.databaseId,t)}function ZI(r){const t=dT(r);return t.length===4?te.emptyPath():pT(t)}function Am(r){return new te(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function pT(r){return Ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function eE(r,t,n){return{name:Tm(r,t),fields:n.value.mapValue.fields}}function WI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_t(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Ht(T===void 0||typeof T=="string",58123),Fe.fromBase64String(T||"")):(Ht(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Fe.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?K.UNKNOWN:uT(y.code);return new ot(T,y.message||"")})(d);n=new hT(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Zd(r,s.document.name),c=di(s.document.updateTime),d=s.document.createTime?di(s.document.createTime):Tt.min(),p=new ln({mapValue:{fields:s.document.fields}}),g=Ze.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Hc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Zd(r,s.document),c=s.readTime?di(s.readTime):Tt.min(),d=Ze.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Hc([],p,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Zd(r,s.document),c=s.removedTargetIds||[];n=new Hc([],c,l,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new BI(l,c),p=s.targetId;n=new cT(p,d)}}return n}function JI(r,t){let n;if(t instanceof Jl)n={update:eE(r,t.key,t.value)};else if(t instanceof Zm)n={delete:Tm(r,t.key)};else if(t instanceof $r)n={update:eE(r,t.key,t.data),updateMask:l2(t.fieldMask)};else{if(!(t instanceof UI))return _t(16599,{Vt:t.type});n={verify:Tm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Bl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ql)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ah)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw _t(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:$I(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_t(27497)})(r,t.precondition)),n}function t2(r,t){return r&&r.length>0?(Ht(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?di(l.updateTime):di(c);return d.isEqual(Tt.min())&&(d=di(c)),new PI(d,l.transformResults||[])})(n,t)))):[]}function e2(r,t){return{documents:[mT(r,t.path)]}}function n2(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=mT(r,l);const c=(function(y){if(y.length!==0)return yT(Gn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(b){return{field:qa(b.field),direction:s2(b.dir)}})(T)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const p=vm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function i2(r){let t=ZI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ht(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(R){const b=gT(R);return b instanceof Gn&&Q0(b)?b.getFilters():[b]})(n.where));let d=[];n.orderBy&&(d=(function(R){return R.map((b=>(function(Y){return new rh(Ha(Y.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(b)))})(n.orderBy));let p=null;n.limit&&(p=(function(R){let b;return b=typeof R=="object"?R.value:R,vh(b)?null:b})(n.limit));let g=null;n.startAt&&(g=(function(R){const b=!!R.before,B=R.values||[];return new ih(B,b)})(n.startAt));let y=null;return n.endAt&&(y=(function(R){const b=!R.before,B=R.values||[];return new ih(B,b)})(n.endAt)),TI(t,l,d,c,p,"F",g,y)}function r2(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function gT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ha(n.unaryFilter.field);return Ee.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ha(n.unaryFilter.field);return Ee.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ha(n.unaryFilter.field);return Ee.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ha(n.unaryFilter.field);return Ee.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ee.create(Ha(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Gn.create(n.compositeFilter.filters.map((s=>gT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(n.compositeFilter.op))})(r):_t(30097,{filter:r})}function s2(r){return QI[r]}function a2(r){return KI[r]}function o2(r){return YI[r]}function qa(r){return{fieldPath:r.canonicalString()}}function Ha(r){return He.fromServerFormat(r.fieldPath)}function yT(r){return r instanceof Ee?(function(n){if(n.op==="=="){if(qv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NAN"}};if(Bv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NAN"}};if(Bv(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(n.field),op:a2(n.op),value:n.value}}})(r):r instanceof Gn?(function(n){const s=n.getFilters().map((l=>yT(l)));return s.length===1?s[0]:{compositeFilter:{op:o2(n.op),filters:s}}})(r):_t(54877,{filter:r})}function l2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function _T(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t,n,s,l,c=Tt.min(),d=Tt.min(),p=Fe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t){this.yt=t}}function c2(r){const t=i2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?sh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.Cn=new f2}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(zr.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(zr.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class f2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(te.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vT=41943040;class on{static withCacheSize(t){return new on(t,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(vT,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",d2=1048576;function rE([r,t],[n,s]){const l=Vt(r,n);return l===0?Vt(t,s):l}class m2{constructor(t){this.Ir=t,this.buffer=new Ce(rE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lt(iE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?lt(iE,"Ignoring IndexedDB error during garbage collection: ",n):await oo(n)}await this.Vr(3e5)}))}}class g2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return $.resolve(_h.ce);const s=new m2(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(nE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,d=Date.now(),this.nthSequenceNumber(t,l)))).next((R=>(s=R,p=Date.now(),this.removeTargets(t,s,n)))).next((R=>(c=R,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((R=>(y=Date.now(),za()<=Ot.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${R} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function y2(r,t){return new g2(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.changes=new Qs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Vl(s.mutation,l,_n.empty(),ee.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,xt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=xt()){const l=ks();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=wl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=ks();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,xt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(t,n,s,l){let c=$i();const d=Ol(),p=(function(){return Ol()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof $r)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Vl(T.mutation,y,T.mutation.getFieldMask(),ee.now())):d.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new v2(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Ol();let l=new se(((d,p)=>d-p)),c=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||_n.empty();T=p.applyToLocalView(y,T),s.set(g,T);const R=(l.get(p.batchId)||xt()).add(g);l=l.insert(p.batchId,R)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,R=eT();T.forEach((b=>{if(!c.has(b)){const B=oT(n.get(b),s.get(b));B!==null&&R.set(b,B),c=c.add(b)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,R))}return $.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):$0(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):$.resolve(ks());let p=Ll,g=c;return d.next((y=>$.forEach(y,((T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next((b=>{g=g.insert(T,b)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,xt()))).next((T=>({batchId:p,changes:tT(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next((s=>{let l=wl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=wl();return this.indexManager.getCollectionParents(t,c).next((p=>$.forEach(p,(g=>{const y=(function(R,b){return new Wl(b,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((R,b)=>{d=d.insert(R,b)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,Ze.newInvalidDocument(T)))}));let p=wl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Vl(T.mutation,y,_n.empty(),ee.now()),Sh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:di(l.createTime)}})(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:c2(l.bundledQuery),readTime:di(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.overlays=new se(ft.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=ks();return $.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),$.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const l=ks(),c=n.length+1,d=new ft(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return $.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new se(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=ks(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=ks(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return $.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new zI(n,s));let c=this.qr.get(n);c===void 0&&(c=xt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Qr=new Ce(Pe.$r),this.Ur=new Ce(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ft(new te([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new te([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=xt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(Pe.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Pe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Gm:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Vt);return n.forEach((l=>{const c=new Pe(l,0),d=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ft.isDocumentKey(c)||(c=c.child(""));const d=new Pe(new ft(c),0);let p=new Ce(Vt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),$.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t){this.ri=t,this.docs=(function(){return new se(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let s=$i();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=$i();const d=n.path,p=new ft(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||JR(WR(T),s)<=0||(l.has(T.key)||Sh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(t,n,s,l){_t(9500)}ii(t,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new R2(this)}getSize(t){return $.resolve(this.size)}}class R2 extends _2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t){this.persistence=t,this.si=new Qs((n=>Ym(n)),Xm),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new ep,this.targetCount=0,this.ai=eo.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new eo(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new S2,this.referenceDelegate=t(this),this.Pi=new I2(this),this.indexManager=new h2,this.remoteDocumentCache=(function(l){return new b2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new u2(n),this.Ii=new T2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new A2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new w2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){lt("MemoryPersistence","Starting transaction:",t);const l=new C2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class C2 extends eI{constructor(t){super(),this.currentSequenceNumber=t}}class np{constructor(t){this.persistence=t,this.Ri=new ep,this.Vi=null}static mi(t){return new np(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=ft.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,Tt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class lh{constructor(t,n){this.persistence=t,this.pi=new Qs((s=>rI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=y2(this,n)}static mi(t,n){return new lh(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return $.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((p=>{p||(s++,c.removeEntry(d,Tt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zc(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=xt(),l=xt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new ip(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return s1()?8:nI(We())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new N2;return this.Ss(t,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,d,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(za()<=Ot.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",Ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(za()<=Ot.DEBUG&&lt("QueryEngine","Query:",Ba(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(za()<=Ot.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",Ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fi(n))):$.resolve())}ys(t,n){if(Qv(n))return $.resolve(null);let s=fi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=sh(n,null,"F"),s=fi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=xt(...c);return this.ps.getDocuments(t,d).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(t,sh(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return Qv(n)||l.isEqual(Tt.min())?$.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?$.resolve(null):(za()<=Ot.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ba(n)),this.vs(t,d,n,ZR(l,Ll)).next((p=>p)))}))}Ds(t,n){let s=new Ce(W0(t));return n.forEach(((l,c)=>{Sh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return za()<=Ot.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Ba(n)),this.ps.getDocumentsMatchingQuery(t,n,zr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="LocalStore",O2=3e8;class V2{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new se(Vt),this.xs=new Qs((c=>Ym(c)),Xm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new E2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function x2(r,t,n,s){return new V2(r,t,n,s)}async function TT(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=xt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function M2(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const R=y.batch,b=R.keys();let B=$.resolve();return b.forEach((Y=>{B=B.next((()=>T.getEntry(g,Y))).next((J=>{const Z=y.docVersions.get(Y);Ht(Z!==null,48541),J.version.compareTo(Z)<0&&(R.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),T.addEntry(J)))}))})),B.next((()=>p.mutationQueue.removeMutationBatch(g,R)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=xt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function AT(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function P2(r,t){const n=St(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,R)=>{const b=l.get(R);if(!b)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,R))));let B=b.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(R)!==null?B=B.withResumeToken(Fe.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,s)),l=l.insert(R,B),(function(J,Z,it){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=O2?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0})(b,B,T)&&p.push(n.Pi.updateTargetData(c,B))}));let g=$i(),y=xt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(k2(c,d,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(Tt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((R=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return $.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function k2(r,t,n){let s=xt(),l=xt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=$i();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Tt.min())?(t.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),d=d.insert(p,g)):lt(rp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function L2(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Gm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function U2(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new xr(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Sm(r,t,n){const s=St(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!lo(d))throw d;lt(rp,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function sE(r,t,n){const s=St(r);let l=Tt.min(),c=xt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const R=St(g),b=R.xs.get(T);return b!==void 0?$.resolve(R.Ms.get(b)):R.Pi.getTargetData(y,T)})(s,d,fi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:Tt.min(),n?c:xt()))).next((p=>(j2(s,SI(t),p),{documents:p,Qs:c})))))}function j2(r,t,n){let s=r.Os.get(t)||Tt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class aE{constructor(){this.activeTargetIds=NI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class z2{constructor(){this.Mo=new aE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new aE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="ConnectivityMonitor";class lE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(oE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lt(oE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc=null;function wm(){return Mc===null?Mc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mc++,"0x"+Mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="RestConnection",q2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class H2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===eh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=wm(),p=this.zo(t,n.toUriEncodedString());lt(Wd,`Sending RPC '${t}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=io(y);return this.Jo(t,p,g,s,T).then((R=>(lt(Wd,`Received RPC '${t}' ${d}: `,R),R)),(R=>{throw Za(Wd,`RPC '${t}' ${d} failed with error: `,R,"url: ",p,"request:",s),R}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ao})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=q2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class G2 extends H2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=wm();return new Promise(((p,g)=>{const y=new b0;y.setWithCredentials(!0),y.listenOnce(R0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case jc.NO_ERROR:const R=y.getResponseJson();lt(Ye,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(R)),p(R);break;case jc.TIMEOUT:lt(Ye,`RPC '${t}' ${d} timed out`),g(new ot(K.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const b=y.getStatus();if(lt(Ye,`RPC '${t}' ${d} failed with status:`,b,"response text:",y.getResponseText()),b>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const Y=B?.error;if(Y&&Y.status&&Y.message){const J=(function(it){const et=it.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(et)>=0?et:K.UNKNOWN})(Y.status);g(new ot(J,Y.message))}else g(new ot(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ot(K.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{lt(Ye,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);lt(Ye,`RPC '${t}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=wm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=N0(),p=C0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");lt(Ye,`Creating RPC '${t}' stream ${l}: ${T}`,g);const R=d.createWebChannel(T,g);this.I_(R);let b=!1,B=!1;const Y=new F2({Yo:Z=>{B?lt(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(b||(lt(Ye,`Opening RPC '${t}' stream ${l} transport.`),R.open(),b=!0),lt(Ye,`RPC '${t}' stream ${l} sending:`,Z),R.send(Z))},Zo:()=>R.close()}),J=(Z,it,et)=>{Z.listen(it,(rt=>{try{et(rt)}catch(At){setTimeout((()=>{throw At}),0)}}))};return J(R,Sl.EventType.OPEN,(()=>{B||(lt(Ye,`RPC '${t}' stream ${l} transport opened.`),Y.o_())})),J(R,Sl.EventType.CLOSE,(()=>{B||(B=!0,lt(Ye,`RPC '${t}' stream ${l} transport closed`),Y.a_(),this.E_(R))})),J(R,Sl.EventType.ERROR,(Z=>{B||(B=!0,Za(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),Y.a_(new ot(K.UNAVAILABLE,"The operation could not be completed")))})),J(R,Sl.EventType.MESSAGE,(Z=>{if(!B){const it=Z.data[0];Ht(!!it,16349);const et=it,rt=et?.error||et[0]?.error;if(rt){lt(Ye,`RPC '${t}' stream ${l} received error:`,rt);const At=rt.status;let mt=(function(S){const C=ve[S];if(C!==void 0)return uT(C)})(At),Rt=rt.message;mt===void 0&&(mt=K.INTERNAL,Rt="Unknown error status: "+At+" with message "+rt.message),B=!0,Y.a_(new ot(mt,Rt)),R.close()}else lt(Ye,`RPC '${t}' stream ${l} received:`,it),Y.u_(it)}})),J(p,I0.STAT_EVENT,(Z=>{Z.stat===fm.PROXY?lt(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===fm.NOPROXY&&lt(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(r){return new XI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&lt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="PersistentStream";class wT{constructor(t,n,s,l,c,d,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ST(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Xi(n.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new ot(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return lt(uE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(lt(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q2 extends wT{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=WI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Tt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?di(d.readTime):Tt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Am(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=ym(g)?{documents:e2(c,g)}:{query:n2(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=fT(c,d.resumeToken);const y=vm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Tt.min())>0){p.readTime=oh(c,d.snapshotVersion.toTimestamp());const y=vm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=r2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Am(this.serializer),n.removeTarget=t,this.q_(n)}}class K2 extends wT{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=t2(t.writeResults,t.commitTime),s=di(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Am(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>JI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{}class X2 extends Y2{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ot(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,Em(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ot(K.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(t,Em(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ot(K.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class Z2{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ks(this)&&(lt(Fs,"Restarting streams for network reachability change."),await(async function(g){const y=St(g);y.Ea.add(4),await eu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ch(y)})(this))}))})),this.Ra=new $2(s,l)}}async function Ch(r){if(Ks(r))for(const t of r.da)await t(!0)}async function eu(r){for(const t of r.da)await t(!1)}function bT(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),lp(n)?op(n):uo(n).O_()&&ap(n,t))}function sp(r,t){const n=St(r),s=uo(n);n.Ia.delete(t),s.O_()&&RT(n,t),n.Ia.size===0&&(s.O_()?s.L_():Ks(n)&&n.Ra.set("Unknown"))}function ap(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uo(r).Y_(t)}function RT(r,t){r.Va.Ue(t),uo(r).Z_(t)}function op(r){r.Va=new GI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),uo(r).start(),r.Ra.ua()}function lp(r){return Ks(r)&&!uo(r).x_()&&r.Ia.size>0}function Ks(r){return St(r).Ea.size===0}function IT(r){r.Va=void 0}async function W2(r){r.Ra.set("Online")}async function J2(r){r.Ia.forEach(((t,n)=>{ap(r,t)}))}async function tC(r,t){IT(r),lp(r)?(r.Ra.ha(t),op(r)):r.Ra.set("Unknown")}async function eC(r,t,n){if(r.Ra.set("Online"),t instanceof hT&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){lt(Fs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await uh(r,s)}else if(t instanceof Hc?r.Va.Ze(t):t instanceof cT?r.Va.st(t):r.Va.tt(t),!n.isEqual(Tt.min()))try{const s=await AT(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Fe.EMPTY_BYTE_STRING,T.snapshotVersion)),RT(c,g);const R=new xr(T.target,g,y,T.sequenceNumber);ap(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){lt(Fs,"Failed to raise snapshot:",s),await uh(r,s)}}async function uh(r,t,n){if(!lo(t))throw t;r.Ea.add(1),await eu(r),r.Ra.set("Offline"),n||(n=()=>AT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{lt(Fs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ch(r)}))}function CT(r,t){return t().catch((n=>uh(r,n,t)))}async function Nh(r){const t=St(r),n=Fr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Gm;for(;nC(t);)try{const l=await L2(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,iC(t,l)}catch(l){await uh(t,l)}NT(t)&&DT(t)}function nC(r){return Ks(r)&&r.Ta.length<10}function iC(r,t){r.Ta.push(t);const n=Fr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function NT(r){return Ks(r)&&!Fr(r).x_()&&r.Ta.length>0}function DT(r){Fr(r).start()}async function rC(r){Fr(r).ra()}async function sC(r){const t=Fr(r);for(const n of r.Ta)t.ea(n.mutations)}async function aC(r,t,n){const s=r.Ta.shift(),l=Wm.from(s,t,n);await CT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Nh(r)}async function oC(r,t){t&&Fr(r).X_&&await(async function(s,l){if((function(d){return qI(d)&&d!==K.ABORTED})(l.code)){const c=s.Ta.shift();Fr(s).B_(),await CT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Nh(s)}})(r,t),NT(r)&&DT(r)}async function cE(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),lt(Fs,"RemoteStore received new credentials");const s=Ks(n);n.Ea.add(3),await eu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ch(n)}async function lC(r,t){const n=St(r);t?(n.Ea.delete(2),await Ch(n)):t||(n.Ea.add(2),await eu(n),n.Ra.set("Unknown"))}function uo(r){return r.ma||(r.ma=(function(n,s,l){const c=St(n);return c.sa(),new Q2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:W2.bind(null,r),t_:J2.bind(null,r),r_:tC.bind(null,r),H_:eC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),lp(r)?op(r):r.Ra.set("Unknown")):(await r.ma.stop(),IT(r))}))),r.ma}function Fr(r){return r.fa||(r.fa=(function(n,s,l){const c=St(n);return c.sa(),new K2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:rC.bind(null,r),r_:oC.bind(null,r),ta:sC.bind(null,r),na:aC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Nh(r)):(await r.fa.stop(),r.Ta.length>0&&(lt(Fs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,p=new up(t,n,d,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(r,t){if(Xi("AsyncQueue",`${t}: ${r}`),lo(r))return new ot(K.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(t){return new Xa(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=wl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Xa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Xa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.ga=new se(ft.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class no{constructor(t,n,s,l,c,d,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new no(t,n,Xa.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ah(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class cC{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=St(n),c=l.queries;l.queries=fE(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new ot(K.ABORTED,"Firestore shutting down"))}}function fE(){return new Qs((r=>Z0(r)),Ah)}async function hp(r,t){const n=St(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new uC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=cp(d,`Initialization of query '${Ba(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&dp(n)}async function fp(r,t){const n=St(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hC(r,t){const n=St(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&dp(n)}function fC(r,t,n){const s=St(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function dp(r){r.Ca.forEach((t=>{t.next()}))}var bm,dE;(dE=bm||(bm={})).Ma="default",dE.Cache="cache";class mp{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new no(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=no.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t){this.key=t}}class VT{constructor(t){this.key=t}}class dC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=W0(t),this.tu=new Xa(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new hE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,R)=>{const b=l.get(T),B=Sh(this.query,R)?R:null,Y=!!b&&this.mutatedKeys.has(b.key),J=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Z=!1;b&&B?b.data.isEqual(B.data)?Y!==J&&(s.track({type:3,doc:B}),Z=!0):this.su(b,B)||(s.track({type:2,doc:B}),Z=!0,(g&&this.eu(B,g)>0||y&&this.eu(B,y)<0)&&(p=!0)):!b&&B?(s.track({type:0,doc:B}),Z=!0):b&&!B&&(s.track({type:1,doc:b}),Z=!0,(g||y)&&(p=!0)),Z&&(B?(d=d.add(B),c=J?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,R)=>(function(B,Y){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:Z})}};return J(B)-J(Y)})(T.type,R.type)||this.eu(T.doc,R.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new no(this.query,t.tu,c,d,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new VT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new OT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=xt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return no.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pp="SyncEngine";class mC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class pC{constructor(t){this.key=t,this.hu=!1}}class gC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Qs((p=>Z0(p)),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new se(ft.comparator),this.Au=new Map,this.Ru=new ep,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yC(r,t,n=!0){const s=UT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await xT(s,t,n,!0),l}async function _C(r,t){const n=UT(r);await xT(n,t,!0,!1)}async function xT(r,t,n,s){const l=await U2(r.localStore,fi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await vC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&bT(r.remoteStore,l),p}async function vC(r,t,n,s,l){r.pu=(R,b,B)=>(async function(J,Z,it,et){let rt=Z.view.ru(it);rt.Cs&&(rt=await sE(J.localStore,Z.query,!1).then((({documents:V})=>Z.view.ru(V,rt))));const At=et&&et.targetChanges.get(Z.targetId),mt=et&&et.targetMismatches.get(Z.targetId)!=null,Rt=Z.view.applyChanges(rt,J.isPrimaryClient,At,mt);return pE(J,Z.targetId,Rt.au),Rt.snapshot})(r,R,b,B);const c=await sE(r.localStore,t,!0),d=new dC(t,c.Qs),p=d.ru(c.documents),g=tu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);pE(r,n,y.au);const T=new mC(t,n,d);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function EC(r,t,n){const s=St(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Ah(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Sm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&sp(s.remoteStore,l.targetId),Rm(s,l.targetId)})).catch(oo)):(Rm(s,l.targetId),await Sm(s.localStore,l.targetId,!0))}async function TC(r,t){const n=St(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),sp(n.remoteStore,s.targetId))}async function AC(r,t,n){const s=NC(r);try{const l=await(function(d,p){const g=St(d),y=ee.now(),T=p.reduce(((B,Y)=>B.add(Y.key)),xt());let R,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let Y=$i(),J=xt();return g.Ns.getEntries(B,T).next((Z=>{Y=Z,Y.forEach(((it,et)=>{et.isValidDocument()||(J=J.add(it))}))})).next((()=>g.localDocuments.getOverlayedDocuments(B,Y))).next((Z=>{R=Z;const it=[];for(const et of p){const rt=LI(et,R.get(et.key).overlayedDocument);rt!=null&&it.push(new $r(et.key,rt,H0(rt.value.mapValue),vn.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,it,p)})).next((Z=>{b=Z;const it=Z.applyToLocalDocumentSet(R,J);return g.documentOverlayCache.saveOverlays(B,Z.batchId,it)}))})).then((()=>({batchId:b.batchId,changes:tT(R)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new se(Vt)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await nu(s,l.changes),await Nh(s.remoteStore)}catch(l){const c=cp(l,"Failed to persist write");n.reject(c)}}async function MT(r,t){const n=St(r);try{const s=await P2(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ht(d.hu,14607):l.removedDocuments.size>0&&(Ht(d.hu,42227),d.hu=!1))})),await nu(n,s,t)}catch(s){await oo(s)}}function mE(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=St(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,R)=>{for(const b of R.Sa)b.va(p)&&(y=!0)})),y&&dp(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function SC(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new se(ft.comparator);d=d.insert(c,Ze.newNoDocument(c,Tt.min()));const p=xt().add(c),g=new Rh(Tt.min(),new Map,new se(Vt),d,p);await MT(s,g),s.du=s.du.remove(c),s.Au.delete(t),gp(s)}else await Sm(s.localStore,t,!1).then((()=>Rm(s,t,n))).catch(oo)}async function wC(r,t){const n=St(r),s=t.batch.batchId;try{const l=await M2(n.localStore,t);kT(n,s,null),PT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await nu(n,l)}catch(l){await oo(l)}}async function bC(r,t,n){const s=St(r);try{const l=await(function(d,p){const g=St(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((R=>(Ht(R!==null,37113),T=R.keys(),g.mutationQueue.removeMutationBatch(y,R)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);kT(s,t,n),PT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await nu(s,l)}catch(l){await oo(l)}}function PT(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function kT(r,t,n){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Rm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||LT(r,s)}))}function LT(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(sp(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),gp(r))}function pE(r,t,n){for(const s of n)s instanceof OT?(r.Ru.addReference(s.key,t),RC(r,s)):s instanceof VT?(lt(pp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||LT(r,s.key)):_t(19791,{wu:s})}function RC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(lt(pp,"New document in limbo: "+n),r.Eu.add(s),gp(r))}function gp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ft(te.fromString(t)),s=r.fu.next();r.Au.set(s,new pC(n)),r.du=r.du.insert(n,s),bT(r.remoteStore,new xr(fi(Th(n.path)),s,"TargetPurposeLimboResolution",_h.ce))}}async function nu(r,t,n){const s=St(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=ip.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=St(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>$.forEach(y,(b=>$.forEach(b.Es,(B=>T.persistence.referenceDelegate.addReference(R,b.targetId,B))).next((()=>$.forEach(b.ds,(B=>T.persistence.referenceDelegate.removeReference(R,b.targetId,B)))))))))}catch(R){if(!lo(R))throw R;lt(rp,"Failed to update sequence numbers: "+R)}for(const R of y){const b=R.targetId;if(!R.fromCache){const B=T.Ms.get(b),Y=B.snapshotVersion,J=B.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(b,J)}}})(s.localStore,c))}async function IC(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){lt(pp,"User change. New user:",t.toKey());const s=await TT(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new ot(K.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await nu(n,s.Ls)}}function CC(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return xt().add(s.key);{let l=xt();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function UT(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=MT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SC.bind(null,t),t.Pu.H_=hC.bind(null,t.eventManager),t.Pu.yu=fC.bind(null,t.eventManager),t}function NC(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bC.bind(null,t),t}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ih(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return x2(this.persistence,new D2,t.initialUser,this.serializer)}Cu(t){return new ET(np.mi,this.serializer)}Du(t){return new z2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class DC extends ch{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ht(this.persistence.referenceDelegate instanceof lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new p2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new ET((s=>lh.mi(s,n)),this.serializer)}}class Im{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IC.bind(null,this.syncEngine),await lC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new cC})()}createDatastore(t){const n=Ih(t.databaseInfo.databaseId),s=(function(c){return new G2(c)})(t.databaseInfo);return(function(c,d,p,g){return new X2(c,d,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,p){return new Z2(s,l,c,d,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>mE(this.syncEngine,n,0)),(function(){return lE.v()?new lE:new B2})())}createSyncEngine(t,n){return(function(l,c,d,p,g,y,T){const R=new gC(l,c,d,p,g,y);return T&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=St(n);lt(Fs,"RemoteStore shutting down."),s.Ea.add(5),await eu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Im.provider={build:()=>new Im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class OC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{lt(Gr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(lt(Gr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=cp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function tm(r,t){r.asyncQueue.verifyOperationInProgress(),lt(Gr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await TT(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function gE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await VC(r);lt(Gr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>cE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>cE(t.remoteStore,l))),r._onlineComponents=t}async function VC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){lt(Gr,"Using user provided OfflineComponentProvider");try{await tm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===K.FAILED_PRECONDITION||l.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Za("Error using user provided cache. Falling back to memory cache: "+n),await tm(r,new ch)}}else lt(Gr,"Using default OfflineComponentProvider"),await tm(r,new DC(void 0));return r._offlineComponents}async function jT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(lt(Gr,"Using user provided OnlineComponentProvider"),await gE(r,r._uninitializedComponentsProvider._online)):(lt(Gr,"Using default OnlineComponentProvider"),await gE(r,new Im))),r._onlineComponents}function xC(r){return jT(r).then((t=>t.syncEngine))}async function hh(r){const t=await jT(r),n=t.eventManager;return n.onListen=yC.bind(null,t.syncEngine),n.onUnlisten=EC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_C.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=TC.bind(null,t.syncEngine),n}function MC(r,t,n={}){const s=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new yp({next:b=>{T.Nu(),d.enqueueAndForget((()=>fp(c,R)));const B=b.docs.has(p);!B&&b.fromCache?y.reject(new ot(K.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&b.fromCache&&g&&g.source==="server"?y.reject(new ot(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(b)},error:b=>y.reject(b)}),R=new mp(Th(p.path),T,{includeMetadataChanges:!0,qa:!0});return hp(c,R)})(await hh(r),r.asyncQueue,t,n,s))),s.promise}function PC(r,t,n={}){const s=new Qi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new yp({next:b=>{T.Nu(),d.enqueueAndForget((()=>fp(c,R))),b.fromCache&&g.source==="server"?y.reject(new ot(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(b)},error:b=>y.reject(b)}),R=new mp(p,T,{includeMetadataChanges:!0,qa:!0});return hp(c,R)})(await hh(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firestore.googleapis.com",_E=!0;class vE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BT,this.ssl=_E}else this.host=t.host,this.ssl=t.ssl??_E;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=vT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<d2)throw new ot(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$R("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Dh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zR;switch(s.type){case"firstParty":return new FR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ot(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=yE.get(n);s&&(lt("ComponentProvider","Removing Datastore"),yE.delete(n),s.terminate())})(this),Promise.resolve()}}function kC(r,t,n,s={}){r=Pn(r,Dh);const l=io(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(PE(`https://${p}`),kE("Firestore",!0)),c.host!==BT&&c.host!==p&&Za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!zs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Xe.MOCK_USER;else{y=$S(s.mockUserToken,r._app?.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new ot(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xe(R)}r._authCredentials=new BR(new O0(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Zr(this.firestore,t,this._query)}}class me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Zl(n,me._jsonSchema))return new me(t,s||null,new ft(te.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Te("string",me._jsonSchemaVersion),referencePath:Te("string")};class Ur extends Zr{constructor(t,n,s){super(t,n,Th(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new ft(t))}withConverter(t){return new Ur(this.firestore,t,this._path)}}function Ls(r,t,...n){if(r=Ae(r),V0("collection","path",t),r instanceof Dh){const s=te.fromString(t,...n);return Vv(s),new Ur(r,null,s)}{if(!(r instanceof me||r instanceof Ur))throw new ot(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return Vv(s),new Ur(r.firestore,null,s)}}function xl(r,t,...n){if(r=Ae(r),arguments.length===1&&(t=Fm.newId()),V0("doc","path",t),r instanceof Dh){const s=te.fromString(t,...n);return Ov(s),new me(r,null,new ft(s))}{if(!(r instanceof me||r instanceof Ur))throw new ot(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return Ov(s),new me(r.firestore,r instanceof Ur?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="AsyncQueue";class TE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ST(this,"async_queue_retry"),this._c=()=>{const s=Jd();s&&lt(EE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!lo(t))throw t;lt(EE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",AE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=up.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_t(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function AE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Qr extends Dh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new TE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TE(t),this._firestoreClient=void 0,await t}}}function LC(r,t){const n=typeof r=="object"?r:zE(),s=typeof r=="string"?r:eh,l=Mm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=YS("firestore");c&&kC(l,...c)}return l}function iu(r){if(r._terminated)throw new ot(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||UC(r),r._firestoreClient}function UC(r){const t=r._freezeSettings(),n=(function(l,c,d,p){return new oI(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,zT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new OC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mn(Fe.fromBase64String(t))}catch(n){throw new ot(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mn(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Zl(t,Mn._jsonSchema))return Mn.fromBase64String(t.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:Te("string",Mn._jsonSchemaVersion),bytes:Te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ot(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ot(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ot(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(t){if(Zl(t,mi._jsonSchema))return new mi(t.latitude,t.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Te("string",mi._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Zl(t,pi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new pi(t.vectorValues);throw new ot(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Te("string",pi._jsonSchemaVersion),vectorValues:Te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^__.*__$/;class zC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new $r(t,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(t,this.data,n,this.fieldTransforms)}}class qT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new $r(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function HT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:r})}}class _p{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _p({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return fh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(HT(this.Ac)&&jC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class BC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Ih(t)}Cc(t,n,s,l=!1){return new _p({Ac:t,methodName:n,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xh(r){const t=r._freezeSettings(),n=Ih(r._databaseId);return new BC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function vp(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);Tp("Data must be an object, but it was:",d,s);const p=FT(s,d);let g,y;if(c.merge)g=new _n(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const b=Cm(t,R,n);if(!d.contains(b))throw new ot(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);QT(T,b)||T.push(b)}g=new _n(T),y=d.fieldTransforms.filter((R=>g.covers(R.field)))}else g=null,y=d.fieldTransforms;return new zC(new ln(p),g,y)}class Mh extends Vh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Mh}}class Ep extends Vh{_toFieldTransform(t){return new xI(t.path,new Bl)}isEqual(t){return t instanceof Ep}}function qC(r,t,n,s){const l=r.Cc(1,t,n);Tp("Data must be an object, but it was:",l,s);const c=[],d=ln.empty();Xr(s,((g,y)=>{const T=Ap(t,g,n);y=Ae(y);const R=l.yc(T);if(y instanceof Mh)c.push(T);else{const b=ru(y,R);b!=null&&(c.push(T),d.set(T,b))}}));const p=new _n(c);return new qT(d,p,l.fieldTransforms)}function HC(r,t,n,s,l,c){const d=r.Cc(1,t,n),p=[Cm(t,s,n)],g=[l];if(c.length%2!=0)throw new ot(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)p.push(Cm(t,c[b])),g.push(c[b+1]);const y=[],T=ln.empty();for(let b=p.length-1;b>=0;--b)if(!QT(y,p[b])){const B=p[b];let Y=g[b];Y=Ae(Y);const J=d.yc(B);if(Y instanceof Mh)y.push(B);else{const Z=ru(Y,J);Z!=null&&(y.push(B),T.set(B,Z))}}const R=new _n(y);return new qT(T,R,d.fieldTransforms)}function FC(r,t,n,s=!1){return ru(n,r.Cc(s?4:3,t))}function ru(r,t){if(GT(r=Ae(r)))return Tp("Unsupported field value:",t,r),FT(r,t);if(r instanceof Vh)return(function(s,l){if(!HT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=ru(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=Ae(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return DI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ee.fromDate(s);return{timestampValue:oh(l.serializer,c)}}if(s instanceof ee){const c=new ee(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:oh(l.serializer,c)}}if(s instanceof mi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mn)return{bytesValue:fT(l.serializer,s._byteString)};if(s instanceof me){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof pi)return(function(d,p){return{mapValue:{fields:{[B0]:{stringValue:q0},[nh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return $m(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${yh(s)}`)})(r,t)}function FT(r,t){const n={};return P0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(r,((s,l)=>{const c=ru(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function GT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ee||r instanceof mi||r instanceof Mn||r instanceof me||r instanceof Vh||r instanceof pi)}function Tp(r,t,n){if(!GT(n)||!x0(n)){const s=yh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Cm(r,t,n){if((t=Ae(t))instanceof Oh)return t._internalPath;if(typeof t=="string")return Ap(r,t);throw fh("Field path arguments must be of type string or ",r,!1,void 0,n)}const GC=new RegExp("[~\\*/\\[\\]]");function Ap(r,t,n){if(t.search(GC)>=0)throw fh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Oh(...t.split("."))._internalPath}catch{throw fh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function fh(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new ot(K.INVALID_ARGUMENT,p+r+g)}function QT(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(YT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QC extends KT{data(){return super.data()}}function YT(r,t){return typeof t=="string"?Ap(r,t):t instanceof Oh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ot(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class $T extends Sp{}function Fc(r,t,...n){let s=[];t instanceof Sp&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof bp)).length,p=c.filter((g=>g instanceof wp)).length;if(d>1||d>0&&p>0)throw new ot(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class wp extends $T{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new wp(t,n,s)}_apply(t){const n=this._parse(t);return ZT(t._query,n),new Zr(t.firestore,t.converter,_m(t._query,n))}_parse(t){const n=xh(t.firestore);return(function(c,d,p,g,y,T,R){let b;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ot(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){bE(R,T);const Y=[];for(const J of R)Y.push(wE(g,c,J));b={arrayValue:{values:Y}}}else b=wE(g,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||bE(R,T),b=FC(p,d,R,T==="in"||T==="not-in");return Ee.create(y,T,b)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class bp extends Sp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)ZT(d,g),d=_m(d,g)})(t._query,n),new Zr(t.firestore,t.converter,_m(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rp extends $T{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new Rp(t,n,s)}_apply(t){return new Zr(t.firestore,t.converter,sh(t._query,this._limit,this._limitType))}}function KC(r){return Rp._create("limit",r,"F")}function wE(r,t,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new ot(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$0(t)&&n.indexOf("/")!==-1)throw new ot(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(te.fromString(n));if(!ft.isDocumentKey(s))throw new ot(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return zv(r,new ft(s))}if(n instanceof me)return zv(r,n._key);throw new ot(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function bE(r,t){if(!Array.isArray(r)||r.length===0)throw new ot(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ZT(r,t){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new ot(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ot(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class YC{convertValue(t,n="none"){switch(Hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Xr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[nh].arrayValue?.values?.map((s=>de(s.doubleValue)));return new pi(n)}convertGeoPoint(t){return new mi(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Eh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ul(t));default:return null}}convertTimestamp(t){const n=Br(t);return new ee(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=te.fromString(t);Ht(_T(s),9688,{name:t});const l=new jl(s.get(1),s.get(3)),c=new ft(s.popFirst(5));return l.isEqual(n)||Xi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class Rl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Us extends KT{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(YT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Us._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Te("string",Us._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};class Gc extends Us{data(t={}){return super.data(t)}}class js{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Rl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Gc(this._firestore,this._userDataWriter,s.key,s,new Rl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Gc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Gc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:XC(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=js._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Fm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function XC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(r){r=Pn(r,me);const t=Pn(r.firestore,Qr);return MC(iu(t),r._key).then((n=>JT(t,r,n)))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:Te("string",js._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};class Cp extends YC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function $C(r){r=Pn(r,Zr);const t=Pn(r.firestore,Qr),n=iu(t),s=new Cp(t);return XT(r._query),PC(n,r._query).then((l=>new js(t,s,r,l)))}function ZC(r,t,n){r=Pn(r,me);const s=Pn(r.firestore,Qr),l=Ip(r.converter,t,n);return Np(s,[vp(xh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,vn.none())])}function WT(r,t){const n=Pn(r.firestore,Qr),s=xl(r),l=Ip(r.converter,t);return Np(n,[vp(xh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,vn.exists(!1))]).then((()=>s))}function em(r,...t){r=Ae(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||SE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof me)d=Pn(r.firestore,Qr),p=Th(r._key.path),c={next:g=>{t[s]&&t[s](JT(d,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Pn(r,Zr);d=Pn(g.firestore,Qr),p=g._query;const y=new Cp(d);c={next:T=>{t[s]&&t[s](new js(d,y,g,T))},error:t[s+1],complete:t[s+2]},XT(r._query)}return(function(y,T,R,b){const B=new yp(b),Y=new mp(T,B,R);return y.asyncQueue.enqueueAndForget((async()=>hp(await hh(y),Y))),()=>{B.Nu(),y.asyncQueue.enqueueAndForget((async()=>fp(await hh(y),Y)))}})(iu(d),p,l,c)}function Np(r,t){return(function(s,l){const c=new Qi;return s.asyncQueue.enqueueAndForget((async()=>AC(await xC(s),l,c))),c.promise})(iu(r),t)}function JT(r,t,n){const s=n.docs.get(t._key),l=new Cp(r);return new Us(r,l,t._key,s,new Rl(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xh(t)}set(t,n,s){this._verifyNotCommitted();const l=nm(t,this._firestore),c=Ip(l.converter,n,s),d=vp(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,vn.none())),this}update(t,n,s,...l){this._verifyNotCommitted();const c=nm(t,this._firestore);let d;return d=typeof(n=Ae(n))=="string"||n instanceof Oh?HC(this._dataReader,"WriteBatch.update",c._key,n,s,l):qC(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,vn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=nm(t,this._firestore);return this._mutations=this._mutations.concat(new Zm(n._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ot(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nm(r,t){if((r=Ae(r)).firestore!==t)throw new ot(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Nm(){return new Ep("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(r){return iu(r=Pn(r,Qr)),new WC(r,(t=>Np(r,t)))}(function(t,n=!0){(function(l){ao=l})(ro),$a(new Bs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Qr(new qR(s.getProvider("auth-internal")),new GR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ot(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),kr(Iv,Cv,t),kr(Iv,Cv,"esm2020")})();const $e={dashboard:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),sales:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),purchases:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),inventory:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),reports:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),logout:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),plus:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),user:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),money:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),close:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),trash:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),edit:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})})},tN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyA6pwcMnIn0y0HcKRWQhfpvPKwmbH-Jc4Y",authDomain:"sofwipad-erp-contable.firebaseapp.com",projectId:"sofwipad-erp-contable",storageBucket:"sofwipad-erp-contable.appspot.com",messagingSenderId:"902895181248",appId:"1:902895181248:web:dfb884b039dedacfb3bc25",measurementId:"G-D22KTMEDP6"};const tA=jE(tN),Fl=LR(tA),qn=LC(tA);jR("debug");const eA=Bt.createContext(),eN=({children:r})=>{const[t,n]=Bt.useState(null),[s,l]=Bt.useState(null),[c,d]=Bt.useState(null),[p,g]=Bt.useState(!0),[y,T]=Bt.useState(""),R=async B=>{const Y=JC(qn),J=Ls(qn,`companies/${B}/chart_of_accounts`);[{code:"1105",name:"Caja",class:"Activo"},{code:"1110",name:"Bancos",class:"Activo"},{code:"1305",name:"Clientes",class:"Activo"},{code:"1435",name:"Inventarios",class:"Activo"},{code:"2205",name:"Proveedores Nacionales",class:"Pasivo"},{code:"2105",name:"Obligaciones Financieras",class:"Pasivo"},{code:"3115",name:"Aportes Sociales",class:"Patrimonio"},{code:"4135",name:"Comercio al por mayor y al por menor",class:"Ingreso"},{code:"5105",name:"Gastos de Personal",class:"Gasto"},{code:"5195",name:"Diversos",class:"Gasto"},{code:"6135",name:"Costo de Ventas",class:"Costo"}].forEach(it=>{const et=xl(J,it.code);Y.set(et,it)});try{await Y.commit(),console.log(`Plan de cuentas inicial creado para la empresa: ${B}`)}catch(it){console.error("Error creando el plan de cuentas inicial:",it),T("No se pudo completar la configuración inicial de la empresa.")}};Bt.useEffect(()=>{const Y=Rb(Fl,async J=>{if(J&&!J.isAnonymous){const Z=xl(qn,"users",J.uid),it=await RE(Z);if(it.exists()){const et={uid:J.uid,...it.data()};if(n(J),l(et),et.companyId){const rt=xl(qn,"companies",et.companyId),At=await RE(rt);if(At.exists()){d({id:At.id,...At.data()});const mt=Ls(qn,`companies/${et.companyId}/chart_of_accounts`),Rt=Fc(mt,KC(1));(await $C(Rt)).empty&&(console.log("Plan de cuentas no encontrado, iniciando configuración..."),await R(et.companyId))}else T(`Error: La empresa con ID ${et.companyId} no fue encontrada.`),d(null)}else T("Usuario no está asociado a ninguna empresa."),d(null)}else T("No se encontró el perfil del usuario en la base de datos."),await d0(Fl)}else n(null),l(null),d(null);g(!1)});return()=>Y()},[]);const b={user:t,userData:s,companyData:c,loading:p,error:y,setError:T};return M.jsx(eA.Provider,{value:b,children:r})},Ph=()=>Bt.useContext(eA),nN=({isOpen:r,onClose:t,title:n,children:s})=>r?M.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:M.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-full overflow-y-auto",children:[M.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[M.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),M.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:$e.close})]}),M.jsx("div",{className:"p-6",children:s})]})}):null,Vr=({id:r,label:t,...n})=>M.jsxs("div",{children:[M.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),M.jsx("input",{id:r,...n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),IE=({id:r,label:t,children:n,...s})=>M.jsxs("div",{children:[M.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),M.jsx("select",{id:r,...s,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n})]}),Ga=({children:r,onClick:t,type:n="button",variant:s="primary",...l})=>{const c="inline-flex items-center justify-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"border-transparent text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"};return M.jsx("button",{type:n,onClick:t,className:`${c} ${d[s]}`,...l,children:r})},Dm=({title:r,children:t,actions:n})=>M.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[M.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[M.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),n&&M.jsx("div",{className:"flex space-x-2",children:n})]}),M.jsx("div",{className:"p-4",children:t})]}),nA=()=>M.jsx("div",{className:"flex justify-center items-center h-full",children:M.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),iA=({message:r})=>r?M.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative my-4",role:"alert",children:[M.jsx("strong",{className:"font-bold",children:"Error: "}),M.jsx("span",{className:"block sm:inline",children:r})]}):null,iN=()=>{const[r,t]=Bt.useState(!0),[n,s]=Bt.useState(""),[l,c]=Bt.useState(""),[d,p]=Bt.useState(""),[g,y]=Bt.useState(""),[T,R]=Bt.useState(""),[b,B]=Bt.useState(""),[Y,J]=Bt.useState(!1),Z=async et=>{et.preventDefault(),J(!0),B("");try{await Sb(Fl,n,l)}catch(rt){B(rt.message)}J(!1)},it=async et=>{if(et.preventDefault(),l.length<6){B("La contraseña debe tener al menos 6 caracteres.");return}J(!0),B("");try{const rt=Ls(qn,"companies"),At=await WT(rt,{name:g,NIT:T,createdAt:Nm(),taxConfig:{iva:19,ica:.414,retefuente:2.5}}),Rt=(await Ab(Fl,n,l)).user;await ZC(xl(qn,"users",Rt.uid),{name:d,email:n,companyId:At.id,role:"Admin",createdAt:Nm()})}catch(rt){B(rt.message)}J(!1)};return M.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[M.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[M.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Sofwipad ERP Contable"}),M.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Inicia sesión en tu cuenta":"Crea una nueva cuenta y empresa"})]}),M.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:M.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[M.jsxs("form",{className:"space-y-6",onSubmit:r?Z:it,children:[!r&&M.jsxs(M.Fragment,{children:[M.jsx(Vr,{id:"name",name:"name",type:"text",label:"Tu Nombre Completo",required:!0,value:d,onChange:et=>p(et.target.value)}),M.jsx(Vr,{id:"companyName",name:"companyName",type:"text",label:"Nombre de la Empresa",required:!0,value:g,onChange:et=>y(et.target.value)}),M.jsx(Vr,{id:"nit",name:"nit",type:"text",label:"NIT de la Empresa",required:!0,value:T,onChange:et=>R(et.target.value)}),M.jsx("hr",{})]}),M.jsx(Vr,{id:"email",name:"email",type:"email",label:"Correo Electrónico",autoComplete:"email",required:!0,value:n,onChange:et=>s(et.target.value)}),M.jsx(Vr,{id:"password",name:"password",type:"password",label:"Contraseña",autoComplete:"current-password",required:!0,value:l,onChange:et=>c(et.target.value)}),M.jsx(iA,{message:b}),M.jsx("div",{children:M.jsx(Ga,{type:"submit",variant:"primary",className:"w-full",disabled:Y,children:Y?"Procesando...":r?"Iniciar Sesión":"Registrar Empresa"})})]}),M.jsxs("div",{className:"mt-6",children:[M.jsxs("div",{className:"relative",children:[M.jsx("div",{className:"absolute inset-0 flex items-center",children:M.jsx("div",{className:"w-full border-t border-gray-300"})}),M.jsx("div",{className:"relative flex justify-center text-sm",children:M.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),M.jsx("div",{className:"mt-6 text-center",children:M.jsx("button",{onClick:()=>{t(!r),B("")},className:"font-medium text-indigo-600 hover:text-indigo-500",children:r?"¿No tienes una cuenta? Regístrate":"¿Ya tienes una cuenta? Inicia sesión"})})]})]})})]})},rN=()=>{const{userData:r,companyData:t}=Ph(),[n,s]=Bt.useState("dashboard"),l=async()=>{await d0(Fl)},c=({view:g,icon:y,children:T})=>M.jsxs("a",{href:"#",onClick:R=>{R.preventDefault(),s(g)},className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${n===g?"bg-indigo-600 text-white":"text-gray-300 hover:bg-indigo-800 hover:text-white"}`,children:[M.jsx("span",{className:"mr-3",children:y}),T]}),d=()=>{switch(n){case"dashboard":return M.jsx(CE,{});case"sales":return M.jsx(sN,{});default:return M.jsx(CE,{})}},p={Admin:"Administrador",Contador:"Contador",Empleado:"Empleado"};return M.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[M.jsxs("aside",{className:"w-64 flex-shrink-0 bg-indigo-900 text-white flex flex-col",children:[M.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b border-indigo-800",children:M.jsx("h2",{className:"text-xl font-bold",children:t?.name||"ERP Nube"})}),M.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[M.jsx(c,{view:"dashboard",icon:$e.dashboard,children:"Dashboard"}),M.jsx(c,{view:"sales",icon:$e.sales,children:"Ventas"}),M.jsx(c,{view:"purchases",icon:$e.purchases,children:"Compras"}),M.jsx(c,{view:"inventory",icon:$e.inventory,children:"Inventario"}),M.jsx(c,{view:"reports",icon:$e.reports,children:"Reportes"})]}),M.jsxs("div",{className:"px-4 py-4 border-t border-indigo-800",children:[M.jsxs("div",{className:"flex items-center mb-4",children:[M.jsx("div",{className:"p-2 bg-indigo-700 rounded-full",children:$e.user}),M.jsxs("div",{className:"ml-3",children:[M.jsx("p",{className:"text-sm font-medium text-white",children:r?.name}),M.jsx("p",{className:"text-xs text-indigo-300",children:p[r?.role]||r?.role})]})]}),M.jsxs("a",{href:"#",onClick:l,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium rounded-lg text-gray-300 hover:bg-red-600 hover:text-white transition-colors",children:[M.jsx("span",{className:"mr-3",children:$e.logout}),"Cerrar Sesión"]})]})]}),M.jsxs("main",{className:"flex-1 overflow-y-auto",children:[M.jsx("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-6",children:M.jsx("h1",{className:"text-2xl font-semibold text-gray-800 capitalize",children:n})}),M.jsx("div",{className:"p-6",children:d()})]})]})},CE=()=>{const{companyData:r}=Ph(),t=[{title:"Ventas del Mes",value:"$12,500,000",icon:$e.sales,color:"text-green-500"},{title:"Cuentas por Cobrar",value:"$4,200,000",icon:$e.money,color:"text-yellow-500"},{title:"Compras del Mes",value:"$7,800,000",icon:$e.purchases,color:"text-red-500"},{title:"Valor Inventario",value:"$25,000,000",icon:$e.inventory,color:"text-blue-500"}];return M.jsxs("div",{className:"space-y-6",children:[M.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Bienvenido a ",r?.name]}),M.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(n=>M.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[M.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${n.color}`,children:VS.cloneElement(n.icon,{className:"h-8 w-8"})}),M.jsxs("div",{className:"ml-4",children:[M.jsx("p",{className:"text-sm text-gray-500",children:n.title}),M.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.value})]})]},n.title))}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[M.jsx(Dm,{title:"Ventas vs Compras (Últimos 6 meses)",children:M.jsx("div",{className:"h-64 bg-gray-200 rounded-md flex items-center justify-center",children:M.jsx("p",{className:"text-gray-500",children:"Gráfico de barras aquí"})})}),M.jsx(Dm,{title:"Actividades Recientes",children:M.jsxs("ul",{className:"space-y-3",children:[M.jsx("li",{className:"text-sm text-gray-600",children:"Factura de venta #FV-002 creada."}),M.jsx("li",{className:"text-sm text-gray-600",children:"Pago a proveedor 'DistriPartes SAS' registrado."}),M.jsx("li",{className:"text-sm text-gray-600",children:"Nuevo producto 'Aceite 20W-50' añadido al inventario."})]})})]})]})},sN=()=>{const{companyData:r}=Ph(),[t,n]=Bt.useState(!1),[s,l]=Bt.useState([]),[c,d]=Bt.useState([]),[p,g]=Bt.useState([]),[y,T]=Bt.useState(!0);Bt.useEffect(()=>{if(!r)return;T(!0);const b=Fc(Ls(qn,`companies/${r.id}/invoices_sales`)),B=em(b,Y=>{const J=Y.docs.map(Z=>({id:Z.id,...Z.data()}));l(J),T(!1)},Y=>{console.error("Error fetching invoices: ",Y),T(!1)});return()=>B()},[r]),Bt.useEffect(()=>{if(!r)return;const b=Fc(Ls(qn,`companies/${r.id}/clients`)),B=Fc(Ls(qn,`companies/${r.id}/products`)),Y=em(b,Z=>{d(Z.docs.map(it=>({id:it.id,...it.data()})))}),J=em(B,Z=>{g(Z.docs.map(it=>({id:it.id,...it.data()})))});return()=>{Y(),J()}},[r]);const R=async b=>{if(r)try{const B=Ls(qn,`companies/${r.id}/invoices_sales`);await WT(B,{...b,companyId:r.id,createdAt:Nm(),status:"Pendiente"}),n(!1)}catch(B){console.error("Error creating invoice: ",B)}};return M.jsxs("div",{children:[M.jsx("div",{className:"flex justify-end mb-4",children:M.jsxs(Ga,{onClick:()=>n(!0),children:[$e.plus," Crear Factura"]})}),M.jsx(Dm,{title:"Facturas de Venta",children:y?M.jsx(nA,{}):M.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[M.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:M.jsxs("tr",{children:[M.jsx("th",{scope:"col",className:"px-6 py-3",children:"# Factura"}),M.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),M.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fecha"}),M.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total"}),M.jsx("th",{scope:"col",className:"px-6 py-3",children:"Estado"}),M.jsx("th",{scope:"col",className:"px-6 py-3",children:"Acciones"})]})}),M.jsx("tbody",{children:s.map(b=>M.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[M.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:b.id.substring(0,8)}),M.jsx("td",{className:"px-6 py-4",children:c.find(B=>B.id===b.clientId)?.name||"N/A"}),M.jsx("td",{className:"px-6 py-4",children:b.date?.seconds?new Date(b.date.seconds*1e3).toLocaleDateString():"N/A"}),M.jsxs("td",{className:"px-6 py-4",children:["$",new Intl.NumberFormat("es-CO").format(b.total)]}),M.jsx("td",{className:"px-6 py-4",children:M.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.status==="Pagada"?"bg-green-100 text-green-800":b.status==="Vencida"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:b.status})}),M.jsxs("td",{className:"px-6 py-4 flex space-x-2",children:[M.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:$e.edit}),M.jsx("button",{className:"text-red-600 hover:text-red-900",children:$e.trash})]})]},b.id))})]})}),M.jsx(aN,{isOpen:t,onClose:()=>n(!1),onSubmit:R,clients:c,products:p})]})},aN=({isOpen:r,onClose:t,onSubmit:n,clients:s,products:l})=>{const[c,d]=Bt.useState(""),[p,g]=Bt.useState(new Date().toISOString().split("T")[0]),[y,T]=Bt.useState([{productId:"",quantity:1,price:0}]),[R,b]=Bt.useState(0),B=(it,et,rt)=>{const At=[...y];if(At[it][et]=rt,et==="productId"){const mt=l.find(Rt=>Rt.id===rt);mt&&(At[it].price=mt.price||0)}T(At)},Y=()=>{T([...y,{productId:"",quantity:1,price:0}])},J=it=>{const et=y.filter((rt,At)=>At!==it);T(et)};Bt.useEffect(()=>{(()=>{const et=y.reduce((rt,At)=>{const mt=parseFloat(At.quantity)||0,Rt=parseFloat(At.price)||0;return rt+mt*Rt},0);b(et)})()},[y]);const Z=it=>{it.preventDefault();const et={clientId:c,date:new Date(p),items:y.map(rt=>({...rt,quantity:Number(rt.quantity),price:Number(rt.price)})),total:R};n(et),d(""),g(new Date().toISOString().split("T")[0]),T([{productId:"",quantity:1,price:0}])};return M.jsx(nN,{isOpen:r,onClose:t,title:"Crear Nueva Factura de Venta",children:M.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.jsxs(IE,{id:"client",label:"Cliente",value:c,onChange:it=>d(it.target.value),required:!0,children:[M.jsx("option",{value:"",children:"Seleccione un cliente"}),s.map(it=>M.jsx("option",{value:it.id,children:it.name},it.id))]}),M.jsx(Vr,{id:"date",label:"Fecha",type:"date",value:p,onChange:it=>g(it.target.value),required:!0})]}),M.jsx("h4",{className:"text-md font-semibold pt-4 border-t mt-4",children:"Ítems de la Factura"}),y.map((it,et)=>M.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[M.jsx("div",{className:"col-span-5",children:M.jsxs(IE,{value:it.productId,onChange:rt=>B(et,"productId",rt.target.value),children:[M.jsx("option",{value:"",children:"Seleccione producto"}),l.map(rt=>M.jsx("option",{value:rt.id,children:rt.name},rt.id))]})}),M.jsx("div",{className:"col-span-2",children:M.jsx(Vr,{type:"number",value:it.quantity,onChange:rt=>B(et,"quantity",rt.target.value),placeholder:"Cant.",min:"1"})}),M.jsx("div",{className:"col-span-3",children:M.jsx(Vr,{type:"number",value:it.price,onChange:rt=>B(et,"price",rt.target.value),placeholder:"Precio"})}),M.jsx("div",{className:"col-span-2 flex justify-end",children:M.jsx(Ga,{type:"button",variant:"danger",onClick:()=>J(et),children:$e.trash})})]},et)),M.jsx(Ga,{type:"button",variant:"secondary",onClick:Y,children:"Añadir Ítem"}),M.jsx("div",{className:"text-right pt-4 border-t mt-4",children:M.jsxs("p",{className:"text-lg font-bold",children:["Total: $",new Intl.NumberFormat("es-CO").format(R)]})}),M.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[M.jsx(Ga,{type:"button",variant:"secondary",onClick:t,children:"Cancelar"}),M.jsx(Ga,{type:"submit",variant:"primary",children:"Guardar Factura"})]})]})})};function oN(){return M.jsx(eN,{children:M.jsx(lN,{})})}const lN=()=>{const{user:r,loading:t,error:n}=Ph();return t?M.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50",children:M.jsx(nA,{})}):n?M.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50 p-4",children:M.jsx(iA,{message:n})}):r?M.jsx(rN,{}):M.jsx(iN,{})};jS.createRoot(document.getElementById("root")).render(M.jsx(Bt.StrictMode,{children:M.jsx(oN,{})}));

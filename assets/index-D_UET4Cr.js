(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function NS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bd={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function DS(){if(q_)return Tl;q_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Tl.Fragment=e,Tl.jsx=n,Tl.jsxs=n,Tl}var H_;function xS(){return H_||(H_=1,Bd.exports=DS()),Bd.exports}var S=xS(),qd={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function OS(){if(F_)return we;F_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=I&&D[I]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,ee={};function W(D,Z,J){this.props=D,this.context=Z,this.refs=ee,this.updater=J||z}W.prototype.isReactComponent={},W.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function le(){}le.prototype=W.prototype;function re(D,Z,J){this.props=D,this.context=Z,this.refs=ee,this.updater=J||z}var ce=re.prototype=new le;ce.constructor=re,G(ce,W.prototype),ce.isPureReactComponent=!0;var Ce=Array.isArray,ve={H:null,A:null,T:null,S:null,V:null},Oe=Object.prototype.hasOwnProperty;function V(D,Z,J,ne,me,De){return J=De.ref,{$$typeof:r,type:D,key:Z,ref:J!==void 0?J:null,props:De}}function b(D,Z){return V(D.type,Z,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(J){return Z[J]})}var M=/\/+/g;function k(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function C(){}function he(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function be(D,Z,J,ne,me){var De=typeof D;(De==="undefined"||De==="boolean")&&(D=null);var Te=!1;if(D===null)Te=!0;else switch(De){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(D.$$typeof){case r:case e:Te=!0;break;case T:return Te=D._init,be(Te(D._payload),Z,J,ne,me)}}if(Te)return me=me(D),Te=ne===""?"."+k(D,0):ne,Ce(me)?(J="",Te!=null&&(J=Te.replace(M,"$&/")+"/"),be(me,Z,J,"",function(Kn){return Kn})):me!=null&&(N(me)&&(me=b(me,J+(me.key==null||D&&D.key===me.key?"":(""+me.key).replace(M,"$&/")+"/")+Te)),Z.push(me)),1;Te=0;var Ot=ne===""?".":ne+":";if(Ce(D))for(var et=0;et<D.length;et++)ne=D[et],De=Ot+k(ne,et),Te+=be(ne,Z,J,De,me);else if(et=R(D),typeof et=="function")for(D=et.call(D),et=0;!(ne=D.next()).done;)ne=ne.value,De=Ot+k(ne,et++),Te+=be(ne,Z,J,De,me);else if(De==="object"){if(typeof D.then=="function")return be(he(D),Z,J,ne,me);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function H(D,Z,J){if(D==null)return D;var ne=[],me=0;return be(D,ne,"","",function(De){return Z.call(J,De,me++)}),ne}function te(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(J){(D._status===0||D._status===-1)&&(D._status=1,D._result=J)},function(J){(D._status===0||D._status===-1)&&(D._status=2,D._result=J)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ue=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ne(){}return we.Children={map:H,forEach:function(D,Z,J){H(D,function(){Z.apply(this,arguments)},J)},count:function(D){var Z=0;return H(D,function(){Z++}),Z},toArray:function(D){return H(D,function(Z){return Z})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},we.Component=W,we.Fragment=n,we.Profiler=l,we.PureComponent=re,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,we.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ve.H.useMemoCache(D)}},we.cache=function(D){return function(){return D.apply(null,arguments)}},we.cloneElement=function(D,Z,J){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ne=G({},D.props),me=D.key,De=void 0;if(Z!=null)for(Te in Z.ref!==void 0&&(De=void 0),Z.key!==void 0&&(me=""+Z.key),Z)!Oe.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(ne[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)ne.children=J;else if(1<Te){for(var Ot=Array(Te),et=0;et<Te;et++)Ot[et]=arguments[et+2];ne.children=Ot}return V(D.type,me,void 0,void 0,De,ne)},we.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},we.createElement=function(D,Z,J){var ne,me={},De=null;if(Z!=null)for(ne in Z.key!==void 0&&(De=""+Z.key),Z)Oe.call(Z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=Z[ne]);var Te=arguments.length-2;if(Te===1)me.children=J;else if(1<Te){for(var Ot=Array(Te),et=0;et<Te;et++)Ot[et]=arguments[et+2];me.children=Ot}if(D&&D.defaultProps)for(ne in Te=D.defaultProps,Te)me[ne]===void 0&&(me[ne]=Te[ne]);return V(D,De,void 0,void 0,null,me)},we.createRef=function(){return{current:null}},we.forwardRef=function(D){return{$$typeof:p,render:D}},we.isValidElement=N,we.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:te}},we.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},we.startTransition=function(D){var Z=ve.T,J={};ve.T=J;try{var ne=D(),me=ve.S;me!==null&&me(J,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Ne,ue)}catch(De){ue(De)}finally{ve.T=Z}},we.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},we.use=function(D){return ve.H.use(D)},we.useActionState=function(D,Z,J){return ve.H.useActionState(D,Z,J)},we.useCallback=function(D,Z){return ve.H.useCallback(D,Z)},we.useContext=function(D){return ve.H.useContext(D)},we.useDebugValue=function(){},we.useDeferredValue=function(D,Z){return ve.H.useDeferredValue(D,Z)},we.useEffect=function(D,Z,J){var ne=ve.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(D,Z)},we.useId=function(){return ve.H.useId()},we.useImperativeHandle=function(D,Z,J){return ve.H.useImperativeHandle(D,Z,J)},we.useInsertionEffect=function(D,Z){return ve.H.useInsertionEffect(D,Z)},we.useLayoutEffect=function(D,Z){return ve.H.useLayoutEffect(D,Z)},we.useMemo=function(D,Z){return ve.H.useMemo(D,Z)},we.useOptimistic=function(D,Z){return ve.H.useOptimistic(D,Z)},we.useReducer=function(D,Z,J){return ve.H.useReducer(D,Z,J)},we.useRef=function(D){return ve.H.useRef(D)},we.useState=function(D){return ve.H.useState(D)},we.useSyncExternalStore=function(D,Z,J){return ve.H.useSyncExternalStore(D,Z,J)},we.useTransition=function(){return ve.H.useTransition()},we.version="19.1.1",we}var G_;function Om(){return G_||(G_=1,qd.exports=OS()),qd.exports}var Re=Om();const VS=NS(Re);var Hd={exports:{}},Al={},Fd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function MS(){return Q_||(Q_=1,(function(r){function e(H,te){var ue=H.length;H.push(te);e:for(;0<ue;){var Ne=ue-1>>>1,D=H[Ne];if(0<l(D,te))H[Ne]=te,H[ue]=D,ue=Ne;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var te=H[0],ue=H.pop();if(ue!==te){H[0]=ue;e:for(var Ne=0,D=H.length,Z=D>>>1;Ne<Z;){var J=2*(Ne+1)-1,ne=H[J],me=J+1,De=H[me];if(0>l(ne,ue))me<D&&0>l(De,ne)?(H[Ne]=De,H[me]=ue,Ne=me):(H[Ne]=ne,H[J]=ue,Ne=J);else if(me<D&&0>l(De,ue))H[Ne]=De,H[me]=ue,Ne=me;else break e}}return te}function l(H,te){var ue=H.sortIndex-te.sortIndex;return ue!==0?ue:H.id-te.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,I=null,R=3,z=!1,G=!1,ee=!1,W=!1,le=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function Ce(H){for(var te=n(y);te!==null;){if(te.callback===null)s(y);else if(te.startTime<=H)s(y),te.sortIndex=te.expirationTime,e(g,te);else break;te=n(y)}}function ve(H){if(ee=!1,Ce(H),!G)if(n(g)!==null)G=!0,Oe||(Oe=!0,k());else{var te=n(y);te!==null&&be(ve,te.startTime-H)}}var Oe=!1,V=-1,b=5,N=-1;function O(){return W?!0:!(r.unstable_now()-N<b)}function M(){if(W=!1,Oe){var H=r.unstable_now();N=H;var te=!0;try{e:{G=!1,ee&&(ee=!1,re(V),V=-1),z=!0;var ue=R;try{t:{for(Ce(H),I=n(g);I!==null&&!(I.expirationTime>H&&O());){var Ne=I.callback;if(typeof Ne=="function"){I.callback=null,R=I.priorityLevel;var D=Ne(I.expirationTime<=H);if(H=r.unstable_now(),typeof D=="function"){I.callback=D,Ce(H),te=!0;break t}I===n(g)&&s(g),Ce(H)}else s(g);I=n(g)}if(I!==null)te=!0;else{var Z=n(y);Z!==null&&be(ve,Z.startTime-H),te=!1}}break e}finally{I=null,R=ue,z=!1}te=void 0}}finally{te?k():Oe=!1}}}var k;if(typeof ce=="function")k=function(){ce(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,he=C.port2;C.port1.onmessage=M,k=function(){he.postMessage(null)}}else k=function(){le(M,0)};function be(H,te){V=le(function(){H(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(H){switch(R){case 1:case 2:case 3:var te=3;break;default:te=R}var ue=R;R=te;try{return H()}finally{R=ue}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=R;R=H;try{return te()}finally{R=ue}},r.unstable_scheduleCallback=function(H,te,ue){var Ne=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ne+ue:Ne):ue=Ne,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ue+D,H={id:T++,callback:te,priorityLevel:H,startTime:ue,expirationTime:D,sortIndex:-1},ue>Ne?(H.sortIndex=ue,e(y,H),n(g)===null&&H===n(y)&&(ee?(re(V),V=-1):ee=!0,be(ve,ue-Ne))):(H.sortIndex=D,e(g,H),G||z||(G=!0,Oe||(Oe=!0,k()))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var te=R;return function(){var ue=R;R=te;try{return H.apply(this,arguments)}finally{R=ue}}}})(Gd)),Gd}var K_;function PS(){return K_||(K_=1,Fd.exports=MS()),Fd.exports}var Qd={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function kS(){if(Y_)return Xt;Y_=1;var r=Om();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xt.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,T)},Xt.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Xt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Xt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Xt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:R,fetchPriority:z}):T==="script"&&s.d.X(g,{crossOrigin:I,integrity:R,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Xt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Xt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Xt.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Xt.requestFormReset=function(g){s.d.r(g)},Xt.unstable_batchedUpdates=function(g,y){return g(y)},Xt.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Xt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xt.version="19.1.1",Xt}var X_;function LS(){if(X_)return Qd.exports;X_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qd.exports=kS(),Qd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function US(){if($_)return Al;$_=1;var r=PS(),e=Om(),n=LS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case W:return"Profiler";case ee:return"StrictMode";case ve:return"Suspense";case Oe:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ce:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case Ce:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return i=t.displayName||null,i!==null?i:he(t.type)||"Memo";case b:i=t._payload,t=t._init;try{return he(t(i))}catch{}}return null}var be=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ne=[],D=-1;function Z(t){return{current:t}}function J(t){0>D||(t.current=Ne[D],Ne[D]=null,D--)}function ne(t,i){D++,Ne[D]=t.current,t.current=i}var me=Z(null),De=Z(null),Te=Z(null),Ot=Z(null);function et(t,i){switch(ne(Te,i),ne(De,t),ne(me,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?g_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=g_(i),t=y_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(me),ne(me,t)}function Kn(){J(me),J(De),J(Te)}function tr(t){t.memoizedState!==null&&ne(Ot,t);var i=me.current,a=y_(i,t.type);i!==a&&(ne(De,t),ne(me,a))}function vi(t){De.current===t&&(J(me),J(De)),Ot.current===t&&(J(Ot),gl._currentValue=ue)}var es=Object.prototype.hasOwnProperty,ts=r.unstable_scheduleCallback,ns=r.unstable_cancelCallback,fo=r.unstable_shouldYield,lu=r.unstable_requestPaint,An=r.unstable_now,zh=r.unstable_getCurrentPriorityLevel,mo=r.unstable_ImmediatePriority,$s=r.unstable_UserBlockingPriority,is=r.unstable_NormalPriority,Bh=r.unstable_LowPriority,Zs=r.unstable_IdlePriority,po=r.log,uu=r.unstable_setDisableYieldValue,lt=null,Qe=null;function cn(t){if(typeof po=="function"&&uu(t),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(lt,t)}catch{}}var Kt=Math.clz32?Math.clz32:rs,cu=Math.log,qh=Math.LN2;function rs(t){return t>>>=0,t===0?32:31-(cu(t)/qh|0)|0}var ss=256,as=4194304;function Un(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ws(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Un(o):(v&=E,v!==0?h=Un(v):a||(a=E&~t,a!==0&&(h=Un(a))))):(E=o&~f,E!==0?h=Un(E):v!==0?h=Un(v):a||(a=o&~t,a!==0&&(h=Un(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function os(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function go(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(){var t=ss;return ss<<=1,(ss&4194048)===0&&(ss=256),t}function _o(){var t=as;return as<<=1,(as&62914560)===0&&(as=4194304),t}function Ei(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ti(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vo(t,i,a,o,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Kt(a),X=1<<Q;E[Q]=0,w[Q]=-1;var B=j[Q];if(B!==null)for(j[Q]=null,Q=0;Q<B.length;Q++){var q=B[Q];q!==null&&(q.lane&=-536870913)}a&=~X}o!==0&&Yn(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~i))}function Yn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Kt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function Eo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Kt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function nr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Js(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ir(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:k_(t.type))}function hu(t,i){var a=te.p;try{return te.p=t,i()}finally{te.p=a}}var rt=Math.random().toString(36).slice(2),Rt="__reactFiber$"+rt,gt="__reactProps$"+rt,Sn="__reactContainer$"+rt,To="__reactEvents$"+rt,Hh="__reactListeners$"+rt,rr="__reactHandles$"+rt,fu="__reactResources$"+rt,ls="__reactMarker$"+rt;function sr(t){delete t[Rt],delete t[gt],delete t[To],delete t[Hh],delete t[rr]}function Ai(t){var i=t[Rt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Sn]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=T_(t);t!==null;){if(a=t[Rt])return a;t=T_(t)}return i}t=a,a=t.parentNode}return null}function Xn(t){if(t=t[Rt]||t[Sn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function $n(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function en(t){var i=t[fu];return i||(i=t[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ht(t){t[ls]=!0}var Ao=new Set,ea={};function jn(t,i){Si(t,i),Si(t+"Capture",i)}function Si(t,i){for(ea[t]=i,t=0;t<i.length;t++)Ao.add(i[t])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},us={};function pu(t){return es.call(us,t)?!0:es.call(mu,t)?!1:du.test(t)?us[t]=!0:(mu[t]=!0,!1)}function ar(t,i,a){if(pu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Zn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function jt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var cs,gu;function bi(t){if(cs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);cs=i&&i[1]||"",gu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+t+gu}var ta=!1;function na(t,i){if(!t||ta)return"";ta=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var B=q}Reflect.construct(t,[],X)}else{try{X.call()}catch(q){B=q}t.call(X.prototype)}}else{try{throw Error()}catch(q){B=q}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var w=v.split(`
`),j=E.split(`
`);for(h=o=0;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===w.length||h===j.length)for(o=w.length-1,h=j.length-1;1<=o&&0<=h&&w[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(w[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||w[o]!==j[h]){var Q=`
`+w[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ta=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?bi(a):""}function So(t){switch(t.tag){case 26:case 27:case 5:return bi(t.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return na(t.type,!1);case 11:return na(t.type.render,!1);case 1:return na(t.type,!0);case 31:return bi("Activity");default:return""}}function ia(t){try{var i="";do i+=So(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fh(t){var i=bo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ra(t){t._valueTracker||(t._valueTracker=Fh(t))}function wo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=bo(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gh=/[\n"\\]/g;function yt(t){return t.replace(Gh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hn(t,i,a,o,h,f,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+tn(i)):t.value!==""+tn(i)&&(t.value=""+tn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?or(t,v,tn(i)):a!=null?or(t,v,tn(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+tn(E):t.removeAttribute("name")}function fs(t,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function or(t,i,a){i==="number"&&hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function wi(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Xe(t,i,a){if(i!=null&&(i=""+tn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+tn(a):""}function ds(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(be(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=tn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function bn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ms.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ro(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&yu(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&yu(t,f,i[f])}function Io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(t){return Kh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ri=null;function wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Ci=null;function Co(t){var i=Xn(t);if(i&&(t=i.stateNode)){var a=t[gt]||null;e:switch(t=i.stateNode,i.type){case"input":if(hn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[gt]||null;if(!h)throw Error(s(90));hn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&wo(o)}break e;case"textarea":Xe(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&wi(t,!!a.multiple,i,!1)}}}var Wn=!1;function _u(t,i,a){if(Wn)return t(i,a);Wn=!0;try{var o=t(i);return o}finally{if(Wn=!1,(Ii!==null||Ci!==null)&&(hc(),Ii&&(i=Ii,t=Ci,Ci=Ii=null,Co(i),t)))for(i=0;i<t.length;i++)Co(t[i])}}function ps(t,i){var a=t.stateNode;if(a===null)return null;var o=a[gt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(zn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Rn=!1}var Jn=null,lr=null,Ni=null;function No(){if(Ni)return Ni;var t,i=lr,a=i.length,o,h="value"in Jn?Jn.value:Jn.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Ni=h.slice(t,1<o?1-o:void 0)}function ei(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ti(){return!0}function Do(){return!1}function Vt(t){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:Do,this.isPropagationStopped=Do,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Vt(Fe),ys=T({},Fe,{view:0,detail:0}),vu=Vt(ys),oa,la,ni,_s=T({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ni&&(ni&&t.type==="mousemove"?(oa=t.screenX-ni.screenX,la=t.screenY-ni.screenY):la=oa=0,ni=t),oa)},movementY:function(t){return"movementY"in t?t.movementY:la}}),In=Vt(_s),Eu=T({},_s,{dataTransfer:0}),Yh=Vt(Eu),vs=T({},ys,{relatedTarget:0}),ua=Vt(vs),xo=T({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),ca=Vt(xo),Tu=T({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ha=Vt(Tu),Xh=T({},Fe,{data:0}),Oo=Vt(Xh),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Su[t])?!!i[t]:!1}function Ts(){return Vo}var bu=T({},ys,{key:function(t){if(t.key){var i=Es[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Au[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(t){return t.type==="keypress"?ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fa=Vt(bu),wu=T({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Vt(wu),Di=T({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),Ru=Vt(Di),Iu=T({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Vt(Iu),Nu=T({},_s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),da=Vt(Nu),nn=T({},Fe,{newState:0,oldState:0}),Du=Vt(nn),xu=[9,13,27,32],ii=zn&&"CompositionEvent"in window,u=null;zn&&"documentMode"in document&&(u=document.documentMode);var m=zn&&"TextEvent"in window&&!u,_=zn&&(!ii||u&&8<u&&11>=u),A=" ",L=!1;function F(t,i){switch(t){case"keyup":return xu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ue=!1;function It(t,i){switch(t){case"compositionend":return ie(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function je(t,i){if(Ue)return t==="compositionend"||!ii&&F(t,i)?(t=No(),Ni=lr=Jn=null,Ue=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Mt[t.type]:i==="textarea"}function xi(t,i,a,o){Ii?Ci?Ci.push(o):Ci=[o]:Ii=o,i=yc(i,"onChange"),0<i.length&&(a=new aa("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var zt=null,ri=null;function Po(t){h_(t,0)}function Ou(t){var i=$n(t);if(wo(i))return t}function Op(t,i){if(t==="change")return i}var Vp=!1;if(zn){var $h;if(zn){var Zh="oninput"in document;if(!Zh){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),Zh=typeof Mp.oninput=="function"}$h=Zh}else $h=!1;Vp=$h&&(!document.documentMode||9<document.documentMode)}function Pp(){zt&&(zt.detachEvent("onpropertychange",kp),ri=zt=null)}function kp(t){if(t.propertyName==="value"&&Ou(ri)){var i=[];xi(i,ri,t,wn(t)),_u(Po,i)}}function sA(t,i,a){t==="focusin"?(Pp(),zt=i,ri=a,zt.attachEvent("onpropertychange",kp)):t==="focusout"&&Pp()}function aA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(ri)}function oA(t,i){if(t==="click")return Ou(i)}function lA(t,i){if(t==="input"||t==="change")return Ou(i)}function uA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:uA;function ko(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!es.call(i,h)||!fn(t[h],i[h]))return!1}return!0}function Lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Up(t,i){var a=Lp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lp(a)}}function jp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?jp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function zp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=hs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=hs(t.document)}return i}function Wh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var cA=zn&&"documentMode"in document&&11>=document.documentMode,ma=null,Jh=null,Lo=null,ef=!1;function Bp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||ma==null||ma!==hs(o)||(o=ma,"selectionStart"in o&&Wh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Lo&&ko(Lo,o)||(Lo=o,o=yc(Jh,"onSelect"),0<o.length&&(i=new aa("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ma)))}function As(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var pa={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},tf={},qp={};zn&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ss(t){if(tf[t])return tf[t];if(!pa[t])return t;var i=pa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in qp)return tf[t]=i[a];return t}var Hp=Ss("animationend"),Fp=Ss("animationiteration"),Gp=Ss("animationstart"),hA=Ss("transitionrun"),fA=Ss("transitionstart"),dA=Ss("transitioncancel"),Qp=Ss("transitionend"),Kp=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function Bn(t,i){Kp.set(t,i),jn(i,[t])}var Yp=new WeakMap;function Cn(t,i){if(typeof t=="object"&&t!==null){var a=Yp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ia(i)},Yp.set(t,i),i)}return{value:t,source:i,stack:ia(i)}}var Nn=[],ga=0,rf=0;function Vu(){for(var t=ga,i=rf=ga=0;i<t;){var a=Nn[i];Nn[i++]=null;var o=Nn[i];Nn[i++]=null;var h=Nn[i];Nn[i++]=null;var f=Nn[i];if(Nn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Xp(a,h,f)}}function Mu(t,i,a,o){Nn[ga++]=t,Nn[ga++]=i,Nn[ga++]=a,Nn[ga++]=o,rf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function sf(t,i,a,o){return Mu(t,i,a,o),Pu(t)}function ya(t,i){return Mu(t,null,null,i),Pu(t)}function Xp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Kt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Pu(t){if(50<ll)throw ll=0,hd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var _a={};function mA(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,o){return new mA(t,i,a,o)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oi(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $p(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function ku(t,i,a,o,h,f){var v=0;if(o=t,typeof t=="function")af(t)&&(v=1);else if(typeof t=="string")v=gS(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=dn(31,a,i,h),t.elementType=N,t.lanes=f,t;case G:return bs(a.children,h,f,i);case ee:v=8,h|=24;break;case W:return t=dn(12,a,i,h|2),t.elementType=W,t.lanes=f,t;case ve:return t=dn(13,a,i,h),t.elementType=ve,t.lanes=f,t;case Oe:return t=dn(19,a,i,h),t.elementType=Oe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:case ce:v=10;break e;case re:v=9;break e;case Ce:v=11;break e;case V:v=14;break e;case b:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=dn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function bs(t,i,a,o){return t=dn(7,t,o,i),t.lanes=a,t}function of(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function lf(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var va=[],Ea=0,Lu=null,Uu=0,Dn=[],xn=0,ws=null,Vi=1,Mi="";function Rs(t,i){va[Ea++]=Uu,va[Ea++]=Lu,Lu=t,Uu=i}function Zp(t,i,a){Dn[xn++]=Vi,Dn[xn++]=Mi,Dn[xn++]=ws,ws=t;var o=Vi;t=Mi;var h=32-Kt(o)-1;o&=~(1<<h),a+=1;var f=32-Kt(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Vi=1<<32-Kt(i)+h|a<<h|o,Mi=f+t}else Vi=1<<f|a<<h|o,Mi=t}function uf(t){t.return!==null&&(Rs(t,1),Zp(t,1,0))}function cf(t){for(;t===Lu;)Lu=va[--Ea],va[Ea]=null,Uu=va[--Ea],va[Ea]=null;for(;t===ws;)ws=Dn[--xn],Dn[xn]=null,Mi=Dn[--xn],Dn[xn]=null,Vi=Dn[--xn],Dn[xn]=null}var rn=null,ut=null,He=!1,Is=null,si=!1,hf=Error(s(519));function Cs(t){var i=Error(s(418,""));throw zo(Cn(i,t)),hf}function Wp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[Rt]=t,i[gt]=o,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<cl.length;a++)Me(cl[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),fs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ra(i);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),ds(i,o.value,o.defaultValue,o.children),ra(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||p_(i.textContent,a)?(o.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),o.onScroll!=null&&Me("scroll",i),o.onScrollEnd!=null&&Me("scrollend",i),o.onClick!=null&&(i.onclick=_c),i=!0):i=!1,i||Cs(t)}function Jp(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:rn=rn.return}}function Uo(t){if(t!==rn)return!1;if(!He)return Jp(t),He=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&ut&&Cs(t),Jp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ut=Hn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ut=null}}else i===27?(i=ut,br(t.type)?(t=xd,xd=null,ut=t):ut=i):ut=rn?Hn(t.stateNode.nextSibling):null;return!0}function jo(){ut=rn=null,He=!1}function eg(){var t=Is;return t!==null&&(on===null?on=t:on.push.apply(on,t),Is=null),t}function zo(t){Is===null?Is=[t]:Is.push(t)}var ff=Z(null),Ns=null,Pi=null;function ur(t,i,a){ne(ff,i._currentValue),i._currentValue=a}function ki(t){t._currentValue=ff.current,J(ff)}function df(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function mf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var w=0;w<i.length;w++)if(E.context===i[w]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),df(f.return,a,t),o||(v=null);break e}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),df(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Bo(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;fn(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===Ot.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(gl):t=[gl])}h=h.return}t!==null&&mf(i,t,a,o),i.flags|=262144}function ju(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ds(t){Ns=t,Pi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return tg(Ns,t)}function zu(t,i){return Ns===null&&Ds(t),tg(t,i)}function tg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Pi===null){if(t===null)throw Error(s(308));Pi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Pi=Pi.next=i;return a}var pA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},gA=r.unstable_scheduleCallback,yA=r.unstable_NormalPriority,Nt={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new pA,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&gA(yA,function(){t.controller.abort()})}var Ho=null,gf=0,Ta=0,Aa=null;function _A(t,i){if(Ho===null){var a=Ho=[];gf=0,Ta=_d(),Aa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return gf++,i.then(ng,ng),i}function ng(){if(--gf===0&&Ho!==null){Aa!==null&&(Aa.status="fulfilled");var t=Ho;Ho=null,Ta=0,Aa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function vA(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var ig=H.S;H.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&_A(t,i),ig!==null&&ig(t,i)};var xs=Z(null);function yf(){var t=xs.current;return t!==null?t:tt.pooledCache}function Bu(t,i){i===null?ne(xs,xs.current):ne(xs,i.pool)}function rg(){var t=yf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Fo=Error(s(460)),sg=Error(s(474)),qu=Error(s(542)),_f={then:function(){}};function ag(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hu(){}function og(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Hu,Hu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ug(t),t;default:if(typeof i.status=="string")i.then(Hu,Hu);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ug(t),t}throw Go=i,Fo}}var Go=null;function lg(){if(Go===null)throw Error(s(459));var t=Go;return Go=null,t}function ug(t){if(t===Fo||t===qu)throw Error(s(483))}var cr=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ke&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Pu(t),Xp(t,null,a),i}return Mu(t,o,i,a),Pu(t)}function Qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Eo(t,a)}}function Tf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Af=!1;function Ko(){if(Af){var t=Aa;if(t!==null)throw t}}function Yo(t,i,a,o){Af=!1;var h=t.updateQueue;cr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,j=w.next;w.next=null,v===null?f=j:v.next=j,v=w;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=j:E.next=j,Q.lastBaseUpdate=w))}if(f!==null){var X=h.baseState;v=0,Q=j=w=null,E=f;do{var B=E.lane&-536870913,q=B!==E.lane;if(q?(ze&B)===B:(o&B)===B){B!==0&&B===Ta&&(Af=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=t,pe=E;B=i;var We=a;switch(pe.tag){case 1:if(Ee=pe.payload,typeof Ee=="function"){X=Ee.call(We,X,B);break e}X=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=pe.payload,B=typeof Ee=="function"?Ee.call(We,X,B):Ee,B==null)break e;X=T({},X,B);break e;case 2:cr=!0}}B=E.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(j=Q=q,w=X):Q=Q.next=q,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(w=X),h.baseState=w,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),Er|=v,t.lanes=v,t.memoizedState=X}}function cg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function hg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)cg(a[t],i)}var Sa=Z(null),Fu=Z(0);function fg(t,i){t=Hi,ne(Fu,t),ne(Sa,i),Hi=t|i.baseLanes}function Sf(){ne(Fu,Hi),ne(Sa,Sa.current)}function bf(){Hi=Fu.current,J(Sa),J(Fu)}var dr=0,Ie=null,$e=null,_t=null,Gu=!1,ba=!1,Os=!1,Qu=0,Xo=0,wa=null,EA=0;function ft(){throw Error(s(321))}function wf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!fn(t[a],i[a]))return!1;return!0}function Rf(t,i,a,o,h,f){return dr=f,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?Xg:$g,Os=!1,f=a(o,h),Os=!1,ba&&(f=mg(i,a,o,h)),dg(t),f}function dg(t){H.H=Wu;var i=$e!==null&&$e.next!==null;if(dr=0,_t=$e=Ie=null,Gu=!1,Xo=0,wa=null,i)throw Error(s(300));t===null||Pt||(t=t.dependencies,t!==null&&ju(t)&&(Pt=!0))}function mg(t,i,a,o){Ie=t;var h=0;do{if(ba&&(wa=null),Xo=0,ba=!1,25<=h)throw Error(s(301));if(h+=1,_t=$e=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=IA,f=i(a,o)}while(ba);return f}function TA(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?$o(i):i,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ie.flags|=1024),i}function If(){var t=Qu!==0;return Qu=0,t}function Cf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Nf(t){if(Gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Gu=!1}dr=0,_t=$e=Ie=null,ba=!1,Xo=Qu=0,wa=null}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ie.memoizedState=_t=t:_t=_t.next=t,_t}function vt(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var i=_t===null?Ie.memoizedState:_t.next;if(i!==null)_t=i,$e=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},_t===null?Ie.memoizedState=_t=t:_t=_t.next=t}return _t}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(t){var i=Xo;return Xo+=1,wa===null&&(wa=[]),t=og(wa,t,i),i=Ie,(_t===null?i.memoizedState:_t.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Xg:$g),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $o(t);if(t.$$typeof===ce)return Yt(t)}throw Error(s(438,String(t)))}function xf(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ie.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Df(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function Li(t,i){return typeof i=="function"?i(t):i}function Yu(t){var i=vt();return Of(i,$e,t)}function Of(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=v=null,w=null,j=i,Q=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(ze&X)===X:(dr&X)===X){var B=j.revertLane;if(B===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Ta&&(Q=!0);else if((dr&B)===B){j=j.next,B===Ta&&(Q=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=X,v=f):w=w.next=X,Ie.lanes|=B,Er|=B;X=j.action,Os&&a(f,X),f=j.hasEagerState?j.eagerState:a(f,X)}else B={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=B,v=f):w=w.next=B,Ie.lanes|=X,Er|=X;j=j.next}while(j!==null&&j!==i);if(w===null?v=f:w.next=E,!fn(f,t.memoizedState)&&(Pt=!0,Q&&(a=Aa,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=w,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Vf(t){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);fn(f,i.memoizedState)||(Pt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function pg(t,i,a){var o=Ie,h=vt(),f=He;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!fn(($e||h).memoizedState,a);v&&(h.memoizedState=a,Pt=!0),h=h.queue;var E=_g.bind(null,o,h,t);if(Zo(2048,8,E,[t]),h.getSnapshot!==i||v||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Ra(9,Xu(),yg.bind(null,o,h,a,i),null),tt===null)throw Error(s(349));f||(dr&124)!==0||gg(o,i,a)}return a}function gg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Df(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function yg(t,i,a,o){i.value=a,i.getSnapshot=o,vg(i)&&Eg(t)}function _g(t,i,a){return a(function(){vg(i)&&Eg(t)})}function vg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!fn(t,a)}catch{return!0}}function Eg(t){var i=ya(t,2);i!==null&&_n(i,t,2)}function Mf(t){var i=sn();if(typeof t=="function"){var a=t;if(t=a(),Os){cn(!0);try{a()}finally{cn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:t},i}function Tg(t,i,a,o){return t.baseState=a,Of(t,$e,typeof o=="function"?o:Li)}function AA(t,i,a,o,h){if(Zu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Ag(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Ag(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=H.T,v={};H.T=v;try{var E=a(h,o),w=H.S;w!==null&&w(v,E),Sg(t,i,E)}catch(j){Pf(t,i,j)}finally{H.T=f}}else try{f=a(h,o),Sg(t,i,f)}catch(j){Pf(t,i,j)}}function Sg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){bg(t,i,o)},function(o){return Pf(t,i,o)}):bg(t,i,a)}function bg(t,i,a){i.status="fulfilled",i.value=a,wg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ag(t,a)))}function Pf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,wg(i),i=i.next;while(i!==o)}t.action=null}function wg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Rg(t,i){return i}function Ig(t,i){if(He){var a=tt.formState;if(a!==null){e:{var o=Ie;if(He){if(ut){t:{for(var h=ut,f=si;h.nodeType!==8;){if(!f){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ut=Hn(h.nextSibling),o=h.data==="F!";break e}}Cs(o)}o=!1}o&&(i=a[0])}}return a=sn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:i},a.queue=o,a=Qg.bind(null,Ie,o),o.dispatch=a,o=Mf(!1),f=zf.bind(null,Ie,!1,o.queue),o=sn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=AA.bind(null,Ie,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Cg(t){var i=vt();return Ng(i,$e,t)}function Ng(t,i,a){if(i=Of(t,i,Rg)[0],t=Yu(Li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=$o(i)}catch(v){throw v===Fo?qu:v}else o=i;i=vt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Ra(9,Xu(),SA.bind(null,h,a),null)),[o,f,t]}function SA(t,i){t.action=i}function Dg(t){var i=vt(),a=$e;if(a!==null)return Ng(i,a,t);vt(),i=i.memoizedState,a=vt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ra(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Df(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Xu(){return{destroy:void 0,resource:void 0}}function xg(){return vt().memoizedState}function $u(t,i,a,o){var h=sn();o=o===void 0?null:o,Ie.flags|=t,h.memoizedState=Ra(1|i,Xu(),a,o)}function Zo(t,i,a,o){var h=vt();o=o===void 0?null:o;var f=h.memoizedState.inst;$e!==null&&o!==null&&wf(o,$e.memoizedState.deps)?h.memoizedState=Ra(i,f,a,o):(Ie.flags|=t,h.memoizedState=Ra(1|i,f,a,o))}function Og(t,i){$u(8390656,8,t,i)}function Vg(t,i){Zo(2048,8,t,i)}function Mg(t,i){return Zo(4,2,t,i)}function Pg(t,i){return Zo(4,4,t,i)}function kg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Lg(t,i,a){a=a!=null?a.concat([t]):null,Zo(4,4,kg.bind(null,i,t),a)}function kf(){}function Ug(t,i){var a=vt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&wf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function jg(t,i){var a=vt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&wf(i,o[1]))return o[0];if(o=t(),Os){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,i],o}function Lf(t,i,a){return a===void 0||(dr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=qy(),Ie.lanes|=t,Er|=t,a)}function zg(t,i,a,o){return fn(a,i)?a:Sa.current!==null?(t=Lf(t,a,o),fn(t,i)||(Pt=!0),t):(dr&42)===0?(Pt=!0,t.memoizedState=a):(t=qy(),Ie.lanes|=t,Er|=t,i)}function Bg(t,i,a,o,h){var f=te.p;te.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,zf(t,!1,i,a);try{var w=h(),j=H.S;if(j!==null&&j(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var Q=vA(w,o);Wo(t,i,Q,yn(t))}else Wo(t,i,o,yn(t))}catch(X){Wo(t,i,{then:function(){},status:"rejected",reason:X},yn())}finally{te.p=f,H.T=v}}function bA(){}function Uf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=qg(t).queue;Bg(t,h,i,ue,a===null?bA:function(){return Hg(t),a(o)})}function qg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:ue},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Hg(t){var i=qg(t).next.queue;Wo(t,i,{},yn())}function jf(){return Yt(gl)}function Fg(){return vt().memoizedState}function Gg(){return vt().memoizedState}function wA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();t=hr(a);var o=fr(i,t,a);o!==null&&(_n(o,i,a),Qo(o,i,a)),i={cache:pf()},t.payload=i;return}i=i.return}}function RA(t,i,a){var o=yn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Zu(t)?Kg(i,a):(a=sf(t,i,a,o),a!==null&&(_n(a,t,o),Yg(a,i,o)))}function Qg(t,i,a){var o=yn();Wo(t,i,a,o)}function Wo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zu(t))Kg(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,fn(E,v))return Mu(t,i,h,0),tt===null&&Vu(),!1}catch{}finally{}if(a=sf(t,i,h,o),a!==null)return _n(a,t,o),Yg(a,i,o),!0}return!1}function zf(t,i,a,o){if(o={lane:2,revertLane:_d(),action:o,hasEagerState:!1,eagerState:null,next:null},Zu(t)){if(i)throw Error(s(479))}else i=sf(t,a,o,2),i!==null&&_n(i,t,2)}function Zu(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function Kg(t,i){ba=Gu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Yg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Eo(t,a)}}var Wu={readContext:Yt,use:Ku,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},Xg={readContext:Yt,use:Ku,useCallback:function(t,i){return sn().memoizedState=[t,i===void 0?null:i],t},useContext:Yt,useEffect:Og,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,$u(4194308,4,kg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return $u(4194308,4,t,i)},useInsertionEffect:function(t,i){$u(4,2,t,i)},useMemo:function(t,i){var a=sn();i=i===void 0?null:i;var o=t();if(Os){cn(!0);try{t()}finally{cn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=sn();if(a!==void 0){var h=a(i);if(Os){cn(!0);try{a(i)}finally{cn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=RA.bind(null,Ie,t),[o.memoizedState,t]},useRef:function(t){var i=sn();return t={current:t},i.memoizedState=t},useState:function(t){t=Mf(t);var i=t.queue,a=Qg.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,i){var a=sn();return Lf(a,t,i)},useTransition:function(){var t=Mf(!1);return t=Bg.bind(null,Ie,t.queue,!0,!1),sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ie,h=sn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),tt===null)throw Error(s(349));(ze&124)!==0||gg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Og(_g.bind(null,o,f,t),[t]),o.flags|=2048,Ra(9,Xu(),yg.bind(null,o,f,a,i),null),a},useId:function(){var t=sn(),i=tt.identifierPrefix;if(He){var a=Mi,o=Vi;a=(o&~(1<<32-Kt(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Qu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=EA++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:jf,useFormState:Ig,useActionState:Ig,useOptimistic:function(t){var i=sn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=zf.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:xf,useCacheRefresh:function(){return sn().memoizedState=wA.bind(null,Ie)}},$g={readContext:Yt,use:Ku,useCallback:Ug,useContext:Yt,useEffect:Vg,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Pg,useMemo:jg,useReducer:Yu,useRef:xg,useState:function(){return Yu(Li)},useDebugValue:kf,useDeferredValue:function(t,i){var a=vt();return zg(a,$e.memoizedState,t,i)},useTransition:function(){var t=Yu(Li)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:pg,useId:Fg,useHostTransitionStatus:jf,useFormState:Cg,useActionState:Cg,useOptimistic:function(t,i){var a=vt();return Tg(a,$e,t,i)},useMemoCache:xf,useCacheRefresh:Gg},IA={readContext:Yt,use:Ku,useCallback:Ug,useContext:Yt,useEffect:Vg,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Pg,useMemo:jg,useReducer:Vf,useRef:xg,useState:function(){return Vf(Li)},useDebugValue:kf,useDeferredValue:function(t,i){var a=vt();return $e===null?Lf(a,t,i):zg(a,$e.memoizedState,t,i)},useTransition:function(){var t=Vf(Li)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:pg,useId:Fg,useHostTransitionStatus:jf,useFormState:Dg,useActionState:Dg,useOptimistic:function(t,i){var a=vt();return $e!==null?Tg(a,$e,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xf,useCacheRefresh:Gg},Ia=null,Jo=0;function Ju(t){var i=Jo;return Jo+=1,Ia===null&&(Ia=[]),og(Ia,t,i)}function el(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ec(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Zg(t){var i=t._init;return i(t._payload)}function Wg(t){function i(P,x){if(t){var U=P.deletions;U===null?(P.deletions=[x],P.flags|=16):U.push(x)}}function a(P,x){if(!t)return null;for(;x!==null;)i(P,x),x=x.sibling;return null}function o(P){for(var x=new Map;P!==null;)P.key!==null?x.set(P.key,P):x.set(P.index,P),P=P.sibling;return x}function h(P,x){return P=Oi(P,x),P.index=0,P.sibling=null,P}function f(P,x,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<x?(P.flags|=67108866,x):U):(P.flags|=67108866,x)):(P.flags|=1048576,x)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,x,U,K){return x===null||x.tag!==6?(x=of(U,P.mode,K),x.return=P,x):(x=h(x,U),x.return=P,x)}function w(P,x,U,K){var oe=U.type;return oe===G?Q(P,x,U.props.children,K,U.key):x!==null&&(x.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===b&&Zg(oe)===x.type)?(x=h(x,U.props),el(x,U),x.return=P,x):(x=ku(U.type,U.key,U.props,null,P.mode,K),el(x,U),x.return=P,x)}function j(P,x,U,K){return x===null||x.tag!==4||x.stateNode.containerInfo!==U.containerInfo||x.stateNode.implementation!==U.implementation?(x=lf(U,P.mode,K),x.return=P,x):(x=h(x,U.children||[]),x.return=P,x)}function Q(P,x,U,K,oe){return x===null||x.tag!==7?(x=bs(U,P.mode,K,oe),x.return=P,x):(x=h(x,U),x.return=P,x)}function X(P,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=of(""+x,P.mode,U),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case R:return U=ku(x.type,x.key,x.props,null,P.mode,U),el(U,x),U.return=P,U;case z:return x=lf(x,P.mode,U),x.return=P,x;case b:var K=x._init;return x=K(x._payload),X(P,x,U)}if(be(x)||k(x))return x=bs(x,P.mode,U,null),x.return=P,x;if(typeof x.then=="function")return X(P,Ju(x),U);if(x.$$typeof===ce)return X(P,zu(P,x),U);ec(P,x)}return null}function B(P,x,U,K){var oe=x!==null?x.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return oe!==null?null:E(P,x,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case R:return U.key===oe?w(P,x,U,K):null;case z:return U.key===oe?j(P,x,U,K):null;case b:return oe=U._init,U=oe(U._payload),B(P,x,U,K)}if(be(U)||k(U))return oe!==null?null:Q(P,x,U,K,null);if(typeof U.then=="function")return B(P,x,Ju(U),K);if(U.$$typeof===ce)return B(P,x,zu(P,U),K);ec(P,U)}return null}function q(P,x,U,K,oe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return P=P.get(U)||null,E(x,P,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return P=P.get(K.key===null?U:K.key)||null,w(x,P,K,oe);case z:return P=P.get(K.key===null?U:K.key)||null,j(x,P,K,oe);case b:var xe=K._init;return K=xe(K._payload),q(P,x,U,K,oe)}if(be(K)||k(K))return P=P.get(U)||null,Q(x,P,K,oe,null);if(typeof K.then=="function")return q(P,x,U,Ju(K),oe);if(K.$$typeof===ce)return q(P,x,U,zu(x,K),oe);ec(x,K)}return null}function Ee(P,x,U,K){for(var oe=null,xe=null,fe=x,ge=x=0,Lt=null;fe!==null&&ge<U.length;ge++){fe.index>ge?(Lt=fe,fe=null):Lt=fe.sibling;var qe=B(P,fe,U[ge],K);if(qe===null){fe===null&&(fe=Lt);break}t&&fe&&qe.alternate===null&&i(P,fe),x=f(qe,x,ge),xe===null?oe=qe:xe.sibling=qe,xe=qe,fe=Lt}if(ge===U.length)return a(P,fe),He&&Rs(P,ge),oe;if(fe===null){for(;ge<U.length;ge++)fe=X(P,U[ge],K),fe!==null&&(x=f(fe,x,ge),xe===null?oe=fe:xe.sibling=fe,xe=fe);return He&&Rs(P,ge),oe}for(fe=o(fe);ge<U.length;ge++)Lt=q(fe,P,ge,U[ge],K),Lt!==null&&(t&&Lt.alternate!==null&&fe.delete(Lt.key===null?ge:Lt.key),x=f(Lt,x,ge),xe===null?oe=Lt:xe.sibling=Lt,xe=Lt);return t&&fe.forEach(function(Nr){return i(P,Nr)}),He&&Rs(P,ge),oe}function pe(P,x,U,K){if(U==null)throw Error(s(151));for(var oe=null,xe=null,fe=x,ge=x=0,Lt=null,qe=U.next();fe!==null&&!qe.done;ge++,qe=U.next()){fe.index>ge?(Lt=fe,fe=null):Lt=fe.sibling;var Nr=B(P,fe,qe.value,K);if(Nr===null){fe===null&&(fe=Lt);break}t&&fe&&Nr.alternate===null&&i(P,fe),x=f(Nr,x,ge),xe===null?oe=Nr:xe.sibling=Nr,xe=Nr,fe=Lt}if(qe.done)return a(P,fe),He&&Rs(P,ge),oe;if(fe===null){for(;!qe.done;ge++,qe=U.next())qe=X(P,qe.value,K),qe!==null&&(x=f(qe,x,ge),xe===null?oe=qe:xe.sibling=qe,xe=qe);return He&&Rs(P,ge),oe}for(fe=o(fe);!qe.done;ge++,qe=U.next())qe=q(fe,P,ge,qe.value,K),qe!==null&&(t&&qe.alternate!==null&&fe.delete(qe.key===null?ge:qe.key),x=f(qe,x,ge),xe===null?oe=qe:xe.sibling=qe,xe=qe);return t&&fe.forEach(function(CS){return i(P,CS)}),He&&Rs(P,ge),oe}function We(P,x,U,K){if(typeof U=="object"&&U!==null&&U.type===G&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case R:e:{for(var oe=U.key;x!==null;){if(x.key===oe){if(oe=U.type,oe===G){if(x.tag===7){a(P,x.sibling),K=h(x,U.props.children),K.return=P,P=K;break e}}else if(x.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===b&&Zg(oe)===x.type){a(P,x.sibling),K=h(x,U.props),el(K,U),K.return=P,P=K;break e}a(P,x);break}else i(P,x);x=x.sibling}U.type===G?(K=bs(U.props.children,P.mode,K,U.key),K.return=P,P=K):(K=ku(U.type,U.key,U.props,null,P.mode,K),el(K,U),K.return=P,P=K)}return v(P);case z:e:{for(oe=U.key;x!==null;){if(x.key===oe)if(x.tag===4&&x.stateNode.containerInfo===U.containerInfo&&x.stateNode.implementation===U.implementation){a(P,x.sibling),K=h(x,U.children||[]),K.return=P,P=K;break e}else{a(P,x);break}else i(P,x);x=x.sibling}K=lf(U,P.mode,K),K.return=P,P=K}return v(P);case b:return oe=U._init,U=oe(U._payload),We(P,x,U,K)}if(be(U))return Ee(P,x,U,K);if(k(U)){if(oe=k(U),typeof oe!="function")throw Error(s(150));return U=oe.call(U),pe(P,x,U,K)}if(typeof U.then=="function")return We(P,x,Ju(U),K);if(U.$$typeof===ce)return We(P,x,zu(P,U),K);ec(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,x!==null&&x.tag===6?(a(P,x.sibling),K=h(x,U),K.return=P,P=K):(a(P,x),K=of(U,P.mode,K),K.return=P,P=K),v(P)):a(P,x)}return function(P,x,U,K){try{Jo=0;var oe=We(P,x,U,K);return Ia=null,oe}catch(fe){if(fe===Fo||fe===qu)throw fe;var xe=dn(29,fe,null,P.mode);return xe.lanes=K,xe.return=P,xe}finally{}}}var Ca=Wg(!0),Jg=Wg(!1),On=Z(null),ai=null;function mr(t){var i=t.alternate;ne(Dt,Dt.current&1),ne(On,t),ai===null&&(i===null||Sa.current!==null||i.memoizedState!==null)&&(ai=t)}function ey(t){if(t.tag===22){if(ne(Dt,Dt.current),ne(On,t),ai===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ai=t)}}else pr()}function pr(){ne(Dt,Dt.current),ne(On,On.current)}function Ui(t){J(On),ai===t&&(ai=null),J(Dt)}var Dt=Z(0);function tc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Dd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Bf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var qf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=yn(),h=hr(o);h.payload=i,a!=null&&(h.callback=a),i=fr(t,h,o),i!==null&&(_n(i,t,o),Qo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=yn(),h=hr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=fr(t,h,o),i!==null&&(_n(i,t,o),Qo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=yn(),o=hr(a);o.tag=2,i!=null&&(o.callback=i),i=fr(t,o,a),i!==null&&(_n(i,t,a),Qo(i,t,a))}};function ty(t,i,a,o,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!ko(a,o)||!ko(h,f):!0}function ny(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&qf.enqueueReplaceState(i,i.state,null)}function Vs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){nc(t)}function ry(t){console.error(t)}function sy(t){nc(t)}function ic(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ay(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hf(t,i,a){return a=hr(a),a.tag=3,a.payload={element:null},a.callback=function(){ic(t,i)},a}function oy(t){return t=hr(t),t.tag=3,t}function ly(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){ay(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ay(i,a,o),typeof h!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function CA(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Bo(i,a,h,!0),a=On.current,a!==null){switch(a.tag){case 13:return ai===null?dd():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===_f?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),pd(t,o,h)),!1;case 22:return a.flags|=65536,o===_f?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),pd(t,o,h)),!1}throw Error(s(435,a.tag))}return pd(t,o,h),dd(),!1}if(He)return i=On.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==hf&&(t=Error(s(422),{cause:o}),zo(Cn(t,a)))):(o!==hf&&(i=Error(s(423),{cause:o}),zo(Cn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Cn(o,a),h=Hf(t.stateNode,o,h),Tf(t,h),ct!==4&&(ct=2)),!1;var f=Error(s(520),{cause:o});if(f=Cn(f,a),ol===null?ol=[f]:ol.push(f),ct!==4&&(ct=2),i===null)return!0;o=Cn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Hf(a.stateNode,o,t),Tf(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Tr===null||!Tr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=oy(h),ly(h,t,a,o),Tf(a,h),!1}a=a.return}while(a!==null);return!1}var uy=Error(s(461)),Pt=!1;function Bt(t,i,a,o){i.child=t===null?Jg(i,null,a,o):Ca(i,t.child,a,o)}function cy(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ds(i),o=Rf(t,i,a,v,f,h),E=If(),t!==null&&!Pt?(Cf(t,i,h),ji(t,i,h)):(He&&E&&uf(i),i.flags|=1,Bt(t,i,o,h),i.child)}function hy(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!af(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,fy(t,i,f,o,h)):(t=ku(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Zf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:ko,a(v,o)&&t.ref===i.ref)return ji(t,i,h)}return i.flags|=1,t=Oi(f,o),t.ref=i.ref,t.return=i,i.child=t}function fy(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(ko(f,o)&&t.ref===i.ref)if(Pt=!1,i.pendingProps=o=f,Zf(t,h))(t.flags&131072)!==0&&(Pt=!0);else return i.lanes=t.lanes,ji(t,i,h)}return Ff(t,i,a,o,h)}function dy(t,i,a){var o=i.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return my(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Bu(i,f!==null?f.cachePool:null),f!==null?fg(i,f):Sf(),ey(i);else return i.lanes=i.childLanes=536870912,my(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Bu(i,f.cachePool),fg(i,f),pr(),i.memoizedState=null):(t!==null&&Bu(i,null),Sf(),pr());return Bt(t,i,h,a),i.child}function my(t,i,a,o){var h=yf();return h=h===null?null:{parent:Nt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Bu(i,null),Sf(),ey(i),t!==null&&Bo(t,i,o,!0),null}function rc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Ff(t,i,a,o,h){return Ds(i),a=Rf(t,i,a,o,void 0,h),o=If(),t!==null&&!Pt?(Cf(t,i,h),ji(t,i,h)):(He&&o&&uf(i),i.flags|=1,Bt(t,i,a,h),i.child)}function py(t,i,a,o,h,f){return Ds(i),i.updateQueue=null,a=mg(i,o,a,h),dg(t),o=If(),t!==null&&!Pt?(Cf(t,i,f),ji(t,i,f)):(He&&o&&uf(i),i.flags|=1,Bt(t,i,a,f),i.child)}function gy(t,i,a,o,h){if(Ds(i),i.stateNode===null){var f=_a,v=a.contextType;typeof v=="object"&&v!==null&&(f=Yt(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=qf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},vf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Yt(v):_a,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Bf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&qf.enqueueReplaceState(f,f.state,null),Yo(i,o,f,h),Ko(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,w=Vs(a,E);f.props=w;var j=f.context,Q=a.contextType;v=_a,typeof Q=="object"&&Q!==null&&(v=Yt(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==v)&&ny(i,f,o,v),cr=!1;var B=i.memoizedState;f.state=B,Yo(i,o,f,h),Ko(),j=i.memoizedState,E||B!==j||cr?(typeof X=="function"&&(Bf(i,a,X,o),j=i.memoizedState),(w=cr||ty(i,a,w,o,B,j,v))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=v,o=w):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,Ef(t,i),v=i.memoizedProps,Q=Vs(a,v),f.props=Q,X=i.pendingProps,B=f.context,j=a.contextType,w=_a,typeof j=="object"&&j!==null&&(w=Yt(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==X||B!==w)&&ny(i,f,o,w),cr=!1,B=i.memoizedState,f.state=B,Yo(i,o,f,h),Ko();var q=i.memoizedState;v!==X||B!==q||cr||t!==null&&t.dependencies!==null&&ju(t.dependencies)?(typeof E=="function"&&(Bf(i,a,E,o),q=i.memoizedState),(Q=cr||ty(i,a,Q,o,B,q,w)||t!==null&&t.dependencies!==null&&ju(t.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,w)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),f.props=o,f.state=q,f.context=w,o=Q):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,rc(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Ca(i,t.child,null,h),i.child=Ca(i,null,a,h)):Bt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ji(t,i,h),t}function yy(t,i,a,o){return jo(),i.flags|=256,Bt(t,i,a,o),i.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(t){return{baseLanes:t,cachePool:rg()}}function Kf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Vn),t}function _y(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(He){if(h?mr(i):pr(),He){var E=ut,w;if(w=E){e:{for(w=E,E=si;w.nodeType!==8;){if(!E){E=null;break e}if(w=Hn(w.nextSibling),w===null){E=null;break e}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:ws!==null?{id:Vi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},w=dn(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,rn=i,ut=null,w=!0):w=!1}w||Cs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Dd(E)?i.lanes=32:i.lanes=536870912,null;Ui(i)}return E=o.children,o=o.fallback,h?(pr(),h=i.mode,E=sc({mode:"hidden",children:E},h),o=bs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Qf(a),h.childLanes=Kf(t,v,a),i.memoizedState=Gf,o):(mr(i),Yf(i,E))}if(w=t.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(f)i.flags&256?(mr(i),i.flags&=-257,i=Xf(t,i,a)):i.memoizedState!==null?(pr(),i.child=t.child,i.flags|=128,i=null):(pr(),h=o.fallback,E=i.mode,o=sc({mode:"visible",children:o.children},E),h=bs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ca(i,t.child,null,a),o=i.child,o.memoizedState=Qf(a),o.childLanes=Kf(t,v,a),i.memoizedState=Gf,i=h);else if(mr(i),Dd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,zo({value:o,source:null,stack:null}),i=Xf(t,i,a)}else if(Pt||Bo(t,i,a,!1),v=(a&t.childLanes)!==0,Pt||v){if(v=tt,v!==null&&(o=a&-a,o=(o&42)!==0?1:nr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==w.retryLane))throw w.retryLane=o,ya(t,o),_n(v,t,o),uy;E.data==="$?"||dd(),i=Xf(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=w.treeContext,ut=Hn(E.nextSibling),rn=i,He=!0,Is=null,si=!1,t!==null&&(Dn[xn++]=Vi,Dn[xn++]=Mi,Dn[xn++]=ws,Vi=t.id,Mi=t.overflow,ws=i),i=Yf(i,o.children),i.flags|=4096);return i}return h?(pr(),h=o.fallback,E=i.mode,w=t.child,j=w.sibling,o=Oi(w,{mode:"hidden",children:o.children}),o.subtreeFlags=w.subtreeFlags&65011712,j!==null?h=Oi(j,h):(h=bs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=Qf(a):(w=E.cachePool,w!==null?(j=Nt._currentValue,w=w.parent!==j?{parent:j,pool:j}:w):w=rg(),E={baseLanes:E.baseLanes|a,cachePool:w}),h.memoizedState=E,h.childLanes=Kf(t,v,a),i.memoizedState=Gf,o):(mr(i),a=t.child,t=a.sibling,a=Oi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Yf(t,i){return i=sc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function sc(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xf(t,i,a){return Ca(i,t.child,null,a),t=Yf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function vy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),df(t.return,i,a)}function $f(t,i,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Ey(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(Bt(t,i,o.children,a),o=Dt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vy(t,a,i);else if(t.tag===19)vy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ne(Dt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&tc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),$f(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&tc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}$f(i,!0,a,null,f);break;case"together":$f(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ji(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Er|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Bo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Oi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Oi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Zf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ju(t)))}function NA(t,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),ur(i,Nt,t.memoizedState.cache),jo();break;case 27:case 5:tr(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:ur(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(mr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?_y(t,i,a):(mr(i),t=ji(t,i,a),t!==null?t.sibling:null);mr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Bo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Ey(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(Dt,Dt.current),o)break;return null;case 22:case 23:return i.lanes=0,dy(t,i,a);case 24:ur(i,Nt,t.memoizedState.cache)}return ji(t,i,a)}function Ty(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Pt=!0;else{if(!Zf(t,a)&&(i.flags&128)===0)return Pt=!1,NA(t,i,a);Pt=(t.flags&131072)!==0}else Pt=!1,He&&(i.flags&1048576)!==0&&Zp(i,Uu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")af(o)?(t=Vs(o,t),i.tag=1,i=gy(null,i,o,t,a)):(i.tag=0,i=Ff(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ce){i.tag=11,i=cy(null,i,o,t,a);break e}else if(h===V){i.tag=14,i=hy(null,i,o,t,a);break e}}throw i=he(o)||o,Error(s(306,i,""))}}return i;case 0:return Ff(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Vs(o,i.pendingProps),gy(t,i,o,h,a);case 3:e:{if(et(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,Ef(t,i),Yo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ur(i,Nt,o),o!==f.cache&&mf(i,[Nt],a,!0),Ko(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=yy(t,i,o,a);break e}else if(o!==h){h=Cn(Error(s(424)),i),zo(h),i=yy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ut=Hn(t.firstChild),rn=i,He=!0,Is=null,si=!0,a=Jg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jo(),o===h){i=ji(t,i,a);break e}Bt(t,i,o,a)}i=i.child}return i;case 26:return rc(t,i),t===null?(a=w_(i.type,null,i.pendingProps,null))?i.memoizedState=a:He||(a=i.type,t=i.pendingProps,o=vc(Te.current).createElement(a),o[Rt]=i,o[gt]=t,Ht(o,a,t),ht(o),i.stateNode=o):i.memoizedState=w_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return tr(i),t===null&&He&&(o=i.stateNode=A_(i.type,i.pendingProps,Te.current),rn=i,si=!0,h=ut,br(i.type)?(xd=h,ut=Hn(o.firstChild)):ut=h),Bt(t,i,i.pendingProps.children,a),rc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&He&&((h=o=ut)&&(o=iS(o,i.type,i.pendingProps,si),o!==null?(i.stateNode=o,rn=i,ut=Hn(o.firstChild),si=!1,h=!0):h=!1),h||Cs(i)),tr(i),h=i.type,f=i.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,Id(h,f)?o=null:v!==null&&Id(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Rf(t,i,TA,null,null,a),gl._currentValue=h),rc(t,i),Bt(t,i,o,a),i.child;case 6:return t===null&&He&&((t=a=ut)&&(a=rS(a,i.pendingProps,si),a!==null?(i.stateNode=a,rn=i,ut=null,t=!0):t=!1),t||Cs(i)),null;case 13:return _y(t,i,a);case 4:return et(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ca(i,null,o,a):Bt(t,i,o,a),i.child;case 11:return cy(t,i,i.type,i.pendingProps,a);case 7:return Bt(t,i,i.pendingProps,a),i.child;case 8:return Bt(t,i,i.pendingProps.children,a),i.child;case 12:return Bt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ur(i,i.type,o.value),Bt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ds(i),h=Yt(h),o=o(h),i.flags|=1,Bt(t,i,o,a),i.child;case 14:return hy(t,i,i.type,i.pendingProps,a);case 15:return fy(t,i,i.type,i.pendingProps,a);case 19:return Ey(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=sc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Oi(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return dy(t,i,a);case 24:return Ds(i),o=Yt(Nt),t===null?(h=yf(),h===null&&(h=tt,f=pf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},vf(i),ur(i,Nt,h)):((t.lanes&a)!==0&&(Ef(t,i),Yo(i,null,null,a),Ko()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ur(i,Nt,o)):(o=f.cache,ur(i,Nt,o),o!==h.cache&&mf(i,[Nt],a,!0))),Bt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function zi(t){t.flags|=4}function Ay(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(i)){if(i=On.current,i!==null&&((ze&4194048)===ze?ai!==null:(ze&62914560)!==ze&&(ze&536870912)===0||i!==ai))throw Go=_f,sg;t.flags|=8192}}function ac(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?_o():536870912,t.lanes|=i,Oa|=i)}function tl(t,i){if(!He)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function at(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function DA(t,i,a){var o=i.pendingProps;switch(cf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ki(Nt),Kn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Uo(i)?zi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,eg())),at(i),null;case 26:return a=i.memoizedState,t===null?(zi(i),a!==null?(at(i),Ay(i,a)):(at(i),i.flags&=-16777217)):a?a!==t.memoizedState?(zi(i),at(i),Ay(i,a)):(at(i),i.flags&=-16777217):(t.memoizedProps!==o&&zi(i),at(i),i.flags&=-16777217),null;case 27:vi(i),a=Te.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return at(i),null}t=me.current,Uo(i)?Wp(i):(t=A_(h,o,a),i.stateNode=t,zi(i))}return at(i),null;case 5:if(vi(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return at(i),null}if(t=me.current,Uo(i))Wp(i);else{switch(h=vc(Te.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[Rt]=i,t[gt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Ht(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&zi(i)}}return at(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&zi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=Te.current,Uo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=rn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Rt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||p_(t.nodeValue,a)),t||Cs(i)}else t=vc(t).createTextNode(o),t[Rt]=i,i.stateNode=t}return at(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Uo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Rt]=i}else jo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),h=!1}else h=eg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ui(i),i):(Ui(i),null)}if(Ui(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),ac(i,i.updateQueue),at(i),null;case 4:return Kn(),t===null&&Ad(i.stateNode.containerInfo),at(i),null;case 10:return ki(i.type),at(i),null;case 19:if(J(Dt),h=i.memoizedState,h===null)return at(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)tl(h,!1);else{if(ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=tc(t),f!==null){for(i.flags|=128,tl(h,!1),t=f.updateQueue,i.updateQueue=t,ac(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)$p(a,t),a=a.sibling;return ne(Dt,Dt.current&1|2),i.child}t=t.sibling}h.tail!==null&&An()>uc&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304)}else{if(!o)if(t=tc(f),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,ac(i,t),tl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!He)return at(i),null}else 2*An()-h.renderingStartTime>uc&&a!==536870912&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=An(),i.sibling=null,t=Dt.current,ne(Dt,o?t&1|2:t&1),i):(at(i),null);case 22:case 23:return Ui(i),bf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&ac(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&J(xs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(Nt),at(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function xA(t,i){switch(cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ki(Nt),Kn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return vi(i),null;case 13:if(Ui(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));jo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return J(Dt),null;case 4:return Kn(),null;case 10:return ki(i.type),null;case 22:case 23:return Ui(i),bf(),t!==null&&J(xs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ki(Nt),null;case 25:return null;default:return null}}function Sy(t,i){switch(cf(i),i.tag){case 3:ki(Nt),Kn();break;case 26:case 27:case 5:vi(i);break;case 4:Kn();break;case 13:Ui(i);break;case 19:J(Dt);break;case 10:ki(i.type);break;case 22:case 23:Ui(i),bf(),t!==null&&J(xs);break;case 24:ki(Nt)}}function nl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Je(i,i.return,E)}}function gr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var w=a,j=E;try{j()}catch(Q){Je(h,w,Q)}}}o=o.next}while(o!==f)}}catch(Q){Je(i,i.return,Q)}}function by(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{hg(i,a)}catch(o){Je(t,t.return,o)}}}function wy(t,i,a){a.props=Vs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Je(t,i,o)}}function il(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Je(t,i,h)}}function oi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Je(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Je(t,i,h)}else a.current=null}function Ry(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Je(t,t.return,h)}}function Wf(t,i,a){try{var o=t.stateNode;WA(o,t.type,a,i),o[gt]=i}catch(h){Je(t,t.return,h)}}function Iy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&br(t.type)||t.tag===4}function Jf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=_c));else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(ed(t,i,a),t=t.sibling;t!==null;)ed(t,i,a),t=t.sibling}function oc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(oc(t,i,a),t=t.sibling;t!==null;)oc(t,i,a),t=t.sibling}function Cy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ht(i,o,a),i[Rt]=t,i[gt]=a}catch(f){Je(t,t.return,f)}}var Bi=!1,dt=!1,td=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,kt=null;function OA(t,i){if(t=t.containerInfo,wd=wc,t=zp(t),Wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,E=-1,w=-1,j=0,Q=0,X=t,B=null;t:for(;;){for(var q;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==f||o!==0&&X.nodeType!==3||(w=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(q=X.firstChild)!==null;)B=X,X=q;for(;;){if(X===t)break t;if(B===a&&++j===h&&(E=v),B===f&&++Q===o&&(w=v),(q=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=q}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rd={focusedElem:t,selectionRange:a},wc=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Ee=Vs(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Ee,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Je(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Nd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Nd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function Dy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:yr(t,a),o&4&&nl(5,a);break;case 1:if(yr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Je(a,a.return,v)}else{var h=Vs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(a,a.return,v)}}o&64&&by(a),o&512&&il(a,a.return);break;case 3:if(yr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{hg(t,i)}catch(v){Je(a,a.return,v)}}break;case 27:i===null&&o&4&&Cy(a);case 26:case 5:yr(t,a),i===null&&o&4&&Ry(a),o&512&&il(a,a.return);break;case 12:yr(t,a);break;case 13:yr(t,a),o&4&&Vy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=BA.bind(null,a),sS(t,a))));break;case 22:if(o=a.memoizedState!==null||Bi,!o){i=i!==null&&i.memoizedState!==null||dt,h=Bi;var f=dt;Bi=o,(dt=i)&&!f?_r(t,a,(a.subtreeFlags&8772)!==0):yr(t,a),Bi=h,dt=f}break;case 30:break;default:yr(t,a)}}function xy(t){var i=t.alternate;i!==null&&(t.alternate=null,xy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&sr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,an=!1;function qi(t,i,a){for(a=a.child;a!==null;)Oy(t,i,a),a=a.sibling}function Oy(t,i,a){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 26:dt||oi(a,i),qi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:dt||oi(a,i);var o=st,h=an;br(a.type)&&(st=a.stateNode,an=!1),qi(t,i,a),fl(a.stateNode),st=o,an=h;break;case 5:dt||oi(a,i);case 6:if(o=st,h=an,st=null,qi(t,i,a),st=o,an=h,st!==null)if(an)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(f){Je(a,i,f)}else try{st.removeChild(a.stateNode)}catch(f){Je(a,i,f)}break;case 18:st!==null&&(an?(t=st,E_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),El(t)):E_(st,a.stateNode));break;case 4:o=st,h=an,st=a.stateNode.containerInfo,an=!0,qi(t,i,a),st=o,an=h;break;case 0:case 11:case 14:case 15:dt||gr(2,a,i),dt||gr(4,a,i),qi(t,i,a);break;case 1:dt||(oi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&wy(a,i,o)),qi(t,i,a);break;case 21:qi(t,i,a);break;case 22:dt=(o=dt)||a.memoizedState!==null,qi(t,i,a),dt=o;break;default:qi(t,i,a)}}function Vy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{El(t)}catch(a){Je(i,i.return,a)}}function VA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ny),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ny),i;default:throw Error(s(435,t.tag))}}function nd(t,i){var a=VA(t);i.forEach(function(o){var h=qA.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function mn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(br(E.type)){st=E.stateNode,an=!1;break e}break;case 5:st=E.stateNode,an=!1;break e;case 3:case 4:st=E.stateNode.containerInfo,an=!0;break e}E=E.return}if(st===null)throw Error(s(160));Oy(f,v,h),st=null,an=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)My(i,t),i=i.sibling}var qn=null;function My(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),o&4&&(gr(3,t,t.return),nl(3,t),gr(5,t,t.return));break;case 1:mn(i,t),pn(t),o&512&&(dt||a===null||oi(a,a.return)),o&64&&Bi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=qn;if(mn(i,t),pn(t),o&512&&(dt||a===null||oi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ls]||f[Rt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ht(f,o,a),f[Rt]=t,ht(f),o=f;break e;case"link":var v=C_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}f=h.createElement(o),Ht(f,o,a),h.head.appendChild(f);break;case"meta":if(v=C_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}f=h.createElement(o),Ht(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Rt]=t,ht(f),o=f}t.stateNode=o}else N_(h,t.type,t.stateNode);else t.stateNode=I_(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?N_(h,t.type,t.stateNode):I_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),o&512&&(dt||a===null||oi(a,a.return)),a!==null&&o&4&&Wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),o&512&&(dt||a===null||oi(a,a.return)),t.flags&32){h=t.stateNode;try{bn(h,"")}catch(q){Je(t,t.return,q)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Wf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(td=!0);break;case 6:if(mn(i,t),pn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(q){Je(t,t.return,q)}}break;case 3:if(Ac=null,h=qn,qn=Ec(i.containerInfo),mn(i,t),qn=h,pn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(q){Je(t,t.return,q)}td&&(td=!1,Py(t));break;case 4:o=qn,qn=Ec(t.stateNode.containerInfo),mn(i,t),pn(t),qn=o;break;case 12:mn(i,t),pn(t);break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ld=An()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,nd(t,o)));break;case 22:h=t.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=Bi,Q=dt;if(Bi=j||h,dt=Q||w,mn(i,t),dt=Q,Bi=j,pn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||Bi||dt||Ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(f=w.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){Je(w,w.return,q)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(q){Je(w,w.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,nd(t,a))));break;case 19:mn(i,t),pn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,nd(t,o)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Iy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Jf(t);oc(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(bn(v,""),a.flags&=-33);var E=Jf(t);oc(t,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,j=Jf(t);ed(t,j,w);break;default:throw Error(s(161))}}catch(Q){Je(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function yr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Dy(t,i.alternate,i),i=i.sibling}function Ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:gr(4,i,i.return),Ms(i);break;case 1:oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&wy(i,i.return,a),Ms(i);break;case 27:fl(i.stateNode);case 26:case 5:oi(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}t=t.sibling}}function _r(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:_r(h,f,a),nl(4,f);break;case 1:if(_r(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){Je(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)cg(w[h],E)}catch(j){Je(o,o.return,j)}}a&&v&64&&by(f),il(f,f.return);break;case 27:Cy(f);case 26:case 5:_r(h,f,a),a&&o===null&&v&4&&Ry(f),il(f,f.return);break;case 12:_r(h,f,a);break;case 13:_r(h,f,a),a&&v&4&&Vy(h,f);break;case 22:f.memoizedState===null&&_r(h,f,a),il(f,f.return);break;case 30:break;default:_r(h,f,a)}i=i.sibling}}function id(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&qo(a))}function rd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t))}function li(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ky(t,i,a,o),i=i.sibling}function ky(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:li(t,i,a,o),h&2048&&nl(9,i);break;case 1:li(t,i,a,o);break;case 3:li(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t)));break;case 12:if(h&2048){li(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){Je(i,i.return,w)}}else li(t,i,a,o);break;case 13:li(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?li(t,i,a,o):rl(t,i):f._visibility&2?li(t,i,a,o):(f._visibility|=2,Na(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&id(v,i);break;case 24:li(t,i,a,o),h&2048&&rd(i.alternate,i);break;default:li(t,i,a,o)}}function Na(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,v=i,E=a,w=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Na(f,v,E,w,h),nl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Na(f,v,E,w,h):rl(f,v):(Q._visibility|=2,Na(f,v,E,w,h)),h&&j&2048&&id(v.alternate,v);break;case 24:Na(f,v,E,w,h),h&&j&2048&&rd(v.alternate,v);break;default:Na(f,v,E,w,h)}i=i.sibling}}function rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&id(o.alternate,o);break;case 24:rl(a,o),h&2048&&rd(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var sl=8192;function Da(t){if(t.subtreeFlags&sl)for(t=t.child;t!==null;)Ly(t),t=t.sibling}function Ly(t){switch(t.tag){case 26:Da(t),t.flags&sl&&t.memoizedState!==null&&_S(qn,t.memoizedState,t.memoizedProps);break;case 5:Da(t);break;case 3:case 4:var i=qn;qn=Ec(t.stateNode.containerInfo),Da(t),qn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,Da(t),sl=i):Da(t));break;default:Da(t)}}function Uy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];kt=o,zy(o,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jy(t),t=t.sibling}function jy(t){switch(t.tag){case 0:case 11:case 15:al(t),t.flags&2048&&gr(9,t,t.return);break;case 3:al(t);break;case 12:al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,lc(t)):al(t);break;default:al(t)}}function lc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];kt=o,zy(o,t)}Uy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:gr(8,i,i.return),lc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,lc(i));break;default:lc(i)}t=t.sibling}}function zy(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:gr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,kt=o;else e:for(a=t;kt!==null;){o=kt;var h=o.sibling,f=o.return;if(xy(o),o===a){kt=null;break e}if(h!==null){h.return=f,kt=h;break e}kt=f}}}var MA={getCacheForType:function(t){var i=Yt(Nt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},PA=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,Ve=null,ze=0,Ye=0,gn=null,vr=!1,xa=!1,sd=!1,Hi=0,ct=0,Er=0,Ps=0,ad=0,Vn=0,Oa=0,ol=null,on=null,od=!1,ld=0,uc=1/0,cc=null,Tr=null,qt=0,Ar=null,Va=null,Ma=0,ud=0,cd=null,By=null,ll=0,hd=null;function yn(){if((Ke&2)!==0&&ze!==0)return ze&-ze;if(H.T!==null){var t=Ta;return t!==0?t:_d()}return ir()}function qy(){Vn===0&&(Vn=(ze&536870912)===0||He?yo():536870912);var t=On.current;return t!==null&&(t.flags|=32),Vn}function _n(t,i,a){(t===tt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Pa(t,0),Sr(t,ze,Vn,!1)),Ti(t,a),((Ke&2)===0||t!==tt)&&(t===tt&&((Ke&2)===0&&(Ps|=a),ct===4&&Sr(t,ze,Vn,!1)),ui(t))}function Hy(t,i,a){if((Ke&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||os(t,i),h=o?UA(t,i):md(t,i,!0),f=o;do{if(h===0){xa&&!o&&Sr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!kA(a)){h=md(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=ol;var w=E.current.memoizedState.isDehydrated;if(w&&(Pa(E,v).flags|=256),v=md(E,v,!1),v!==2){if(sd&&!w){E.errorRecoveryDisabledLanes|=f,Ps|=f,h=4;break e}f=on,on=h,f!==null&&(on===null?on=f:on.push.apply(on,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Pa(t,0),Sr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Sr(o,i,Vn,!vr);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=ld+300-An(),10<h)){if(Sr(o,i,Vn,!vr),Ws(o,0,!0)!==0)break e;o.timeoutHandle=__(Fy.bind(null,o,a,on,cc,od,i,Vn,Ps,Oa,vr,f,2,-0,0),h);break e}Fy(o,a,on,cc,od,i,Vn,Ps,Oa,vr,f,0,-0,0)}}break}while(!0);ui(t)}function Fy(t,i,a,o,h,f,v,E,w,j,Q,X,B,q){if(t.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:yS},Ly(i),X=vS(),X!==null)){t.cancelPendingCommit=X(Zy.bind(null,t,i,f,a,o,h,v,E,w,Q,1,B,q)),Sr(t,f,v,!j);return}Zy(t,i,f,a,o,h,v,E,w)}function kA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!fn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Sr(t,i,a,o){i&=~ad,i&=~Ps,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-Kt(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Yn(t,a,i)}function hc(){return(Ke&6)===0?(ul(0),!1):!0}function fd(){if(Ve!==null){if(Ye===0)var t=Ve.return;else t=Ve,Pi=Ns=null,Nf(t),Ia=null,Jo=0,t=Ve;for(;t!==null;)Sy(t.alternate,t),t=t.return;Ve=null}}function Pa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,eS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),fd(),tt=t,Ve=a=Oi(t.current,null),ze=i,Ye=0,gn=null,vr=!1,xa=os(t,i),sd=!1,Oa=Vn=ad=Ps=Er=ct=0,on=ol=null,od=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Kt(o),f=1<<h;i|=t[h],o&=~f}return Hi=i,Vu(),a}function Gy(t,i){Ie=null,H.H=Wu,i===Fo||i===qu?(i=lg(),Ye=3):i===sg?(i=lg(),Ye=4):Ye=i===uy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,Ve===null&&(ct=1,ic(t,Cn(i,t.current)))}function Qy(){var t=H.H;return H.H=Wu,t===null?Wu:t}function Ky(){var t=H.A;return H.A=MA,t}function dd(){ct=4,vr||(ze&4194048)!==ze&&On.current!==null||(xa=!0),(Er&134217727)===0&&(Ps&134217727)===0||tt===null||Sr(tt,ze,Vn,!1)}function md(t,i,a){var o=Ke;Ke|=2;var h=Qy(),f=Ky();(tt!==t||ze!==i)&&(cc=null,Pa(t,i)),i=!1;var v=ct;e:do try{if(Ye!==0&&Ve!==null){var E=Ve,w=gn;switch(Ye){case 8:fd(),v=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(i=!0);var j=Ye;if(Ye=0,gn=null,ka(t,E,w,j),a&&xa){v=0;break e}break;default:j=Ye,Ye=0,gn=null,ka(t,E,w,j)}}LA(),v=ct;break}catch(Q){Gy(t,Q)}while(!0);return i&&t.shellSuspendCounter++,Pi=Ns=null,Ke=o,H.H=h,H.A=f,Ve===null&&(tt=null,ze=0,Vu()),v}function LA(){for(;Ve!==null;)Yy(Ve)}function UA(t,i){var a=Ke;Ke|=2;var o=Qy(),h=Ky();tt!==t||ze!==i?(cc=null,uc=An()+500,Pa(t,i)):xa=os(t,i);e:do try{if(Ye!==0&&Ve!==null){i=Ve;var f=gn;t:switch(Ye){case 1:Ye=0,gn=null,ka(t,i,f,1);break;case 2:case 9:if(ag(f)){Ye=0,gn=null,Xy(i);break}i=function(){Ye!==2&&Ye!==9||tt!==t||(Ye=7),ui(t)},f.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:ag(f)?(Ye=0,gn=null,Xy(i)):(Ye=0,gn=null,ka(t,i,f,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var E=Ve;if(!v||D_(v)){Ye=0,gn=null;var w=E.sibling;if(w!==null)Ve=w;else{var j=E.return;j!==null?(Ve=j,fc(j)):Ve=null}break t}}Ye=0,gn=null,ka(t,i,f,5);break;case 6:Ye=0,gn=null,ka(t,i,f,6);break;case 8:fd(),ct=6;break e;default:throw Error(s(462))}}jA();break}catch(Q){Gy(t,Q)}while(!0);return Pi=Ns=null,H.H=o,H.A=h,Ke=a,Ve!==null?0:(tt=null,ze=0,Vu(),ct)}function jA(){for(;Ve!==null&&!fo();)Yy(Ve)}function Yy(t){var i=Ty(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,i===null?fc(t):Ve=i}function Xy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=py(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=py(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:Nf(i);default:Sy(a,i),i=Ve=$p(i,Hi),i=Ty(a,i,Hi)}t.memoizedProps=t.pendingProps,i===null?fc(t):Ve=i}function ka(t,i,a,o){Pi=Ns=null,Nf(i),Ia=null,Jo=0;var h=i.return;try{if(CA(t,h,i,a,ze)){ct=1,ic(t,Cn(a,t.current)),Ve=null;return}}catch(f){if(h!==null)throw Ve=h,f;ct=1,ic(t,Cn(a,t.current)),Ve=null;return}i.flags&32768?(He||o===1?t=!0:xa||(ze&536870912)!==0?t=!1:(vr=t=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),$y(i,t)):fc(i)}function fc(t){var i=t;do{if((i.flags&32768)!==0){$y(i,vr);return}t=i.return;var a=DA(i.alternate,i,Hi);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);ct===0&&(ct=5)}function $y(t,i){do{var a=xA(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);ct=6,Ve=null}function Zy(t,i,a,o,h,f,v,E,w){t.cancelPendingCommit=null;do dc();while(qt!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=rf,vo(t,a,f,v,E,w),t===tt&&(Ve=tt=null,ze=0),Va=i,Ar=t,Ma=a,ud=f,cd=h,By=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,HA(is,function(){return n_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=te.p,te.p=2,v=Ke,Ke|=4;try{OA(t,i,a)}finally{Ke=v,te.p=h,H.T=o}}qt=1,Wy(),Jy(),e_()}}function Wy(){if(qt===1){qt=0;var t=Ar,i=Va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=te.p;te.p=2;var h=Ke;Ke|=4;try{My(i,t);var f=Rd,v=zp(t.containerInfo),E=f.focusedElem,w=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&jp(E.ownerDocument.documentElement,E)){if(w!==null&&Wh(E)){var j=w.start,Q=w.end;if(Q===void 0&&(Q=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var q=B.getSelection(),Ee=E.textContent.length,pe=Math.min(w.start,Ee),We=w.end===void 0?pe:Math.min(w.end,Ee);!q.extend&&pe>We&&(v=We,We=pe,pe=v);var P=Up(E,pe),x=Up(E,We);if(P&&x&&(q.rangeCount!==1||q.anchorNode!==P.node||q.anchorOffset!==P.offset||q.focusNode!==x.node||q.focusOffset!==x.offset)){var U=X.createRange();U.setStart(P.node,P.offset),q.removeAllRanges(),pe>We?(q.addRange(U),q.extend(x.node,x.offset)):(U.setEnd(x.node,x.offset),q.addRange(U))}}}}for(X=[],q=E;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var K=X[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}wc=!!wd,Rd=wd=null}finally{Ke=h,te.p=o,H.T=a}}t.current=i,qt=2}}function Jy(){if(qt===2){qt=0;var t=Ar,i=Va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=te.p;te.p=2;var h=Ke;Ke|=4;try{Dy(t,i.alternate,i)}finally{Ke=h,te.p=o,H.T=a}}qt=3}}function e_(){if(qt===4||qt===3){qt=0,lu();var t=Ar,i=Va,a=Ma,o=By;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qt=5:(qt=0,Va=Ar=null,t_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Tr=null),Js(a),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(lt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=te.p,te.p=2,H.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=i,te.p=h}}(Ma&3)!==0&&dc(),ui(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===hd?ll++:(ll=0,hd=t):ll=0,ul(0)}}function t_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,qo(i)))}function dc(t){return Wy(),Jy(),e_(),n_()}function n_(){if(qt!==5)return!1;var t=Ar,i=ud;ud=0;var a=Js(Ma),o=H.T,h=te.p;try{te.p=32>a?32:a,H.T=null,a=cd,cd=null;var f=Ar,v=Ma;if(qt=0,Va=Ar=null,Ma=0,(Ke&6)!==0)throw Error(s(331));var E=Ke;if(Ke|=4,jy(f.current),ky(f,f.current,v,a),Ke=E,ul(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(lt,f)}catch{}return!0}finally{te.p=h,H.T=o,t_(t,i)}}function i_(t,i,a){i=Cn(a,i),i=Hf(t.stateNode,i,2),t=fr(t,i,2),t!==null&&(Ti(t,2),ui(t))}function Je(t,i,a){if(t.tag===3)i_(t,t,a);else for(;i!==null;){if(i.tag===3){i_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Tr===null||!Tr.has(o))){t=Cn(a,t),a=oy(2),o=fr(i,a,2),o!==null&&(ly(a,o,i,t),Ti(o,2),ui(o));break}}i=i.return}}function pd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new PA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(sd=!0,h.add(a),t=zA.bind(null,t,i,a),i.then(t,t))}function zA(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(ze&a)===a&&(ct===4||ct===3&&(ze&62914560)===ze&&300>An()-ld?(Ke&2)===0&&Pa(t,0):ad|=a,Oa===ze&&(Oa=0)),ui(t)}function r_(t,i){i===0&&(i=_o()),t=ya(t,i),t!==null&&(Ti(t,i),ui(t))}function BA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),r_(t,a)}function qA(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),r_(t,a)}function HA(t,i){return ts(t,i)}var mc=null,La=null,gd=!1,pc=!1,yd=!1,ks=0;function ui(t){t!==La&&t.next===null&&(La===null?mc=La=t:La=La.next=t),pc=!0,gd||(gd=!0,GA())}function ul(t,i){if(!yd&&pc){yd=!0;do for(var a=!1,o=mc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Kt(42|t)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,l_(o,f))}else f=ze,f=Ws(o,o===tt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||os(o,f)||(a=!0,l_(o,f));o=o.next}while(a);yd=!1}}function FA(){s_()}function s_(){pc=gd=!1;var t=0;ks!==0&&(JA()&&(t=ks),ks=0);for(var i=An(),a=null,o=mc;o!==null;){var h=o.next,f=a_(o,i);f===0?(o.next=null,a===null?mc=h:a.next=h,h===null&&(La=a)):(a=o,(t!==0||(f&3)!==0)&&(pc=!0)),o=h}ul(t)}function a_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Kt(f),E=1<<v,w=h[v];w===-1?((E&a)===0||(E&o)!==0)&&(h[v]=go(E,i)):w<=i&&(t.expiredLanes|=E),f&=~E}if(i=tt,a=ze,a=Ws(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ns(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||os(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ns(o),Js(a)){case 2:case 8:a=$s;break;case 32:a=is;break;case 268435456:a=Zs;break;default:a=is}return o=o_.bind(null,t),a=ts(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ns(o),t.callbackPriority=2,t.callbackNode=null,2}function o_(t,i){if(qt!==0&&qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(dc()&&t.callbackNode!==a)return null;var o=ze;return o=Ws(t,t===tt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Hy(t,o,i),a_(t,An()),t.callbackNode!=null&&t.callbackNode===a?o_.bind(null,t):null)}function l_(t,i){if(dc())return null;Hy(t,i,!0)}function GA(){tS(function(){(Ke&6)!==0?ts(mo,FA):s_()})}function _d(){return ks===0&&(ks=yo()),ks}function u_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:sa(""+t)}function c_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function QA(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=u_((h[gt]||null).action),v=o.submitter;v&&(i=(i=v[gt]||null)?u_(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new aa("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var w=v?c_(h,v):new FormData(h);Uf(a,{pending:!0,data:w,method:h.method,action:f},null,w)}}else typeof f=="function"&&(E.preventDefault(),w=v?c_(h,v):new FormData(h),Uf(a,{pending:!0,data:w,method:h.method,action:f},f,w))},currentTarget:h}]})}}for(var vd=0;vd<nf.length;vd++){var Ed=nf[vd],KA=Ed.toLowerCase(),YA=Ed[0].toUpperCase()+Ed.slice(1);Bn(KA,"on"+YA)}Bn(Hp,"onAnimationEnd"),Bn(Fp,"onAnimationIteration"),Bn(Gp,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(hA,"onTransitionRun"),Bn(fA,"onTransitionStart"),Bn(dA,"onTransitionCancel"),Bn(Qp,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function h_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],w=E.instance,j=E.currentTarget;if(E=E.listener,w!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(Q){nc(Q)}h.currentTarget=null,f=w}else for(v=0;v<o.length;v++){if(E=o[v],w=E.instance,j=E.currentTarget,E=E.listener,w!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(Q){nc(Q)}h.currentTarget=null,f=w}}}}function Me(t,i){var a=i[To];a===void 0&&(a=i[To]=new Set);var o=t+"__bubble";a.has(o)||(f_(i,t,2,!1),a.add(o))}function Td(t,i,a){var o=0;i&&(o|=4),f_(a,t,o,i)}var gc="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[gc]){t[gc]=!0,Ao.forEach(function(a){a!=="selectionchange"&&(XA.has(a)||Td(a,!1,t),Td(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[gc]||(i[gc]=!0,Td("selectionchange",!1,i))}}function f_(t,i,a,o){switch(k_(i)){case 2:var h=AS;break;case 8:h=SS;break;default:h=kd}a=h.bind(null,i,a,t),h=void 0,!Rn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Sd(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ai(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){o=f=v;continue e}E=E.parentNode}}o=o.return}_u(function(){var j=f,Q=wn(a),X=[];e:{var B=Kp.get(t);if(B!==void 0){var q=aa,Ee=t;switch(t){case"keypress":if(ei(a)===0)break e;case"keydown":case"keyup":q=fa;break;case"focusin":Ee="focus",q=ua;break;case"focusout":Ee="blur",q=ua;break;case"beforeblur":case"afterblur":q=ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=In;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ru;break;case Hp:case Fp:case Gp:q=ca;break;case Qp:q=Cu;break;case"scroll":case"scrollend":q=vu;break;case"wheel":q=da;break;case"copy":case"cut":case"paste":q=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Mo;break;case"toggle":case"beforetoggle":q=Du}var pe=(i&4)!==0,We=!pe&&(t==="scroll"||t==="scrollend"),P=pe?B!==null?B+"Capture":null:B;pe=[];for(var x=j,U;x!==null;){var K=x;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||P===null||(K=ps(x,P),K!=null&&pe.push(hl(x,K,U))),We)break;x=x.return}0<pe.length&&(B=new q(B,Ee,null,a,Q),X.push({event:B,listeners:pe}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&a!==Ri&&(Ee=a.relatedTarget||a.fromElement)&&(Ai(Ee)||Ee[Sn]))break e;if((q||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,q?(Ee=a.relatedTarget||a.toElement,q=j,Ee=Ee?Ai(Ee):null,Ee!==null&&(We=c(Ee),pe=Ee.tag,Ee!==We||pe!==5&&pe!==27&&pe!==6)&&(Ee=null)):(q=null,Ee=j),q!==Ee)){if(pe=In,K="onMouseLeave",P="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Mo,K="onPointerLeave",P="onPointerEnter",x="pointer"),We=q==null?B:$n(q),U=Ee==null?B:$n(Ee),B=new pe(K,x+"leave",q,a,Q),B.target=We,B.relatedTarget=U,K=null,Ai(Q)===j&&(pe=new pe(P,x+"enter",Ee,a,Q),pe.target=U,pe.relatedTarget=We,K=pe),We=K,q&&Ee)t:{for(pe=q,P=Ee,x=0,U=pe;U;U=Ua(U))x++;for(U=0,K=P;K;K=Ua(K))U++;for(;0<x-U;)pe=Ua(pe),x--;for(;0<U-x;)P=Ua(P),U--;for(;x--;){if(pe===P||P!==null&&pe===P.alternate)break t;pe=Ua(pe),P=Ua(P)}pe=null}else pe=null;q!==null&&d_(X,B,q,pe,!1),Ee!==null&&We!==null&&d_(X,We,Ee,pe,!0)}}e:{if(B=j?$n(j):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var oe=Op;else if(Ct(B))if(Vp)oe=lA;else{oe=aA;var xe=sA}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&Io(j.elementType)&&(oe=Op):oe=oA;if(oe&&(oe=oe(t,j))){xi(X,oe,a,Q);break e}xe&&xe(t,B,j),t==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&or(B,"number",B.value)}switch(xe=j?$n(j):window,t){case"focusin":(Ct(xe)||xe.contentEditable==="true")&&(ma=xe,Jh=j,Lo=null);break;case"focusout":Lo=Jh=ma=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Bp(X,a,Q);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":Bp(X,a,Q)}var fe;if(ii)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Ue?F(t,a)&&(ge="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ge="onCompositionStart");ge&&(_&&a.locale!=="ko"&&(Ue||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Ue&&(fe=No()):(Jn=Q,lr="value"in Jn?Jn.value:Jn.textContent,Ue=!0)),xe=yc(j,ge),0<xe.length&&(ge=new Oo(ge,t,null,a,Q),X.push({event:ge,listeners:xe}),fe?ge.data=fe:(fe=ie(a),fe!==null&&(ge.data=fe)))),(fe=m?It(t,a):je(t,a))&&(ge=yc(j,"onBeforeInput"),0<ge.length&&(xe=new Oo("onBeforeInput","beforeinput",null,a,Q),X.push({event:xe,listeners:ge}),xe.data=fe)),QA(X,t,j,a,Q)}h_(X,i)})}function hl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function yc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ps(t,a),h!=null&&o.unshift(hl(t,h,f)),h=ps(t,i),h!=null&&o.push(hl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function Ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function d_(t,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,w=E.alternate,j=E.stateNode;if(E=E.tag,w!==null&&w===o)break;E!==5&&E!==26&&E!==27||j===null||(w=j,h?(j=ps(a,f),j!=null&&v.unshift(hl(a,j,w))):h||(j=ps(a,f),j!=null&&v.push(hl(a,j,w)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var $A=/\r\n?/g,ZA=/\u0000|\uFFFD/g;function m_(t){return(typeof t=="string"?t:""+t).replace($A,`
`).replace(ZA,"")}function p_(t,i){return i=m_(i),m_(t)===i}function _c(){}function Ze(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||bn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&bn(t,""+o);break;case"className":Zn(t,"class",o);break;case"tabIndex":Zn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(t,a,o);break;case"style":Ro(t,o,f);break;case"data":if(i!=="object"){Zn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=sa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",h.name,h,null),Ze(t,i,"formEncType",h.formEncType,h,null),Ze(t,i,"formMethod",h.formMethod,h,null),Ze(t,i,"formTarget",h.formTarget,h,null)):(Ze(t,i,"encType",h.encType,h,null),Ze(t,i,"method",h.method,h,null),Ze(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=sa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=_c);break;case"onScroll":o!=null&&Me("scroll",t);break;case"onScrollEnd":o!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=sa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Me("beforetoggle",t),Me("toggle",t),ar(t,"popover",o);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ar(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qh.get(a)||a,ar(t,a,o))}}function bd(t,i,a,o,h,f){switch(a){case"style":Ro(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?bn(t,o):(typeof o=="number"||typeof o=="bigint")&&bn(t,""+o);break;case"onScroll":o!=null&&Me("scroll",t);break;case"onScrollEnd":o!=null&&Me("scrollend",t);break;case"onClick":o!=null&&(t.onclick=_c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[gt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ar(t,a,o)}}}function Ht(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,f,v,a,null)}}h&&Ze(t,i,"srcSet",a.srcSet,a,null),o&&Ze(t,i,"src",a.src,a,null);return;case"input":Me("invalid",t);var E=f=v=h=null,w=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":w=Q;break;case"defaultChecked":j=Q;break;case"value":f=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Ze(t,i,o,Q,a,null)}}fs(t,f,E,w,j,v,h,!1),ra(t);return;case"select":Me("invalid",t),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Ze(t,i,h,E,a,null)}i=f,a=v,t.multiple=!!o,i!=null?wi(t,!!o,i,!1):a!=null&&wi(t,!!o,a,!0);return;case"textarea":Me("invalid",t),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Ze(t,i,v,E,a,null)}ds(t,o,h,f),ra(t);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ze(t,i,w,o,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(o=0;o<cl.length;o++)Me(cl[o],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,j,o,a,null)}return;default:if(Io(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&bd(t,i,Q,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Ze(t,i,E,o,a,null))}function WA(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,w=null,j=null,Q=null;for(q in a){var X=a[q];if(a.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":w=X;default:o.hasOwnProperty(q)||Ze(t,i,q,null,o,X)}}for(var B in o){var q=o[B];if(X=a[B],o.hasOwnProperty(B)&&(q!=null||X!=null))switch(B){case"type":f=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":Q=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==X&&Ze(t,i,B,q,o,X)}}hn(t,v,E,w,j,Q,f,h);return;case"select":q=v=E=B=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":q=w;default:o.hasOwnProperty(f)||Ze(t,i,f,null,o,w)}for(h in o)if(f=o[h],w=a[h],o.hasOwnProperty(h)&&(f!=null||w!=null))switch(h){case"value":B=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==w&&Ze(t,i,h,f,o,w)}i=E,a=v,o=q,B!=null?wi(t,!!a,B,!1):!!o!=!!a&&(i!=null?wi(t,!!a,i,!0):wi(t,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(t,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Ze(t,i,v,h,o,f)}Xe(t,B,q);return;case"option":for(var Ee in a)if(B=a[Ee],a.hasOwnProperty(Ee)&&B!=null&&!o.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:Ze(t,i,Ee,null,o,B)}for(w in o)if(B=o[w],q=a[w],o.hasOwnProperty(w)&&B!==q&&(B!=null||q!=null))switch(w){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ze(t,i,w,B,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)B=a[pe],a.hasOwnProperty(pe)&&B!=null&&!o.hasOwnProperty(pe)&&Ze(t,i,pe,null,o,B);for(j in o)if(B=o[j],q=a[j],o.hasOwnProperty(j)&&B!==q&&(B!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:Ze(t,i,j,B,o,q)}return;default:if(Io(i)){for(var We in a)B=a[We],a.hasOwnProperty(We)&&B!==void 0&&!o.hasOwnProperty(We)&&bd(t,i,We,void 0,o,B);for(Q in o)B=o[Q],q=a[Q],!o.hasOwnProperty(Q)||B===q||B===void 0&&q===void 0||bd(t,i,Q,B,o,q);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!o.hasOwnProperty(P)&&Ze(t,i,P,null,o,B);for(X in o)B=o[X],q=a[X],!o.hasOwnProperty(X)||B===q||B==null&&q==null||Ze(t,i,X,B,o,q)}var wd=null,Rd=null;function vc(t){return t.nodeType===9?t:t.ownerDocument}function g_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Id(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cd=null;function JA(){var t=window.event;return t&&t.type==="popstate"?t===Cd?!1:(Cd=t,!0):(Cd=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof v_<"u"?function(t){return v_.resolve(null).then(t).catch(nS)}:__;function nS(t){setTimeout(function(){throw t})}function br(t){return t==="head"}function E_(t,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&fl(v.documentElement),a&2&&fl(v.body),a&4)for(a=v.head,fl(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[ls]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(f),El(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);El(i)}function Nd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nd(a),sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iS(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ls])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function rS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function Dd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function sS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Hn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var xd=null;function T_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function A_(t,i,a){switch(i=vc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function fl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);sr(t)}var Mn=new Map,S_=new Set;function Ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fi=te.d;te.d={f:aS,r:oS,D:lS,C:uS,L:cS,m:hS,X:dS,S:fS,M:mS};function aS(){var t=Fi.f(),i=hc();return t||i}function oS(t){var i=Xn(t);i!==null&&i.tag===5&&i.type==="form"?Hg(i):Fi.r(t)}var ja=typeof document>"u"?null:document;function b_(t,i,a){var o=ja;if(o&&typeof i=="string"&&i){var h=yt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S_.has(h)||(S_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ht(i,"link",t),ht(i),o.head.appendChild(i)))}}function lS(t){Fi.D(t),b_("dns-prefetch",t,null)}function uS(t,i){Fi.C(t,i),b_("preconnect",t,i)}function cS(t,i,a){Fi.L(t,i,a);var o=ja;if(o&&t&&i){var h='link[rel="preload"][as="'+yt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+yt(a.imageSizes)+'"]')):h+='[href="'+yt(t)+'"]';var f=h;switch(i){case"style":f=za(t);break;case"script":f=Ba(t)}Mn.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Mn.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(dl(f))||i==="script"&&o.querySelector(ml(f))||(i=o.createElement("link"),Ht(i,"link",t),ht(i),o.head.appendChild(i)))}}function hS(t,i){Fi.m(t,i);var a=ja;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+yt(o)+'"][href="'+yt(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ba(t)}if(!Mn.has(f)&&(t=T({rel:"modulepreload",href:t},i),Mn.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ml(f)))return}o=a.createElement("link"),Ht(o,"link",t),ht(o),a.head.appendChild(o)}}}function fS(t,i,a){Fi.S(t,i,a);var o=ja;if(o&&t){var h=en(o).hoistableStyles,f=za(t);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(dl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Mn.get(f))&&Od(t,a);var w=v=o.createElement("link");ht(w),Ht(w,"link",t),w._p=new Promise(function(j,Q){w.onload=j,w.onerror=Q}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Tc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function dS(t,i){Fi.X(t,i);var a=ja;if(a&&t){var o=en(a).hoistableScripts,h=Ba(t),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(t=T({src:t,async:!0},i),(i=Mn.get(h))&&Vd(t,i),f=a.createElement("script"),ht(f),Ht(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function mS(t,i){Fi.M(t,i);var a=ja;if(a&&t){var o=en(a).hoistableScripts,h=Ba(t),f=o.get(h);f||(f=a.querySelector(ml(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=Mn.get(h))&&Vd(t,i),f=a.createElement("script"),ht(f),Ht(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function w_(t,i,a,o){var h=(h=Te.current)?Ec(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=za(a.href),a=en(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=za(a.href);var f=en(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(dl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Mn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(t,a),f||pS(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ba(a),a=en(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function za(t){return'href="'+yt(t)+'"'}function dl(t){return'link[rel="stylesheet"]['+t+"]"}function R_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function pS(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ht(i,"link",a),ht(i),t.head.appendChild(i))}function Ba(t){return'[src="'+yt(t)+'"]'}function ml(t){return"script[async]"+t}function I_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+yt(a.href)+'"]');if(o)return i.instance=o,ht(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ht(o),Ht(o,"style",h),Tc(o,a.precedence,t),i.instance=o;case"stylesheet":h=za(a.href);var f=t.querySelector(dl(h));if(f)return i.state.loading|=4,i.instance=f,ht(f),f;o=R_(a),(h=Mn.get(h))&&Od(o,h),f=(t.ownerDocument||t).createElement("link"),ht(f);var v=f;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Ht(f,"link",o),i.state.loading|=4,Tc(f,a.precedence,t),i.instance=f;case"script":return f=Ba(a.src),(h=t.querySelector(ml(f)))?(i.instance=h,ht(h),h):(o=a,(h=Mn.get(f))&&(o=T({},a),Vd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),Ht(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Tc(o,a.precedence,t));return i.instance}function Tc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Od(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Vd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ac=null;function C_(t,i,a){if(Ac===null){var o=new Map,h=Ac=new Map;h.set(a,o)}else h=Ac,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[ls]||f[Rt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=t+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function N_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function gS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var pl=null;function yS(){}function _S(t,i,a){if(pl===null)throw Error(s(475));var o=pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=za(a.href),f=t.querySelector(dl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Sc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=f,ht(f);return}f=t.ownerDocument||t,a=R_(a),(h=Mn.get(h))&&Od(a,h),f=f.createElement("link"),ht(f);var v=f;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),Ht(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Sc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function vS(){if(pl===null)throw Error(s(475));var t=pl;return t.stylesheets&&t.count===0&&Md(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Sc(){if(this.count--,this.count===0){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var bc=null;function Md(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,bc=new Map,i.forEach(ES,t),bc=null,Sc.call(t))}function ES(t,i){if(!(i.state.loading&4)){var a=bc.get(t);if(a)var o=a.get(null);else{a=new Map,bc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=Sc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var gl={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function TS(t,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function x_(t,i,a,o,h,f,v,E,w,j,Q,X){return t=new TS(t,i,a,v,E,w,j,X),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),t.current=f,f.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},vf(f),t}function O_(t){return t?(t=_a,t):_a}function V_(t,i,a,o,h,f){h=O_(h),o.context===null?o.context=h:o.pendingContext=h,o=hr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=fr(t,o,i),a!==null&&(_n(a,t,i),Qo(a,t,i))}function M_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Pd(t,i){M_(t,i),(t=t.alternate)&&M_(t,i)}function P_(t){if(t.tag===13){var i=ya(t,67108864);i!==null&&_n(i,t,67108864),Pd(t,67108864)}}var wc=!0;function AS(t,i,a,o){var h=H.T;H.T=null;var f=te.p;try{te.p=2,kd(t,i,a,o)}finally{te.p=f,H.T=h}}function SS(t,i,a,o){var h=H.T;H.T=null;var f=te.p;try{te.p=8,kd(t,i,a,o)}finally{te.p=f,H.T=h}}function kd(t,i,a,o){if(wc){var h=Ld(o);if(h===null)Sd(t,i,o,Rc,a),L_(t,o);else if(wS(h,t,i,a,o))o.stopPropagation();else if(L_(t,o),i&4&&-1<bS.indexOf(t)){for(;h!==null;){var f=Xn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Un(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Kt(v);E.entanglements[1]|=w,v&=~w}ui(f),(Ke&6)===0&&(uc=An()+500,ul(0))}}break;case 13:E=ya(f,2),E!==null&&_n(E,f,2),hc(),Pd(f,2)}if(f=Ld(o),f===null&&Sd(t,i,o,Rc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Sd(t,i,o,null,a)}}function Ld(t){return t=wn(t),Ud(t)}var Rc=null;function Ud(t){if(Rc=null,t=Ai(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Rc=t,null}function k_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zh()){case mo:return 2;case $s:return 8;case is:case Bh:return 32;case Zs:return 268435456;default:return 32}default:return 32}}var jd=!1,wr=null,Rr=null,Ir=null,yl=new Map,_l=new Map,Cr=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L_(t,i){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function vl(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Xn(i),i!==null&&P_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function wS(t,i,a,o,h){switch(i){case"focusin":return wr=vl(wr,t,i,a,o,h),!0;case"dragenter":return Rr=vl(Rr,t,i,a,o,h),!0;case"mouseover":return Ir=vl(Ir,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return yl.set(f,vl(yl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,_l.set(f,vl(_l.get(f)||null,t,i,a,o,h)),!0}return!1}function U_(t){var i=Ai(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,hu(t.priority,function(){if(a.tag===13){var o=yn();o=nr(o);var h=ya(a,o);h!==null&&_n(h,a,o),Pd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Ld(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ri=o,a.target.dispatchEvent(o),Ri=null}else return i=Xn(a),i!==null&&P_(i),t.blockedOn=a,!1;i.shift()}return!0}function j_(t,i,a){Ic(t)&&a.delete(i)}function RS(){jd=!1,wr!==null&&Ic(wr)&&(wr=null),Rr!==null&&Ic(Rr)&&(Rr=null),Ir!==null&&Ic(Ir)&&(Ir=null),yl.forEach(j_),_l.forEach(j_)}function Cc(t,i){t.blockedOn===i&&(t.blockedOn=null,jd||(jd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,RS)))}var Nc=null;function z_(t){Nc!==t&&(Nc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nc===t&&(Nc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Ud(o||a)===null)continue;break}var f=Xn(a);f!==null&&(t.splice(i,3),i-=3,Uf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function El(t){function i(w){return Cc(w,t)}wr!==null&&Cc(wr,t),Rr!==null&&Cc(Rr,t),Ir!==null&&Cc(Ir,t),yl.forEach(i),_l.forEach(i);for(var a=0;a<Cr.length;a++){var o=Cr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Cr.length&&(a=Cr[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&Cr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[gt]||null;if(typeof f=="function")v||z_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[gt]||null)E=v.formAction;else if(Ud(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),z_(a)}}}function zd(t){this._internalRoot=t}Dc.prototype.render=zd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=yn();V_(a,o,t,i,null,null)},Dc.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;V_(t.current,2,null,t,null,null),hc(),i[Sn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ir();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Cr.length&&i!==0&&i<Cr[a].priority;a++);Cr.splice(a,0,t),a===0&&U_(t)}};var B_=e.version;if(B_!=="19.1.1")throw Error(s(527,B_,"19.1.1"));te.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var IS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{lt=xc.inject(IS),Qe=xc}catch{}}return Al.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=iy,f=ry,v=sy,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=x_(t,1,!1,null,null,a,o,h,f,v,E,null),t[Sn]=i.current,Ad(t),new zd(i)},Al.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",f=iy,v=ry,E=sy,w=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=x_(t,1,!0,i,a??null,o,h,f,v,E,w,j),i.context=O_(null),a=i.current,o=yn(),o=nr(o),h=hr(o),h.callback=null,fr(a,h,o),a=o,i.current.lanes=a,Ti(i,a),ui(i),t[Sn]=i.current,Ad(t),new Dc(i)},Al.version="19.1.1",Al}var Z_;function jS(){if(Z_)return Hd.exports;Z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hd.exports=US(),Hd.exports}var zS=jS();const BS=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},qS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,I=(c&3)<<4|p>>4;let R=(p&15)<<2|y>>6,z=y&63;g||(z=64,d||(R=64)),s.push(n[T],n[I],n[R],n[z])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(DE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||I==null)throw new HS;const R=c<<2|p>>4;if(s.push(R),y!==64){const z=p<<4&240|y>>2;if(s.push(z),I!==64){const G=y<<6&192|I;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class HS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FS=function(r){const e=DE(r);return xE.encodeByteArray(e,!0)},Xc=function(r){return FS(r).replace(/\./g,"")},OE=function(r){try{return xE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>GS().__FIREBASE_DEFAULTS__,KS=()=>{if(typeof process>"u"||typeof W_>"u")return;const r=W_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},YS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&OE(r[1]);return e&&JSON.parse(e)},_h=()=>{try{return BS()||QS()||KS()||YS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VE=r=>_h()?.emulatorHosts?.[r],XS=r=>{const e=VE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ME=()=>_h()?.config,PE=r=>_h()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Xc(JSON.stringify(n)),Xc(JSON.stringify(d)),""].join(".")}const Nl={};function WS(){const r={prod:[],emulator:[]};for(const e of Object.keys(Nl))Nl[e]?r.emulator.push(e):r.prod.push(e);return r}function JS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let J_=!1;function LE(r,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||Nl[r]===e||Nl[r]||J_)return;Nl[r]=e;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=WS().prod.length>0;function d(){const R=document.getElementById(s);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,z){R.setAttribute("width","24"),R.setAttribute("id",z),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{J_=!0,d()},R}function T(R,z){R.setAttribute("id",z),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=JS(s),z=n("text"),G=document.getElementById(z)||document.createElement("span"),ee=n("learnmore"),W=document.getElementById(ee)||document.createElement("a"),le=n("preprendIcon"),re=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ce=R.element;p(ce),T(W,ee);const Ce=y();g(re,le),ce.append(re,G,W,Ce),document.body.appendChild(ce)}c?(G.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function t1(){const r=_h()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s1(){const r=Jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function a1(){return!t1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function l1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="FirebaseError";class er extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=u1,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?c1(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new er(l,p,s)}}function c1(r,e){return r.replace(h1,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const h1=/\{\$([^}]+)}/g;function f1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(ev(c)&&ev(d)){if(!qs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function ev(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Sl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function bl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function d1(r,e){const n=new m1(r,e);return n.subscribe.bind(n)}class m1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Kd),l.error===void 0&&(l.error=Kd),l.complete===void 0&&(l.complete=Kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r){return r&&r._delegate?r._delegate:r}class Hs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $S;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_1(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:y1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y1(r){return r===Ls?void 0:r}function _1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const E1={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},T1=Pe.INFO,A1={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},S1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=A1[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=T1,this._logHandler=S1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const b1=(r,e)=>e.some(n=>r instanceof n);let tv,nv;function w1(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R1(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UE=new WeakMap,am=new WeakMap,jE=new WeakMap,Yd=new WeakMap,Mm=new WeakMap;function I1(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(kr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&UE.set(n,r)}).catch(()=>{}),Mm.set(e,r),e}function C1(r){if(am.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});am.set(r,e)}let om={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return am.get(r);if(e==="objectStoreNames")return r.objectStoreNames||jE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function N1(r){om=r(om)}function D1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Xd(this),e,...n);return jE.set(s,e.sort?e.sort():[e]),kr(s)}:R1().includes(r)?function(...e){return r.apply(Xd(this),e),kr(UE.get(this))}:function(...e){return kr(r.apply(Xd(this),e))}}function x1(r){return typeof r=="function"?D1(r):(r instanceof IDBTransaction&&C1(r),b1(r,w1())?new Proxy(r,om):r)}function kr(r){if(r instanceof IDBRequest)return I1(r);if(Yd.has(r))return Yd.get(r);const e=x1(r);return e!==r&&(Yd.set(r,e),Mm.set(e,r)),e}const Xd=r=>Mm.get(r);function O1(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),p=kr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(kr(d.result),g.oldVersion,g.newVersion,kr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const V1=["get","getKey","getAll","getAllKeys","count"],M1=["put","add","delete","clear"],$d=new Map;function iv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=M1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||V1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return $d.set(e,c),c}N1(r=>({...r,get:(e,n,s)=>iv(e,n)||r.get(e,n,s),has:(e,n)=>!!iv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function k1(r){return r.getComponent()?.type==="VERSION"}const lm="@firebase/app",rv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Vm("@firebase/app"),L1="@firebase/app-compat",U1="@firebase/analytics-compat",j1="@firebase/analytics",z1="@firebase/app-check-compat",B1="@firebase/app-check",q1="@firebase/auth",H1="@firebase/auth-compat",F1="@firebase/database",G1="@firebase/data-connect",Q1="@firebase/database-compat",K1="@firebase/functions",Y1="@firebase/functions-compat",X1="@firebase/installations",$1="@firebase/installations-compat",Z1="@firebase/messaging",W1="@firebase/messaging-compat",J1="@firebase/performance",eb="@firebase/performance-compat",tb="@firebase/remote-config",nb="@firebase/remote-config-compat",ib="@firebase/storage",rb="@firebase/storage-compat",sb="@firebase/firestore",ab="@firebase/ai",ob="@firebase/firestore-compat",lb="firebase",ub="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",cb={[lm]:"fire-core",[L1]:"fire-core-compat",[j1]:"fire-analytics",[U1]:"fire-analytics-compat",[B1]:"fire-app-check",[z1]:"fire-app-check-compat",[q1]:"fire-auth",[H1]:"fire-auth-compat",[F1]:"fire-rtdb",[G1]:"fire-data-connect",[Q1]:"fire-rtdb-compat",[K1]:"fire-fn",[Y1]:"fire-fn-compat",[X1]:"fire-iid",[$1]:"fire-iid-compat",[Z1]:"fire-fcm",[W1]:"fire-fcm-compat",[J1]:"fire-perf",[eb]:"fire-perf-compat",[tb]:"fire-rc",[nb]:"fire-rc-compat",[ib]:"fire-gcs",[rb]:"fire-gcs-compat",[sb]:"fire-fst",[ob]:"fire-fst-compat",[ab]:"fire-vertex","fire-js":"fire-js",[lb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Map,hb=new Map,cm=new Map;function sv(r,e){try{r.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Za(r){const e=r.name;if(cm.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,r);for(const n of $c.values())sv(n,r);for(const n of hb.values())sv(n,r);return!0}function Pm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Pn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Yl("app","Firebase",fb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=ub;function zE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:um,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Lr.create("bad-app-name",{appName:String(l)});if(n||(n=ME()),!n)throw Lr.create("no-options");const c=$c.get(l);if(c){if(qs(n,c.options)&&qs(s,c.config))return c;throw Lr.create("duplicate-app",{appName:l})}const d=new v1(l);for(const g of cm.values())d.addComponent(g);const p=new db(n,s,d);return $c.set(l,p),p}function BE(r=um){const e=$c.get(r);if(!e&&r===um&&ME())return zE();if(!e)throw Lr.create("no-app",{appName:r});return e}function Ur(r,e,n){let s=cb[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}Za(new Hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firebase-heartbeat-database",pb=1,Ll="firebase-heartbeat-store";let Zd=null;function qE(){return Zd||(Zd=O1(mb,pb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(r=>{throw Lr.create("idb-open",{originalErrorMessage:r.message})})),Zd}async function gb(r){try{const n=(await qE()).transaction(Ll),s=await n.objectStore(Ll).get(HE(r));return await n.done,s}catch(e){if(e instanceof er)$i.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e?.message});$i.warn(n.message)}}}async function av(r,e){try{const s=(await qE()).transaction(Ll,"readwrite");await s.objectStore(Ll).put(e,HE(r)),await s.done}catch(n){if(n instanceof er)$i.warn(n.message);else{const s=Lr.create("idb-set",{originalErrorMessage:n?.message});$i.warn(s.message)}}}function HE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=1024,_b=30;class vb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tb(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ov();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>_b){const l=Ab(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$i.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ov(),{heartbeatsToSend:n,unsentEntries:s}=Eb(this._heartbeatsCache.heartbeats),l=Xc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return $i.warn(e),""}}}function ov(){return new Date().toISOString().substring(0,10)}function Eb(r,e=yb){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),lv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),lv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Tb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?l1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lv(r){return Xc(JSON.stringify({version:2,heartbeats:r})).length}function Ab(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r){Za(new Hs("platform-logger",e=>new P1(e),"PRIVATE")),Za(new Hs("heartbeat",e=>new vb(e),"PRIVATE")),Ur(lm,rv,r),Ur(lm,rv,"esm2020"),Ur("fire-js","")}Sb("");var bb="firebase",wb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(bb,wb,"app");function FE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rb=FE,GE=new Yl("auth","Firebase",FE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Vm("@firebase/auth");function Ib(r,...e){Zc.logLevel<=Pe.WARN&&Zc.warn(`Auth (${so}): ${r}`,...e)}function Uc(r,...e){Zc.logLevel<=Pe.ERROR&&Zc.error(`Auth (${so}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(r,...e){throw km(r,...e)}function hi(r,...e){return km(r,...e)}function QE(r,e,n){const s={...Rb(),[e]:n};return new Yl("auth","Firebase",s).create(e,{appName:r.name})}function Yi(r){return QE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function km(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return GE.create(r,...e)}function ye(r,e,...n){if(!r)throw km(e,...n)}function Gi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Uc(e),new Error(e)}function Zi(r,e){r||Gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){return typeof self<"u"&&self.location?.href||""}function Cb(){return uv()==="http:"||uv()==="https:"}function uv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cb()||i1()||"connection"in navigator)?navigator.onLine:!0}function Db(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=e1()||r1()}get(){return Nb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r,e){Zi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vb=new $l(3e4,6e4);function Xr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function $r(r,e,n,s,l={}){return YE(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=Xl({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return n1()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ro(r.emulatorConfig.host)&&(y.credentials="include"),KE.fetch()(await XE(r,r.config.apiHost,n,p),y)})}async function YE(r,e,n){r._canInitEmulator=!1;const s={...xb,...e};try{const l=new Pb(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Oc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Oc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Oc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw QE(r,T,y);Gn(r,T)}}catch(l){if(l instanceof er)throw l;Gn(r,"network-request-failed",{message:String(l)})}}async function Zl(r,e,n,s,l={}){const c=await $r(r,e,n,s,l);return"mfaPendingCredential"in c&&Gn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function XE(r,e,n,s){const l=`${e}${n}?${s}`,c=r,d=c.config.emulator?Lm(r.config,l):`${r.config.apiScheme}://${l}`;return Ob.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Mb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hi(this.auth,"network-request-failed")),Vb.get())})}}function Oc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=hi(r,e,s);return l.customData._tokenResponse=n,l}function cv(r){return r!==void 0&&r.enterprise!==void 0}class kb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Mb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Lb(r,e){return $r(r,"GET","/v2/recaptchaConfig",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(r,e){return $r(r,"POST","/v1/accounts:delete",e)}async function Wc(r,e){return $r(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jb(r,e=!1){const n=wt(r),s=await n.getIdToken(e),l=Um(s);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Dl(Wd(l.auth_time)),issuedAtTime:Dl(Wd(l.iat)),expirationTime:Dl(Wd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Wd(r){return Number(r)*1e3}function Um(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const l=OE(n);return l?JSON.parse(l):(Uc("Failed to decode base64 JWT payload"),null)}catch(l){return Uc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function hv(r){const e=Um(r);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof er&&zb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function zb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(r){const e=r.auth,n=await r.getIdToken(),s=await Ul(r,Wc(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?$E(l.providerUserInfo):[],d=Hb(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new fm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function qb(r){const e=wt(r);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hb(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function $E(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(r,e){const n=await YE(r,{},async()=>{const s=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await XE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&ro(r.emulatorConfig.host)&&(g.credentials="include"),KE.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gb(r,e){return $r(r,"POST","/v2/accounts:revokeToken",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=hv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Fb(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ka;return s&&(ye(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(ye(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(r,e){ye(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Bb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new fm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jb(this,e)}reload(){return qb(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Jc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await Ul(this,Ub(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:I,emailVerified:R,isAnonymous:z,providerData:G,stsTokenManager:ee}=n;ye(I&&ee,e,"internal-error");const W=Ka.fromJSON(this.name,ee);ye(typeof I=="string",e,"internal-error"),Dr(s,e.name),Dr(l,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof z=="boolean",e,"internal-error"),Dr(c,e.name),Dr(d,e.name),Dr(p,e.name),Dr(g,e.name),Dr(y,e.name),Dr(T,e.name);const le=new Fn({uid:I,auth:e,email:l,emailVerified:R,displayName:s,isAnonymous:z,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:y,lastLoginAt:T});return G&&Array.isArray(G)&&(le.providerData=G.map(re=>({...re}))),g&&(le._redirectEventId=g),le}static async _fromIdTokenResponse(e,n,s=!1){const l=new Ka;l.updateFromServerResponse(n);const c=new Fn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Jc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?$E(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Ka;p.updateFromIdToken(s);const g=new Fn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new fm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function Qi(r){Zi(r instanceof Function,"Expected a class definition");let e=fv.get(r);return e?(Zi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,fv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const dv=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ya{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=jc(this.userKey,l.apiKey,c),this.fullPersistenceKey=jc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wc(this.auth,{idToken:e}).catch(()=>{});return n?Fn._fromGetAccountInfoResponse(this.auth,n,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ya(Qi(dv),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Qi(dv);const d=jc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let I;if(typeof T=="string"){const R=await Wc(e,{idToken:T}).catch(()=>{});if(!R)break;I=await Fn._fromGetAccountInfoResponse(e,R,T)}else I=Fn._fromJSON(e,T);y!==c&&(p=I),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ya(c,e,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ya(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i0(e))return"Blackberry";if(r0(e))return"Webos";if(JE(e))return"Safari";if((e.includes("chrome/")||e0(e))&&!e.includes("edge/"))return"Chrome";if(n0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function WE(r=Jt()){return/firefox\//i.test(r)}function JE(r=Jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e0(r=Jt()){return/crios\//i.test(r)}function t0(r=Jt()){return/iemobile/i.test(r)}function n0(r=Jt()){return/android/i.test(r)}function i0(r=Jt()){return/blackberry/i.test(r)}function r0(r=Jt()){return/webos/i.test(r)}function jm(r=Jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Qb(r=Jt()){return jm(r)&&!!window.navigator?.standalone}function Kb(){return s1()&&document.documentMode===10}function s0(r=Jt()){return jm(r)||n0(r)||r0(r)||i0(r)||/windows phone/i.test(r)||t0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(r,e=[]){let n;switch(r){case"Browser":n=mv(Jt());break;case"Worker":n=`${mv(Jt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(r,e={}){return $r(r,"GET","/v2/passwordPolicy",Xr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=6;class Zb{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$b,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new Yb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wc(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Db()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Yi(this));const n=e?wt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xb(this),n=new Zb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Gb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ib(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ks(r){return wt(r)}class pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=d1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jb(r){vh=r}function o0(r){return vh.loadJS(r)}function ew(){return vh.recaptchaEnterpriseScript}function tw(){return vh.gapiScript}function nw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class iw{constructor(){this.enterprise=new rw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sw="recaptcha-enterprise",l0="NO_RECAPTCHA";class aw{constructor(e){this.type=sw,this.auth=Ks(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{Lb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new kb(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;cv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(l0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iw().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&cv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=ew();g.length!==0&&(g+=p),o0(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function gv(r,e,n,s=!1,l=!1){const c=new aw(r);let d;if(l)d=l0;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function dm(r,e,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await gv(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await gv(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,e){const n=Pm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(qs(c,e??{}))return l;Gn(l,"already-initialized")}return n.initialize({options:e})}function lw(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Qi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function uw(r,e,n){const s=Ks(r);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=u0(e),{host:d,port:p}=cw(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(qs(y,s.config.emulator)&&qs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,ro(d)?(kE(`${c}//${d}${g}`),LE("Auth",!0)):hw()}function u0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function cw(r){const e=u0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:yv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:yv(d)}}}function yv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function hw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,n){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}}async function fw(r,e){return $r(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(r,e){return Zl(r,"POST","/v1/accounts:signInWithPassword",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(r,e){return Zl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,e))}async function pw(r,e){return Zl(r,"POST","/v1/accounts:signInWithEmailLink",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends zm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new jl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new jl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",dw);case"emailLink":return mw(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,s,"signUpPassword",fw);case"emailLink":return pw(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e){return Zl(r,"POST","/v1/accounts:signInWithIdp",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="http://localhost";class Fs extends zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new Fs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Xa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Xa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xa(e,n)}buildRequest(){const e={requestUri:gw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _w(r){const e=Sl(bl(r)).link,n=e?Sl(bl(e)).deep_link_id:null,s=Sl(bl(r)).deep_link_id;return(s?Sl(bl(s)).link:null)||s||n||e||r}class Bm{constructor(e){const n=Sl(bl(e)),s=n.apiKey??null,l=n.oobCode??null,c=yw(n.mode??null);ye(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_w(e);try{return new Bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Bm.parseLink(n);return ye(s,"argument-error"),jl._fromEmailAndCode(e,s.code,s.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends c0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Wl{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Or.credential(n,s)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Wl{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Mr.credential(n,s)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vw(r,e){return Zl(r,"POST","/v1/accounts:signUp",Xr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Fn._fromIdTokenResponse(e,s,l),d=_v(s);return new Gs({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=_v(s);return new Gs({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function _v(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends er{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new eh(e,n,s,l)}}function h0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?eh._fromErrorAndOperation(r,c,e,s):c})}async function Ew(r,e,n=!1){const s=await Ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Gs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r,e,n=!1){const{auth:s}=r;if(Pn(s.app))return Promise.reject(Yi(s));const l="reauthenticate";try{const c=await Ul(r,h0(s,l,e,r),n);ye(c.idToken,s,"internal-error");const d=Um(c.idToken);ye(d,s,"internal-error");const{sub:p}=d;return ye(r.uid===p,s,"user-mismatch"),Gs._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Gn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(r,e,n=!1){if(Pn(r.app))return Promise.reject(Yi(r));const s="signIn",l=await h0(r,s,e),c=await Gs._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function Aw(r,e){return f0(Ks(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d0(r){const e=Ks(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Sw(r,e,n){if(Pn(r.app))return Promise.reject(Yi(r));const s=Ks(r),d=await dm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vw).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&d0(r),g}),p=await Gs._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function bw(r,e,n){return Pn(r.app)?Promise.reject(Yi(r)):Aw(wt(r),ao.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&d0(r),s})}function ww(r,e,n,s){return wt(r).onIdTokenChanged(e,n,s)}function Rw(r,e,n){return wt(r).beforeAuthStateChanged(e,n)}function Iw(r,e,n,s){return wt(r).onAuthStateChanged(e,n,s)}function m0(r){return wt(r).signOut()}const th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=1e3,Nw=10;class g0 extends p0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Kb()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Nw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Cw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}g0.type="LOCAL";const Dw=g0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends p0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y0.type="SESSION";const _0=y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Eh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await xw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=qm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(I){const R=I;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function Vw(r){fi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function Mw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pw(){return navigator?.serviceWorker?.controller||null}function kw(){return v0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="firebaseLocalStorageDb",Lw=1,nh="firebaseLocalStorage",T0="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Th(r,e){return r.transaction([nh],e?"readwrite":"readonly").objectStore(nh)}function Uw(){const r=indexedDB.deleteDatabase(E0);return new Jl(r).toPromise()}function mm(){const r=indexedDB.open(E0,Lw);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(nh,{keyPath:T0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(nh)?e(s):(s.close(),await Uw(),e(await mm()))})})}async function vv(r,e,n){const s=Th(r,!0).put({[T0]:e,value:n});return new Jl(s).toPromise()}async function jw(r,e){const n=Th(r,!1).get(e),s=await new Jl(n).toPromise();return s===void 0?null:s.value}function Ev(r,e){const n=Th(r,!0).delete(e);return new Jl(n).toPromise()}const zw=800,Bw=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Bw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(kw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Mw(),!this.activeServiceWorker)return;this.sender=new Ow(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await vv(e,th,"1"),await Ev(e,th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>vv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ev(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Th(l,!1).getAll();return new Jl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const qw=A0;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(r,e){return e?Qi(e):(ye(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Fw(r){return f0(r.auth,new Hm(r),r.bypassAuthState)}function Gw(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Tw(n,new Hm(r),r.bypassAuthState)}async function Qw(r){const{auth:e,user:n}=r;return ye(n,e,"internal-error"),Ew(n,new Hm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fw;case"linkViaPopup":case"linkViaRedirect":return Qw;case"reauthViaPopup":case"reauthViaRedirect":return Gw;default:Gn(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new $l(2e3,1e4);class Qa extends S0{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kw.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="pendingRedirect",zc=new Map;class Xw extends S0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const s=await $w(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $w(r,e){const n=Jw(e),s=Ww(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Zw(r,e){zc.set(r._key(),e)}function Ww(r){return Qi(r._redirectPersistence)}function Jw(r){return jc(Yw,r.config.apiKey,r.name)}async function eR(r,e,n=!1){if(Pn(r.app))return Promise.reject(Yi(r));const s=Ks(r),l=Hw(s,e),d=await new Xw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=600*1e3;class nR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!b0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function b0({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function iR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(r,e={}){return $r(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function oR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await rR(r);for(const n of e)try{if(lR(n))return}catch{}Gn(r,"unauthorized-domain")}function lR(r){const e=hm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!aR.test(n))return!1;if(sR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new $l(3e4,6e4);function Av(){const r=fi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function cR(r){return new Promise((e,n)=>{function s(){Av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Av(),n(hi(r,"network-request-failed"))},timeout:uR.get()})}if(fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fi().gapi?.load)s();else{const l=nw("iframefcb");return fi()[l]=()=>{gapi.load?s():n(hi(r,"network-request-failed"))},o0(`${tw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Bc=null,e})}let Bc=null;function hR(r){return Bc=Bc||cR(r),Bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new $l(5e3,15e3),dR="__/auth/iframe",mR="emulator/auth/iframe",pR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(r){const e=r.config;ye(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Lm(e,mR):`https://${r.config.authDomain}/${dR}`,s={apiKey:e.apiKey,appName:r.name,v:so},l=gR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Xl(s).slice(1)}`}async function _R(r){const e=await hR(r),n=fi().gapi;return ye(n,r,"internal-error"),e.open({where:document.body,url:yR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=hi(r,"network-request-failed"),p=fi().setTimeout(()=>{c(d)},fR.get());function g(){fi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,TR=600,AR="_blank",SR="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(r,e,n,s=ER,l=TR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...vR,width:s.toString(),height:l.toString(),top:c,left:d},y=Jt().toLowerCase();n&&(p=e0(y)?AR:n),WE(y)&&(e=e||SR,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[z,G])=>`${R}${z}=${G},`,"");if(Qb(y)&&p!=="_self")return wR(e||"",p),new Sv(null);const I=window.open(e||"",p,T);ye(I,r,"popup-blocked");try{I.focus()}catch{}return new Sv(I)}function wR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="__/auth/handler",IR="emulator/auth/handler",CR=encodeURIComponent("fac");async function bv(r,e,n,s,l,c){ye(r.config.authDomain,r,"auth-domain-config-required"),ye(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:so,eventId:l};if(e instanceof c0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",f1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))d[T]=I}if(e instanceof Wl){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${CR}=${encodeURIComponent(g)}`:"";return`${NR(r)}?${Xl(p).slice(1)}${y}`}function NR({config:r}){return r.emulator?Lm(r,IR):`https://${r.authDomain}/${RR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="webStorageSupport";class DR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_0,this._completeRedirectFn=eR,this._overrideRedirectResult=Zw}async _openPopup(e,n,s,l){Zi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await bv(e,n,s,hm(),l);return bR(e,c,qm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await bv(e,n,s,hm(),l);return Vw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Zi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await _R(e),s=new nR(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jd,{type:Jd},l=>{const c=l?.[0]?.[Jd];c!==void 0&&n(!!c),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s0()||JE()||jm()}}const xR=DR;var wv="@firebase/auth",Rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MR(r){Za(new Hs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;ye(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a0(r)},y=new Wb(s,l,c,g);return lw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Za(new Hs("auth-internal",e=>{const n=Ks(e.getProvider("auth").getImmediate());return(s=>new OR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(wv,Rv,VR(r)),Ur(wv,Rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=300,kR=PE("authIdTokenMaxAge")||PR;let Iv=null;const LR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>kR)return;const l=n?.token;Iv!==l&&(Iv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function UR(r=BE()){const e=Pm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=ow(r,{popupRedirectResolver:xR,persistence:[qw,Dw,_0]}),s=PE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=LR(c.toString());Rw(n,d,()=>d(n.currentUser)),ww(n,p=>d(p))}}const l=VE("auth");return l&&uw(n,`http://${l}`),n}function jR(){return document.getElementsByTagName("head")?.[0]??document}Jb({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=hi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",jR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MR("Browser");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,w0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,b){function N(){}N.prototype=b.prototype,V.D=b.prototype,V.prototype=new N,V.prototype.constructor=V,V.C=function(O,M,k){for(var C=Array(arguments.length-2),he=2;he<arguments.length;he++)C[he-2]=arguments[he];return b.prototype[M].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,b,N){N||(N=0);var O=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)O[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;16>M;++M)O[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=V.g[0],N=V.g[1],M=V.g[2];var k=V.g[3],C=b+(k^N&(M^k))+O[0]+3614090360&4294967295;b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[1]+3905402710&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[2]+606105819&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[3]+3250441966&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[4]+4118548399&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[5]+1200080426&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[6]+2821735955&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[7]+4249261313&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[8]+1770035416&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[9]+2336552879&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[10]+4294925233&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[11]+2304563134&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(k^N&(M^k))+O[12]+1804603682&4294967295,b=N+(C<<7&4294967295|C>>>25),C=k+(M^b&(N^M))+O[13]+4254626195&4294967295,k=b+(C<<12&4294967295|C>>>20),C=M+(N^k&(b^N))+O[14]+2792965006&4294967295,M=k+(C<<17&4294967295|C>>>15),C=N+(b^M&(k^b))+O[15]+1236535329&4294967295,N=M+(C<<22&4294967295|C>>>10),C=b+(M^k&(N^M))+O[1]+4129170786&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[6]+3225465664&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[11]+643717713&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[0]+3921069994&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[5]+3593408605&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[10]+38016083&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[15]+3634488961&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[4]+3889429448&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[9]+568446438&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[14]+3275163606&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[3]+4107603335&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[8]+1163531501&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(M^k&(N^M))+O[13]+2850285829&4294967295,b=N+(C<<5&4294967295|C>>>27),C=k+(N^M&(b^N))+O[2]+4243563512&4294967295,k=b+(C<<9&4294967295|C>>>23),C=M+(b^N&(k^b))+O[7]+1735328473&4294967295,M=k+(C<<14&4294967295|C>>>18),C=N+(k^b&(M^k))+O[12]+2368359562&4294967295,N=M+(C<<20&4294967295|C>>>12),C=b+(N^M^k)+O[5]+4294588738&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[8]+2272392833&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[11]+1839030562&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[14]+4259657740&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[1]+2763975236&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[4]+1272893353&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[7]+4139469664&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[10]+3200236656&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[13]+681279174&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[0]+3936430074&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[3]+3572445317&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[6]+76029189&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(N^M^k)+O[9]+3654602809&4294967295,b=N+(C<<4&4294967295|C>>>28),C=k+(b^N^M)+O[12]+3873151461&4294967295,k=b+(C<<11&4294967295|C>>>21),C=M+(k^b^N)+O[15]+530742520&4294967295,M=k+(C<<16&4294967295|C>>>16),C=N+(M^k^b)+O[2]+3299628645&4294967295,N=M+(C<<23&4294967295|C>>>9),C=b+(M^(N|~k))+O[0]+4096336452&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[7]+1126891415&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[14]+2878612391&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[5]+4237533241&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[12]+1700485571&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[3]+2399980690&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[10]+4293915773&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[1]+2240044497&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[8]+1873313359&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[15]+4264355552&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[6]+2734768916&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[13]+1309151649&4294967295,N=M+(C<<21&4294967295|C>>>11),C=b+(M^(N|~k))+O[4]+4149444226&4294967295,b=N+(C<<6&4294967295|C>>>26),C=k+(N^(b|~M))+O[11]+3174756917&4294967295,k=b+(C<<10&4294967295|C>>>22),C=M+(b^(k|~N))+O[2]+718787259&4294967295,M=k+(C<<15&4294967295|C>>>17),C=N+(k^(M|~b))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+k&4294967295}s.prototype.u=function(V,b){b===void 0&&(b=V.length);for(var N=b-this.blockSize,O=this.B,M=this.h,k=0;k<b;){if(M==0)for(;k<=N;)l(this,V,k),k+=this.blockSize;if(typeof V=="string"){for(;k<b;)if(O[M++]=V.charCodeAt(k++),M==this.blockSize){l(this,O),M=0;break}}else for(;k<b;)if(O[M++]=V[k++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=b},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var N=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=N&255,N/=256;for(this.u(V),V=Array(16),b=N=0;4>b;++b)for(var O=0;32>O;O+=8)V[N++]=this.g[b]>>>O&255;return V};function c(V,b){var N=p;return Object.prototype.hasOwnProperty.call(N,V)?N[V]:N[V]=b(V)}function d(V,b){this.h=b;for(var N=[],O=!0,M=V.length-1;0<=M;M--){var k=V[M]|0;O&&k==b||(N[M]=k,O=!1)}this.g=N}var p={};function g(V){return-128<=V&&128>V?c(V,function(b){return new d([b|0],0>b?-1:0)}):new d([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return I;if(0>V)return W(y(-V));for(var b=[],N=1,O=0;V>=N;O++)b[O]=V/N|0,N*=4294967296;return new d(b,0)}function T(V,b){if(V.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(V.charAt(0)=="-")return W(T(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(b,8)),O=I,M=0;M<V.length;M+=8){var k=Math.min(8,V.length-M),C=parseInt(V.substring(M,M+k),b);8>k?(k=y(Math.pow(b,k)),O=O.j(k).add(y(C))):(O=O.j(N),O=O.add(y(C)))}return O}var I=g(0),R=g(1),z=g(16777216);r=d.prototype,r.m=function(){if(ee(this))return-W(this).m();for(var V=0,b=1,N=0;N<this.g.length;N++){var O=this.i(N);V+=(0<=O?O:4294967296+O)*b,b*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(G(this))return"0";if(ee(this))return"-"+W(this).toString(V);for(var b=y(Math.pow(V,6)),N=this,O="";;){var M=Ce(N,b).g;N=le(N,M.j(b));var k=((0<N.g.length?N.g[0]:N.h)>>>0).toString(V);if(N=M,G(N))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function G(V){if(V.h!=0)return!1;for(var b=0;b<V.g.length;b++)if(V.g[b]!=0)return!1;return!0}function ee(V){return V.h==-1}r.l=function(V){return V=le(this,V),ee(V)?-1:G(V)?0:1};function W(V){for(var b=V.g.length,N=[],O=0;O<b;O++)N[O]=~V.g[O];return new d(N,~V.h).add(R)}r.abs=function(){return ee(this)?W(this):this},r.add=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0,M=0;M<=b;M++){var k=O+(this.i(M)&65535)+(V.i(M)&65535),C=(k>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=C>>>16,k&=65535,C&=65535,N[M]=C<<16|k}return new d(N,N[N.length-1]&-2147483648?-1:0)};function le(V,b){return V.add(W(b))}r.j=function(V){if(G(this)||G(V))return I;if(ee(this))return ee(V)?W(this).j(W(V)):W(W(this).j(V));if(ee(V))return W(this.j(W(V)));if(0>this.l(z)&&0>V.l(z))return y(this.m()*V.m());for(var b=this.g.length+V.g.length,N=[],O=0;O<2*b;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var k=this.i(O)>>>16,C=this.i(O)&65535,he=V.i(M)>>>16,be=V.i(M)&65535;N[2*O+2*M]+=C*be,re(N,2*O+2*M),N[2*O+2*M+1]+=k*be,re(N,2*O+2*M+1),N[2*O+2*M+1]+=C*he,re(N,2*O+2*M+1),N[2*O+2*M+2]+=k*he,re(N,2*O+2*M+2)}for(O=0;O<b;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=b;O<2*b;O++)N[O]=0;return new d(N,0)};function re(V,b){for(;(V[b]&65535)!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function ce(V,b){this.g=V,this.h=b}function Ce(V,b){if(G(b))throw Error("division by zero");if(G(V))return new ce(I,I);if(ee(V))return b=Ce(W(V),b),new ce(W(b.g),W(b.h));if(ee(b))return b=Ce(V,W(b)),new ce(W(b.g),b.h);if(30<V.g.length){if(ee(V)||ee(b))throw Error("slowDivide_ only works with positive integers.");for(var N=R,O=b;0>=O.l(V);)N=ve(N),O=ve(O);var M=Oe(N,1),k=Oe(O,1);for(O=Oe(O,2),N=Oe(N,2);!G(O);){var C=k.add(O);0>=C.l(V)&&(M=M.add(N),k=C),O=Oe(O,1),N=Oe(N,1)}return b=le(V,M.j(b)),new ce(M,b)}for(M=I;0<=V.l(b);){for(N=Math.max(1,Math.floor(V.m()/b.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=y(N),C=k.j(b);ee(C)||0<C.l(V);)N-=O,k=y(N),C=k.j(b);G(k)&&(k=R),M=M.add(k),V=le(V,C)}return new ce(M,V)}r.A=function(V){return Ce(this,V).h},r.and=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)&V.i(O);return new d(N,this.h&V.h)},r.or=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)|V.i(O);return new d(N,this.h|V.h)},r.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),N=[],O=0;O<b;O++)N[O]=this.i(O)^V.i(O);return new d(N,this.h^V.h)};function ve(V){for(var b=V.g.length+1,N=[],O=0;O<b;O++)N[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(N,V.h)}function Oe(V,b){var N=b>>5;b%=32;for(var O=V.g.length-N,M=[],k=0;k<O;k++)M[k]=0<b?V.i(k+N)>>>b|V.i(k+N+1)<<32-b:V.i(k+N);return new d(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,w0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,jr=d}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R0,wl,I0,qc,pm,C0,N0,D0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in _))break e;_=_[L]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,L={next:function(){if(!A&&_<u.length){var F=_++;return{value:m(F,u[F]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,R.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function G(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,L,F){for(var ie=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ie[Ue-2]=arguments[Ue];return m.prototype[L].apply(A,ie)}}function ee(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const L=u.length||0,F=A.length||0;u.length=L+F;for(let ie=0;ie<F;ie++)u[L+ie]=A[ie]}else u.push(A)}}class le{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function re(u){return/^[\s\xa0]*$/.test(u)}function ce(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function Ce(u){return Ce[" "](u),u}Ce[" "]=function(){};var ve=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Oe(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function V(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function b(u){const m={};for(const _ in u)m[_]=u[_];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)u[_]=A[_];for(let F=0;F<N.length;F++)_=N[F],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function k(u){p.setTimeout(()=>{throw u},0)}function C(){var u=Ne;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class he{constructor(){this.h=this.g=null}add(m,_){const A=be.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var be=new le(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ue=!1,Ne=new he,D=()=>{const u=p.Promise.resolve(void 0);te=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){k(_)}var m=be;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ue=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function De(u,m){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ve){e:{try{Ce(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}G(De,ne);var Te={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),et=0;function Kn(u,m,_,A,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=L,this.key=++et,this.da=this.fa=!1}function tr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vi(u){this.src=u,this.g={},this.h=0}vi.prototype.add=function(u,m,_,A,L){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var ie=ts(u,m,A,L);return-1<ie?(m=u[ie],_||(m.fa=!1)):(m=new Kn(m,this.src,F,!!A,L),m.fa=_,u.push(m)),m};function es(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],L=Array.prototype.indexOf.call(A,m,void 0),F;(F=0<=L)&&Array.prototype.splice.call(A,L,1),F&&(tr(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ts(u,m,_,A){for(var L=0;L<u.length;++L){var F=u[L];if(!F.da&&F.listener==m&&F.capture==!!_&&F.ha==A)return L}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),fo={};function lu(u,m,_,A,L){if(Array.isArray(m)){for(var F=0;F<m.length;F++)lu(u,m[F],_,A,L);return null}return _=uu(_),u&&u[Ot]?u.K(m,_,y(A)?!!A.capture:!1,L):An(u,m,_,!1,A,L)}function An(u,m,_,A,L,F){if(!m)throw Error("Invalid event type");var ie=y(L)?!!L.capture:!!L,Ue=Zs(u);if(Ue||(u[ns]=Ue=new vi(u)),_=Ue.add(m,_,A,ie,F),_.proxy)return _;if(A=zh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)me||(L=ie),L===void 0&&(L=!1),u.addEventListener(m.toString(),A,L);else if(u.attachEvent)u.attachEvent(is(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function zh(){function u(_){return m.call(u.src,u.listener,_)}const m=Bh;return u}function mo(u,m,_,A,L){if(Array.isArray(m))for(var F=0;F<m.length;F++)mo(u,m[F],_,A,L);else A=y(A)?!!A.capture:!!A,_=uu(_),u&&u[Ot]?(u=u.i,m=String(m).toString(),m in u.g&&(F=u.g[m],_=ts(F,_,A,L),-1<_&&(tr(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete u.g[m],u.h--)))):u&&(u=Zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ts(m,_,A,L)),(_=-1<u?m[u]:null)&&$s(_))}function $s(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ot])es(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(is(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Zs(m))?(es(_,u),_.h==0&&(_.src=null,m[ns]=null)):tr(u)}}}function is(u){return u in fo?fo[u]:fo[u]="on"+u}function Bh(u,m){if(u.da)u=!0;else{m=new De(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&$s(u),u=_.call(A,m)}return u}function Zs(u){return u=u[ns],u instanceof vi?u:null}var po="__closure_events_fn_"+(1e9*Math.random()>>>0);function uu(u){return typeof u=="function"?u:(u[po]||(u[po]=function(m){return u.handleEvent(m)}),u[po])}function lt(){J.call(this),this.i=new vi(this),this.M=this,this.F=null}G(lt,J),lt.prototype[Ot]=!0,lt.prototype.removeEventListener=function(u,m,_,A){mo(this,u,m,_,A)};function Qe(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new ne(m,u);else if(m instanceof ne)m.target=m.target||u;else{var L=m;m=new ne(A,u),O(m,L)}if(L=!0,_)for(var F=_.length-1;0<=F;F--){var ie=m.g=_[F];L=cn(ie,A,!0,m)&&L}if(ie=m.g=u,L=cn(ie,A,!0,m)&&L,L=cn(ie,A,!1,m)&&L,_)for(F=0;F<_.length;F++)ie=m.g=_[F],L=cn(ie,A,!1,m)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)tr(_[A]);delete u.g[m],u.h--}}this.F=null},lt.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},lt.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function cn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,F=0;F<m.length;++F){var ie=m[F];if(ie&&!ie.da&&ie.capture==_){var Ue=ie.listener,It=ie.ha||ie.src;ie.fa&&es(u.i,ie),L=Ue.call(It,A)!==!1&&L}}return L&&!A.defaultPrevented}function Kt(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function cu(u){u.g=Kt(()=>{u.g=null,u.i&&(u.i=!1,cu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class qh extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:cu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(u){J.call(this),this.h=u,this.g={}}G(rs,J);var ss=[];function as(u){Oe(u.g,function(m,_){this.g.hasOwnProperty(_)&&$s(m)},u),u.g={}}rs.prototype.N=function(){rs.aa.N.call(this),as(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=p.JSON.stringify,Ws=p.JSON.parse,os=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function go(){}go.prototype.h=null;function yo(u){return u.h||(u.h=u.i())}function _o(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ti(){ne.call(this,"d")}G(Ti,ne);function vo(){ne.call(this,"c")}G(vo,ne);var Yn={},Eo=null;function nr(){return Eo=Eo||new lt}Yn.La="serverreachability";function Js(u){ne.call(this,Yn.La,u)}G(Js,ne);function ir(u){const m=nr();Qe(m,new Js(m))}Yn.STAT_EVENT="statevent";function hu(u,m){ne.call(this,Yn.STAT_EVENT,u),this.stat=m}G(hu,ne);function rt(u){const m=nr();Qe(m,new hu(m,u))}Yn.Ma="timingevent";function Rt(u,m){ne.call(this,Yn.Ma,u),this.size=m}G(Rt,ne);function gt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Sn(){this.g=!0}Sn.prototype.xa=function(){this.g=!1};function To(u,m,_,A,L,F){u.info(function(){if(u.g)if(F)for(var ie="",Ue=F.split("&"),It=0;It<Ue.length;It++){var je=Ue[It].split("=");if(1<je.length){var Mt=je[0];je=je[1];var Ct=Mt.split("_");ie=2<=Ct.length&&Ct[1]=="type"?ie+(Mt+"="+je+"&"):ie+(Mt+"=redacted&")}}else ie=null;else ie=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+_+`
`+ie})}function Hh(u,m,_,A,L,F,ie){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+_+`
`+F+" "+ie})}function rr(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ls(u,_)+(A?" "+A:"")})}function fu(u,m){u.info(function(){return"TIMEOUT: "+m})}Sn.prototype.info=function(){};function ls(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var ie=1;ie<L.length;ie++)L[ie]=""}}}}return Un(_)}catch{return m}}var sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function $n(){}G($n,go),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Xn=new $n;function en(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var Ao={},ea={};function jn(u,m,_){u.L=1,u.v=ds(hn(m)),u.m=_,u.P=!0,Si(u,null)}function Si(u,m){u.F=Date.now(),us(u),u.A=hn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Co(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ht,u.g=Cu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new qh(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ss[0]=L.toString()),L=ss);for(var F=0;F<L.length;F++){var ie=lu(_,L[F],A||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ir(),To(u.i,u.u,u.A,u.l,u.R,u.m)}en.prototype.ca=function(u){u=u.target;const m=this.M;m&&In(u)==3?m.j():this.Y(u)},en.prototype.Y=function(u){try{if(u==this.g)e:{const Ct=In(this.g);var m=this.g.Ba();const xi=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||Ct!=4||m==7||(m==8||0>=xi?ir(3):ir(2)),ar(this);var _=this.g.Z();this.X=_;t:if(du(this)){var A=Eu(this.g);u="";var L=A.length,F=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jt(this),Zn(this);var ie="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(F&&m==L-1)});A.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Hh(this.i,this.u,this.A,this.l,this.R,Ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,It=this.g;if((Ue=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Ue)){var je=Ue;break t}}je=null}if(_=je)rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,_);else{this.o=!1,this.s=3,rt(12),jt(this),Zn(this);break e}}if(this.P){_=!0;let zt;for(;!this.J&&this.C<ie.length;)if(zt=mu(this,ie),zt==ea){Ct==4&&(this.s=4,rt(14),_=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Ao){this.s=4,rt(15),rr(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else rr(this.i,this.l,zt,null),cs(this,zt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||ie.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)rr(this.i,this.l,ie,"[Invalid Chunked Response]"),jt(this),Zn(this);else if(0<ie.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Ts(Mt),Mt.M=!0,rt(11))}}else rr(this.i,this.l,ie,null),cs(this,ie);Ct==4&&jt(this),this.o&&!this.J&&(Ct==4?wu(this.j,this):(this.o=!1,us(this)))}else Yh(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),jt(this),Zn(this)}}}catch{}finally{}};function du(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function mu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?ea:(_=Number(m.substring(_,A)),isNaN(_)?Ao:(A+=1,A+_>m.length?ea:(m=m.slice(A,A+_),u.C=A+_,m)))}en.prototype.cancel=function(){this.J=!0,jt(this)};function us(u){u.S=Date.now()+u.I,pu(u,u.I)}function pu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=gt(R(u.ba,u),m)}function ar(u){u.B&&(p.clearTimeout(u.B),u.B=null)}en.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fu(this.i,this.A),this.L!=2&&(ir(),rt(17)),jt(this),this.s=2,Zn(this)):pu(this,this.S-u)};function Zn(u){u.j.G==0||u.J||wu(u.j,u)}function jt(u){ar(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,as(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function cs(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||So(_.h,u))){if(!u.K&&So(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)fa(_),ca(_);else break e;Vo(_),rt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=gt(R(_.Za,_),6e3));if(1>=na(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Di(_,11)}else if((u.K||_.g==u)&&fa(_),!re(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let je=L[m];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const Mt=je[3];Mt!=null&&(_.la=Mt,_.j.info("VER="+_.la));const Ct=je[4];Ct!=null&&(_.Aa=Ct,_.j.info("SVER="+_.Aa));const xi=je[5];xi!=null&&typeof xi=="number"&&0<xi&&(A=1.5*xi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const zt=u.g;if(zt){const ri=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ri){var F=A.h;F.g||ri.indexOf("spdy")==-1&&ri.indexOf("quic")==-1&&ri.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ia(F,F.h),F.h=null))}if(A.D){const Po=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(A.ya=Po,Xe(A.I,A.D,Po))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ie=u;if(A.qa=Iu(A,A.J?A.ia:null,A.W),ie.K){tn(A.h,ie);var Ue=ie,It=A.L;It&&(Ue.I=It),Ue.B&&(ar(Ue),us(Ue)),A.g=ie}else Su(A);0<_.i.length&&ha(_)}else je[0]!="stop"&&je[0]!="close"||Di(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Di(_,7):xo(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}ir(4)}catch{}}var gu=class{constructor(u,m){this.g=u,this.map=m}};function bi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function na(u){return u.h?1:u.g?u.g.size:0}function So(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ia(u,m){u.g?u.g.add(m):u.h=m}function tn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bi.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return ee(u.i)}function Fh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function ra(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function wo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ra(u),A=Fh(u),L=A.length,F=0;F<L;F++)m.call(void 0,A[F],_&&_[F],u)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),L=null;if(0<=A){var F=u[_].substring(0,A);L=u[_].substring(A+1)}else F=u[_];m(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function yt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yt){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,or(this,u.s),this.l=u.l;var m=u.i,_=new Ri;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),wi(this,_),this.m=u.m}else u&&(m=String(u).match(hs))?(this.h=!1,fs(this,m[1]||"",!0),this.o=bn(m[2]||""),this.g=bn(m[3]||"",!0),or(this,m[4]),this.l=bn(m[5]||"",!0),wi(this,m[6]||"",!0),this.m=bn(m[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}yt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ms(m,Ro,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ms(m,Ro,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ms(_,_.charAt(0)=="/"?Qh:Io,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ms(_,sa)),u.join("")};function hn(u){return new yt(u)}function fs(u,m,_){u.j=_?bn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function or(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function wi(u,m,_){m instanceof Ri?(u.i=m,_u(u.i,u.h)):(_||(m=ms(m,Kh)),u.i=new Ri(m,u.h))}function Xe(u,m,_){u.i.set(m,_)}function ds(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ms(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,yu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ro=/[#\/\?@]/g,Io=/[#\?:]/g,Qh=/[#\?]/g,Kh=/[#\?@]/g,sa=/#/g;function Ri(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&Gh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ri.prototype,r.add=function(u,m){wn(this),this.i=null,u=Wn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ii(u,m){wn(u),m=Wn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ci(u,m){return wn(u),m=Wn(u,m),u.g.has(m)}r.forEach=function(u,m){wn(this),this.g.forEach(function(_,A){_.forEach(function(L){u.call(m,L,A,this)},this)},this)},r.na=function(){wn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const L=u[A];for(let F=0;F<L.length;F++)_.push(m[A])}return _},r.V=function(u){wn(this);let m=[];if(typeof u=="string")Ci(this,u)&&(m=m.concat(this.g.get(Wn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return wn(this),this.i=null,u=Wn(this,u),Ci(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Co(u,m,_){Ii(u,m),0<_.length&&(u.i=null,u.g.set(Wn(u,m),ee(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const F=encodeURIComponent(String(A)),ie=this.V(A);for(A=0;A<ie.length;A++){var L=F;ie[A]!==""&&(L+="="+encodeURIComponent(String(ie[A]))),u.push(L)}}return this.i=u.join("&")};function Wn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function _u(u,m){m&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(Ii(this,A),Co(this,L,_))},u)),u.j=m}function ps(u,m){const _=new Sn;if(p.Image){const A=new Image;A.onload=z(Rn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=z(Rn,_,"TestLoadImage: error",!1,m,A),A.onabort=z(Rn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=z(Rn,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function zn(u,m){const _=new Sn,A=new AbortController,L=setTimeout(()=>{A.abort(),Rn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?Rn(_,"TestPingServer: ok",!0,m):Rn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Rn(_,"TestPingServer: error",!1,m)})}function Rn(u,m,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function gs(){this.g=new os}function Jn(u,m,_){const A=_||"";try{wo(u,function(L,F){let ie=L;y(L)&&(ie=Un(L)),m.push(A+F+"="+encodeURIComponent(ie))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function lr(u){this.l=u.Ub||null,this.j=u.eb||!1}G(lr,go),lr.prototype.g=function(){return new Ni(this.l,this.j)},lr.prototype.i=(function(u){return function(){return u}})({});function Ni(u,m){lt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Ni,lt),r=Ni.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ti(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ei(this):ti(this),this.readyState==3&&No(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ei(this))},r.Qa=function(u){this.g&&(this.response=u,ei(this))},r.ga=function(){this.g&&ei(this)};function ei(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ti(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ti(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Do(u){let m="";return Oe(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Vt(u,m,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Do(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Xe(u,m,_))}function Fe(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Fe,lt);var aa=/^https?$/i,ys=["POST","PUT"];r=Fe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?yo(this.o):yo(Xn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){vu(this,F);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())_.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ys,m,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ie]of _)this.g.setRequestHeader(F,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){vu(this,F)}};function vu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,oa(u),ni(u)}function oa(u){u.A||(u.A=!0,Qe(u,"complete"),Qe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qe(this,"complete"),Qe(this,"abort"),ni(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Fe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},r.bb=function(){la(this)};function la(u){if(u.h&&typeof d<"u"&&(!u.v[1]||In(u)!=4||u.Z()!=2)){if(u.u&&In(u)==4)Kt(u.Ea,0,u);else if(Qe(u,"readystatechange"),In(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var A;if(A=ie===0){var L=String(u.D).match(hs)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),A=!aa.test(L?L.toLowerCase():"")}_=A}if(_)Qe(u,"complete"),Qe(u,"success");else{u.m=6;try{var F=2<In(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",oa(u)}}finally{ni(u)}}}}function ni(u,m){if(u.g){_s(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Qe(u,"ready");try{_.onreadystatechange=A}catch{}}}function _s(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function In(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ws(m)}};function Eu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Yh(u){const m={};u=(u.g&&2<=In(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(re(u[A]))continue;var _=M(u[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=m[L]||[];m[L]=F,F.push(_)}V(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ua(u){this.Aa=0,this.i=[],this.j=new Sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,u),this.cb=vs("retryDelaySeedMs",1e4,u),this.Wa=vs("forwardChannelMaxRetries",2,u),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(u&&u.concurrentRequestLimit),this.Da=new gs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ua.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){rt(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Iu(this,null,this.W),ha(this)};function xo(u){if(Tu(u),u.G==3){var m=u.U++,_=hn(u.I);if(Xe(_,"SID",u.K),Xe(_,"RID",m),Xe(_,"TYPE","terminate"),Es(u,_),m=new en(u,u.j,m),m.L=2,m.v=ds(hn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Cu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),us(m)}Ru(u)}function ca(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function Tu(u){ca(u),u.u&&(p.clearTimeout(u.u),u.u=null),fa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ha(u){if(!ta(u.h)&&!u.s){u.s=!0;var m=u.Ga;te||D(),ue||(te(),ue=!0),Ne.add(m,u),u.B=0}}function Xh(u,m){return na(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=gt(R(u.Ga,u,m),Mo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new en(this,this.j,u);let F=this.o;if(this.S&&(F?(F=b(F),O(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Au(this,L,m),_=hn(this.I),Xe(_,"RID",u),Xe(_,"CVER",22),this.D&&Xe(_,"X-HTTP-Session-Id",this.D),Es(this,_),F&&(this.O?m="headers="+encodeURIComponent(String(Do(F)))+"&"+m:this.m&&Vt(_,this.m,F)),ia(this.h,L),this.Ua&&Xe(_,"TYPE","init"),this.P?(Xe(_,"$req",m),Xe(_,"SID","null"),L.T=!0,jn(L,_,null)):jn(L,_,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||ta(this.h)||Oo(this))};function Oo(u,m){var _;m?_=m.l:_=u.U++;const A=hn(u.I);Xe(A,"SID",u.K),Xe(A,"RID",_),Xe(A,"AID",u.T),Es(u,A),u.m&&u.o&&Vt(A,u.m,u.o),_=new en(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Au(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ia(u.h,_),jn(_,A,m)}function Es(u,m){u.H&&Oe(u.H,function(_,A){Xe(m,A,_)}),u.l&&wo({},function(_,A){Xe(m,A,_)})}function Au(u,m,_){_=Math.min(u.i.length,_);var A=u.l?R(u.l.Na,u.l,u):null;e:{var L=u.i;let F=-1;for(;;){const ie=["count="+_];F==-1?0<_?(F=L[0].g,ie.push("ofs="+F)):F=0:ie.push("ofs="+F);let Ue=!0;for(let It=0;It<_;It++){let je=L[It].g;const Mt=L[It].map;if(je-=F,0>je)F=Math.max(0,L[It].g-100),Ue=!1;else try{Jn(Mt,ie,"req"+je+"_")}catch{A&&A(Mt)}}if(Ue){A=ie.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,A}function Su(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;te||D(),ue||(te(),ue=!0),Ne.add(m,u),u.v=0}}function Vo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=gt(R(u.Fa,u),Mo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=gt(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),ca(this),bu(this))};function Ts(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function bu(u){u.g=new en(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=hn(u.qa);Xe(m,"RID","rpc"),Xe(m,"SID",u.K),Xe(m,"AID",u.T),Xe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(m,"TO",u.ja),Xe(m,"TYPE","xmlhttp"),Es(u,m),u.m&&u.o&&Vt(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ds(hn(m)),_.m=null,_.P=!0,Si(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ca(this),Vo(this),rt(19))};function fa(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function wu(u,m){var _=null;if(u.g==m){fa(u),Ts(u),u.g=null;var A=2}else if(So(u.h,m))_=m.D,tn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;A=nr(),Qe(A,new Rt(A,_)),ha(u)}else Su(u);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Xh(u,m)||A==2&&Vo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Mo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Di(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),A=u.Xa;const L=!A;A=new yt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||fs(A,"https"),ds(A),L?ps(A.toString(),_):zn(A.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),Ru(u),Tu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Ru(u){if(u.G=0,u.ka=[],u.l){const m=bo(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,ee(u.i),u.i.length=0),u.l.ra()}}function Iu(u,m,_){var A=_ instanceof yt?hn(_):new yt(_);if(A.g!="")m&&(A.g=m+"."+A.g),or(A,A.s);else{var L=p.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var F=new yt(null);A&&fs(F,A),m&&(F.g=m),L&&or(F,L),_&&(F.l=_),A=F}return _=u.D,m=u.ya,_&&m&&Xe(A,_,m),Xe(A,"VER",u.la),Es(u,A),A}function Cu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Fe(new lr({eb:_})):new Fe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}r=Nu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function da(){}da.prototype.g=function(u,m){return new nn(u,m)};function nn(u,m){lt.call(this),this.g=new ua(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!re(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!re(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ii(this)}G(nn,lt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){xo(this.g)},nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Un(u),u=_);m.i.push(new gu(m.Ya++,u)),m.G==3&&ha(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,xo(this.g),delete this.g,nn.aa.N.call(this)};function Du(u){Ti.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}G(Du,Ti);function xu(){vo.call(this),this.status=1}G(xu,vo);function ii(u){this.g=u}G(ii,Nu),ii.prototype.ua=function(){Qe(this.g,"a")},ii.prototype.ta=function(u){Qe(this.g,new Du(u))},ii.prototype.sa=function(u){Qe(this.g,new xu)},ii.prototype.ra=function(){Qe(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,D0=function(){return new da},N0=function(){return nr()},C0=Yn,pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,qc=sr,Ai.COMPLETE="complete",I0=Ai,_o.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",lt.prototype.listen=lt.prototype.K,wl=_o,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,R0=Fe}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});const Nv="@firebase/firestore",Dv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Vm("@firebase/firestore");function qa(){return Br.logLevel}function zR(r){Br.setLogLevel(r)}function ae(r,...e){if(Br.logLevel<=Pe.DEBUG){const n=e.map(Fm);Br.debug(`Firestore (${oo}): ${r}`,...n)}}function Wi(r,...e){if(Br.logLevel<=Pe.ERROR){const n=e.map(Fm);Br.error(`Firestore (${oo}): ${r}`,...n)}}function Wa(r,...e){if(Br.logLevel<=Pe.WARN){const n=e.map(Fm);Br.warn(`Firestore (${oo}): ${r}`,...n)}}function Fm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,x0(r,s,n)}function x0(r,e,n){let s=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Wi(s),new Error(s)}function Ge(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||x0(e,l,s)}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zt.UNAUTHENTICATED)))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xi,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new O0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class FR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new FR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const s=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=KR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function gm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return em(l)===em(c)?ke(l,c):em(l)?1:-1}return ke(r.length,e.length)}const YR=55296,XR=57343;function em(r){const e=r.charCodeAt(0);return e>=YR&&e<=XR}function Ja(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class ci{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&_e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=ci.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return ke(e.length,n.length)}static compareSegments(e,n){const s=ci.isNumericId(e),l=ci.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ci.extractNumericId(e).compare(ci.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class nt extends ci{construct(e,n,s){return new nt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new nt(n)}static emptyPath(){return new nt([])}}const $R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends ci{construct(e,n,s){return new Gt(e,n,s)}static isValidIdentifier(e){return $R.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new Gt([Ov])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new se(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new se(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(nt.fromString(e))}static fromName(e){return new de(nt.fromString(e).popFirst(5))}static empty(){return new de(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r,e,n){if(!n)throw new se(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ZR(r,e,n,s){if(e===!0&&s===!0)throw new se(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Vv(r){if(!de.isDocumentKey(r))throw new se(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Mv(r){if(de.isDocumentKey(r))throw new se(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function M0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ah(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Ln(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(r);throw new se(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(r,e){const n={typeString:r};return e&&(n.value=e),n}function eu(r,e){if(!M0(r))throw new se(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new se(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=-62135596800,kv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*kv);return new it(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Pv)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:bt("string",it._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new it(0,0))}static max(){return new Ae(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=-1;function WR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ae.fromTimestamp(s===1e9?new it(n+1,0):new it(n,s));return new qr(l,de.empty(),e)}function JR(r){return new qr(r.readTime,r.key,zl)}class qr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new qr(Ae.min(),de.empty(),zl)}static max(){return new qr(Ae.max(),de.empty(),zl)}}function eI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==tI)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):$.reject(n)}static resolve(e){return new $(((n,s)=>{n(e)}))}static reject(e){return new $(((n,s)=>{s(e)}))}static waitFor(e){return new $(((n,s)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new $(((s,l)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(e,n){return new $(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function iI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-1;function bh(r){return r==null}function ih(r){return r===0&&1/r==-1/0}function rI(r){return typeof r=="number"&&Number.isInteger(r)&&!ih(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="";function sI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Lv(e)),e=aI(r.get(n),e);return Lv(e)}function aI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case P0:n+="";break;default:n+=c}}return n}function Lv(r){return r+P0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Zr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function k0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mc(this.root,e,this.comparator,!0)}}class Mc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Ft.RED,this.left=l??Ft.EMPTY,this.right=c??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Ft(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ft.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new En([])}unionWith(e){let n=new xt(Gt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new L0("Invalid base64 string: "+c):c}})(e);return new Qt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const oI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(r){if(Ge(!!r,39018),typeof r=="string"){let e=0;const n=oI.exec(r);if(Ge(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?Qt.fromBase64String(r):Qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="server_timestamp",j0="__type__",z0="__previous_value__",B0="__local_write_time__";function Km(r){return(r?.mapValue?.fields||{})[j0]?.stringValue===U0}function wh(r){const e=r.mapValue.fields[z0];return Km(e)?wh(e):e}function Bl(r){const e=Hr(r.mapValue.fields[B0].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,l,c,d,p,g,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const rh="(default)";class ql{constructor(e,n){this.projectId=e,this.database=n||rh}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database===rh}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="__type__",uI="__max__",Pc={mapValue:{}},H0="__vector__",sh="value";function Gr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Km(r)?4:hI(r)?9007199254740991:cI(r)?10:11:_e(28295,{value:r})}function _i(r,e){if(r===e)return!0;const n=Gr(r);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bl(r).isEqual(Bl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Hr(l.timestampValue),p=Hr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return mt(l.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(l.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return mt(l.integerValue)===mt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=mt(l.doubleValue),p=mt(c.doubleValue);return d===p?ih(d)===ih(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Ja(r.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Uv(d)!==Uv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!_i(d[g],p[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function Hl(r,e){return(r.values||[]).find((n=>_i(n,e)))!==void 0}function eo(r,e){if(r===e)return 0;const n=Gr(r),s=Gr(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=mt(c.integerValue||c.doubleValue),g=mt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return zv(r.timestampValue,e.timestampValue);case 4:return zv(Bl(r),Bl(e));case 5:return gm(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Fr(c),g=Fr(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=ke(p[y],g[y]);if(T!==0)return T}return ke(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=ke(mt(c.latitude),mt(d.latitude));return p!==0?p:ke(mt(c.longitude),mt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Bv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[sh]?.arrayValue,T=g[sh]?.arrayValue,I=ke(y?.values?.length||0,T?.values?.length||0);return I!==0?I:Bv(y,T)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Pc.mapValue&&d===Pc.mapValue)return 0;if(c===Pc.mapValue)return 1;if(d===Pc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let I=0;I<g.length&&I<T.length;++I){const R=gm(g[I],T[I]);if(R!==0)return R;const z=eo(p[g[I]],y[T[I]]);if(z!==0)return z}return ke(g.length,T.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function zv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=Hr(r),s=Hr(e),l=ke(n.seconds,s.seconds);return l!==0?l:ke(n.nanos,s.nanos)}function Bv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=eo(n[l],s[l]);if(c)return c}return ke(n.length,s.length)}function to(r){return ym(r)}function ym(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Hr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Fr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return de.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=ym(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${ym(n.fields[d])}`;return l+"}"})(r.mapValue):_e(61005,{value:r})}function Hc(r){switch(Gr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wh(r);return e?16+Hc(e):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Hc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Zr(s.fields,((c,d)=>{l+=c.length+Hc(d)})),l})(r.mapValue);default:throw _e(13486,{value:r})}}function qv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function _m(r){return!!r&&"integerValue"in r}function Ym(r){return!!r&&"arrayValue"in r}function Hv(r){return!!r&&"nullValue"in r}function Fv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Fc(r){return!!r&&"mapValue"in r}function cI(r){return(r?.mapValue?.fields||{})[q0]?.stringValue===H0}function xl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Zr(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=xl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(r.arrayValue.values[n]);return e}return{...r}}function hI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===uI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=Gt.emptyPath(),s={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=xl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Fc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){Zr(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new un(xl(this.value))}}function F0(r){const e=[];return Zr(r.fields,((n,s)=>{const l=new Gt([n]);if(Fc(s)){const c=F0(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,l,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Wt(e,0,Ae.min(),Ae.min(),Ae.min(),un.empty(),0)}static newFoundDocument(e,n,s,l){return new Wt(e,1,n,Ae.min(),s,l,0)}static newNoDocument(e,n){return new Wt(e,2,n,Ae.min(),Ae.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Ae.min(),Ae.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.position=e,this.inclusive=n}}function Gv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=de.comparator(de.fromName(d.referenceValue),n.key):s=eo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!_i(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function fI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{}class St extends G0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new mI(e,n,s):n==="array-contains"?new yI(e,s):n==="in"?new _I(e,s):n==="not-in"?new vI(e,s):n==="array-contains-any"?new EI(e,s):new St(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new pI(e,s):new gI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eo(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends G0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qn(e,n)}matches(e){return Q0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Q0(r){return r.op==="and"}function K0(r){return dI(r)&&Q0(r)}function dI(r){for(const e of r.filters)if(e instanceof Qn)return!1;return!0}function vm(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+to(r.value);if(K0(r))return r.filters.map((e=>vm(e))).join(",");{const e=r.filters.map((n=>vm(n))).join(",");return`${r.op}(${e})`}}function Y0(r,e){return r instanceof St?(function(s,l){return l instanceof St&&s.op===l.op&&s.field.isEqual(l.field)&&_i(s.value,l.value)})(r,e):r instanceof Qn?(function(s,l){return l instanceof Qn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&Y0(d,l.filters[p])),!0):!1})(r,e):void _e(19439)}function X0(r){return r instanceof St?(function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`})(r):r instanceof Qn?(function(n){return n.op.toString()+" {"+n.getFilters().map(X0).join(" ,")+"}"})(r):"Filter"}class mI extends St{constructor(e,n,s){super(e,n,s),this.key=de.fromName(s.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class pI extends St{constructor(e,n){super(e,"in",n),this.keys=$0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gI extends St{constructor(e,n){super(e,"not-in",n),this.keys=$0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function $0(r,e){return(e.arrayValue?.values||[]).map((n=>de.fromName(n.referenceValue)))}class yI extends St{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ym(n)&&Hl(n.arrayValue,this.value)}}class _I extends St{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class vI extends St{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hl(this.value.arrayValue,n)}}class EI extends St{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Hl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n=null,s=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Kv(r,e=null,n=[],s=[],l=null,c=null,d=null){return new TI(r,e,n,s,l,c,d)}function Xm(r){const e=Se(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>vm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>to(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>to(s))).join(",")),e.Te=n}return e.Te}function $m(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!fI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Y0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qv(r.startAt,e.startAt)&&Qv(r.endAt,e.endAt)}function Em(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AI(r,e,n,s,l,c,d,p){return new tu(r,e,n,s,l,c,d,p)}function Rh(r){return new tu(r)}function Yv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Z0(r){return r.collectionGroup!==null}function Ol(r){const e=Se(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new xt(Gt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new oh(c,s))})),n.has(Gt.keyField().canonicalString())||e.Ie.push(new oh(Gt.keyField(),s))}return e.Ie}function di(r){const e=Se(r);return e.Ee||(e.Ee=SI(e,Ol(r))),e.Ee}function SI(r,e){if(r.limitType==="F")return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new oh(l.field,c)}));const n=r.endAt?new ah(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ah(r.startAt.position,r.startAt.inclusive):null;return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Tm(r,e){const n=r.filters.concat([e]);return new tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function lh(r,e,n){return new tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Ih(r,e){return $m(di(r),di(e))&&r.limitType===e.limitType}function W0(r){return`${Xm(di(r))}|lt:${r.limitType}`}function Ha(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>X0(l))).join(", ")}]`),bh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>to(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>to(l))).join(",")),`Target(${s})`})(di(r))}; limitType=${r.limitType})`}function Ch(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):de.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Ol(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Gv(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Ol(s),l)||s.endAt&&!(function(d,p,g){const y=Gv(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Ol(s),l))})(r,e)}function bI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function J0(r){return(e,n)=>{let s=!1;for(const l of Ol(r)){const c=wI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function wI(r,e,n){const s=r.field.isKeyField()?de.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?eo(g,y):_e(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return k0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new ot(de.comparator);function Ji(){return RI}const eT=new ot(de.comparator);function Rl(...r){let e=eT;for(const n of r)e=e.insert(n.key,n);return e}function tT(r){let e=eT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function js(){return Vl()}function nT(){return Vl()}function Vl(){return new Ys((r=>r.toString()),((r,e)=>r.isEqual(e)))}const II=new ot(de.comparator),CI=new xt(de.comparator);function Le(...r){let e=CI;for(const n of r)e=e.add(n);return e}const NI=new xt(ke);function DI(){return NI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function iT(r){return{integerValue:""+r}}function xI(r,e){return rI(e)?iT(e):Zm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this._=void 0}}function OI(r,e,n){return r instanceof Fl?(function(l,c){const d={fields:{[j0]:{stringValue:U0},[B0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Km(c)&&(c=wh(c)),c&&(d.fields[z0]=c),{mapValue:d}})(n,e):r instanceof Gl?sT(r,e):r instanceof Ql?aT(r,e):(function(l,c){const d=rT(l,c),p=Xv(d)+Xv(l.Ae);return _m(d)&&_m(l.Ae)?iT(p):Zm(l.serializer,p)})(r,e)}function VI(r,e,n){return r instanceof Gl?sT(r,e):r instanceof Ql?aT(r,e):n}function rT(r,e){return r instanceof uh?(function(s){return _m(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Fl extends Nh{}class Gl extends Nh{constructor(e){super(),this.elements=e}}function sT(r,e){const n=oT(e);for(const s of r.elements)n.some((l=>_i(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Ql extends Nh{constructor(e){super(),this.elements=e}}function aT(r,e){let n=oT(e);for(const s of r.elements)n=n.filter((l=>!_i(l,s)));return{arrayValue:{values:n}}}class uh extends Nh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xv(r){return mt(r.integerValue||r.doubleValue)}function oT(r){return Ym(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.field=e,this.transform=n}}function PI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Gl&&l instanceof Gl||s instanceof Ql&&l instanceof Ql?Ja(s.elements,l.elements,_i):s instanceof uh&&l instanceof uh?_i(s.Ae,l.Ae):s instanceof Fl&&l instanceof Fl})(r.transform,e.transform)}class kI{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Dh{}function lT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wm(r.key,Tn.none()):new nu(r.key,r.data,Tn.none());{const n=r.data,s=un.empty();let l=new xt(Gt.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Wr(r.key,s,new En(l.toArray()),Tn.none())}}function LI(r,e,n){r instanceof nu?(function(l,c,d){const p=l.value.clone(),g=Zv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof Wr?(function(l,c,d){if(!Gc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Zv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(uT(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Ml(r,e,n,s){return r instanceof nu?(function(c,d,p,g){if(!Gc(c.precondition,d))return p;const y=c.value.clone(),T=Wv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof Wr?(function(c,d,p,g){if(!Gc(c.precondition,d))return p;const y=Wv(c.fieldTransforms,g,d),T=d.data;return T.setAll(uT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,e,n,s):(function(c,d,p){return Gc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function UI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=rT(s.transform,l||null);c!=null&&(n===null&&(n=un.empty()),n.set(s.field,c))}return n||null}function $v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ja(s,l,((c,d)=>PI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class nu extends Dh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Wr extends Dh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function uT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Zv(r,e,n){const s=new Map;Ge(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=e.data.field(c.field);s.set(c.field,VI(d,p,n[l]))}return s}function Wv(r,e,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,OI(c,d,e))}return s}class Wm extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&LI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=nT();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=lT(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((n,s)=>$v(n,s)))&&Ja(this.baseMutations,e.baseMutations,((n,s)=>$v(n,s)))}}class Jm{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return II})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Jm(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Be;function HI(r){switch(r){case Y.OK:return _e(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function cT(r){if(r===void 0)return Wi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case Et.OK:return Y.OK;case Et.CANCELLED:return Y.CANCELLED;case Et.UNKNOWN:return Y.UNKNOWN;case Et.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Et.INTERNAL:return Y.INTERNAL;case Et.UNAVAILABLE:return Y.UNAVAILABLE;case Et.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Et.NOT_FOUND:return Y.NOT_FOUND;case Et.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Et.ABORTED:return Y.ABORTED;case Et.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Et.DATA_LOSS:return Y.DATA_LOSS;default:return _e(39323,{code:r})}}(Be=Et||(Et={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new jr([4294967295,4294967295],0);function Jv(r){const e=FI().encode(r),n=new w0;return n.update(e),new Uint8Array(n.digest())}function eE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new jr([n,s],0),new jr([l,c],0)]}class ep{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(s<0)throw new Il(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(jr.fromNumber(s)));return l.compare(GI)===1&&(l=new jr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jv(e),[s,l]=eE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new ep(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Jv(e),[s,l]=eE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new xh(Ae.min(),l,new ot(ke),Ji(),Le())}}class iu{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new iu(s,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class hT{constructor(e,n){this.targetId=e,this.Ce=n}}class fT{constructor(e,n,s=Qt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class tE{constructor(){this.ve=0,this.Fe=nE(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),s=Le();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:_e(38017,{changeType:c})}})),new iu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=nE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ji(),this.Je=kc(),this.He=kc(),this.Ye=new ot(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Em(c))if(s===0){const d=new de(c.path);this.et(n,d,Wt.newNoDocument(d,Ae.min()))}else Ge(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Fr(s).toUint8Array()}catch(g){if(g instanceof L0)return Wa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ep(d,l,c)}catch(g){return Wa(g instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Em(p.target)){const g=new de(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Wt.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Le();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new xh(e,n,this.Ye,this.je,s);return this.je=Ji(),this.Je=kc(),this.He=kc(),this.Ye=new ot(ke),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function kc(){return new ot(de.comparator)}function nE(){return new ot(de.comparator)}const KI={asc:"ASCENDING",desc:"DESCENDING"},YI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XI={and:"AND",or:"OR"};class $I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Am(r,e){return r.useProto3Json||bh(e)?e:{value:e}}function ch(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ZI(r,e){return ch(r,e.toTimestamp())}function mi(r){return Ge(!!r,49232),Ae.fromTimestamp((function(n){const s=Hr(n);return new it(s.seconds,s.nanos)})(r))}function tp(r,e){return Sm(r,e).canonicalString()}function Sm(r,e){const n=(function(l){return new nt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function mT(r){const e=nt.fromString(r);return Ge(vT(e),10190,{key:e.toString()}),e}function bm(r,e){return tp(r.databaseId,e.path)}function tm(r,e){const n=mT(e);if(n.get(1)!==r.databaseId.projectId)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new de(gT(n))}function pT(r,e){return tp(r.databaseId,e)}function WI(r){const e=mT(r);return e.length===4?nt.emptyPath():gT(e)}function wm(r){return new nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gT(r){return Ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function iE(r,e,n){return{name:bm(r,e),fields:n.value.mapValue.fields}}function JI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Ge(T===void 0||typeof T=="string",58123),Qt.fromBase64String(T||"")):(Ge(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Qt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?Y.UNKNOWN:cT(y.code);return new se(T,y.message||"")})(d);n=new fT(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=tm(r,s.document.name),c=mi(s.document.updateTime),d=s.document.createTime?mi(s.document.createTime):Ae.min(),p=new un({mapValue:{fields:s.document.fields}}),g=Wt.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Qc(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=tm(r,s.document),c=s.readTime?mi(s.readTime):Ae.min(),d=Wt.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Qc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=tm(r,s.document),c=s.removedTargetIds||[];n=new Qc([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new qI(l,c),p=s.targetId;n=new hT(p,d)}}return n}function e2(r,e){let n;if(e instanceof nu)n={update:iE(r,e.key,e.value)};else if(e instanceof Wm)n={delete:bm(r,e.key)};else if(e instanceof Wr)n={update:iE(r,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof jI))return _e(16599,{Vt:e.type});n={verify:bm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Fl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Gl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ql)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof uh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:ZI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(r,e.precondition)),n}function t2(r,e){return r&&r.length>0?(Ge(e!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?mi(l.updateTime):mi(c);return d.isEqual(Ae.min())&&(d=mi(c)),new kI(d,l.transformResults||[])})(n,e)))):[]}function n2(r,e){return{documents:[pT(r,e.path)]}}function i2(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=pT(r,l);const c=(function(y){if(y.length!==0)return _T(Qn.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:Fa(R.field),direction:a2(R.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Am(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function r2(r){let e=WI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ge(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(I){const R=yT(I);return R instanceof Qn&&K0(R)?R.getFilters():[R]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((R=>(function(G){return new oh(Ga(G.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(I){let R;return R=typeof I=="object"?I.value:I,bh(R)?null:R})(n.limit));let g=null;n.startAt&&(g=(function(I){const R=!!I.before,z=I.values||[];return new ah(z,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(I){const R=!I.before,z=I.values||[];return new ah(z,R)})(n.endAt)),AI(e,l,d,c,p,"F",g,y)}function s2(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return St.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ga(n.unaryFilter.field);return St.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ga(n.unaryFilter.field);return St.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ga(n.unaryFilter.field);return St.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(n){return St.create(Ga(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Qn.create(n.compositeFilter.filters.map((s=>yT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(r):_e(30097,{filter:r})}function a2(r){return KI[r]}function o2(r){return YI[r]}function l2(r){return XI[r]}function Fa(r){return{fieldPath:r.canonicalString()}}function Ga(r){return Gt.fromServerFormat(r.fieldPath)}function _T(r){return r instanceof St?(function(n){if(n.op==="=="){if(Fv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NAN"}};if(Hv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NAN"}};if(Hv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(n.field),op:o2(n.op),value:n.value}}})(r):r instanceof Qn?(function(n){const s=n.getFilters().map((l=>_T(l)));return s.length===1?s[0]:{compositeFilter:{op:l2(n.op),filters:s}}})(r):_e(54877,{filter:r})}function u2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function vT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,s,l,c=Ae.min(),d=Ae.min(),p=Qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.yt=e}}function h2(r){const e=r2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Cn=new d2}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(qr.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class d2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new xt(nt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new xt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ET=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(ET,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",m2=1048576;function aE([r,e],[n,s]){const l=ke(r,n);return l===0?ke(e,s):l}class p2{constructor(e){this.Ir=e,this.buffer=new xt(aE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();aE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(sE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uo(n)?ae(sE,"Ignoring IndexedDB error during garbage collection: ",n):await lo(n)}await this.Vr(3e5)}))}}class y2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Sh.ce);const s=new p2(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(rE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(e,l)))).next((I=>(s=I,p=Date.now(),this.removeTargets(e,s,n)))).next((I=>(c=I,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(y=Date.now(),qa()<=Pe.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I}))))}}function _2(r,e){return new y2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.changes=new Ys((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ml(s.mutation,l,En.empty(),it.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Le()){const l=js();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let d=Rl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=js();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Le())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,l){let c=Ji();const d=Vl(),p=(function(){return Vl()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Wr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Ml(T.mutation,y,T.mutation.getFieldMask(),it.now())):d.set(y.key,En.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new E2(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=Vl();let l=new ot(((d,p)=>d-p)),c=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||En.empty();T=p.applyToLocalView(y,T),s.set(g,T);const I=(l.get(p.batchId)||Le()).add(g);l=l.insert(p.batchId,I)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,I=nT();T.forEach((R=>{if(!c.has(R)){const z=lT(n.get(R),s.get(R));z!==null&&I.set(R,z),c=c.add(R)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,I))}return $.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(d){return de.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):$.resolve(js());let p=zl,g=c;return d.next((y=>$.forEach(y,((T,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{g=g.insert(T,R)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Le()))).next((T=>({batchId:p,changes:tT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next((s=>{let l=Rl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let d=Rl();return this.indexManager.getCollectionParents(e,c).next((p=>$.forEach(p,(g=>{const y=(function(I,R){return new tu(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next((T=>{T.forEach(((I,R)=>{d=d.insert(I,R)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,Wt.newInvalidDocument(T)))}));let p=Rl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Ml(T.mutation,y,En.empty(),it.now()),Ch(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:mi(l.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:h2(l.bundledQuery),readTime:mi(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.overlays=new ot(de.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=js();return $.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),$.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const l=js(),c=n.length+1,d=new de(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return $.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new ot(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=js(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=js(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return $.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new BI(n,s));let c=this.qr.get(n);c===void 0&&(c=Le(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.Qr=new xt(Ut.$r),this.Ur=new xt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ut(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new de(new nt([])),s=new Ut(n,e),l=new Ut(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new nt([])),s=new Ut(n,e),l=new Ut(n,e+1);let c=Le();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Ut(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Ut.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new zI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Ut(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Qm:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ut(n,0),l=new Ut(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new xt(ke);return n.forEach((l=>{const c=new Ut(l,0),d=new Ut(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;de.isDocumentKey(c)||(c=c.child(""));const d=new Ut(new de(c),0);let p=new xt(ke);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),$.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new Ut(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Ut(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.ri=e,this.docs=(function(){return new ot(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=Ji();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Wt.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=Ji();const d=n.path,p=new de(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||eI(JR(T),s)<=0||(l.has(T.key)||Ch(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,s,l){_e(9500)}ii(e,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new I2(this)}getSize(e){return $.resolve(this.size)}}class I2 extends v2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.persistence=e,this.si=new Ys((n=>Xm(n)),$m),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new np,this.targetCount=0,this.ai=no.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new no(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sh(0),this.li=!1,this.li=!0,this.hi=new b2,this.referenceDelegate=e(this),this.Pi=new C2(this),this.indexManager=new f2,this.remoteDocumentCache=(function(l){return new R2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new c2(n),this.Ii=new A2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new S2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new w2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ae("MemoryPersistence","Starting transaction:",e);const l=new N2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class N2 extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class ip{constructor(e){this.persistence=e,this.Ri=new np,this.Vi=null}static mi(e){return new ip(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=de.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ae.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hh{constructor(e,n){this.persistence=e,this.pi=new Ys((s=>sI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=_2(this,n)}static mi(e,n){return new hh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return $.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,c.removeEntry(d,Ae.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hc(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Le(),l=Le();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new rp(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return a1()?8:iI(Jt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new D2;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(qa()<=Pe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(qa()<=Pe.DEBUG&&ae("QueryEngine","Query:",Ha(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(qa()<=Pe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):$.resolve())}ys(e,n){if(Yv(n))return $.resolve(null);let s=di(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=lh(n,null,"F"),s=di(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Le(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,lh(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,l){return Yv(n)||l.isEqual(Ae.min())?$.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?$.resolve(null):(qa()<=Pe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ha(n)),this.vs(e,d,n,WR(l,zl)).next((p=>p)))}))}Ds(e,n){let s=new xt(J0(e));return n.forEach(((l,c)=>{Ch(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return qa()<=Pe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ha(n)),this.ps.getDocumentsMatchingQuery(e,n,qr.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="LocalStore",O2=3e8;class V2{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ot(ke),this.xs=new Ys((c=>Xm(c)),$m),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function M2(r,e,n,s){return new V2(r,e,n,s)}async function AT(r,e){const n=Se(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Le();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function P2(r,e){const n=Se(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const I=y.batch,R=I.keys();let z=$.resolve();return R.forEach((G=>{z=z.next((()=>T.getEntry(g,G))).next((ee=>{const W=y.docVersions.get(G);Ge(W!==null,48541),ee.version.compareTo(W)<0&&(I.applyToRemoteDocument(ee,y),ee.isValidDocument()&&(ee.setReadTime(y.commitVersion),T.addEntry(ee)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(g,I)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Le();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function ST(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function k2(r,e){const n=Se(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,I)=>{const R=l.get(I);if(!R)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,I))));let z=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?z=z.withResumeToken(Qt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,s)),l=l.insert(I,z),(function(ee,W,le){return ee.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=O2?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(R,z,T)&&p.push(n.Pi.updateTargetData(c,z))}));let g=Ji(),y=Le();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(L2(c,d,e.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(Ae.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((I=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return $.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function L2(r,e,n){let s=Le(),l=Le();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Ji();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ae(sp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function U2(r,e){const n=Se(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Qm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j2(r,e){const n=Se(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Pr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Rm(r,e,n){const s=Se(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!uo(d))throw d;ae(sp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function oE(r,e,n){const s=Se(r);let l=Ae.min(),c=Le();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const I=Se(g),R=I.xs.get(T);return R!==void 0?$.resolve(I.Ms.get(R)):I.Pi.getTargetData(y,T)})(s,d,di(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?l:Ae.min(),n?c:Le()))).next((p=>(z2(s,bI(e),p),{documents:p,Qs:c})))))}function z2(r,e,n){let s=r.Os.get(e)||Ae.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class lE{constructor(){this.activeTargetIds=DI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(uE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function Im(){return Lc===null?Lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",H2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===rh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const d=Im(),p=this.zo(e,n.toUriEncodedString());ae(nm,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=ro(y);return this.Jo(e,p,g,s,T).then((I=>(ae(nm,`Received RPC '${e}' ${d}: `,I),I)),(I=>{throw Wa(nm,`RPC '${e}' ${d} failed with error: `,I,"url: ",p,"request:",s),I}))}Ho(e,n,s,l,c,d){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=H2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class Q2 extends F2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const d=Im();return new Promise(((p,g)=>{const y=new R0;y.setWithCredentials(!0),y.listenOnce(I0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case qc.NO_ERROR:const I=y.getResponseJson();ae($t,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(I)),p(I);break;case qc.TIMEOUT:ae($t,`RPC '${e}' ${d} timed out`),g(new se(Y.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:const R=y.getStatus();if(ae($t,`RPC '${e}' ${d} failed with status:`,R,"response text:",y.getResponseText()),R>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const G=z?.error;if(G&&G.status&&G.message){const ee=(function(le){const re=le.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(re)>=0?re:Y.UNKNOWN})(G.status);g(new se(ee,G.message))}else g(new se(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new se(Y.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ae($t,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(l);ae($t,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const l=Im(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=D0(),p=N0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");ae($t,`Creating RPC '${e}' stream ${l}: ${T}`,g);const I=d.createWebChannel(T,g);this.I_(I);let R=!1,z=!1;const G=new G2({Yo:W=>{z?ae($t,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(R||(ae($t,`Opening RPC '${e}' stream ${l} transport.`),I.open(),R=!0),ae($t,`RPC '${e}' stream ${l} sending:`,W),I.send(W))},Zo:()=>I.close()}),ee=(W,le,re)=>{W.listen(le,(ce=>{try{re(ce)}catch(Ce){setTimeout((()=>{throw Ce}),0)}}))};return ee(I,wl.EventType.OPEN,(()=>{z||(ae($t,`RPC '${e}' stream ${l} transport opened.`),G.o_())})),ee(I,wl.EventType.CLOSE,(()=>{z||(z=!0,ae($t,`RPC '${e}' stream ${l} transport closed`),G.a_(),this.E_(I))})),ee(I,wl.EventType.ERROR,(W=>{z||(z=!0,Wa($t,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),G.a_(new se(Y.UNAVAILABLE,"The operation could not be completed")))})),ee(I,wl.EventType.MESSAGE,(W=>{if(!z){const le=W.data[0];Ge(!!le,16349);const re=le,ce=re?.error||re[0]?.error;if(ce){ae($t,`RPC '${e}' stream ${l} received error:`,ce);const Ce=ce.status;let ve=(function(b){const N=Et[b];if(N!==void 0)return cT(N)})(Ce),Oe=ce.message;ve===void 0&&(ve=Y.INTERNAL,Oe="Unknown error status: "+Ce+" with message "+ce.message),z=!0,G.a_(new se(ve,Oe)),I.close()}else ae($t,`RPC '${e}' stream ${l} received:`,le),G.u_(le)}})),ee(p,C0.STAT_EVENT,(W=>{W.stat===pm.PROXY?ae($t,`RPC '${e}' stream ${l} detected buffering proxy`):W.stat===pm.NOPROXY&&ae($t,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(r){return new $I(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="PersistentStream";class wT{constructor(e,n,s,l,c,d,p,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Wi(n.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new se(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ae(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K2 extends wT{constructor(e,n,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?mi(d.readTime):Ae.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=wm(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Em(g)?{documents:n2(c,g)}:{query:i2(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=dT(c,d.resumeToken);const y=Am(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ae.min())>0){p.readTime=ch(c,d.snapshotVersion.toTimestamp());const y=Am(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=s2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.q_(n)}}class Y2 extends wT{constructor(e,n,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=t2(e.writeResults,e.commitTime),s=mi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>e2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{}class $2 extends X2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Sm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Y.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Sm(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(Y.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wi(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class W2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Xs(this)&&(ae(Qs,"Restarting streams for network reachability change."),await(async function(g){const y=Se(g);y.Ea.add(4),await ru(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Vh(y)})(this))}))})),this.Ra=new Z2(s,l)}}async function Vh(r){if(Xs(r))for(const e of r.da)await e(!0)}async function ru(r){for(const e of r.da)await e(!1)}function RT(r,e){const n=Se(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),up(n)?lp(n):co(n).O_()&&op(n,e))}function ap(r,e){const n=Se(r),s=co(n);n.Ia.delete(e),s.O_()&&IT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Xs(n)&&n.Ra.set("Unknown"))}function op(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(r).Y_(e)}function IT(r,e){r.Va.Ue(e),co(r).Z_(e)}function lp(r){r.Va=new QI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),co(r).start(),r.Ra.ua()}function up(r){return Xs(r)&&!co(r).x_()&&r.Ia.size>0}function Xs(r){return Se(r).Ea.size===0}function CT(r){r.Va=void 0}async function J2(r){r.Ra.set("Online")}async function eC(r){r.Ia.forEach(((e,n)=>{op(r,e)}))}async function tC(r,e){CT(r),up(r)?(r.Ra.ha(e),lp(r)):r.Ra.set("Unknown")}async function nC(r,e,n){if(r.Ra.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){ae(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await fh(r,s)}else if(e instanceof Qc?r.Va.Ze(e):e instanceof hT?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await ST(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Qt.EMPTY_BYTE_STRING,T.snapshotVersion)),IT(c,g);const I=new Pr(T.target,g,y,T.sequenceNumber);op(c,I)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){ae(Qs,"Failed to raise snapshot:",s),await fh(r,s)}}async function fh(r,e,n){if(!uo(e))throw e;r.Ea.add(1),await ru(r),r.Ra.set("Offline"),n||(n=()=>ST(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ae(Qs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Vh(r)}))}function NT(r,e){return e().catch((n=>fh(r,n,e)))}async function Mh(r){const e=Se(r),n=Qr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qm;for(;iC(e);)try{const l=await U2(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,rC(e,l)}catch(l){await fh(e,l)}DT(e)&&xT(e)}function iC(r){return Xs(r)&&r.Ta.length<10}function rC(r,e){r.Ta.push(e);const n=Qr(r);n.O_()&&n.X_&&n.ea(e.mutations)}function DT(r){return Xs(r)&&!Qr(r).x_()&&r.Ta.length>0}function xT(r){Qr(r).start()}async function sC(r){Qr(r).ra()}async function aC(r){const e=Qr(r);for(const n of r.Ta)e.ea(n.mutations)}async function oC(r,e,n){const s=r.Ta.shift(),l=Jm.from(s,e,n);await NT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Mh(r)}async function lC(r,e){e&&Qr(r).X_&&await(async function(s,l){if((function(d){return HI(d)&&d!==Y.ABORTED})(l.code)){const c=s.Ta.shift();Qr(s).B_(),await NT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Mh(s)}})(r,e),DT(r)&&xT(r)}async function fE(r,e){const n=Se(r);n.asyncQueue.verifyOperationInProgress(),ae(Qs,"RemoteStore received new credentials");const s=Xs(n);n.Ea.add(3),await ru(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vh(n)}async function uC(r,e){const n=Se(r);e?(n.Ea.delete(2),await Vh(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function co(r){return r.ma||(r.ma=(function(n,s,l){const c=Se(n);return c.sa(),new K2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:J2.bind(null,r),t_:eC.bind(null,r),r_:tC.bind(null,r),H_:nC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),up(r)?lp(r):r.Ra.set("Unknown")):(await r.ma.stop(),CT(r))}))),r.ma}function Qr(r){return r.fa||(r.fa=(function(n,s,l){const c=Se(n);return c.sa(),new Y2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:sC.bind(null,r),r_:lC.bind(null,r),ta:aC.bind(null,r),na:oC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Mh(r)):(await r.fa.stop(),r.Ta.length>0&&(ae(Qs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const d=Date.now()+s,p=new cp(e,n,d,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(Wi("AsyncQueue",`${e}: ${r}`),uo(r))return new se(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||de.comparator(n.key,s.key):(n,s)=>de.comparator(n.key,s.key),this.keyedMap=Rl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new $a;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new ot(de.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class io{constructor(e,n,s,l,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new io(e,n,$a.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hC{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Se(n),c=l.queries;l.queries=mE(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new se(Y.ABORTED,"Firestore shutting down"))}}function mE(){return new Ys((r=>W0(r)),Ih)}async function fp(r,e){const n=Se(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new cC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=hp(d,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&mp(n)}async function dp(r,e){const n=Se(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fC(r,e){const n=Se(r);let s=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&mp(n)}function dC(r,e,n){const s=Se(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function mp(r){r.Ca.forEach((e=>{e.next()}))}var Cm,pE;(pE=Cm||(Cm={})).Ma="default",pE.Cache="cache";class pp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class VT{constructor(e){this.key=e}}class mC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=J0(e),this.tu=new $a(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new dE,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,I)=>{const R=l.get(T),z=Ch(this.query,I)?I:null,G=!!R&&this.mutatedKeys.has(R.key),ee=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let W=!1;R&&z?R.data.isEqual(z.data)?G!==ee&&(s.track({type:3,doc:z}),W=!0):this.su(R,z)||(s.track({type:2,doc:z}),W=!0,(g&&this.eu(z,g)>0||y&&this.eu(z,y)<0)&&(p=!0)):!R&&z?(s.track({type:0,doc:z}),W=!0):R&&!z&&(s.track({type:1,doc:R}),W=!0,(g||y)&&(p=!0)),W&&(z?(d=d.add(z),c=ee?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,I)=>(function(z,G){const ee=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:W})}};return ee(z)-ee(G)})(T.type,I.type)||this.eu(T.doc,I.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new io(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new VT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new OT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gp="SyncEngine";class pC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gC{constructor(e){this.key=e,this.hu=!1}}class yC{constructor(e,n,s,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ys((p=>W0(p)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new ot(de.comparator),this.Au=new Map,this.Ru=new np,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _C(r,e,n=!0){const s=jT(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await MT(s,e,n,!0),l}async function vC(r,e){const n=jT(r);await MT(n,e,!0,!1)}async function MT(r,e,n,s){const l=await j2(r.localStore,di(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await EC(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&RT(r.remoteStore,l),p}async function EC(r,e,n,s,l){r.pu=(I,R,z)=>(async function(ee,W,le,re){let ce=W.view.ru(le);ce.Cs&&(ce=await oE(ee.localStore,W.query,!1).then((({documents:V})=>W.view.ru(V,ce))));const Ce=re&&re.targetChanges.get(W.targetId),ve=re&&re.targetMismatches.get(W.targetId)!=null,Oe=W.view.applyChanges(ce,ee.isPrimaryClient,Ce,ve);return yE(ee,W.targetId,Oe.au),Oe.snapshot})(r,I,R,z);const c=await oE(r.localStore,e,!0),d=new mC(e,c.Qs),p=d.ru(c.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);yE(r,n,y.au);const T=new pC(e,n,d);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function TC(r,e,n){const s=Se(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Ih(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Rm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&ap(s.remoteStore,l.targetId),Nm(s,l.targetId)})).catch(lo)):(Nm(s,l.targetId),await Rm(s.localStore,l.targetId,!0))}async function AC(r,e){const n=Se(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ap(n.remoteStore,s.targetId))}async function SC(r,e,n){const s=DC(r);try{const l=await(function(d,p){const g=Se(d),y=it.now(),T=p.reduce(((z,G)=>z.add(G.key)),Le());let I,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let G=Ji(),ee=Le();return g.Ns.getEntries(z,T).next((W=>{G=W,G.forEach(((le,re)=>{re.isValidDocument()||(ee=ee.add(le))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,G))).next((W=>{I=W;const le=[];for(const re of p){const ce=UI(re,I.get(re.key).overlayedDocument);ce!=null&&le.push(new Wr(re.key,ce,F0(ce.value.mapValue),Tn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,y,le,p)})).next((W=>{R=W;const le=W.applyToLocalDocumentSet(I,ee);return g.documentOverlayCache.saveOverlays(z,W.batchId,le)}))})).then((()=>({batchId:R.batchId,changes:tT(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new ot(ke)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await su(s,l.changes),await Mh(s.remoteStore)}catch(l){const c=hp(l,"Failed to persist write");n.reject(c)}}async function PT(r,e){const n=Se(r);try{const s=await k2(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Ge(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ge(d.hu,14607):l.removedDocuments.size>0&&(Ge(d.hu,42227),d.hu=!1))})),await su(n,s,e)}catch(s){await lo(s)}}function gE(r,e,n){const s=Se(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Se(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,I)=>{for(const R of I.Sa)R.va(p)&&(y=!0)})),y&&mp(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function bC(r,e,n){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new ot(de.comparator);d=d.insert(c,Wt.newNoDocument(c,Ae.min()));const p=Le().add(c),g=new xh(Ae.min(),new Map,new ot(ke),d,p);await PT(s,g),s.du=s.du.remove(c),s.Au.delete(e),yp(s)}else await Rm(s.localStore,e,!1).then((()=>Nm(s,e,n))).catch(lo)}async function wC(r,e){const n=Se(r),s=e.batch.batchId;try{const l=await P2(n.localStore,e);LT(n,s,null),kT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await su(n,l)}catch(l){await lo(l)}}async function RC(r,e,n){const s=Se(r);try{const l=await(function(d,p){const g=Se(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((I=>(Ge(I!==null,37113),T=I.keys(),g.mutationQueue.removeMutationBatch(y,I)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);LT(s,e,n),kT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await su(s,l)}catch(l){await lo(l)}}function kT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function LT(r,e,n){const s=Se(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Nm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||UT(r,s)}))}function UT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(ap(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),yp(r))}function yE(r,e,n){for(const s of n)s instanceof OT?(r.Ru.addReference(s.key,e),IC(r,s)):s instanceof VT?(ae(gp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||UT(r,s.key)):_e(19791,{wu:s})}function IC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ae(gp,"New document in limbo: "+n),r.Eu.add(s),yp(r))}function yp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new de(nt.fromString(e)),s=r.fu.next();r.Au.set(s,new gC(n)),r.du=r.du.insert(n,s),RT(r.remoteStore,new Pr(di(Rh(n.path)),s,"TargetPurposeLimboResolution",Sh.ce))}}async function su(r,e,n){const s=Se(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=rp.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=Se(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>$.forEach(y,(R=>$.forEach(R.Es,(z=>T.persistence.referenceDelegate.addReference(I,R.targetId,z))).next((()=>$.forEach(R.ds,(z=>T.persistence.referenceDelegate.removeReference(I,R.targetId,z)))))))))}catch(I){if(!uo(I))throw I;ae(sp,"Failed to update sequence numbers: "+I)}for(const I of y){const R=I.targetId;if(!I.fromCache){const z=T.Ms.get(R),G=z.snapshotVersion,ee=z.withLastLimboFreeSnapshotVersion(G);T.Ms=T.Ms.insert(R,ee)}}})(s.localStore,c))}async function CC(r,e){const n=Se(r);if(!n.currentUser.isEqual(e)){ae(gp,"User change. New user:",e.toKey());const s=await AT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new se(Y.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await su(n,s.Ls)}}function NC(r,e){const n=Se(r),s=n.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let l=Le();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function jT(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bC.bind(null,e),e.Pu.H_=fC.bind(null,e.eventManager),e.Pu.yu=dC.bind(null,e.eventManager),e}function DC(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RC.bind(null,e),e}class dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return M2(this.persistence,new x2,e.initialUser,this.serializer)}Cu(e){return new TT(ip.mi,this.serializer)}Du(e){return new B2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dh.provider={build:()=>new dh};class xC extends dh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ge(this.persistence.referenceDelegate instanceof hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new g2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new TT((s=>hh.mi(s,n)),this.serializer)}}class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),await uC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hC})()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),s=(function(c){return new Q2(c)})(e.databaseInfo);return(function(c,d,p,g){return new $2(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,d,p){return new W2(s,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>gE(this.syncEngine,n,0)),(function(){return cE.v()?new cE:new q2})())}createSyncEngine(e,n){return(function(l,c,d,p,g,y,T){const I=new yC(l,c,d,p,g,y);return T&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Se(n);ae(Qs,"RemoteStore shutting down."),s.Ea.add(5),await ru(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class OC{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Zt.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ae(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ae(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=hp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rm(r,e){r.asyncQueue.verifyOperationInProgress(),ae(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await AT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function _E(r,e){r.asyncQueue.verifyOperationInProgress();const n=await VC(r);ae(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>fE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>fE(e.remoteStore,l))),r._onlineComponents=e}async function VC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae(Kr,"Using user provided OfflineComponentProvider");try{await rm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await rm(r,new dh)}}else ae(Kr,"Using default OfflineComponentProvider"),await rm(r,new xC(void 0));return r._offlineComponents}async function zT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae(Kr,"Using user provided OnlineComponentProvider"),await _E(r,r._uninitializedComponentsProvider._online)):(ae(Kr,"Using default OnlineComponentProvider"),await _E(r,new Dm))),r._onlineComponents}function MC(r){return zT(r).then((e=>e.syncEngine))}async function mh(r){const e=await zT(r),n=e.eventManager;return n.onListen=_C.bind(null,e.syncEngine),n.onUnlisten=TC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AC.bind(null,e.syncEngine),n}function PC(r,e,n={}){const s=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new _p({next:R=>{T.Nu(),d.enqueueAndForget((()=>dp(c,I)));const z=R.docs.has(p);!z&&R.fromCache?y.reject(new se(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&g&&g.source==="server"?y.reject(new se(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),I=new pp(Rh(p.path),T,{includeMetadataChanges:!0,qa:!0});return fp(c,I)})(await mh(r),r.asyncQueue,e,n,s))),s.promise}function kC(r,e,n={}){const s=new Xi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new _p({next:R=>{T.Nu(),d.enqueueAndForget((()=>dp(c,I))),R.fromCache&&g.source==="server"?y.reject(new se(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),I=new pp(p,T,{includeMetadataChanges:!0,qa:!0});return fp(c,I)})(await mh(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firestore.googleapis.com",EE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qT,this.ssl=EE}else this.host=e.host,this.ssl=e.ssl??EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ET;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m2)throw new se(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new BR;switch(s.type){case"firstParty":return new GR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=vE.get(n);s&&(ae("ComponentProvider","Removing Datastore"),vE.delete(n),s.terminate())})(this),Promise.resolve()}}function LC(r,e,n,s={}){r=Ln(r,Ph);const l=ro(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(kE(`https://${p}`),LE("Firestore",!0)),c.host!==qT&&c.host!==p&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!qs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Zt.MOCK_USER;else{y=ZS(s.mockUserToken,r._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new se(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Zt(I)}r._authCredentials=new qR(new O0(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(eu(n,pt._jsonSchema))return new pt(e,s||null,new de(nt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:bt("string",pt._jsonSchemaVersion),referencePath:bt("string")};class zr extends Jr{constructor(e,n,s){super(e,n,Rh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new de(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Ki(r,e,...n){if(r=wt(r),V0("collection","path",e),r instanceof Ph){const s=nt.fromString(e,...n);return Mv(s),new zr(r,null,s)}{if(!(r instanceof pt||r instanceof zr))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return Mv(s),new zr(r.firestore,null,s)}}function Pl(r,e,...n){if(r=wt(r),arguments.length===1&&(e=Gm.newId()),V0("doc","path",e),r instanceof Ph){const s=nt.fromString(e,...n);return Vv(s),new pt(r,null,new de(s))}{if(!(r instanceof pt||r instanceof zr))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...n));return Vv(s),new pt(r.firestore,r instanceof zr?r.converter:null,new de(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const s=im();s&&ae(AE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uo(e))throw e;ae(AE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Wi("INTERNAL UNHANDLED ERROR: ",bE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=cp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Yr extends Ph{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new SE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function UC(r,e){const n=typeof r=="object"?r:BE(),s=typeof r=="string"?r:rh,l=Pm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=XS("firestore");c&&LC(l,...c)}return l}function au(r){if(r._terminated)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||jC(r),r._firestoreClient}function jC(r){const e=r._freezeSettings(),n=(function(l,c,d,p){return new lI(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,BT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new OC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Qt.fromBase64String(e))}catch(n){throw new se(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eu(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:bt("string",kn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(e){if(eu(e,pi._jsonSchema))return new pi(e.latitude,e.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:bt("string",pi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eu(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new gi(e.vectorValues);throw new se(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:bt("string",gi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^__.*__$/;class BC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class HT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class vp{constructor(e,n,s,l,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ph(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&zC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Oh(e)}Cc(e,n,s,l=!1){return new vp({Ac:e,methodName:n,Dc:s,path:Gt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uh(r){const e=r._freezeSettings(),n=Oh(r._databaseId);return new qC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ep(r,e,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Ap("Data must be an object, but it was:",d,s);const p=GT(s,d);let g,y;if(c.merge)g=new En(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const I of c.mergeFields){const R=xm(e,I,n);if(!d.contains(R))throw new se(Y.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);KT(T,R)||T.push(R)}g=new En(T),y=d.fieldTransforms.filter((I=>g.covers(I.field)))}else g=null,y=d.fieldTransforms;return new BC(new un(p),g,y)}class jh extends Lh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}class Tp extends Lh{_toFieldTransform(e){return new MI(e.path,new Fl)}isEqual(e){return e instanceof Tp}}function HC(r,e,n,s){const l=r.Cc(1,e,n);Ap("Data must be an object, but it was:",l,s);const c=[],d=un.empty();Zr(s,((g,y)=>{const T=Sp(e,g,n);y=wt(y);const I=l.yc(T);if(y instanceof jh)c.push(T);else{const R=ou(y,I);R!=null&&(c.push(T),d.set(T,R))}}));const p=new En(c);return new HT(d,p,l.fieldTransforms)}function FC(r,e,n,s,l,c){const d=r.Cc(1,e,n),p=[xm(e,s,n)],g=[l];if(c.length%2!=0)throw new se(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(xm(e,c[R])),g.push(c[R+1]);const y=[],T=un.empty();for(let R=p.length-1;R>=0;--R)if(!KT(y,p[R])){const z=p[R];let G=g[R];G=wt(G);const ee=d.yc(z);if(G instanceof jh)y.push(z);else{const W=ou(G,ee);W!=null&&(y.push(z),T.set(z,W))}}const I=new En(y);return new HT(T,I,d.fieldTransforms)}function GC(r,e,n,s=!1){return ou(n,r.Cc(s?4:3,e))}function ou(r,e){if(QT(r=wt(r)))return Ap("Unsupported field value:",e,r),GT(r,e);if(r instanceof Lh)return(function(s,l){if(!FT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=ou(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=it.fromDate(s);return{timestampValue:ch(l.serializer,c)}}if(s instanceof it){const c=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ch(l.serializer,c)}}if(s instanceof pi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:dT(l.serializer,s._byteString)};if(s instanceof pt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:tp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof gi)return(function(d,p){return{mapValue:{fields:{[q0]:{stringValue:H0},[sh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Zm(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Ah(s)}`)})(r,e)}function GT(r,e){const n={};return k0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(r,((s,l)=>{const c=ou(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function QT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof pi||r instanceof kn||r instanceof pt||r instanceof Lh||r instanceof gi)}function Ap(r,e,n){if(!QT(n)||!M0(n)){const s=Ah(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function xm(r,e,n){if((e=wt(e))instanceof kh)return e._internalPath;if(typeof e=="string")return Sp(r,e);throw ph("Field path arguments must be of type string or ",r,!1,void 0,n)}const QC=new RegExp("[~\\*/\\[\\]]");function Sp(r,e,n){if(e.search(QC)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new kh(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ph(r,e,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new se(Y.INVALID_ARGUMENT,p+r+g)}function KT(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(XT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KC extends YT{data(){return super.data()}}function XT(r,e){return typeof e=="string"?Sp(r,e):e instanceof kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class ZT extends bp{}function kl(r,e,...n){let s=[];e instanceof bp&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Rp)).length,p=c.filter((g=>g instanceof wp)).length;if(d>1||d>0&&p>0)throw new se(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class wp extends ZT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new wp(e,n,s)}_apply(e){const n=this._parse(e);return WT(e._query,n),new Jr(e.firestore,e.converter,Tm(e._query,n))}_parse(e){const n=Uh(e.firestore);return(function(c,d,p,g,y,T,I){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){IE(I,T);const G=[];for(const ee of I)G.push(RE(g,c,ee));R={arrayValue:{values:G}}}else R=RE(g,c,I)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||IE(I,T),R=GC(p,d,I,T==="in"||T==="not-in");return St.create(y,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rp extends bp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)WT(d,g),d=Tm(d,g)})(e._query,n),new Jr(e.firestore,e.converter,Tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ip extends ZT{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Ip(e,n,s)}_apply(e){return new Jr(e.firestore,e.converter,lh(e._query,this._limit,this._limitType))}}function YC(r){return Ip._create("limit",r,"F")}function RE(r,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new se(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z0(e)&&n.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(nt.fromString(n));if(!de.isDocumentKey(s))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qv(r,new de(s))}if(n instanceof pt)return qv(r,n._key);throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function IE(r,e){if(!Array.isArray(r)||r.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(r,e){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XC{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Zr(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[sh].arrayValue?.values?.map((s=>mt(s.doubleValue)));return new gi(n)}convertGeoPoint(e){return new pi(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=wh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nt.fromString(e);Ge(vT(s),9688,{name:e});const l=new ql(s.get(1),s.get(3)),c=new de(s.popFirst(5));return l.isEqual(n)||Wi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends YT{constructor(e,n,s,l,c,d){super(e,n,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(XT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:bt("string",zs._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Kc extends zs{data(e={}){return super.data(e)}}class Bs{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Cl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Kc(this._firestore,this._userDataWriter,s.key,s,new Cl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Kc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Kc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:$C(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $C(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r){r=Ln(r,pt);const e=Ln(r.firestore,Yr);return PC(au(e),r._key).then((n=>JT(e,r,n)))}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:bt("string",Bs._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class Np extends XC{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function ZC(r){r=Ln(r,Jr);const e=Ln(r.firestore,Yr),n=au(e),s=new Np(e);return $T(r._query),kC(n,r._query).then((l=>new Bs(e,s,r,l)))}function WC(r,e,n){r=Ln(r,pt);const s=Ln(r.firestore,Yr),l=Cp(r.converter,e,n);return xp(s,[Ep(Uh(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Tn.none())])}function Dp(r,e){const n=Ln(r.firestore,Yr),s=Pl(r),l=Cp(r.converter,e);return xp(n,[Ep(Uh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Tn.exists(!1))]).then((()=>s))}function Yc(r,...e){r=wt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wE(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wE(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof pt)d=Ln(r.firestore,Yr),p=Rh(r._key.path),c={next:g=>{e[s]&&e[s](JT(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Ln(r,Jr);d=Ln(g.firestore,Yr),p=g._query;const y=new Np(d);c={next:T=>{e[s]&&e[s](new Bs(d,y,g,T))},error:e[s+1],complete:e[s+2]},$T(r._query)}return(function(y,T,I,R){const z=new _p(R),G=new pp(T,z,I);return y.asyncQueue.enqueueAndForget((async()=>fp(await mh(y),G))),()=>{z.Nu(),y.asyncQueue.enqueueAndForget((async()=>dp(await mh(y),G)))}})(au(d),p,l,c)}function xp(r,e){return(function(s,l){const c=new Xi;return s.asyncQueue.enqueueAndForget((async()=>SC(await MC(s),l,c))),c.promise})(au(r),e)}function JT(r,e,n){const s=n.docs.get(e._key),l=new Np(r);return new zs(r,l,e._key,s,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uh(e)}set(e,n,s){this._verifyNotCommitted();const l=sm(e,this._firestore),c=Cp(l.converter,n,s),d=Ep(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(d.toMutation(l._key,Tn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=sm(e,this._firestore);let d;return d=typeof(n=wt(n))=="string"||n instanceof kh?FC(this._dataReader,"WriteBatch.update",c._key,n,s,l):HC(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sm(e,this._firestore);return this._mutations=this._mutations.concat(new Wm(n._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sm(r,e){if((r=wt(r)).firestore!==e)throw new se(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function gh(){return new Tp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(r){return au(r=Ln(r,Yr)),new JC(r,(e=>xp(r,e)))}(function(e,n=!0){(function(l){oo=l})(so),Za(new Hs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Yr(new HR(s.getProvider("auth-internal")),new QR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ur(Nv,Dv,e),Ur(Nv,Dv,"esm2020")})();const Tt={dashboard:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),sales:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),purchases:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),inventory:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),reports:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),logout:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),plus:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),user:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),money:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),close:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),trash:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),edit:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})})},tN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyA6pwcMnIn0y0HcKRWQhfpvPKwmbH-Jc4Y",authDomain:"sofwipad-erp-contable.firebaseapp.com",projectId:"sofwipad-erp-contable",storageBucket:"sofwipad-erp-contable.appspot.com",messagingSenderId:"902895181248",appId:"1:902895181248:web:dfb884b039dedacfb3bc25",measurementId:"G-D22KTMEDP6"};const eA=zE(tN),Kl=UR(eA),vn=UC(eA);zR("debug");const tA=Re.createContext(),nN=({children:r})=>{const[e,n]=Re.useState(null),[s,l]=Re.useState(null),[c,d]=Re.useState(null),[p,g]=Re.useState(!0),[y,T]=Re.useState(""),I=async z=>{const G=eN(vn),ee=Ki(vn,`companies/${z}/chart_of_accounts`);[{code:"1105",name:"Caja",class:"Activo"},{code:"1110",name:"Bancos",class:"Activo"},{code:"1305",name:"Clientes",class:"Activo"},{code:"1435",name:"Inventarios",class:"Activo"},{code:"2205",name:"Proveedores Nacionales",class:"Pasivo"},{code:"2105",name:"Obligaciones Financieras",class:"Pasivo"},{code:"3115",name:"Aportes Sociales",class:"Patrimonio"},{code:"4135",name:"Comercio al por mayor y al por menor",class:"Ingreso"},{code:"5105",name:"Gastos de Personal",class:"Gasto"},{code:"5195",name:"Diversos",class:"Gasto"},{code:"6135",name:"Costo de Ventas",class:"Costo"}].forEach(le=>{const re=Pl(ee,le.code);G.set(re,le)});try{await G.commit(),console.log(`Plan de cuentas inicial creado para la empresa: ${z}`)}catch(le){console.error("Error creando el plan de cuentas inicial:",le),T("No se pudo completar la configuración inicial de la empresa.")}};Re.useEffect(()=>{const G=Iw(Kl,async ee=>{if(ee&&!ee.isAnonymous){const W=Pl(vn,"users",ee.uid),le=await CE(W);if(le.exists()){const re={uid:ee.uid,...le.data()};if(n(ee),l(re),re.companyId){const ce=Pl(vn,"companies",re.companyId),Ce=await CE(ce);if(Ce.exists()){d({id:Ce.id,...Ce.data()});const ve=Ki(vn,`companies/${re.companyId}/chart_of_accounts`),Oe=kl(ve,YC(1));(await ZC(Oe)).empty&&(console.log("Plan de cuentas no encontrado, iniciando configuración..."),await I(re.companyId))}else T(`Error: La empresa con ID ${re.companyId} no fue encontrada.`),d(null)}else T("Usuario no está asociado a ninguna empresa."),d(null)}else T("No se encontró el perfil del usuario en la base de datos."),await m0(Kl)}else n(null),l(null),d(null);g(!1)});return()=>G()},[]);const R={user:e,userData:s,companyData:c,loading:p,error:y,setError:T};return S.jsx(tA.Provider,{value:R,children:r})},ho=()=>Re.useContext(tA),nA=({isOpen:r,onClose:e,title:n,children:s})=>r?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] overflow-y-auto",children:[S.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),S.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:Tt.close})]}),S.jsx("div",{className:"p-6",children:s})]})}):null,At=({id:r,label:e,...n})=>S.jsxs("div",{children:[S.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),S.jsx("input",{id:r,...n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),Us=({id:r,label:e,children:n,...s})=>S.jsxs("div",{children:[S.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),S.jsx("select",{id:r,...s,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n})]}),yi=({children:r,onClick:e,type:n="button",variant:s="primary",...l})=>{const c="inline-flex items-center justify-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"border-transparent text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"};return S.jsx("button",{type:n,onClick:e,className:`${c} ${d[s]}`,...l,children:r})},yh=({title:r,children:e,actions:n})=>S.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[S.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),n&&S.jsx("div",{className:"flex space-x-2",children:n})]}),S.jsx("div",{className:"p-4",children:e})]}),iA=()=>S.jsx("div",{className:"flex justify-center items-center h-full",children:S.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),rA=({message:r})=>r?S.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative my-4",role:"alert",children:[S.jsx("strong",{className:"font-bold",children:"Error: "}),S.jsx("span",{className:"block sm:inline",children:r})]}):null,iN=()=>{const[r,e]=Re.useState(!0),[n,s]=Re.useState(""),[l,c]=Re.useState(""),[d,p]=Re.useState(""),[g,y]=Re.useState(""),[T,I]=Re.useState(""),[R,z]=Re.useState(""),[G,ee]=Re.useState(!1),W=async re=>{re.preventDefault(),ee(!0),z("");try{await bw(Kl,n,l)}catch(ce){z(ce.message)}ee(!1)},le=async re=>{if(re.preventDefault(),l.length<6){z("La contraseña debe tener al menos 6 caracteres.");return}ee(!0),z("");try{const ce=Ki(vn,"companies"),Ce=await Dp(ce,{name:g,NIT:T,createdAt:gh(),taxConfig:{iva:19,ica:.414,retefuente:2.5}}),Oe=(await Sw(Kl,n,l)).user;await WC(Pl(vn,"users",Oe.uid),{name:d,email:n,companyId:Ce.id,role:"Admin",createdAt:gh()})}catch(ce){z(ce.message)}ee(!1)};return S.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[S.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Sofwipad ERP Contable"}),S.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Inicia sesión en tu cuenta":"Crea una nueva cuenta y empresa"})]}),S.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:S.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[S.jsxs("form",{className:"space-y-6",onSubmit:r?W:le,children:[!r&&S.jsxs(S.Fragment,{children:[S.jsx(At,{id:"name",name:"name",type:"text",label:"Tu Nombre Completo",required:!0,value:d,onChange:re=>p(re.target.value)}),S.jsx(At,{id:"companyName",name:"companyName",type:"text",label:"Nombre de la Empresa",required:!0,value:g,onChange:re=>y(re.target.value)}),S.jsx(At,{id:"nit",name:"nit",type:"text",label:"NIT de la Empresa",required:!0,value:T,onChange:re=>I(re.target.value)}),S.jsx("hr",{})]}),S.jsx(At,{id:"email",name:"email",type:"email",label:"Correo Electrónico",autoComplete:"email",required:!0,value:n,onChange:re=>s(re.target.value)}),S.jsx(At,{id:"password",name:"password",type:"password",label:"Contraseña",autoComplete:"current-password",required:!0,value:l,onChange:re=>c(re.target.value)}),S.jsx(rA,{message:R}),S.jsx("div",{children:S.jsx(yi,{type:"submit",variant:"primary",className:"w-full",disabled:G,children:G?"Procesando...":r?"Iniciar Sesión":"Registrar Empresa"})})]}),S.jsxs("div",{className:"mt-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),S.jsx("div",{className:"mt-6 text-center",children:S.jsx("button",{onClick:()=>{e(!r),z("")},className:"font-medium text-indigo-600 hover:text-indigo-500",children:r?"¿No tienes una cuenta? Regístrate":"¿Ya tienes una cuenta? Inicia sesión"})})]})]})})]})},rN=()=>{const{userData:r,companyData:e}=ho(),[n,s]=Re.useState("dashboard"),l=async()=>{await m0(Kl)},c=({view:g,icon:y,children:T})=>S.jsxs("a",{href:"#",onClick:I=>{I.preventDefault(),s(g)},className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${n===g?"bg-indigo-600 text-white":"text-gray-300 hover:bg-indigo-800 hover:text-white"}`,children:[S.jsx("span",{className:"mr-3",children:y}),T]}),d=()=>{switch(n){case"dashboard":return S.jsx(NE,{});case"sales":return S.jsx(sN,{setActiveView:s});case"thirdparties":return S.jsx(aN,{});default:return S.jsx(NE,{})}},p={Admin:"Administrador",Contador:"Contador",Empleado:"Empleado"};return S.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[S.jsxs("aside",{className:"w-64 flex-shrink-0 bg-indigo-900 text-white flex flex-col",children:[S.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b border-indigo-800",children:S.jsx("h2",{className:"text-xl font-bold",children:e?.name||"ERP Nube"})}),S.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[S.jsx(c,{view:"dashboard",icon:Tt.dashboard,children:"Dashboard"}),S.jsx(c,{view:"sales",icon:Tt.sales,children:"Ventas"}),S.jsx(c,{view:"purchases",icon:Tt.purchases,children:"Compras"}),S.jsx(c,{view:"inventory",icon:Tt.inventory,children:"Inventario"}),S.jsx(c,{view:"reports",icon:Tt.reports,children:"Reportes"}),S.jsx(c,{view:"thirdparties",icon:Tt.user,children:"Clientes/Proveedores"})]}),S.jsxs("div",{className:"px-4 py-4 border-t border-indigo-800",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx("div",{className:"p-2 bg-indigo-700 rounded-full",children:Tt.user}),S.jsxs("div",{className:"ml-3",children:[S.jsx("p",{className:"text-sm font-medium text-white",children:r?.name}),S.jsx("p",{className:"text-xs text-indigo-300",children:p[r?.role]||r?.role})]})]}),S.jsxs("a",{href:"#",onClick:l,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium rounded-lg text-gray-300 hover:bg-red-600 hover:text-white transition-colors",children:[S.jsx("span",{className:"mr-3",children:Tt.logout}),"Cerrar Sesión"]})]})]}),S.jsxs("main",{className:"flex-1 overflow-y-auto",children:[S.jsx("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-6",children:S.jsx("h1",{className:"text-2xl font-semibold text-gray-800 capitalize",children:n})}),S.jsx("div",{className:"p-6",children:d()})]})]})},NE=()=>{const{companyData:r}=ho(),e=[{title:"Ventas del Mes",value:"$12,500,000",icon:Tt.sales,color:"text-green-500"},{title:"Cuentas por Cobrar",value:"$4,200,000",icon:Tt.money,color:"text-yellow-500"},{title:"Compras del Mes",value:"$7,800,000",icon:Tt.purchases,color:"text-red-500"},{title:"Valor Inventario",value:"$25,000,000",icon:Tt.inventory,color:"text-blue-500"}];return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Bienvenido a ",r?.name]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[S.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${n.color}`,children:VS.cloneElement(n.icon,{className:"h-8 w-8"})}),S.jsxs("div",{className:"ml-4",children:[S.jsx("p",{className:"text-sm text-gray-500",children:n.title}),S.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.value})]})]},n.title))}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsx(yh,{title:"Ventas vs Compras (Últimos 6 meses)",children:S.jsx("div",{className:"h-64 bg-gray-200 rounded-md flex items-center justify-center",children:S.jsx("p",{className:"text-gray-500",children:"Gráfico de barras aquí"})})}),S.jsx(yh,{title:"Actividades Recientes",children:S.jsxs("ul",{className:"space-y-3",children:[S.jsx("li",{className:"text-sm text-gray-600",children:"Factura de venta #FV-002 creada."}),S.jsx("li",{className:"text-sm text-gray-600",children:"Pago a proveedor 'DistriPartes SAS' registrado."}),S.jsx("li",{className:"text-sm text-gray-600",children:"Nuevo producto 'Aceite 20W-50' añadido al inventario."})]})})]})]})},sN=({setActiveView:r})=>{const{companyData:e}=ho(),[n,s]=Re.useState(!1),[l,c]=Re.useState([]),[d,p]=Re.useState([]),[g,y]=Re.useState([]),[T,I]=Re.useState(!0);Re.useEffect(()=>{if(!e)return;I(!0);const z=kl(Ki(vn,`companies/${e.id}/invoices_sales`)),G=Yc(z,ee=>{const W=ee.docs.map(le=>({id:le.id,...le.data()}));c(W),I(!1)},ee=>{console.error("Error fetching invoices: ",ee),I(!1)});return()=>G()},[e]),Re.useEffect(()=>{if(!e)return;const z=kl(Ki(vn,`companies/${e.id}/thirdparties`)),G=kl(Ki(vn,`companies/${e.id}/products`)),ee=Yc(z,le=>{p(le.docs.map(re=>({id:re.id,...re.data()})))}),W=Yc(G,le=>{y(le.docs.map(re=>({id:re.id,...re.data()})))});return()=>{ee(),W()}},[e]);const R=async z=>{if(e)try{const G=Ki(vn,`companies/${e.id}/invoices_sales`);await Dp(G,{...z,companyId:e.id,createdAt:gh(),status:"Pendiente"}),s(!1)}catch(G){console.error("Error creating invoice: ",G)}};return S.jsxs("div",{children:[S.jsx("div",{className:"border-b mb-4",children:S.jsxs("nav",{className:"flex space-x-6 text-sm font-medium text-gray-600",children:[S.jsx("button",{className:"border-b-2 border-blue-600 text-blue-600 pb-2",children:"Documentos de venta"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Facturas recurrentes"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Clientes"}),S.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Seguimiento comercial"})]})}),S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsxs("div",{className:"flex space-x-2",children:[S.jsx("input",{type:"text",placeholder:"Buscar por Identificación o Cliente",className:"border px-3 py-2 rounded-lg text-sm w-80"}),S.jsxs(yi,{variant:"secondary",children:[Tt.filter," Filtros"]})]}),S.jsxs("div",{className:"flex space-x-2",children:[S.jsxs(yi,{type:"button",variant:"secondary",onClick:()=>r("thirdparties"),children:[Tt.userPlus," Crear Cliente"]}),S.jsxs(yi,{onClick:()=>s(!0),children:[Tt.plus," Crear Factura"]})]})]}),S.jsx(yh,{title:"Facturas de Venta",children:T?S.jsx(iA,{}):S.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[S.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3",children:"Fecha"}),S.jsx("th",{className:"px-6 py-3",children:"Comprobante"}),S.jsx("th",{className:"px-6 py-3",children:"Identificación"}),S.jsx("th",{className:"px-6 py-3",children:"Cliente"}),S.jsx("th",{className:"px-6 py-3",children:"Total"}),S.jsx("th",{className:"px-6 py-3",children:"Moneda"}),S.jsx("th",{className:"px-6 py-3",children:"Estado"}),S.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),S.jsx("tbody",{children:l.map(z=>S.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4",children:z.date?.seconds?new Date(z.date.seconds*1e3).toLocaleDateString():"N/A"}),S.jsxs("td",{className:"px-6 py-4 font-medium text-blue-600",children:["FV-",z.id.substring(0,6)]}),S.jsx("td",{className:"px-6 py-4",children:d.find(G=>G.id===z.clientId)?.idNumber||"N/A"}),S.jsx("td",{className:"px-6 py-4",children:d.find(G=>G.id===z.clientId)?.name||"Consumidor Final"}),S.jsxs("td",{className:"px-6 py-4",children:["$",new Intl.NumberFormat("es-CO").format(z.total||0)]}),S.jsx("td",{className:"px-6 py-4",children:"COP"}),S.jsx("td",{className:"px-6 py-4",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${z.status==="Pagada"?"bg-green-100 text-green-800":z.status==="Vencida"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:z.status})}),S.jsxs("td",{className:"px-6 py-4 flex space-x-2",children:[S.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:Tt.edit}),S.jsx("button",{className:"text-red-600 hover:text-red-900",children:Tt.trash})]})]},z.id))})]})}),S.jsx(oN,{isOpen:n,onClose:()=>s(!1),onSubmit:R,clients:d,products:g})]})},aN=()=>{const{companyData:r}=ho(),[e,n]=Re.useState([]),[s,l]=Re.useState(!1),[c,d]=Re.useState({type:"cliente",personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",email:"",phone:""});Re.useEffect(()=>{if(!r)return;const y=kl(Ki(vn,`companies/${r.id}/thirdparties`)),T=Yc(y,I=>{n(I.docs.map(R=>({id:R.id,...R.data()})))});return()=>T()},[r]);const p=y=>{const{name:T,value:I}=y.target;d(R=>({...R,[T]:I})),T==="personType"&&d(R=>({...R,idType:I==="persona"?"CC":"NIT",idNumber:""}))},g=async y=>{if(y.preventDefault(),!!r)try{const T=Ki(vn,`companies/${r.id}/thirdparties`);await Dp(T,{...c,createdAt:gh()}),l(!1),d({type:"cliente",personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",email:"",phone:""})}catch(T){console.error("Error creando tercero:",T)}};return S.jsxs("div",{children:[S.jsx("div",{className:"flex justify-end mb-4",children:S.jsxs(yi,{onClick:()=>l(!0),children:[Tt.plus," Crear Tercero"]})}),S.jsx(yh,{title:"Clientes / Proveedores / Otros",children:S.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[S.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3",children:"Nombre"}),S.jsx("th",{className:"px-6 py-3",children:"Tipo"}),S.jsx("th",{className:"px-6 py-3",children:"Persona"}),S.jsx("th",{className:"px-6 py-3",children:"Identificación"}),S.jsx("th",{className:"px-6 py-3",children:"Ciudad"}),S.jsx("th",{className:"px-6 py-3",children:"Teléfono"}),S.jsx("th",{className:"px-6 py-3",children:"Correo"})]})}),S.jsx("tbody",{children:e.map(y=>S.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[S.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[y.name," ",y.lastName]}),S.jsx("td",{className:"px-6 py-4 capitalize",children:y.type}),S.jsx("td",{className:"px-6 py-4 capitalize",children:y.personType}),S.jsxs("td",{className:"px-6 py-4",children:[y.idType,": ",y.idNumber]}),S.jsx("td",{className:"px-6 py-4",children:y.city}),S.jsx("td",{className:"px-6 py-4",children:y.phone}),S.jsx("td",{className:"px-6 py-4",children:y.email})]},y.id))})]})}),S.jsx(nA,{isOpen:s,onClose:()=>l(!1),children:S.jsxs("form",{onSubmit:g,className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[S.jsx("h2",{className:"text-xl font-semibold",children:"Crear un tercero"}),S.jsxs("div",{className:"space-x-2",children:[S.jsx(yi,{type:"button",variant:"secondary",onClick:()=>l(!1),children:"Cancelar"}),S.jsx(yi,{type:"submit",variant:"primary",children:"Guardar"})]})]}),S.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[S.jsx("p",{className:"font-medium mb-2",children:"Tipo de tercero"}),S.jsx("div",{className:"flex space-x-6",children:["cliente","proveedor","otro"].map(y=>S.jsxs("label",{className:"flex items-center space-x-2",children:[S.jsx("input",{type:"radio",name:"type",value:y,checked:c.type===y,onChange:p,className:"h-5 w-5 text-blue-600"}),S.jsx("span",{className:"capitalize",children:y})]},y))})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-white p-4 rounded-lg border",children:[S.jsxs(Us,{id:"personType",name:"personType",label:"Tipo de Persona",value:c.personType,onChange:p,children:[S.jsx("option",{value:"persona",children:"Persona"}),S.jsx("option",{value:"empresa",children:"Empresa"})]}),S.jsx(Us,{id:"idType",name:"idType",label:"Tipo de Identificación",value:c.idType,onChange:p,children:c.personType==="persona"?S.jsx("option",{value:"CC",children:"Cédula de Ciudadanía (CC)"}):S.jsx("option",{value:"NIT",children:"NIT"})}),S.jsx(At,{id:"idNumber",name:"idNumber",label:c.idType==="CC"?"Número de Cédula":"Número de NIT",value:c.idNumber,onChange:p,required:!0}),S.jsx(At,{id:"name",name:"name",label:"Nombres",value:c.name,onChange:p,required:!0}),c.personType==="persona"&&S.jsx(At,{id:"lastName",name:"lastName",label:"Apellidos",value:c.lastName,onChange:p}),S.jsx(At,{id:"tradeName",name:"tradeName",label:"Nombre Comercial",value:c.tradeName,onChange:p}),S.jsx(At,{id:"city",name:"city",label:"Ciudad",value:c.city,onChange:p}),S.jsx(At,{id:"address",name:"address",label:"Dirección",value:c.address,onChange:p}),S.jsx(At,{id:"phone",name:"phone",label:"Teléfono",value:c.phone,onChange:p}),S.jsx(At,{id:"email",name:"email",type:"email",label:"Correo Electrónico",value:c.email,onChange:p})]})]})})]})},oN=({isOpen:r,onClose:e,onSubmit:n,clients:s,products:l})=>{const{userData:c}=ho(),[d,p]=Re.useState("Electrónica"),[g,y]=Re.useState(""),[T,I]=Re.useState(()=>{const he=new Date;return new Date(he.getTime()-he.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[R,z]=Re.useState([{productId:"",quantity:1,price:0,discount:0,tax:19,retention:0}]),[G,ee]=Re.useState("Efectivo"),[W,le]=Re.useState(""),[re,ce]=Re.useState(0),[Ce,ve]=Re.useState(0),[Oe,V]=Re.useState(0),[b,N]=Re.useState(0),O=(he,be,H)=>{const te=[...R];if(te[he][be]=H,be==="productId"){const ue=l.find(Ne=>Ne.id===H);ue&&(te[he].price=ue.price||0)}z(te)},M=()=>z([...R,{productId:"",quantity:1,price:0,discount:0,tax:19,retention:0}]),k=he=>z(R.filter((be,H)=>H!==he));Re.useEffect(()=>{let he=0,be=0,H=0;R.forEach(te=>{const ue=Number(te.quantity)||0,Ne=Number(te.price)||0,D=(Number(te.discount)||0)/100,Z=ue*Ne*(1-D),J=Number(te.tax)/100;he+=Z,be+=Z*J,H+=Number(te.retention)||0}),ce(he),ve(be),V(H),N(he+be-H)},[R]);const C=he=>{he.preventDefault();const be={tipoFactura:d,clientId:g,vendedor:c?.name||"Usuario",date:new Date(T),items:R.map(H=>({...H,quantity:Number(H.quantity),price:Number(H.price),discount:Number(H.discount),tax:Number(H.tax),retention:Number(H.retention)})),paymentMethod:G,observaciones:W,subtotal:re,iva:Ce,retenciones:Oe,total:b};n(be),e()};return S.jsx(nA,{isOpen:r,onClose:e,title:"Crear Nueva Factura de Venta",children:S.jsxs("form",{onSubmit:C,className:"space-y-4",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs(Us,{label:"Tipo de Factura",value:d,onChange:he=>p(he.target.value),children:[S.jsx("option",{value:"Electrónica",children:"Electrónica"}),S.jsx("option",{value:"Física",children:"Física"})]}),S.jsxs(Us,{label:"Cliente",value:g,onChange:he=>y(he.target.value),required:!0,children:[S.jsx("option",{value:"",children:"Seleccione un cliente"}),s.map(he=>S.jsxs("option",{value:he.id,children:[he.name," - ",he.idNumber]},he.id))]}),S.jsx(At,{label:"Vendedor",value:c?.name||"",readOnly:!0}),S.jsx(At,{label:"Fecha",type:"date",value:T,onChange:he=>I(he.target.value)})]}),S.jsx("h4",{className:"text-md font-semibold pt-4 border-t",children:"Ítems de la Factura"}),S.jsxs("div",{className:"grid grid-cols-14 gap-2 font-semibold text-gray-600 text-sm border-b pb-1",children:[S.jsx("div",{className:"col-span-3",children:"Producto"}),S.jsx("div",{className:"col-span-2",children:"Cantidad"}),S.jsx("div",{className:"col-span-2",children:"Valor Unitario"}),S.jsx("div",{className:"col-span-2",children:"% Desc."}),S.jsx("div",{className:"col-span-2",children:"Impuesto"}),S.jsx("div",{className:"col-span-1",children:"Ret."}),S.jsx("div",{className:"col-span-1",children:"Valor Total"}),S.jsx("div",{className:"w-8 flex justify-center"})]}),R.map((he,be)=>{const H=Number(he.quantity)||0,te=Number(he.price)||0,ue=(Number(he.discount)||0)/100,Ne=H*te*(1-ue),D=Number(he.tax)/100,Z=Ne+Ne*D-(Number(he.retention)||0);return S.jsxs("div",{className:"grid grid-cols-14 gap-2 items-center",children:[S.jsx("div",{className:"col-span-3",children:S.jsxs(Us,{value:he.productId,onChange:J=>O(be,"productId",J.target.value),children:[S.jsx("option",{value:"",children:"Seleccione producto"}),l.map(J=>S.jsx("option",{value:J.id,children:J.name},J.id))]})}),S.jsx("div",{className:"col-span-2",children:S.jsx(At,{type:"number",value:he.quantity,min:"1",onChange:J=>O(be,"quantity",J.target.value)})}),S.jsx("div",{className:"col-span-2",children:S.jsx(At,{type:"number",value:he.price,onChange:J=>O(be,"price",J.target.value)})}),S.jsx("div",{className:"col-span-2",children:S.jsx(At,{type:"number",value:he.discount,onChange:J=>O(be,"discount",J.target.value)})}),S.jsx("div",{className:"col-span-2",children:S.jsxs(Us,{value:he.tax,onChange:J=>O(be,"tax",J.target.value),children:[S.jsx("option",{value:0,children:"0% (Exento)"}),S.jsx("option",{value:5,children:"5%"}),S.jsx("option",{value:19,children:"19%"})]})}),S.jsx("div",{className:"col-span-1",children:S.jsx(At,{type:"number",value:he.retention,onChange:J=>O(be,"retention",J.target.value)})}),S.jsx("div",{className:"col-span-1 text-right font-semibold",children:new Intl.NumberFormat("es-CO").format(Z)}),S.jsx("div",{className:"w-8 flex justify-center items-center",children:S.jsx("button",{type:"button",className:"text-red-500 hover:text-red-700 p-1",onClick:()=>k(be),children:Tt.trash})})]},be)}),S.jsx(yi,{type:"button",variant:"secondary",onClick:M,children:"Añadir Ítem"}),S.jsxs("div",{className:"mt-4 border-t pt-4 space-y-2 text-right",children:[S.jsxs("p",{children:["Subtotal: ",S.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(re)]})]}),S.jsxs("p",{children:["IVA: ",S.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(Ce)]})]}),S.jsxs("p",{children:["Retenciones:"," ",S.jsxs("b",{children:["-$",new Intl.NumberFormat("es-CO").format(Oe)]})]}),S.jsxs("p",{className:"text-lg font-bold",children:["Total Neto: $",new Intl.NumberFormat("es-CO").format(b)]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[S.jsxs(Us,{label:"Forma de Pago",value:G,onChange:he=>ee(he.target.value),children:[S.jsx("option",{value:"Efectivo",children:"Efectivo"}),S.jsx("option",{value:"Crédito",children:"Crédito"})]}),S.jsx(At,{label:"Observaciones",value:W,onChange:he=>le(he.target.value)})]}),S.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[S.jsx(yi,{type:"button",variant:"secondary",onClick:e,children:"Cancelar"}),S.jsx(yi,{type:"submit",variant:"primary",children:"Guardar Factura"})]})]})})};function lN(){return S.jsx(nN,{children:S.jsx(uN,{})})}const uN=()=>{const{user:r,loading:e,error:n}=ho();return e?S.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50",children:S.jsx(iA,{})}):n?S.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50 p-4",children:S.jsx(rA,{message:n})}):r?S.jsx(rN,{}):S.jsx(iN,{})};zS.createRoot(document.getElementById("root")).render(S.jsx(Re.StrictMode,{children:S.jsx(lN,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function HS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kd={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function FS(){if(W_)return Rl;W_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return Rl.Fragment=e,Rl.jsx=n,Rl.jsxs=n,Rl}var J_;function GS(){return J_||(J_=1,Kd.exports=FS()),Kd.exports}var E=GS(),Yd={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function QS(){if(ev)return Ce;ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.iterator;function I(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,ne={};function te(N,Z,oe){this.props=N,this.context=Z,this.refs=ne,this.updater=oe||B}te.prototype.isReactComponent={},te.prototype.setState=function(N,Z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Z,"setState")},te.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function he(){}he.prototype=te.prototype;function se(N,Z,oe){this.props=N,this.context=Z,this.refs=ne,this.updater=oe||B}var re=se.prototype=new he;re.constructor=se,K(re,te.prototype),re.isPureReactComponent=!0;var ee=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function D(N,Z,oe,ie,pe,ge){return oe=ge.ref,{$$typeof:r,type:N,key:Z,ref:oe!==void 0?oe:null,props:ge}}function w(N,Z){return D(N.type,Z,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var Z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return Z[oe]})}var M=/\/+/g;function P(N,Z){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):Z.toString(36)}function x(){}function Rt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(x,x):(N.status="pending",N.then(function(Z){N.status==="pending"&&(N.status="fulfilled",N.value=Z)},function(Z){N.status==="pending"&&(N.status="rejected",N.reason=Z)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function it(N,Z,oe,ie,pe){var ge=typeof N;(ge==="undefined"||ge==="boolean")&&(N=null);var we=!1;if(N===null)we=!0;else switch(ge){case"bigint":case"string":case"number":we=!0;break;case"object":switch(N.$$typeof){case r:case e:we=!0;break;case A:return we=N._init,it(we(N._payload),Z,oe,ie,pe)}}if(we)return pe=pe(N),we=ie===""?"."+P(N,0):ie,ee(pe)?(oe="",we!=null&&(oe=we.replace(M,"$&/")+"/"),it(pe,Z,oe,"",function($n){return $n})):pe!=null&&(C(pe)&&(pe=w(pe,oe+(pe.key==null||N&&N.key===pe.key?"":(""+pe.key).replace(M,"$&/")+"/")+we)),Z.push(pe)),1;we=0;var Vt=ie===""?".":ie+":";if(ee(N))for(var We=0;We<N.length;We++)ie=N[We],ge=Vt+P(ie,We),we+=it(ie,Z,oe,ge,pe);else if(We=I(N),typeof We=="function")for(N=We.call(N),We=0;!(ie=N.next()).done;)ie=ie.value,ge=Vt+P(ie,We++),we+=it(ie,Z,oe,ge,pe);else if(ge==="object"){if(typeof N.then=="function")return it(Rt(N),Z,oe,ie,pe);throw Z=String(N),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function Q(N,Z,oe){if(N==null)return N;var ie=[],pe=0;return it(N,ie,"","",function(ge){return Z.call(oe,ge,pe++)}),ie}function G(N){if(N._status===-1){var Z=N._result;Z=Z(),Z.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=Z)}if(N._status===1)return N._result.default;throw N._result}var le=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function be(){}return Ce.Children={map:Q,forEach:function(N,Z,oe){Q(N,function(){Z.apply(this,arguments)},oe)},count:function(N){var Z=0;return Q(N,function(){Z++}),Z},toArray:function(N){return Q(N,function(Z){return Z})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=te,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=se,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return H.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cloneElement=function(N,Z,oe){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=K({},N.props),pe=N.key,ge=void 0;if(Z!=null)for(we in Z.ref!==void 0&&(ge=void 0),Z.key!==void 0&&(pe=""+Z.key),Z)!ce.call(Z,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Z.ref===void 0||(ie[we]=Z[we]);var we=arguments.length-2;if(we===1)ie.children=oe;else if(1<we){for(var Vt=Array(we),We=0;We<we;We++)Vt[We]=arguments[We+2];ie.children=Vt}return D(N.type,pe,void 0,void 0,ge,ie)},Ce.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Ce.createElement=function(N,Z,oe){var ie,pe={},ge=null;if(Z!=null)for(ie in Z.key!==void 0&&(ge=""+Z.key),Z)ce.call(Z,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(pe[ie]=Z[ie]);var we=arguments.length-2;if(we===1)pe.children=oe;else if(1<we){for(var Vt=Array(we),We=0;We<we;We++)Vt[We]=arguments[We+2];pe.children=Vt}if(N&&N.defaultProps)for(ie in we=N.defaultProps,we)pe[ie]===void 0&&(pe[ie]=we[ie]);return D(N,ge,void 0,void 0,null,pe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:p,render:N}},Ce.isValidElement=C,Ce.lazy=function(N){return{$$typeof:A,_payload:{_status:-1,_result:N},_init:G}},Ce.memo=function(N,Z){return{$$typeof:y,type:N,compare:Z===void 0?null:Z}},Ce.startTransition=function(N){var Z=H.T,oe={};H.T=oe;try{var ie=N(),pe=H.S;pe!==null&&pe(oe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(be,le)}catch(ge){le(ge)}finally{H.T=Z}},Ce.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ce.use=function(N){return H.H.use(N)},Ce.useActionState=function(N,Z,oe){return H.H.useActionState(N,Z,oe)},Ce.useCallback=function(N,Z){return H.H.useCallback(N,Z)},Ce.useContext=function(N){return H.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,Z){return H.H.useDeferredValue(N,Z)},Ce.useEffect=function(N,Z,oe){var ie=H.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(N,Z)},Ce.useId=function(){return H.H.useId()},Ce.useImperativeHandle=function(N,Z,oe){return H.H.useImperativeHandle(N,Z,oe)},Ce.useInsertionEffect=function(N,Z){return H.H.useInsertionEffect(N,Z)},Ce.useLayoutEffect=function(N,Z){return H.H.useLayoutEffect(N,Z)},Ce.useMemo=function(N,Z){return H.H.useMemo(N,Z)},Ce.useOptimistic=function(N,Z){return H.H.useOptimistic(N,Z)},Ce.useReducer=function(N,Z,oe){return H.H.useReducer(N,Z,oe)},Ce.useRef=function(N){return H.H.useRef(N)},Ce.useState=function(N){return H.H.useState(N)},Ce.useSyncExternalStore=function(N,Z,oe){return H.H.useSyncExternalStore(N,Z,oe)},Ce.useTransition=function(){return H.H.useTransition()},Ce.version="19.1.1",Ce}var tv;function Um(){return tv||(tv=1,Yd.exports=QS()),Yd.exports}var me=Um();const KS=HS(me);var Xd={exports:{}},Il={},$d={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function YS(){return nv||(nv=1,(function(r){function e(Q,G){var le=Q.length;Q.push(G);e:for(;0<le;){var be=le-1>>>1,N=Q[be];if(0<l(N,G))Q[be]=G,Q[le]=N,le=be;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var G=Q[0],le=Q.pop();if(le!==G){Q[0]=le;e:for(var be=0,N=Q.length,Z=N>>>1;be<Z;){var oe=2*(be+1)-1,ie=Q[oe],pe=oe+1,ge=Q[pe];if(0>l(ie,le))pe<N&&0>l(ge,ie)?(Q[be]=ge,Q[pe]=le,be=pe):(Q[be]=ie,Q[oe]=le,be=oe);else if(pe<N&&0>l(ge,le))Q[be]=ge,Q[pe]=le,be=pe;else break e}}return G}function l(Q,G){var le=Q.sortIndex-G.sortIndex;return le!==0?le:Q.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],y=[],A=1,b=null,I=3,B=!1,K=!1,ne=!1,te=!1,he=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ee(Q){for(var G=n(y);G!==null;){if(G.callback===null)s(y);else if(G.startTime<=Q)s(y),G.sortIndex=G.expirationTime,e(g,G);else break;G=n(y)}}function H(Q){if(ne=!1,ee(Q),!K)if(n(g)!==null)K=!0,ce||(ce=!0,P());else{var G=n(y);G!==null&&it(H,G.startTime-Q)}}var ce=!1,D=-1,w=5,C=-1;function O(){return te?!0:!(r.unstable_now()-C<w)}function M(){if(te=!1,ce){var Q=r.unstable_now();C=Q;var G=!0;try{e:{K=!1,ne&&(ne=!1,se(D),D=-1),B=!0;var le=I;try{t:{for(ee(Q),b=n(g);b!==null&&!(b.expirationTime>Q&&O());){var be=b.callback;if(typeof be=="function"){b.callback=null,I=b.priorityLevel;var N=be(b.expirationTime<=Q);if(Q=r.unstable_now(),typeof N=="function"){b.callback=N,ee(Q),G=!0;break t}b===n(g)&&s(g),ee(Q)}else s(g);b=n(g)}if(b!==null)G=!0;else{var Z=n(y);Z!==null&&it(H,Z.startTime-Q),G=!1}}break e}finally{b=null,I=le,B=!1}G=void 0}}finally{G?P():ce=!1}}}var P;if(typeof re=="function")P=function(){re(M)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Rt=x.port2;x.port1.onmessage=M,P=function(){Rt.postMessage(null)}}else P=function(){he(M,0)};function it(Q,G){D=he(function(){Q(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(Q){switch(I){case 1:case 2:case 3:var G=3;break;default:G=I}var le=I;I=G;try{return Q()}finally{I=le}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(Q,G){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=I;I=Q;try{return G()}finally{I=le}},r.unstable_scheduleCallback=function(Q,G,le){var be=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?be+le:be):le=be,Q){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=le+N,Q={id:A++,callback:G,priorityLevel:Q,startTime:le,expirationTime:N,sortIndex:-1},le>be?(Q.sortIndex=le,e(y,Q),n(g)===null&&Q===n(y)&&(ne?(se(D),D=-1):ne=!0,it(H,le-be))):(Q.sortIndex=N,e(g,Q),K||B||(K=!0,ce||(ce=!0,P()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var G=I;return function(){var le=I;I=G;try{return Q.apply(this,arguments)}finally{I=le}}}})(Zd)),Zd}var iv;function XS(){return iv||(iv=1,$d.exports=YS()),$d.exports}var Wd={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function $S(){if(rv)return $t;rv=1;var r=Um();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)y+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,A){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:y,implementation:A}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(g,y){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,A)},$t.flushSync=function(g){var y=f.T,A=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=A,s.d.f()}},$t.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},$t.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},$t.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var A=y.as,b=p(A,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;A==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:I,fetchPriority:B}):A==="script"&&s.d.X(g,{crossOrigin:b,integrity:I,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},$t.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var A=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},$t.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var A=y.as,b=p(A,y.crossOrigin);s.d.L(g,A,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},$t.preloadModule=function(g,y){if(typeof g=="string")if(y){var A=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},$t.requestFormReset=function(g){s.d.r(g)},$t.unstable_batchedUpdates=function(g,y){return g(y)},$t.useFormState=function(g,y,A){return f.H.useFormState(g,y,A)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var sv;function ZS(){if(sv)return Wd.exports;sv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wd.exports=$S(),Wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function WS(){if(av)return Il;av=1;var r=XS(),e=Um(),n=ZS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=d;break}if(T===o){v=!0,o=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,o=h;break}if(T===o){v=!0,o=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,b=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case te:return"Profiler";case ne:return"StrictMode";case H:return"Suspense";case ce:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case re:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case ee:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Rt(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Rt(t(i))}catch{}}return null}var it=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},be=[],N=-1;function Z(t){return{current:t}}function oe(t){0>N||(t.current=be[N],be[N]=null,N--)}function ie(t,i){N++,be[N]=t.current,t.current=i}var pe=Z(null),ge=Z(null),we=Z(null),Vt=Z(null);function We(t,i){switch(ie(we,i),ie(ge,t),ie(pe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?R_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=R_(i),t=I_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(pe),ie(pe,t)}function $n(){oe(pe),oe(ge),oe(we)}function sr(t){t.memoizedState!==null&&ie(Vt,t);var i=pe.current,a=I_(i,t.type);i!==a&&(ie(ge,t),ie(pe,a))}function Ai(t){ge.current===t&&(oe(pe),oe(ge)),Vt.current===t&&(oe(Vt),Tl._currentValue=le)}var is=Object.prototype.hasOwnProperty,rs=r.unstable_scheduleCallback,ss=r.unstable_cancelCallback,_o=r.unstable_shouldYield,yu=r.unstable_requestPaint,wn=r.unstable_now,Qh=r.unstable_getCurrentPriorityLevel,vo=r.unstable_ImmediatePriority,ea=r.unstable_UserBlockingPriority,as=r.unstable_NormalPriority,Kh=r.unstable_LowPriority,ta=r.unstable_IdlePriority,Eo=r.log,_u=r.unstable_setDisableYieldValue,ct=null,Fe=null;function dn(t){if(typeof Eo=="function"&&_u(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(ct,t)}catch{}}var Yt=Math.clz32?Math.clz32:os,vu=Math.log,Yh=Math.LN2;function os(t){return t>>>=0,t===0?32:31-(vu(t)/Yh|0)|0}var ls=256,us=4194304;function Bn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function na(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=Bn(o):(v&=T,v!==0?h=Bn(v):a||(a=T&~t,a!==0&&(h=Bn(a))))):(T=o&~d,T!==0?h=Bn(T):v!==0?h=Bn(v):a||(a=o&~t,a!==0&&(h=Bn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function cs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function To(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ao(){var t=ls;return ls<<=1,(ls&4194048)===0&&(ls=256),t}function So(){var t=us;return us<<=1,(us&62914560)===0&&(us=4194304),t}function Si(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function bi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bo(t,i,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,R=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-Yt(a),W=1<<Y;T[Y]=0,R[Y]=-1;var z=j[Y];if(z!==null)for(j[Y]=null,Y=0;Y<z.length;Y++){var q=z[Y];q!==null&&(q.lane&=-536870913)}a&=~W}o!==0&&Zn(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Zn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Yt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function wo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-Yt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function ar(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ia(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function or(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Q_(t.type))}function Eu(t,i){var a=G.p;try{return G.p=t,i()}finally{G.p=a}}var rt=Math.random().toString(36).slice(2),It="__reactFiber$"+rt,vt="__reactProps$"+rt,Rn="__reactContainer$"+rt,Ro="__reactEvents$"+rt,Xh="__reactListeners$"+rt,lr="__reactHandles$"+rt,Tu="__reactResources$"+rt,hs="__reactMarker$"+rt;function ur(t){delete t[It],delete t[vt],delete t[Ro],delete t[Xh],delete t[lr]}function wi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Rn]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=D_(t);t!==null;){if(a=t[It])return a;t=D_(t)}return i}t=a,a=t.parentNode}return null}function Wn(t){if(t=t[It]||t[Rn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Jn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function tn(t){var i=t[Tu];return i||(i=t[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(t){t[hs]=!0}var Io=new Set,ra={};function qn(t,i){Ri(t,i),Ri(t+"Capture",i)}function Ri(t,i){for(ra[t]=i,t=0;t<i.length;t++)Io.add(i[t])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},fs={};function bu(t){return is.call(fs,t)?!0:is.call(Su,t)?!1:Au.test(t)?fs[t]=!0:(Su[t]=!0,!1)}function cr(t,i,a){if(bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ei(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function zt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var ds,wu;function Ii(t){if(ds===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ds=i&&i[1]||"",wu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+t+wu}var sa=!1;function aa(t,i){if(!t||sa)return"";sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(q){var z=q}Reflect.construct(t,[],W)}else{try{W.call()}catch(q){z=q}t.call(W.prototype)}}else{try{throw Error()}catch(q){z=q}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var R=v.split(`
`),j=T.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===j.length)for(o=R.length-1,h=j.length-1;1<=o&&0<=h&&R[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==j[h]){var Y=`
`+R[o].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=o&&0<=h);break}}}finally{sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ii(a):""}function Co(t){switch(t.tag){case 26:case 27:case 5:return Ii(t.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return aa(t.type,!1);case 11:return aa(t.type.render,!1);case 1:return aa(t.type,!0);case 31:return Ii("Activity");default:return""}}function oa(t){try{var i="";do i+=Co(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function No(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $h(t){var i=No(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function la(t){t._valueTracker||(t._valueTracker=$h(t))}function xo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=No(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zh=/[\n"\\]/g;function Et(t){return t.replace(Zh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(t,i,a,o,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+nn(i)):t.value!==""+nn(i)&&(t.value=""+nn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?hr(t,v,nn(i)):a!=null?hr(t,v,nn(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+nn(T):t.removeAttribute("name")}function ps(t,i,a,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function hr(t,i,a){i==="number"&&ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ci(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ke(t,i,a){if(i!=null&&(i=""+nn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+nn(a):""}function gs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(it(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=nn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function In(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ru(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ys.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Do(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Ru(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Ru(t,d,i[d])}function Oo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(t){return Jh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ni=null;function Cn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xi=null,Di=null;function Vo(t){var i=Wn(t);if(i&&(t=i.stateNode)){var a=t[vt]||null;e:switch(t=i.stateNode,i.type){case"input":if(mn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[vt]||null;if(!h)throw Error(s(90));mn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&xo(o)}break e;case"textarea":Ke(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ci(t,!!a.multiple,i,!1)}}}var ti=!1;function Iu(t,i,a){if(ti)return t(i,a);ti=!0;try{var o=t(i);return o}finally{if(ti=!1,(xi!==null||Di!==null)&&(Ec(),xi&&(i=xi,t=Di,Di=xi=null,Vo(i),t)))for(i=0;i<t.length;i++)Vo(t[i])}}function _s(t,i){var a=t.stateNode;if(a===null)return null;var o=a[vt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(Hn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Nn=!1}var ni=null,fr=null,Oi=null;function Mo(){if(Oi)return Oi;var t,i=fr,a=i.length,o,h="value"in ni?ni.value:ni.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return Oi=h.slice(t,1<o?1-o:void 0)}function ii(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function Po(){return!1}function Mt(t){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ri:Po,this.isPropagationStopped=Po,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),i}var qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Mt(qe),Es=A({},qe,{view:0,detail:0}),Cu=Mt(Es),ha,fa,si,Ts=A({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(ha=t.screenX-si.screenX,fa=t.screenY-si.screenY):fa=ha=0,si=t),ha)},movementY:function(t){return"movementY"in t?t.movementY:fa}}),xn=Mt(Ts),Nu=A({},Ts,{dataTransfer:0}),ef=Mt(Nu),As=A({},Es,{relatedTarget:0}),da=Mt(As),ko=A({},qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=Mt(ko),xu=A({},qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pa=Mt(xu),tf=A({},qe,{data:0}),Lo=Mt(tf),Ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ou[t])?!!i[t]:!1}function bs(){return Uo}var Vu=A({},Es,{key:function(t){if(t.key){var i=Ss[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ga=Mt(Vu),Mu=A({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jo=Mt(Mu),Vi=A({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Pu=Mt(Vi),ku=A({},qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lu=Mt(ku),Uu=A({},Ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Mt(Uu),rn=A({},qe,{newState:0,oldState:0}),ju=Mt(rn),zu=[9,13,27,32],ai=Hn&&"CompositionEvent"in window,u=null;Hn&&"documentMode"in document&&(u=document.documentMode);var m=Hn&&"TextEvent"in window&&!u,_=Hn&&(!ai||u&&8<u&&11>=u),S=" ",L=!1;function F(t,i){switch(t){case"keyup":return zu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ke=!1;function Ct(t,i){switch(t){case"compositionend":return ae(i);case"keypress":return i.which!==32?null:(L=!0,S);case"textInput":return t=i.data,t===S&&L?null:t;default:return null}}function Le(t,i){if(ke)return t==="compositionend"||!ai&&F(t,i)?(t=Mo(),Oi=fr=ni=null,ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Pt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Pt[t.type]:i==="textarea"}function Mi(t,i,a,o){xi?Di?Di.push(o):Di=[o]:xi=o,i=Rc(i,"onChange"),0<i.length&&(a=new ca("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Bt=null,oi=null;function zo(t){T_(t,0)}function Bu(t){var i=Jn(t);if(xo(i))return t}function qp(t,i){if(t==="change")return i}var Hp=!1;if(Hn){var nf;if(Hn){var rf="oninput"in document;if(!rf){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),rf=typeof Fp.oninput=="function"}nf=rf}else nf=!1;Hp=nf&&(!document.documentMode||9<document.documentMode)}function Gp(){Bt&&(Bt.detachEvent("onpropertychange",Qp),oi=Bt=null)}function Qp(t){if(t.propertyName==="value"&&Bu(oi)){var i=[];Mi(i,oi,t,Cn(t)),Iu(zo,i)}}function vA(t,i,a){t==="focusin"?(Gp(),Bt=i,oi=a,Bt.attachEvent("onpropertychange",Qp)):t==="focusout"&&Gp()}function EA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bu(oi)}function TA(t,i){if(t==="click")return Bu(i)}function AA(t,i){if(t==="input"||t==="change")return Bu(i)}function SA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var pn=typeof Object.is=="function"?Object.is:SA;function Bo(t,i){if(pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!is.call(i,h)||!pn(t[h],i[h]))return!1}return!0}function Kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,i){var a=Kp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kp(a)}}function Xp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Xp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function $p(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ms(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ms(t.document)}return i}function sf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var bA=Hn&&"documentMode"in document&&11>=document.documentMode,_a=null,af=null,qo=null,of=!1;function Zp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;of||_a==null||_a!==ms(o)||(o=_a,"selectionStart"in o&&sf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),qo&&Bo(qo,o)||(qo=o,o=Rc(af,"onSelect"),0<o.length&&(i=new ca("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=_a)))}function ws(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var va={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},lf={},Wp={};Hn&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Rs(t){if(lf[t])return lf[t];if(!va[t])return t;var i=va[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Wp)return lf[t]=i[a];return t}var Jp=Rs("animationend"),eg=Rs("animationiteration"),tg=Rs("animationstart"),wA=Rs("transitionrun"),RA=Rs("transitionstart"),IA=Rs("transitioncancel"),ng=Rs("transitionend"),ig=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function Fn(t,i){ig.set(t,i),qn(i,[t])}var rg=new WeakMap;function Dn(t,i){if(typeof t=="object"&&t!==null){var a=rg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:oa(i)},rg.set(t,i),i)}return{value:t,source:i,stack:oa(i)}}var On=[],Ea=0,cf=0;function qu(){for(var t=Ea,i=cf=Ea=0;i<t;){var a=On[i];On[i++]=null;var o=On[i];On[i++]=null;var h=On[i];On[i++]=null;var d=On[i];if(On[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&sg(a,h,d)}}function Hu(t,i,a,o){On[Ea++]=t,On[Ea++]=i,On[Ea++]=a,On[Ea++]=o,cf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function hf(t,i,a,o){return Hu(t,i,a,o),Fu(t)}function Ta(t,i){return Hu(t,null,null,i),Fu(t)}function sg(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Yt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Fu(t){if(50<dl)throw dl=0,yd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Aa={};function CA(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,o){return new CA(t,i,a,o)}function ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ag(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Gu(t,i,a,o,h,d){var v=0;if(o=t,typeof t=="function")ff(t)&&(v=1);else if(typeof t=="string")v=xS(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=gn(31,a,i,h),t.elementType=C,t.lanes=d,t;case K:return Is(a.children,h,d,i);case ne:v=8,h|=24;break;case te:return t=gn(12,a,i,h|2),t.elementType=te,t.lanes=d,t;case H:return t=gn(13,a,i,h),t.elementType=H,t.lanes=d,t;case ce:return t=gn(19,a,i,h),t.elementType=ce,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:case re:v=10;break e;case se:v=9;break e;case ee:v=11;break e;case D:v=14;break e;case w:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=gn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Is(t,i,a,o){return t=gn(7,t,o,i),t.lanes=a,t}function df(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function mf(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Sa=[],ba=0,Qu=null,Ku=0,Vn=[],Mn=0,Cs=null,ki=1,Li="";function Ns(t,i){Sa[ba++]=Ku,Sa[ba++]=Qu,Qu=t,Ku=i}function og(t,i,a){Vn[Mn++]=ki,Vn[Mn++]=Li,Vn[Mn++]=Cs,Cs=t;var o=ki;t=Li;var h=32-Yt(o)-1;o&=~(1<<h),a+=1;var d=32-Yt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,ki=1<<32-Yt(i)+h|a<<h|o,Li=d+t}else ki=1<<d|a<<h|o,Li=t}function pf(t){t.return!==null&&(Ns(t,1),og(t,1,0))}function gf(t){for(;t===Qu;)Qu=Sa[--ba],Sa[ba]=null,Ku=Sa[--ba],Sa[ba]=null;for(;t===Cs;)Cs=Vn[--Mn],Vn[Mn]=null,Li=Vn[--Mn],Vn[Mn]=null,ki=Vn[--Mn],Vn[Mn]=null}var sn=null,ht=null,Be=!1,xs=null,li=!1,yf=Error(s(519));function Ds(t){var i=Error(s(418,""));throw Go(Dn(i,t)),yf}function lg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[It]=t,i[vt]=o,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<pl.length;a++)Oe(pl[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),ps(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),la(i);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),gs(i,o.value,o.defaultValue,o.children),la(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||w_(i.textContent,a)?(o.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),o.onScroll!=null&&Oe("scroll",i),o.onScrollEnd!=null&&Oe("scrollend",i),o.onClick!=null&&(i.onclick=Ic),i=!0):i=!1,i||Ds(t)}function ug(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 13:li=!1;return;case 27:case 3:li=!0;return;default:sn=sn.return}}function Ho(t){if(t!==sn)return!1;if(!Be)return ug(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Vd(t.type,t.memoizedProps)),a=!a),a&&ht&&Ds(t),ug(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ht=Qn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ht=null}}else i===27?(i=ht,Cr(t.type)?(t=Ld,Ld=null,ht=t):ht=i):ht=sn?Qn(t.stateNode.nextSibling):null;return!0}function Fo(){ht=sn=null,Be=!1}function cg(){var t=xs;return t!==null&&(cn===null?cn=t:cn.push.apply(cn,t),xs=null),t}function Go(t){xs===null?xs=[t]:xs.push(t)}var _f=Z(null),Os=null,Ui=null;function dr(t,i,a){ie(_f,i._currentValue),i._currentValue=a}function ji(t){t._currentValue=_f.current,oe(_f)}function vf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function Ef(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var R=0;R<i.length;R++)if(T.context===i[R]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),vf(d.return,a,t),o||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),vf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Qo(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;pn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===Vt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}h=h.return}t!==null&&Ef(i,t,a,o),i.flags|=262144}function Yu(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vs(t){Os=t,Ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return hg(Os,t)}function Xu(t,i){return Os===null&&Vs(t),hg(t,i)}function hg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ui===null){if(t===null)throw Error(s(308));Ui=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ui=Ui.next=i;return a}var NA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},xA=r.unstable_scheduleCallback,DA=r.unstable_NormalPriority,xt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new NA,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&xA(DA,function(){t.controller.abort()})}var Yo=null,Af=0,wa=0,Ra=null;function OA(t,i){if(Yo===null){var a=Yo=[];Af=0,wa=bd(),Ra={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Af++,i.then(fg,fg),i}function fg(){if(--Af===0&&Yo!==null){Ra!==null&&(Ra.status="fulfilled");var t=Yo;Yo=null,wa=0,Ra=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function VA(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var dg=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&OA(t,i),dg!==null&&dg(t,i)};var Ms=Z(null);function Sf(){var t=Ms.current;return t!==null?t:Je.pooledCache}function $u(t,i){i===null?ie(Ms,Ms.current):ie(Ms,i.pool)}function mg(){var t=Sf();return t===null?null:{parent:xt._currentValue,pool:t}}var Xo=Error(s(460)),pg=Error(s(474)),Zu=Error(s(542)),bf={then:function(){}};function gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wu(){}function yg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Wu,Wu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t;default:if(typeof i.status=="string")i.then(Wu,Wu);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vg(t),t}throw $o=i,Xo}}var $o=null;function _g(){if($o===null)throw Error(s(459));var t=$o;return $o=null,t}function vg(t){if(t===Xo||t===Zu)throw Error(s(483))}var mr=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function pr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function gr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ge&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Fu(t),sg(t,null,a),i}return Hu(t,o,i,a),Fu(t)}function Zo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,wo(t,a)}}function If(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Cf=!1;function Wo(){if(Cf){var t=Ra;if(t!==null)throw t}}function Jo(t,i,a,o){Cf=!1;var h=t.updateQueue;mr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,j=R.next;R.next=null,v===null?d=j:v.next=j,v=R;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==v&&(T===null?Y.firstBaseUpdate=j:T.next=j,Y.lastBaseUpdate=R))}if(d!==null){var W=h.baseState;v=0,Y=j=R=null,T=d;do{var z=T.lane&-536870913,q=z!==T.lane;if(q?(Ue&z)===z:(o&z)===z){z!==0&&z===wa&&(Cf=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Se=t,ve=T;z=i;var $e=a;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){W=Se.call($e,W,z);break e}W=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,z=typeof Se=="function"?Se.call($e,W,z):Se,z==null)break e;W=A({},W,z);break e;case 2:mr=!0}}z=T.callback,z!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(j=Y=q,R=W):Y=Y.next=q,v|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Y===null&&(R=W),h.baseState=R,h.firstBaseUpdate=j,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),br|=v,t.lanes=v,t.memoizedState=W}}function Eg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Tg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Eg(a[t],i)}var Ia=Z(null),Ju=Z(0);function Ag(t,i){t=Qi,ie(Ju,t),ie(Ia,i),Qi=t|i.baseLanes}function Nf(){ie(Ju,Qi),ie(Ia,Ia.current)}function xf(){Qi=Ju.current,oe(Ia),oe(Ju)}var yr=0,Ne=null,Ye=null,Tt=null,ec=!1,Ca=!1,Ps=!1,tc=0,el=0,Na=null,MA=0;function pt(){throw Error(s(321))}function Df(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!pn(t[a],i[a]))return!1;return!0}function Of(t,i,a,o,h,d){return yr=d,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?sy:ay,Ps=!1,d=a(o,h),Ps=!1,Ca&&(d=bg(i,a,o,h)),Sg(t),d}function Sg(t){Q.H=oc;var i=Ye!==null&&Ye.next!==null;if(yr=0,Tt=Ye=Ne=null,ec=!1,el=0,Na=null,i)throw Error(s(300));t===null||kt||(t=t.dependencies,t!==null&&Yu(t)&&(kt=!0))}function bg(t,i,a,o){Ne=t;var h=0;do{if(Ca&&(Na=null),el=0,Ca=!1,25<=h)throw Error(s(301));if(h+=1,Tt=Ye=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=BA,d=i(a,o)}while(Ca);return d}function PA(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?tl(i):i,t=t.useState()[0],(Ye!==null?Ye.memoizedState:null)!==t&&(Ne.flags|=1024),i}function Vf(){var t=tc!==0;return tc=0,t}function Mf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Pf(t){if(ec){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ec=!1}yr=0,Tt=Ye=Ne=null,Ca=!1,el=tc=0,Na=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function At(){if(Ye===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var i=Tt===null?Ne.memoizedState:Tt.next;if(i!==null)Tt=i,Ye=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Tt===null?Ne.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(t){var i=el;return el+=1,Na===null&&(Na=[]),t=yg(Na,t,i),i=Ne,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?sy:ay),t}function nc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tl(t);if(t.$$typeof===re)return Xt(t)}throw Error(s(438,String(t)))}function Lf(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=kf(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function zi(t,i){return typeof i=="function"?i(t):i}function ic(t){var i=At();return Uf(i,Ye,t)}function Uf(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,R=null,j=i,Y=!1;do{var W=j.lane&-536870913;if(W!==j.lane?(Ue&W)===W:(yr&W)===W){var z=j.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),W===wa&&(Y=!0);else if((yr&z)===z){j=j.next,z===wa&&(Y=!0);continue}else W={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=W,v=d):R=R.next=W,Ne.lanes|=z,br|=z;W=j.action,Ps&&a(d,W),d=j.hasEagerState?j.eagerState:a(d,W)}else z={lane:W,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(T=R=z,v=d):R=R.next=z,Ne.lanes|=W,br|=W;j=j.next}while(j!==null&&j!==i);if(R===null?v=d:R.next=T,!pn(d,t.memoizedState)&&(kt=!0,Y&&(a=Ra,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=R,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function jf(t){var i=At(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);pn(d,i.memoizedState)||(kt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function wg(t,i,a){var o=Ne,h=At(),d=Be;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!pn((Ye||h).memoizedState,a);v&&(h.memoizedState=a,kt=!0),h=h.queue;var T=Cg.bind(null,o,h,t);if(nl(2048,8,T,[t]),h.getSnapshot!==i||v||Tt!==null&&Tt.memoizedState.tag&1){if(o.flags|=2048,xa(9,rc(),Ig.bind(null,o,h,a,i),null),Je===null)throw Error(s(349));d||(yr&124)!==0||Rg(o,i,a)}return a}function Rg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=kf(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ig(t,i,a,o){i.value=a,i.getSnapshot=o,Ng(i)&&xg(t)}function Cg(t,i,a){return a(function(){Ng(i)&&xg(t)})}function Ng(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!pn(t,a)}catch{return!0}}function xg(t){var i=Ta(t,2);i!==null&&Tn(i,t,2)}function zf(t){var i=ln();if(typeof t=="function"){var a=t;if(t=a(),Ps){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},i}function Dg(t,i,a,o){return t.baseState=a,Uf(t,Ye,typeof o=="function"?o:zi)}function kA(t,i,a,o,h){if(ac(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Og(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Og(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var T=a(h,o),R=Q.S;R!==null&&R(v,T),Vg(t,i,T)}catch(j){Bf(t,i,j)}finally{Q.T=d}}else try{d=a(h,o),Vg(t,i,d)}catch(j){Bf(t,i,j)}}function Vg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Mg(t,i,o)},function(o){return Bf(t,i,o)}):Mg(t,i,a)}function Mg(t,i,a){i.status="fulfilled",i.value=a,Pg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Og(t,a)))}function Bf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Pg(i),i=i.next;while(i!==o)}t.action=null}function Pg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function kg(t,i){return i}function Lg(t,i){if(Be){var a=Je.formState;if(a!==null){e:{var o=Ne;if(Be){if(ht){t:{for(var h=ht,d=li;h.nodeType!==8;){if(!d){h=null;break t}if(h=Qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ht=Qn(h.nextSibling),o=h.data==="F!";break e}}Ds(o)}o=!1}o&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:i},a.queue=o,a=ny.bind(null,Ne,o),o.dispatch=a,o=zf(!1),d=Qf.bind(null,Ne,!1,o.queue),o=ln(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=kA.bind(null,Ne,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Ug(t){var i=At();return jg(i,Ye,t)}function jg(t,i,a){if(i=Uf(t,i,kg)[0],t=ic(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=tl(i)}catch(v){throw v===Xo?Zu:v}else o=i;i=At();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,xa(9,rc(),LA.bind(null,h,a),null)),[o,d,t]}function LA(t,i){t.action=i}function zg(t){var i=At(),a=Ye;if(a!==null)return jg(i,a,t);At(),i=i.memoizedState,a=At();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function xa(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=kf(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function rc(){return{destroy:void 0,resource:void 0}}function Bg(){return At().memoizedState}function sc(t,i,a,o){var h=ln();o=o===void 0?null:o,Ne.flags|=t,h.memoizedState=xa(1|i,rc(),a,o)}function nl(t,i,a,o){var h=At();o=o===void 0?null:o;var d=h.memoizedState.inst;Ye!==null&&o!==null&&Df(o,Ye.memoizedState.deps)?h.memoizedState=xa(i,d,a,o):(Ne.flags|=t,h.memoizedState=xa(1|i,d,a,o))}function qg(t,i){sc(8390656,8,t,i)}function Hg(t,i){nl(2048,8,t,i)}function Fg(t,i){return nl(4,2,t,i)}function Gg(t,i){return nl(4,4,t,i)}function Qg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kg(t,i,a){a=a!=null?a.concat([t]):null,nl(4,4,Qg.bind(null,i,t),a)}function qf(){}function Yg(t,i){var a=At();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Df(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Xg(t,i){var a=At();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Df(i,o[1]))return o[0];if(o=t(),Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o}function Hf(t,i,a){return a===void 0||(yr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Wy(),Ne.lanes|=t,br|=t,a)}function $g(t,i,a,o){return pn(a,i)?a:Ia.current!==null?(t=Hf(t,a,o),pn(t,i)||(kt=!0),t):(yr&42)===0?(kt=!0,t.memoizedState=a):(t=Wy(),Ne.lanes|=t,br|=t,i)}function Zg(t,i,a,o,h){var d=G.p;G.p=d!==0&&8>d?d:8;var v=Q.T,T={};Q.T=T,Qf(t,!1,i,a);try{var R=h(),j=Q.S;if(j!==null&&j(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=VA(R,o);il(t,i,Y,En(t))}else il(t,i,o,En(t))}catch(W){il(t,i,{then:function(){},status:"rejected",reason:W},En())}finally{G.p=d,Q.T=v}}function UA(){}function Ff(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=Wg(t).queue;Zg(t,h,i,le,a===null?UA:function(){return Jg(t),a(o)})}function Wg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:le},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Jg(t){var i=Wg(t).next.queue;il(t,i,{},En())}function Gf(){return Xt(Tl)}function ey(){return At().memoizedState}function ty(){return At().memoizedState}function jA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();t=pr(a);var o=gr(i,t,a);o!==null&&(Tn(o,i,a),Zo(o,i,a)),i={cache:Tf()},t.payload=i;return}i=i.return}}function zA(t,i,a){var o=En();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ac(t)?iy(i,a):(a=hf(t,i,a,o),a!==null&&(Tn(a,t,o),ry(a,i,o)))}function ny(t,i,a){var o=En();il(t,i,a,o)}function il(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ac(t))iy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,pn(T,v))return Hu(t,i,h,0),Je===null&&qu(),!1}catch{}finally{}if(a=hf(t,i,h,o),a!==null)return Tn(a,t,o),ry(a,i,o),!0}return!1}function Qf(t,i,a,o){if(o={lane:2,revertLane:bd(),action:o,hasEagerState:!1,eagerState:null,next:null},ac(t)){if(i)throw Error(s(479))}else i=hf(t,a,o,2),i!==null&&Tn(i,t,2)}function ac(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function iy(t,i){Ca=ec=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ry(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,wo(t,a)}}var oc={readContext:Xt,use:nc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},sy={readContext:Xt,use:nc,useCallback:function(t,i){return ln().memoizedState=[t,i===void 0?null:i],t},useContext:Xt,useEffect:qg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,sc(4194308,4,Qg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return sc(4194308,4,t,i)},useInsertionEffect:function(t,i){sc(4,2,t,i)},useMemo:function(t,i){var a=ln();i=i===void 0?null:i;var o=t();if(Ps){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=ln();if(a!==void 0){var h=a(i);if(Ps){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=zA.bind(null,Ne,t),[o.memoizedState,t]},useRef:function(t){var i=ln();return t={current:t},i.memoizedState=t},useState:function(t){t=zf(t);var i=t.queue,a=ny.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(t,i){var a=ln();return Hf(a,t,i)},useTransition:function(){var t=zf(!1);return t=Zg.bind(null,Ne,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ne,h=ln();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Je===null)throw Error(s(349));(Ue&124)!==0||Rg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,qg(Cg.bind(null,o,d,t),[t]),o.flags|=2048,xa(9,rc(),Ig.bind(null,o,d,a,i),null),a},useId:function(){var t=ln(),i=Je.identifierPrefix;if(Be){var a=Li,o=ki;a=(o&~(1<<32-Yt(o)-1)).toString(32)+a,i=""+i+"R"+a,a=tc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=MA++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Gf,useFormState:Lg,useActionState:Lg,useOptimistic:function(t){var i=ln();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qf.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:Lf,useCacheRefresh:function(){return ln().memoizedState=jA.bind(null,Ne)}},ay={readContext:Xt,use:nc,useCallback:Yg,useContext:Xt,useEffect:Hg,useImperativeHandle:Kg,useInsertionEffect:Fg,useLayoutEffect:Gg,useMemo:Xg,useReducer:ic,useRef:Bg,useState:function(){return ic(zi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=At();return $g(a,Ye.memoizedState,t,i)},useTransition:function(){var t=ic(zi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:wg,useId:ey,useHostTransitionStatus:Gf,useFormState:Ug,useActionState:Ug,useOptimistic:function(t,i){var a=At();return Dg(a,Ye,t,i)},useMemoCache:Lf,useCacheRefresh:ty},BA={readContext:Xt,use:nc,useCallback:Yg,useContext:Xt,useEffect:Hg,useImperativeHandle:Kg,useInsertionEffect:Fg,useLayoutEffect:Gg,useMemo:Xg,useReducer:jf,useRef:Bg,useState:function(){return jf(zi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=At();return Ye===null?Hf(a,t,i):$g(a,Ye.memoizedState,t,i)},useTransition:function(){var t=jf(zi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:wg,useId:ey,useHostTransitionStatus:Gf,useFormState:zg,useActionState:zg,useOptimistic:function(t,i){var a=At();return Ye!==null?Dg(a,Ye,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:ty},Da=null,rl=0;function lc(t){var i=rl;return rl+=1,Da===null&&(Da=[]),yg(Da,t,i)}function sl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function uc(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function oy(t){var i=t._init;return i(t._payload)}function ly(t){function i(k,V){if(t){var U=k.deletions;U===null?(k.deletions=[V],k.flags|=16):U.push(V)}}function a(k,V){if(!t)return null;for(;V!==null;)i(k,V),V=V.sibling;return null}function o(k){for(var V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function h(k,V){return k=Pi(k,V),k.index=0,k.sibling=null,k}function d(k,V,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<V?(k.flags|=67108866,V):U):(k.flags|=67108866,V)):(k.flags|=1048576,V)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,V,U,$){return V===null||V.tag!==6?(V=df(U,k.mode,$),V.return=k,V):(V=h(V,U),V.return=k,V)}function R(k,V,U,$){var de=U.type;return de===K?Y(k,V,U.props.children,$,U.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&oy(de)===V.type)?(V=h(V,U.props),sl(V,U),V.return=k,V):(V=Gu(U.type,U.key,U.props,null,k.mode,$),sl(V,U),V.return=k,V)}function j(k,V,U,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=mf(U,k.mode,$),V.return=k,V):(V=h(V,U.children||[]),V.return=k,V)}function Y(k,V,U,$,de){return V===null||V.tag!==7?(V=Is(U,k.mode,$,de),V.return=k,V):(V=h(V,U),V.return=k,V)}function W(k,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=df(""+V,k.mode,U),V.return=k,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return U=Gu(V.type,V.key,V.props,null,k.mode,U),sl(U,V),U.return=k,U;case B:return V=mf(V,k.mode,U),V.return=k,V;case w:var $=V._init;return V=$(V._payload),W(k,V,U)}if(it(V)||P(V))return V=Is(V,k.mode,U,null),V.return=k,V;if(typeof V.then=="function")return W(k,lc(V),U);if(V.$$typeof===re)return W(k,Xu(k,V),U);uc(k,V)}return null}function z(k,V,U,$){var de=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return de!==null?null:T(k,V,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===de?R(k,V,U,$):null;case B:return U.key===de?j(k,V,U,$):null;case w:return de=U._init,U=de(U._payload),z(k,V,U,$)}if(it(U)||P(U))return de!==null?null:Y(k,V,U,$,null);if(typeof U.then=="function")return z(k,V,lc(U),$);if(U.$$typeof===re)return z(k,V,Xu(k,U),$);uc(k,U)}return null}function q(k,V,U,$,de){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(U)||null,T(V,k,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case I:return k=k.get($.key===null?U:$.key)||null,R(V,k,$,de);case B:return k=k.get($.key===null?U:$.key)||null,j(V,k,$,de);case w:var xe=$._init;return $=xe($._payload),q(k,V,U,$,de)}if(it($)||P($))return k=k.get(U)||null,Y(V,k,$,de,null);if(typeof $.then=="function")return q(k,V,U,lc($),de);if($.$$typeof===re)return q(k,V,U,Xu(V,$),de);uc(V,$)}return null}function Se(k,V,U,$){for(var de=null,xe=null,ye=V,Ee=V=0,Ut=null;ye!==null&&Ee<U.length;Ee++){ye.index>Ee?(Ut=ye,ye=null):Ut=ye.sibling;var ze=z(k,ye,U[Ee],$);if(ze===null){ye===null&&(ye=Ut);break}t&&ye&&ze.alternate===null&&i(k,ye),V=d(ze,V,Ee),xe===null?de=ze:xe.sibling=ze,xe=ze,ye=Ut}if(Ee===U.length)return a(k,ye),Be&&Ns(k,Ee),de;if(ye===null){for(;Ee<U.length;Ee++)ye=W(k,U[Ee],$),ye!==null&&(V=d(ye,V,Ee),xe===null?de=ye:xe.sibling=ye,xe=ye);return Be&&Ns(k,Ee),de}for(ye=o(ye);Ee<U.length;Ee++)Ut=q(ye,k,Ee,U[Ee],$),Ut!==null&&(t&&Ut.alternate!==null&&ye.delete(Ut.key===null?Ee:Ut.key),V=d(Ut,V,Ee),xe===null?de=Ut:xe.sibling=Ut,xe=Ut);return t&&ye.forEach(function(Vr){return i(k,Vr)}),Be&&Ns(k,Ee),de}function ve(k,V,U,$){if(U==null)throw Error(s(151));for(var de=null,xe=null,ye=V,Ee=V=0,Ut=null,ze=U.next();ye!==null&&!ze.done;Ee++,ze=U.next()){ye.index>Ee?(Ut=ye,ye=null):Ut=ye.sibling;var Vr=z(k,ye,ze.value,$);if(Vr===null){ye===null&&(ye=Ut);break}t&&ye&&Vr.alternate===null&&i(k,ye),V=d(Vr,V,Ee),xe===null?de=Vr:xe.sibling=Vr,xe=Vr,ye=Ut}if(ze.done)return a(k,ye),Be&&Ns(k,Ee),de;if(ye===null){for(;!ze.done;Ee++,ze=U.next())ze=W(k,ze.value,$),ze!==null&&(V=d(ze,V,Ee),xe===null?de=ze:xe.sibling=ze,xe=ze);return Be&&Ns(k,Ee),de}for(ye=o(ye);!ze.done;Ee++,ze=U.next())ze=q(ye,k,Ee,ze.value,$),ze!==null&&(t&&ze.alternate!==null&&ye.delete(ze.key===null?Ee:ze.key),V=d(ze,V,Ee),xe===null?de=ze:xe.sibling=ze,xe=ze);return t&&ye.forEach(function(qS){return i(k,qS)}),Be&&Ns(k,Ee),de}function $e(k,V,U,$){if(typeof U=="object"&&U!==null&&U.type===K&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:e:{for(var de=U.key;V!==null;){if(V.key===de){if(de=U.type,de===K){if(V.tag===7){a(k,V.sibling),$=h(V,U.props.children),$.return=k,k=$;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&oy(de)===V.type){a(k,V.sibling),$=h(V,U.props),sl($,U),$.return=k,k=$;break e}a(k,V);break}else i(k,V);V=V.sibling}U.type===K?($=Is(U.props.children,k.mode,$,U.key),$.return=k,k=$):($=Gu(U.type,U.key,U.props,null,k.mode,$),sl($,U),$.return=k,k=$)}return v(k);case B:e:{for(de=U.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(k,V.sibling),$=h(V,U.children||[]),$.return=k,k=$;break e}else{a(k,V);break}else i(k,V);V=V.sibling}$=mf(U,k.mode,$),$.return=k,k=$}return v(k);case w:return de=U._init,U=de(U._payload),$e(k,V,U,$)}if(it(U))return Se(k,V,U,$);if(P(U)){if(de=P(U),typeof de!="function")throw Error(s(150));return U=de.call(U),ve(k,V,U,$)}if(typeof U.then=="function")return $e(k,V,lc(U),$);if(U.$$typeof===re)return $e(k,V,Xu(k,U),$);uc(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(k,V.sibling),$=h(V,U),$.return=k,k=$):(a(k,V),$=df(U,k.mode,$),$.return=k,k=$),v(k)):a(k,V)}return function(k,V,U,$){try{rl=0;var de=$e(k,V,U,$);return Da=null,de}catch(ye){if(ye===Xo||ye===Zu)throw ye;var xe=gn(29,ye,null,k.mode);return xe.lanes=$,xe.return=k,xe}finally{}}}var Oa=ly(!0),uy=ly(!1),Pn=Z(null),ui=null;function _r(t){var i=t.alternate;ie(Dt,Dt.current&1),ie(Pn,t),ui===null&&(i===null||Ia.current!==null||i.memoizedState!==null)&&(ui=t)}function cy(t){if(t.tag===22){if(ie(Dt,Dt.current),ie(Pn,t),ui===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ui=t)}}else vr()}function vr(){ie(Dt,Dt.current),ie(Pn,Pn.current)}function Bi(t){oe(Pn),ui===t&&(ui=null),oe(Dt)}var Dt=Z(0);function cc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||kd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Kf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Yf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=En(),h=pr(o);h.payload=i,a!=null&&(h.callback=a),i=gr(t,h,o),i!==null&&(Tn(i,t,o),Zo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=En(),h=pr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=gr(t,h,o),i!==null&&(Tn(i,t,o),Zo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=En(),o=pr(a);o.tag=2,i!=null&&(o.callback=i),i=gr(t,o,a),i!==null&&(Tn(i,t,a),Zo(i,t,a))}};function hy(t,i,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Bo(a,o)||!Bo(h,d):!0}function fy(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Yf.enqueueReplaceState(i,i.state,null)}function ks(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var hc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function dy(t){hc(t)}function my(t){console.error(t)}function py(t){hc(t)}function fc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function gy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,i,a){return a=pr(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(t,i)},a}function yy(t){return t=pr(t),t.tag=3,t}function _y(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){gy(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){gy(i,a,o),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function qA(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Qo(i,a,h,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return ui===null?vd():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===bf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Td(t,o,h)),!1;case 22:return a.flags|=65536,o===bf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Td(t,o,h)),!1}throw Error(s(435,a.tag))}return Td(t,o,h),vd(),!1}if(Be)return i=Pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==yf&&(t=Error(s(422),{cause:o}),Go(Dn(t,a)))):(o!==yf&&(i=Error(s(423),{cause:o}),Go(Dn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Dn(o,a),h=Xf(t.stateNode,o,h),If(t,h),ft!==4&&(ft=2)),!1;var d=Error(s(520),{cause:o});if(d=Dn(d,a),fl===null?fl=[d]:fl.push(d),ft!==4&&(ft=2),i===null)return!0;o=Dn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,o,t),If(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(wr===null||!wr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,t,a,o),If(a,h),!1}a=a.return}while(a!==null);return!1}var vy=Error(s(461)),kt=!1;function qt(t,i,a,o){i.child=t===null?uy(i,null,a,o):Oa(i,t.child,a,o)}function Ey(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Vs(i),o=Of(t,i,a,v,d,h),T=Vf(),t!==null&&!kt?(Mf(t,i,h),qi(t,i,h)):(Be&&T&&pf(i),i.flags|=1,qt(t,i,o,h),i.child)}function Ty(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!ff(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Ay(t,i,d,o,h)):(t=Gu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!id(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(v,o)&&t.ref===i.ref)return qi(t,i,h)}return i.flags|=1,t=Pi(d,o),t.ref=i.ref,t.return=i,i.child=t}function Ay(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Bo(d,o)&&t.ref===i.ref)if(kt=!1,i.pendingProps=o=d,id(t,h))(t.flags&131072)!==0&&(kt=!0);else return i.lanes=t.lanes,qi(t,i,h)}return $f(t,i,a,o,h)}function Sy(t,i,a){var o=i.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return by(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&$u(i,d!==null?d.cachePool:null),d!==null?Ag(i,d):Nf(),cy(i);else return i.lanes=i.childLanes=536870912,by(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?($u(i,d.cachePool),Ag(i,d),vr(),i.memoizedState=null):(t!==null&&$u(i,null),Nf(),vr());return qt(t,i,h,a),i.child}function by(t,i,a,o){var h=Sf();return h=h===null?null:{parent:xt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&$u(i,null),Nf(),cy(i),t!==null&&Qo(t,i,o,!0),null}function dc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function $f(t,i,a,o,h){return Vs(i),a=Of(t,i,a,o,void 0,h),o=Vf(),t!==null&&!kt?(Mf(t,i,h),qi(t,i,h)):(Be&&o&&pf(i),i.flags|=1,qt(t,i,a,h),i.child)}function wy(t,i,a,o,h,d){return Vs(i),i.updateQueue=null,a=bg(i,o,a,h),Sg(t),o=Vf(),t!==null&&!kt?(Mf(t,i,d),qi(t,i,d)):(Be&&o&&pf(i),i.flags|=1,qt(t,i,a,d),i.child)}function Ry(t,i,a,o,h){if(Vs(i),i.stateNode===null){var d=Aa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xt(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},wf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xt(v):Aa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Kf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Yf.enqueueReplaceState(d,d.state,null),Jo(i,o,d,h),Wo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,R=ks(a,T);d.props=R;var j=d.context,Y=a.contextType;v=Aa,typeof Y=="object"&&Y!==null&&(v=Xt(Y));var W=a.getDerivedStateFromProps;Y=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||j!==v)&&fy(i,d,o,v),mr=!1;var z=i.memoizedState;d.state=z,Jo(i,o,d,h),Wo(),j=i.memoizedState,T||z!==j||mr?(typeof W=="function"&&(Kf(i,a,W,o),j=i.memoizedState),(R=mr||hy(i,a,R,o,z,j,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=v,o=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Rf(t,i),v=i.memoizedProps,Y=ks(a,v),d.props=Y,W=i.pendingProps,z=d.context,j=a.contextType,R=Aa,typeof j=="object"&&j!==null&&(R=Xt(j)),T=a.getDerivedStateFromProps,(j=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||z!==R)&&fy(i,d,o,R),mr=!1,z=i.memoizedState,d.state=z,Jo(i,o,d,h),Wo();var q=i.memoizedState;v!==W||z!==q||mr||t!==null&&t.dependencies!==null&&Yu(t.dependencies)?(typeof T=="function"&&(Kf(i,a,T,o),q=i.memoizedState),(Y=mr||hy(i,a,Y,o,z,q,R)||t!==null&&t.dependencies!==null&&Yu(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,q,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,q,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),d.props=o,d.state=q,d.context=R,o=Y):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,dc(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Oa(i,t.child,null,h),i.child=Oa(i,null,a,h)):qt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=qi(t,i,h),t}function Iy(t,i,a,o){return Fo(),i.flags|=256,qt(t,i,a,o),i.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:mg()}}function Jf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=kn),t}function Cy(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?_r(i):vr(),Be){var T=ht,R;if(R=T){e:{for(R=T,T=li;R.nodeType!==8;){if(!T){T=null;break e}if(R=Qn(R.nextSibling),R===null){T=null;break e}}T=R}T!==null?(i.memoizedState={dehydrated:T,treeContext:Cs!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},R=gn(18,null,null,0),R.stateNode=T,R.return=i,i.child=R,sn=i,ht=null,R=!0):R=!1}R||Ds(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return kd(T)?i.lanes=32:i.lanes=536870912,null;Bi(i)}return T=o.children,o=o.fallback,h?(vr(),h=i.mode,T=mc({mode:"hidden",children:T},h),o=Is(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,h=i.child,h.memoizedState=Wf(a),h.childLanes=Jf(t,v,a),i.memoizedState=Zf,o):(_r(i),ed(i,T))}if(R=t.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(d)i.flags&256?(_r(i),i.flags&=-257,i=td(t,i,a)):i.memoizedState!==null?(vr(),i.child=t.child,i.flags|=128,i=null):(vr(),h=o.fallback,T=i.mode,o=mc({mode:"visible",children:o.children},T),h=Is(h,T,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Oa(i,t.child,null,a),o=i.child,o.memoizedState=Wf(a),o.childLanes=Jf(t,v,a),i.memoizedState=Zf,i=h);else if(_r(i),kd(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,Go({value:o,source:null,stack:null}),i=td(t,i,a)}else if(kt||Qo(t,i,a,!1),v=(a&t.childLanes)!==0,kt||v){if(v=Je,v!==null&&(o=a&-a,o=(o&42)!==0?1:ar(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,Ta(t,o),Tn(v,t,o),vy;T.data==="$?"||vd(),i=td(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,ht=Qn(T.nextSibling),sn=i,Be=!0,xs=null,li=!1,t!==null&&(Vn[Mn++]=ki,Vn[Mn++]=Li,Vn[Mn++]=Cs,ki=t.id,Li=t.overflow,Cs=i),i=ed(i,o.children),i.flags|=4096);return i}return h?(vr(),h=o.fallback,T=i.mode,R=t.child,j=R.sibling,o=Pi(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,j!==null?h=Pi(j,h):(h=Is(h,T,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,T=t.child.memoizedState,T===null?T=Wf(a):(R=T.cachePool,R!==null?(j=xt._currentValue,R=R.parent!==j?{parent:j,pool:j}:R):R=mg(),T={baseLanes:T.baseLanes|a,cachePool:R}),h.memoizedState=T,h.childLanes=Jf(t,v,a),i.memoizedState=Zf,o):(_r(i),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function ed(t,i){return i=mc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function mc(t,i){return t=gn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function td(t,i,a){return Oa(i,t.child,null,a),t=ed(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ny(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),vf(t.return,i,a)}function nd(t,i,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function xy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(qt(t,i,o.children,a),o=Dt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,a,i);else if(t.tag===19)Ny(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ie(Dt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&cc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),nd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&cc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}nd(i,!0,a,null,d);break;case"together":nd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),br|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Qo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Pi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function id(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Yu(t)))}function HA(t,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),dr(i,xt,t.memoizedState.cache),Fo();break;case 27:case 5:sr(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:dr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(_r(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Cy(t,i,a):(_r(i),t=qi(t,i,a),t!==null?t.sibling:null);_r(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Qo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return xy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(Dt,Dt.current),o)break;return null;case 22:case 23:return i.lanes=0,Sy(t,i,a);case 24:dr(i,xt,t.memoizedState.cache)}return qi(t,i,a)}function Dy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)kt=!0;else{if(!id(t,a)&&(i.flags&128)===0)return kt=!1,HA(t,i,a);kt=(t.flags&131072)!==0}else kt=!1,Be&&(i.flags&1048576)!==0&&og(i,Ku,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")ff(o)?(t=ks(o,t),i.tag=1,i=Ry(null,i,o,t,a)):(i.tag=0,i=$f(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===ee){i.tag=11,i=Ey(null,i,o,t,a);break e}else if(h===D){i.tag=14,i=Ty(null,i,o,t,a);break e}}throw i=Rt(o)||o,Error(s(306,i,""))}}return i;case 0:return $f(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ks(o,i.pendingProps),Ry(t,i,o,h,a);case 3:e:{if(We(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Rf(t,i),Jo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,dr(i,xt,o),o!==d.cache&&Ef(i,[xt],a,!0),Wo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Iy(t,i,o,a);break e}else if(o!==h){h=Dn(Error(s(424)),i),Go(h),i=Iy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Qn(t.firstChild),sn=i,Be=!0,xs=null,li=!0,a=uy(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fo(),o===h){i=qi(t,i,a);break e}qt(t,i,o,a)}i=i.child}return i;case 26:return dc(t,i),t===null?(a=P_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,o=Cc(we.current).createElement(a),o[It]=i,o[vt]=t,Ft(o,a,t),mt(o),i.stateNode=o):i.memoizedState=P_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return sr(i),t===null&&Be&&(o=i.stateNode=O_(i.type,i.pendingProps,we.current),sn=i,li=!0,h=ht,Cr(i.type)?(Ld=h,ht=Qn(o.firstChild)):ht=h),qt(t,i,i.pendingProps.children,a),dc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=o=ht)&&(o=yS(o,i.type,i.pendingProps,li),o!==null?(i.stateNode=o,sn=i,ht=Qn(o.firstChild),li=!1,h=!0):h=!1),h||Ds(i)),sr(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,Vd(h,d)?o=null:v!==null&&Vd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Of(t,i,PA,null,null,a),Tl._currentValue=h),dc(t,i),qt(t,i,o,a),i.child;case 6:return t===null&&Be&&((t=a=ht)&&(a=_S(a,i.pendingProps,li),a!==null?(i.stateNode=a,sn=i,ht=null,t=!0):t=!1),t||Ds(i)),null;case 13:return Cy(t,i,a);case 4:return We(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Oa(i,null,o,a):qt(t,i,o,a),i.child;case 11:return Ey(t,i,i.type,i.pendingProps,a);case 7:return qt(t,i,i.pendingProps,a),i.child;case 8:return qt(t,i,i.pendingProps.children,a),i.child;case 12:return qt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,dr(i,i.type,o.value),qt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Vs(i),h=Xt(h),o=o(h),i.flags|=1,qt(t,i,o,a),i.child;case 14:return Ty(t,i,i.type,i.pendingProps,a);case 15:return Ay(t,i,i.type,i.pendingProps,a);case 19:return xy(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=mc(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Pi(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Sy(t,i,a);case 24:return Vs(i),o=Xt(xt),t===null?(h=Sf(),h===null&&(h=Je,d=Tf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},wf(i),dr(i,xt,h)):((t.lanes&a)!==0&&(Rf(t,i),Jo(i,null,null,a),Wo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),dr(i,xt,o)):(o=d.cache,dr(i,xt,o),o!==h.cache&&Ef(i,[xt],a,!0))),qt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Hi(t){t.flags|=4}function Oy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!z_(i)){if(i=Pn.current,i!==null&&((Ue&4194048)===Ue?ui!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==ui))throw $o=bf,pg;t.flags|=8192}}function pc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?So():536870912,t.lanes|=i,ka|=i)}function al(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function FA(t,i,a){var o=i.pendingProps;switch(gf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ji(xt),$n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ho(i)?Hi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cg())),lt(i),null;case 26:return a=i.memoizedState,t===null?(Hi(i),a!==null?(lt(i),Oy(i,a)):(lt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Hi(i),lt(i),Oy(i,a)):(lt(i),i.flags&=-16777217):(t.memoizedProps!==o&&Hi(i),lt(i),i.flags&=-16777217),null;case 27:Ai(i),a=we.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return lt(i),null}t=pe.current,Ho(i)?lg(i):(t=O_(h,o,a),i.stateNode=t,Hi(i))}return lt(i),null;case 5:if(Ai(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(t=pe.current,Ho(i))lg(i);else{switch(h=Cc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[It]=i,t[vt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Ft(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Hi(i)}}return lt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Hi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=we.current,Ho(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||w_(t.nodeValue,a)),t||Ds(i)}else t=Cc(t).createTextNode(o),t[It]=i,i.stateNode=t}return lt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ho(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[It]=i}else Fo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),h=!1}else h=cg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),pc(i,i.updateQueue),lt(i),null;case 4:return $n(),t===null&&Cd(i.stateNode.containerInfo),lt(i),null;case 10:return ji(i.type),lt(i),null;case 19:if(oe(Dt),h=i.memoizedState,h===null)return lt(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)al(h,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=cc(t),d!==null){for(i.flags|=128,al(h,!1),t=d.updateQueue,i.updateQueue=t,pc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ag(a,t),a=a.sibling;return ie(Dt,Dt.current&1|2),i.child}t=t.sibling}h.tail!==null&&wn()>_c&&(i.flags|=128,o=!0,al(h,!1),i.lanes=4194304)}else{if(!o)if(t=cc(d),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,pc(i,t),al(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Be)return lt(i),null}else 2*wn()-h.renderingStartTime>_c&&a!==536870912&&(i.flags|=128,o=!0,al(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=wn(),i.sibling=null,t=Dt.current,ie(Dt,o?t&1|2:t&1),i):(lt(i),null);case 22:case 23:return Bi(i),xf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&pc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&oe(Ms),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(xt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function GA(t,i){switch(gf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ji(xt),$n(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 13:if(Bi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Fo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Dt),null;case 4:return $n(),null;case 10:return ji(i.type),null;case 22:case 23:return Bi(i),xf(),t!==null&&oe(Ms),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ji(xt),null;case 25:return null;default:return null}}function Vy(t,i){switch(gf(i),i.tag){case 3:ji(xt),$n();break;case 26:case 27:case 5:Ai(i);break;case 4:$n();break;case 13:Bi(i);break;case 19:oe(Dt);break;case 10:ji(i.type);break;case 22:case 23:Bi(i),xf(),t!==null&&oe(Ms);break;case 24:ji(xt)}}function ol(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){Ze(i,i.return,T)}}function Er(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var R=a,j=T;try{j()}catch(Y){Ze(h,R,Y)}}}o=o.next}while(o!==d)}}catch(Y){Ze(i,i.return,Y)}}function My(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Tg(i,a)}catch(o){Ze(t,t.return,o)}}}function Py(t,i,a){a.props=ks(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Ze(t,i,o)}}function ll(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Ze(t,i,h)}}function ci(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function ky(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function rd(t,i,a){try{var o=t.stateNode;fS(o,t.type,a,i),o[vt]=i}catch(h){Ze(t,t.return,h)}}function Ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cr(t.type)||t.tag===4}function sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ad(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ic));else if(o!==4&&(o===27&&Cr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(ad(t,i,a),t=t.sibling;t!==null;)ad(t,i,a),t=t.sibling}function gc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Cr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(gc(t,i,a),t=t.sibling;t!==null;)gc(t,i,a),t=t.sibling}function Uy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,o,a),i[It]=t,i[vt]=a}catch(d){Ze(t,t.return,d)}}var Fi=!1,gt=!1,od=!1,jy=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function QA(t,i){if(t=t.containerInfo,Dd=Mc,t=$p(t),sf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,R=-1,j=0,Y=0,W=t,z=null;t:for(;;){for(var q;W!==a||h!==0&&W.nodeType!==3||(T=v+h),W!==d||o!==0&&W.nodeType!==3||(R=v+o),W.nodeType===3&&(v+=W.nodeValue.length),(q=W.firstChild)!==null;)z=W,W=q;for(;;){if(W===t)break t;if(z===a&&++j===h&&(T=v),z===d&&++Y===o&&(R=v),(q=W.nextSibling)!==null)break;W=z,z=W.parentNode}W=q}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Od={focusedElem:t,selectionRange:a},Mc=!1,Lt=i;Lt!==null;)if(i=Lt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Lt=t;else for(;Lt!==null;){switch(i=Lt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Se=ks(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Se,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ve){Ze(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Pd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Pd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Lt=t;break}Lt=i.return}}function zy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(t,a),o&4&&ol(5,a);break;case 1:if(Tr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Ze(a,a.return,v)}else{var h=ks(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(a,a.return,v)}}o&64&&My(a),o&512&&ll(a,a.return);break;case 3:if(Tr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Tg(t,i)}catch(v){Ze(a,a.return,v)}}break;case 27:i===null&&o&4&&Uy(a);case 26:case 5:Tr(t,a),i===null&&o&4&&ky(a),o&512&&ll(a,a.return);break;case 12:Tr(t,a);break;case 13:Tr(t,a),o&4&&Hy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=tS.bind(null,a),vS(t,a))));break;case 22:if(o=a.memoizedState!==null||Fi,!o){i=i!==null&&i.memoizedState!==null||gt,h=Fi;var d=gt;Fi=o,(gt=i)&&!d?Ar(t,a,(a.subtreeFlags&8772)!==0):Tr(t,a),Fi=h,gt=d}break;case 30:break;default:Tr(t,a)}}function By(t){var i=t.alternate;i!==null&&(t.alternate=null,By(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ur(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,un=!1;function Gi(t,i,a){for(a=a.child;a!==null;)qy(t,i,a),a=a.sibling}function qy(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(ct,a)}catch{}switch(a.tag){case 26:gt||ci(a,i),Gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||ci(a,i);var o=st,h=un;Cr(a.type)&&(st=a.stateNode,un=!1),Gi(t,i,a),yl(a.stateNode),st=o,un=h;break;case 5:gt||ci(a,i);case 6:if(o=st,h=un,st=null,Gi(t,i,a),st=o,un=h,st!==null)if(un)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(d){Ze(a,i,d)}else try{st.removeChild(a.stateNode)}catch(d){Ze(a,i,d)}break;case 18:st!==null&&(un?(t=st,x_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),wl(t)):x_(st,a.stateNode));break;case 4:o=st,h=un,st=a.stateNode.containerInfo,un=!0,Gi(t,i,a),st=o,un=h;break;case 0:case 11:case 14:case 15:gt||Er(2,a,i),gt||Er(4,a,i),Gi(t,i,a);break;case 1:gt||(ci(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Py(a,i,o)),Gi(t,i,a);break;case 21:Gi(t,i,a);break;case 22:gt=(o=gt)||a.memoizedState!==null,Gi(t,i,a),gt=o;break;default:Gi(t,i,a)}}function Hy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wl(t)}catch(a){Ze(i,i.return,a)}}function KA(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new jy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new jy),i;default:throw Error(s(435,t.tag))}}function ld(t,i){var a=KA(t);i.forEach(function(o){var h=nS.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function yn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Cr(T.type)){st=T.stateNode,un=!1;break e}break;case 5:st=T.stateNode,un=!1;break e;case 3:case 4:st=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(st===null)throw Error(s(160));qy(d,v,h),st=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Fy(i,t),i=i.sibling}var Gn=null;function Fy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yn(i,t),_n(t),o&4&&(Er(3,t,t.return),ol(3,t),Er(5,t,t.return));break;case 1:yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),o&64&&Fi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Gn;if(yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hs]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Ft(d,o,a),d[It]=t,mt(d),o=d;break e;case"link":var v=U_("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(o),Ft(d,o,a),h.head.appendChild(d);break;case"meta":if(v=U_("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(o),Ft(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[It]=t,mt(d),o=d}t.stateNode=o}else j_(h,t.type,t.stateNode);else t.stateNode=L_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?j_(h,t.type,t.stateNode):L_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&rd(t,t.memoizedProps,a.memoizedProps)}break;case 27:yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),a!==null&&o&4&&rd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,t),_n(t),o&512&&(gt||a===null||ci(a,a.return)),t.flags&32){h=t.stateNode;try{In(h,"")}catch(q){Ze(t,t.return,q)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,rd(t,h,a!==null?a.memoizedProps:h)),o&1024&&(od=!0);break;case 6:if(yn(i,t),_n(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(q){Ze(t,t.return,q)}}break;case 3:if(Dc=null,h=Gn,Gn=Nc(i.containerInfo),yn(i,t),Gn=h,_n(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{wl(i.containerInfo)}catch(q){Ze(t,t.return,q)}od&&(od=!1,Gy(t));break;case 4:o=Gn,Gn=Nc(t.stateNode.containerInfo),yn(i,t),_n(t),Gn=o;break;case 12:yn(i,t),_n(t);break;case 13:yn(i,t),_n(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(md=wn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ld(t,o)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,j=Fi,Y=gt;if(Fi=j||h,gt=Y||R,yn(i,t),gt=Y,Fi=j,_n(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Fi||gt||Ls(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=R.stateNode;var W=R.memoizedProps.style,z=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){Ze(R,R.return,q)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(q){Ze(R,R.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ld(t,a))));break;case 19:yn(i,t),_n(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ld(t,o)));break;case 30:break;case 21:break;default:yn(i,t),_n(t)}}function _n(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Ly(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=sd(t);gc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(In(v,""),a.flags&=-33);var T=sd(t);gc(t,T,v);break;case 3:case 4:var R=a.stateNode.containerInfo,j=sd(t);ad(t,j,R);break;default:throw Error(s(161))}}catch(Y){Ze(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Gy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Gy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Tr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)zy(t,i.alternate,i),i=i.sibling}function Ls(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Er(4,i,i.return),Ls(i);break;case 1:ci(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Py(i,i.return,a),Ls(i);break;case 27:yl(i.stateNode);case 26:case 5:ci(i,i.return),Ls(i);break;case 22:i.memoizedState===null&&Ls(i);break;case 30:Ls(i);break;default:Ls(i)}t=t.sibling}}function Ar(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Ar(h,d,a),ol(4,d);break;case 1:if(Ar(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){Ze(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Eg(R[h],T)}catch(j){Ze(o,o.return,j)}}a&&v&64&&My(d),ll(d,d.return);break;case 27:Uy(d);case 26:case 5:Ar(h,d,a),a&&o===null&&v&4&&ky(d),ll(d,d.return);break;case 12:Ar(h,d,a);break;case 13:Ar(h,d,a),a&&v&4&&Hy(h,d);break;case 22:d.memoizedState===null&&Ar(h,d,a),ll(d,d.return);break;case 30:break;default:Ar(h,d,a)}i=i.sibling}}function ud(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ko(a))}function cd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t))}function hi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qy(t,i,a,o),i=i.sibling}function Qy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:hi(t,i,a,o),h&2048&&ol(9,i);break;case 1:hi(t,i,a,o);break;case 3:hi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t)));break;case 12:if(h&2048){hi(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Ze(i,i.return,R)}}else hi(t,i,a,o);break;case 13:hi(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?hi(t,i,a,o):ul(t,i):d._visibility&2?hi(t,i,a,o):(d._visibility|=2,Va(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&ud(v,i);break;case 24:hi(t,i,a,o),h&2048&&cd(i.alternate,i);break;default:hi(t,i,a,o)}}function Va(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,T=a,R=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Va(d,v,T,R,h),ol(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?Va(d,v,T,R,h):ul(d,v):(Y._visibility|=2,Va(d,v,T,R,h)),h&&j&2048&&ud(v.alternate,v);break;case 24:Va(d,v,T,R,h),h&&j&2048&&cd(v.alternate,v);break;default:Va(d,v,T,R,h)}i=i.sibling}}function ul(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ul(a,o),h&2048&&ud(o.alternate,o);break;case 24:ul(a,o),h&2048&&cd(o.alternate,o);break;default:ul(a,o)}i=i.sibling}}var cl=8192;function Ma(t){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)Ky(t),t=t.sibling}function Ky(t){switch(t.tag){case 26:Ma(t),t.flags&cl&&t.memoizedState!==null&&OS(Gn,t.memoizedState,t.memoizedProps);break;case 5:Ma(t);break;case 3:case 4:var i=Gn;Gn=Nc(t.stateNode.containerInfo),Ma(t),Gn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=cl,cl=16777216,Ma(t),cl=i):Ma(t));break;default:Ma(t)}}function Yy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function hl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,$y(o,t)}Yy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xy(t),t=t.sibling}function Xy(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&Er(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,yc(t)):hl(t);break;default:hl(t)}}function yc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,$y(o,t)}Yy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Er(8,i,i.return),yc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,yc(i));break;default:yc(i)}t=t.sibling}}function $y(t,i){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Er(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Lt=o;else e:for(a=t;Lt!==null;){o=Lt;var h=o.sibling,d=o.return;if(By(o),o===a){Lt=null;break e}if(h!==null){h.return=d,Lt=h;break e}Lt=d}}}var YA={getCacheForType:function(t){var i=Xt(xt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},XA=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Je=null,De=null,Ue=0,Qe=0,vn=null,Sr=!1,Pa=!1,hd=!1,Qi=0,ft=0,br=0,Us=0,fd=0,kn=0,ka=0,fl=null,cn=null,dd=!1,md=0,_c=1/0,vc=null,wr=null,Ht=0,Rr=null,La=null,Ua=0,pd=0,gd=null,Zy=null,dl=0,yd=null;function En(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(Q.T!==null){var t=wa;return t!==0?t:bd()}return or()}function Wy(){kn===0&&(kn=(Ue&536870912)===0||Be?Ao():536870912);var t=Pn.current;return t!==null&&(t.flags|=32),kn}function Tn(t,i,a){(t===Je&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(ja(t,0),Ir(t,Ue,kn,!1)),bi(t,a),((Ge&2)===0||t!==Je)&&(t===Je&&((Ge&2)===0&&(Us|=a),ft===4&&Ir(t,Ue,kn,!1)),fi(t))}function Jy(t,i,a){if((Ge&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||cs(t,i),h=o?WA(t,i):Ed(t,i,!0),d=o;do{if(h===0){Pa&&!o&&Ir(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!$A(a)){h=Ed(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=fl;var R=T.current.memoizedState.isDehydrated;if(R&&(ja(T,v).flags|=256),v=Ed(T,v,!1),v!==2){if(hd&&!R){T.errorRecoveryDisabledLanes|=d,Us|=d,h=4;break e}d=cn,cn=h,d!==null&&(cn===null?cn=d:cn.push.apply(cn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){ja(t,0),Ir(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ir(o,i,kn,!Sr);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=md+300-wn(),10<h)){if(Ir(o,i,kn,!Sr),na(o,0,!0)!==0)break e;o.timeoutHandle=C_(e_.bind(null,o,a,cn,vc,dd,i,kn,Us,ka,Sr,d,2,-0,0),h);break e}e_(o,a,cn,vc,dd,i,kn,Us,ka,Sr,d,0,-0,0)}}break}while(!0);fi(t)}function e_(t,i,a,o,h,d,v,T,R,j,Y,W,z,q){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:DS},Ky(i),W=VS(),W!==null)){t.cancelPendingCommit=W(o_.bind(null,t,i,d,a,o,h,v,T,R,Y,1,z,q)),Ir(t,d,v,!j);return}o_(t,i,d,a,o,h,v,T,R)}function $A(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ir(t,i,a,o){i&=~fd,i&=~Us,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-Yt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Zn(t,a,i)}function Ec(){return(Ge&6)===0?(ml(0),!1):!0}function _d(){if(De!==null){if(Qe===0)var t=De.return;else t=De,Ui=Os=null,Pf(t),Da=null,rl=0,t=De;for(;t!==null;)Vy(t.alternate,t),t=t.return;De=null}}function ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,mS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),_d(),Je=t,De=a=Pi(t.current,null),Ue=i,Qe=0,vn=null,Sr=!1,Pa=cs(t,i),hd=!1,ka=kn=fd=Us=br=ft=0,cn=fl=null,dd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-Yt(o),d=1<<h;i|=t[h],o&=~d}return Qi=i,qu(),a}function t_(t,i){Ne=null,Q.H=oc,i===Xo||i===Zu?(i=_g(),Qe=3):i===pg?(i=_g(),Qe=4):Qe=i===vy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,De===null&&(ft=1,fc(t,Dn(i,t.current)))}function n_(){var t=Q.H;return Q.H=oc,t===null?oc:t}function i_(){var t=Q.A;return Q.A=YA,t}function vd(){ft=4,Sr||(Ue&4194048)!==Ue&&Pn.current!==null||(Pa=!0),(br&134217727)===0&&(Us&134217727)===0||Je===null||Ir(Je,Ue,kn,!1)}function Ed(t,i,a){var o=Ge;Ge|=2;var h=n_(),d=i_();(Je!==t||Ue!==i)&&(vc=null,ja(t,i)),i=!1;var v=ft;e:do try{if(Qe!==0&&De!==null){var T=De,R=vn;switch(Qe){case 8:_d(),v=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(i=!0);var j=Qe;if(Qe=0,vn=null,za(t,T,R,j),a&&Pa){v=0;break e}break;default:j=Qe,Qe=0,vn=null,za(t,T,R,j)}}ZA(),v=ft;break}catch(Y){t_(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Ui=Os=null,Ge=o,Q.H=h,Q.A=d,De===null&&(Je=null,Ue=0,qu()),v}function ZA(){for(;De!==null;)r_(De)}function WA(t,i){var a=Ge;Ge|=2;var o=n_(),h=i_();Je!==t||Ue!==i?(vc=null,_c=wn()+500,ja(t,i)):Pa=cs(t,i);e:do try{if(Qe!==0&&De!==null){i=De;var d=vn;t:switch(Qe){case 1:Qe=0,vn=null,za(t,i,d,1);break;case 2:case 9:if(gg(d)){Qe=0,vn=null,s_(i);break}i=function(){Qe!==2&&Qe!==9||Je!==t||(Qe=7),fi(t)},d.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:gg(d)?(Qe=0,vn=null,s_(i)):(Qe=0,vn=null,za(t,i,d,7));break;case 5:var v=null;switch(De.tag){case 26:v=De.memoizedState;case 5:case 27:var T=De;if(!v||z_(v)){Qe=0,vn=null;var R=T.sibling;if(R!==null)De=R;else{var j=T.return;j!==null?(De=j,Tc(j)):De=null}break t}}Qe=0,vn=null,za(t,i,d,5);break;case 6:Qe=0,vn=null,za(t,i,d,6);break;case 8:_d(),ft=6;break e;default:throw Error(s(462))}}JA();break}catch(Y){t_(t,Y)}while(!0);return Ui=Os=null,Q.H=o,Q.A=h,Ge=a,De!==null?0:(Je=null,Ue=0,qu(),ft)}function JA(){for(;De!==null&&!_o();)r_(De)}function r_(t){var i=Dy(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,i===null?Tc(t):De=i}function s_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=wy(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=wy(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:Pf(i);default:Vy(a,i),i=De=ag(i,Qi),i=Dy(a,i,Qi)}t.memoizedProps=t.pendingProps,i===null?Tc(t):De=i}function za(t,i,a,o){Ui=Os=null,Pf(i),Da=null,rl=0;var h=i.return;try{if(qA(t,h,i,a,Ue)){ft=1,fc(t,Dn(a,t.current)),De=null;return}}catch(d){if(h!==null)throw De=h,d;ft=1,fc(t,Dn(a,t.current)),De=null;return}i.flags&32768?(Be||o===1?t=!0:Pa||(Ue&536870912)!==0?t=!1:(Sr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Pn.current,o!==null&&o.tag===13&&(o.flags|=16384))),a_(i,t)):Tc(i)}function Tc(t){var i=t;do{if((i.flags&32768)!==0){a_(i,Sr);return}t=i.return;var a=FA(i.alternate,i,Qi);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);ft===0&&(ft=5)}function a_(t,i){do{var a=GA(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);ft=6,De=null}function o_(t,i,a,o,h,d,v,T,R){t.cancelPendingCommit=null;do Ac();while(Ht!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=cf,bo(t,a,d,v,T,R),t===Je&&(De=Je=null,Ue=0),La=i,Rr=t,Ua=a,pd=d,gd=h,Zy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,iS(as,function(){return f_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,h=G.p,G.p=2,v=Ge,Ge|=4;try{QA(t,i,a)}finally{Ge=v,G.p=h,Q.T=o}}Ht=1,l_(),u_(),c_()}}function l_(){if(Ht===1){Ht=0;var t=Rr,i=La,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var o=G.p;G.p=2;var h=Ge;Ge|=4;try{Fy(i,t);var d=Od,v=$p(t.containerInfo),T=d.focusedElem,R=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&Xp(T.ownerDocument.documentElement,T)){if(R!==null&&sf(T)){var j=R.start,Y=R.end;if(Y===void 0&&(Y=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(Y,T.value.length);else{var W=T.ownerDocument||document,z=W&&W.defaultView||window;if(z.getSelection){var q=z.getSelection(),Se=T.textContent.length,ve=Math.min(R.start,Se),$e=R.end===void 0?ve:Math.min(R.end,Se);!q.extend&&ve>$e&&(v=$e,$e=ve,ve=v);var k=Yp(T,ve),V=Yp(T,$e);if(k&&V&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==V.node||q.focusOffset!==V.offset)){var U=W.createRange();U.setStart(k.node,k.offset),q.removeAllRanges(),ve>$e?(q.addRange(U),q.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),q.addRange(U))}}}}for(W=[],q=T;q=q.parentNode;)q.nodeType===1&&W.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var $=W[T];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Mc=!!Dd,Od=Dd=null}finally{Ge=h,G.p=o,Q.T=a}}t.current=i,Ht=2}}function u_(){if(Ht===2){Ht=0;var t=Rr,i=La,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var o=G.p;G.p=2;var h=Ge;Ge|=4;try{zy(t,i.alternate,i)}finally{Ge=h,G.p=o,Q.T=a}}Ht=3}}function c_(){if(Ht===4||Ht===3){Ht=0,yu();var t=Rr,i=La,a=Ua,o=Zy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ht=5:(Ht=0,La=Rr=null,h_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(wr=null),ia(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Q.T,h=G.p,G.p=2,Q.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{Q.T=i,G.p=h}}(Ua&3)!==0&&Ac(),fi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===yd?dl++:(dl=0,yd=t):dl=0,ml(0)}}function h_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ko(i)))}function Ac(t){return l_(),u_(),c_(),f_()}function f_(){if(Ht!==5)return!1;var t=Rr,i=pd;pd=0;var a=ia(Ua),o=Q.T,h=G.p;try{G.p=32>a?32:a,Q.T=null,a=gd,gd=null;var d=Rr,v=Ua;if(Ht=0,La=Rr=null,Ua=0,(Ge&6)!==0)throw Error(s(331));var T=Ge;if(Ge|=4,Xy(d.current),Qy(d,d.current,v,a),Ge=T,ml(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(ct,d)}catch{}return!0}finally{G.p=h,Q.T=o,h_(t,i)}}function d_(t,i,a){i=Dn(a,i),i=Xf(t.stateNode,i,2),t=gr(t,i,2),t!==null&&(bi(t,2),fi(t))}function Ze(t,i,a){if(t.tag===3)d_(t,t,a);else for(;i!==null;){if(i.tag===3){d_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(wr===null||!wr.has(o))){t=Dn(a,t),a=yy(2),o=gr(i,a,2),o!==null&&(_y(a,o,i,t),bi(o,2),fi(o));break}}i=i.return}}function Td(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new XA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(hd=!0,h.add(a),t=eS.bind(null,t,i,a),i.then(t,t))}function eS(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Ue&a)===a&&(ft===4||ft===3&&(Ue&62914560)===Ue&&300>wn()-md?(Ge&2)===0&&ja(t,0):fd|=a,ka===Ue&&(ka=0)),fi(t)}function m_(t,i){i===0&&(i=So()),t=Ta(t,i),t!==null&&(bi(t,i),fi(t))}function tS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),m_(t,a)}function nS(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),m_(t,a)}function iS(t,i){return rs(t,i)}var Sc=null,Ba=null,Ad=!1,bc=!1,Sd=!1,js=0;function fi(t){t!==Ba&&t.next===null&&(Ba===null?Sc=Ba=t:Ba=Ba.next=t),bc=!0,Ad||(Ad=!0,sS())}function ml(t,i){if(!Sd&&bc){Sd=!0;do for(var a=!1,o=Sc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-Yt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,__(o,d))}else d=Ue,d=na(o,o===Je?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||cs(o,d)||(a=!0,__(o,d));o=o.next}while(a);Sd=!1}}function rS(){p_()}function p_(){bc=Ad=!1;var t=0;js!==0&&(dS()&&(t=js),js=0);for(var i=wn(),a=null,o=Sc;o!==null;){var h=o.next,d=g_(o,i);d===0?(o.next=null,a===null?Sc=h:a.next=h,h===null&&(Ba=a)):(a=o,(t!==0||(d&3)!==0)&&(bc=!0)),o=h}ml(t)}function g_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Yt(d),T=1<<v,R=h[v];R===-1?((T&a)===0||(T&o)!==0)&&(h[v]=To(T,i)):R<=i&&(t.expiredLanes|=T),d&=~T}if(i=Je,a=Ue,a=na(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ss(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||cs(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ss(o),ia(a)){case 2:case 8:a=ea;break;case 32:a=as;break;case 268435456:a=ta;break;default:a=as}return o=y_.bind(null,t),a=rs(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ss(o),t.callbackPriority=2,t.callbackNode=null,2}function y_(t,i){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ac()&&t.callbackNode!==a)return null;var o=Ue;return o=na(t,t===Je?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Jy(t,o,i),g_(t,wn()),t.callbackNode!=null&&t.callbackNode===a?y_.bind(null,t):null)}function __(t,i){if(Ac())return null;Jy(t,i,!0)}function sS(){pS(function(){(Ge&6)!==0?rs(vo,rS):p_()})}function bd(){return js===0&&(js=Ao()),js}function v_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ua(""+t)}function E_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function aS(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=v_((h[vt]||null).action),v=o.submitter;v&&(i=(i=v[vt]||null)?v_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new ca("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(js!==0){var R=v?E_(h,v):new FormData(h);Ff(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(T.preventDefault(),R=v?E_(h,v):new FormData(h),Ff(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var wd=0;wd<uf.length;wd++){var Rd=uf[wd],oS=Rd.toLowerCase(),lS=Rd[0].toUpperCase()+Rd.slice(1);Fn(oS,"on"+lS)}Fn(Jp,"onAnimationEnd"),Fn(eg,"onAnimationIteration"),Fn(tg,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(wA,"onTransitionRun"),Fn(RA,"onTransitionStart"),Fn(IA,"onTransitionCancel"),Fn(ng,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function T_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var T=o[v],R=T.instance,j=T.currentTarget;if(T=T.listener,R!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=j;try{d(h)}catch(Y){hc(Y)}h.currentTarget=null,d=R}else for(v=0;v<o.length;v++){if(T=o[v],R=T.instance,j=T.currentTarget,T=T.listener,R!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=j;try{d(h)}catch(Y){hc(Y)}h.currentTarget=null,d=R}}}}function Oe(t,i){var a=i[Ro];a===void 0&&(a=i[Ro]=new Set);var o=t+"__bubble";a.has(o)||(A_(i,t,2,!1),a.add(o))}function Id(t,i,a){var o=0;i&&(o|=4),A_(a,t,o,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Cd(t){if(!t[wc]){t[wc]=!0,Io.forEach(function(a){a!=="selectionchange"&&(uS.has(a)||Id(a,!1,t),Id(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,Id("selectionchange",!1,i))}}function A_(t,i,a,o){switch(Q_(i)){case 2:var h=kS;break;case 8:h=LS;break;default:h=qd}a=h.bind(null,i,a,t),h=void 0,!Nn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Nd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=wi(T),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){o=d=v;continue e}T=T.parentNode}}o=o.return}Iu(function(){var j=d,Y=Cn(a),W=[];e:{var z=ig.get(t);if(z!==void 0){var q=ca,Se=t;switch(t){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":q=ga;break;case"focusin":Se="focus",q=da;break;case"focusout":Se="blur",q=da;break;case"beforeblur":case"afterblur":q=da;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Pu;break;case Jp:case eg:case tg:q=ma;break;case ng:q=Lu;break;case"scroll":case"scrollend":q=Cu;break;case"wheel":q=ya;break;case"copy":case"cut":case"paste":q=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=jo;break;case"toggle":case"beforetoggle":q=ju}var ve=(i&4)!==0,$e=!ve&&(t==="scroll"||t==="scrollend"),k=ve?z!==null?z+"Capture":null:z;ve=[];for(var V=j,U;V!==null;){var $=V;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||k===null||($=_s(V,k),$!=null&&ve.push(gl(V,$,U))),$e)break;V=V.return}0<ve.length&&(z=new q(z,Se,null,a,Y),W.push({event:z,listeners:ve}))}}if((i&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",z&&a!==Ni&&(Se=a.relatedTarget||a.fromElement)&&(wi(Se)||Se[Rn]))break e;if((q||z)&&(z=Y.window===Y?Y:(z=Y.ownerDocument)?z.defaultView||z.parentWindow:window,q?(Se=a.relatedTarget||a.toElement,q=j,Se=Se?wi(Se):null,Se!==null&&($e=c(Se),ve=Se.tag,Se!==$e||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(q=null,Se=j),q!==Se)){if(ve=xn,$="onMouseLeave",k="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ve=jo,$="onPointerLeave",k="onPointerEnter",V="pointer"),$e=q==null?z:Jn(q),U=Se==null?z:Jn(Se),z=new ve($,V+"leave",q,a,Y),z.target=$e,z.relatedTarget=U,$=null,wi(Y)===j&&(ve=new ve(k,V+"enter",Se,a,Y),ve.target=U,ve.relatedTarget=$e,$=ve),$e=$,q&&Se)t:{for(ve=q,k=Se,V=0,U=ve;U;U=qa(U))V++;for(U=0,$=k;$;$=qa($))U++;for(;0<V-U;)ve=qa(ve),V--;for(;0<U-V;)k=qa(k),U--;for(;V--;){if(ve===k||k!==null&&ve===k.alternate)break t;ve=qa(ve),k=qa(k)}ve=null}else ve=null;q!==null&&S_(W,z,q,ve,!1),Se!==null&&$e!==null&&S_(W,$e,Se,ve,!0)}}e:{if(z=j?Jn(j):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var de=qp;else if(Nt(z))if(Hp)de=AA;else{de=EA;var xe=vA}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&Oo(j.elementType)&&(de=qp):de=TA;if(de&&(de=de(t,j))){Mi(W,de,a,Y);break e}xe&&xe(t,z,j),t==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&hr(z,"number",z.value)}switch(xe=j?Jn(j):window,t){case"focusin":(Nt(xe)||xe.contentEditable==="true")&&(_a=xe,af=j,qo=null);break;case"focusout":qo=af=_a=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Zp(W,a,Y);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":Zp(W,a,Y)}var ye;if(ai)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ke?F(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(ke||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ke&&(ye=Mo()):(ni=Y,fr="value"in ni?ni.value:ni.textContent,ke=!0)),xe=Rc(j,Ee),0<xe.length&&(Ee=new Lo(Ee,t,null,a,Y),W.push({event:Ee,listeners:xe}),ye?Ee.data=ye:(ye=ae(a),ye!==null&&(Ee.data=ye)))),(ye=m?Ct(t,a):Le(t,a))&&(Ee=Rc(j,"onBeforeInput"),0<Ee.length&&(xe=new Lo("onBeforeInput","beforeinput",null,a,Y),W.push({event:xe,listeners:Ee}),xe.data=ye)),aS(W,t,j,a,Y)}T_(W,i)})}function gl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=_s(t,a),h!=null&&o.unshift(gl(t,h,d)),h=_s(t,i),h!=null&&o.push(gl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function S_(t,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var T=a,R=T.alternate,j=T.stateNode;if(T=T.tag,R!==null&&R===o)break;T!==5&&T!==26&&T!==27||j===null||(R=j,h?(j=_s(a,d),j!=null&&v.unshift(gl(a,j,R))):h||(j=_s(a,d),j!=null&&v.push(gl(a,j,R)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var cS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function b_(t){return(typeof t=="string"?t:""+t).replace(cS,`
`).replace(hS,"")}function w_(t,i){return i=b_(i),b_(t)===i}function Ic(){}function Xe(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||In(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&In(t,""+o);break;case"className":ei(t,"class",o);break;case"tabIndex":ei(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(t,a,o);break;case"style":Do(t,o,d);break;case"data":if(i!=="object"){ei(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ua(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ua(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ic);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ua(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),cr(t,"popover",o);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":cr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wh.get(a)||a,cr(t,a,o))}}function xd(t,i,a,o,h,d){switch(a){case"style":Do(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?In(t,o):(typeof o=="number"||typeof o=="bigint")&&In(t,""+o);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[vt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):cr(t,a,o)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,d,v,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),o&&Xe(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var T=d=v=h=null,R=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Y=a[o];if(Y!=null)switch(o){case"name":h=Y;break;case"type":v=Y;break;case"checked":R=Y;break;case"defaultChecked":j=Y;break;case"value":d=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Xe(t,i,o,Y,a,null)}}ps(t,d,T,R,j,v,h,!1),la(t);return;case"select":Oe("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:Xe(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!o,i!=null?Ci(t,!!o,i,!1):a!=null&&Ci(t,!!o,a,!0);return;case"textarea":Oe("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Xe(t,i,v,T,a,null)}gs(t,o,h,d),la(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xe(t,i,R,o,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(o=0;o<pl.length;o++)Oe(pl[o],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,j,o,a,null)}return;default:if(Oo(i)){for(Y in a)a.hasOwnProperty(Y)&&(o=a[Y],o!==void 0&&xd(t,i,Y,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&Xe(t,i,T,o,a,null))}function fS(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,R=null,j=null,Y=null;for(q in a){var W=a[q];if(a.hasOwnProperty(q)&&W!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=W;default:o.hasOwnProperty(q)||Xe(t,i,q,null,o,W)}}for(var z in o){var q=o[z];if(W=a[z],o.hasOwnProperty(z)&&(q!=null||W!=null))switch(z){case"type":d=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":Y=q;break;case"value":v=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==W&&Xe(t,i,z,q,o,W)}}mn(t,v,T,R,j,Y,d,h);return;case"select":q=v=T=z=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":q=R;default:o.hasOwnProperty(d)||Xe(t,i,d,null,o,R)}for(h in o)if(d=o[h],R=a[h],o.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":z=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==R&&Xe(t,i,h,d,o,R)}i=T,a=v,o=q,z!=null?Ci(t,!!a,z,!1):!!o!=!!a&&(i!=null?Ci(t,!!a,i,!0):Ci(t,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Xe(t,i,T,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xe(t,i,v,h,o,d)}Ke(t,z,q);return;case"option":for(var Se in a)if(z=a[Se],a.hasOwnProperty(Se)&&z!=null&&!o.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Xe(t,i,Se,null,o,z)}for(R in o)if(z=o[R],q=a[R],o.hasOwnProperty(R)&&z!==q&&(z!=null||q!=null))switch(R){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xe(t,i,R,z,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)z=a[ve],a.hasOwnProperty(ve)&&z!=null&&!o.hasOwnProperty(ve)&&Xe(t,i,ve,null,o,z);for(j in o)if(z=o[j],q=a[j],o.hasOwnProperty(j)&&z!==q&&(z!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xe(t,i,j,z,o,q)}return;default:if(Oo(i)){for(var $e in a)z=a[$e],a.hasOwnProperty($e)&&z!==void 0&&!o.hasOwnProperty($e)&&xd(t,i,$e,void 0,o,z);for(Y in o)z=o[Y],q=a[Y],!o.hasOwnProperty(Y)||z===q||z===void 0&&q===void 0||xd(t,i,Y,z,o,q);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&Xe(t,i,k,null,o,z);for(W in o)z=o[W],q=a[W],!o.hasOwnProperty(W)||z===q||z==null&&q==null||Xe(t,i,W,z,o,q)}var Dd=null,Od=null;function Cc(t){return t.nodeType===9?t:t.ownerDocument}function R_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Vd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Md=null;function dS(){var t=window.event;return t&&t.type==="popstate"?t===Md?!1:(Md=t,!0):(Md=null,!1)}var C_=typeof setTimeout=="function"?setTimeout:void 0,mS=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,pS=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(t){return N_.resolve(null).then(t).catch(gS)}:C_;function gS(t){setTimeout(function(){throw t})}function Cr(t){return t==="head"}function x_(t,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&yl(v.documentElement),a&2&&yl(v.body),a&4)for(a=v.head,yl(a),v=a.firstChild;v;){var T=v.nextSibling,R=v.nodeName;v[hs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(d),wl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);wl(i)}function Pd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pd(a),ur(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function yS(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[hs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Qn(t.nextSibling),t===null)break}return null}function _S(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Qn(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function vS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Ld=null;function D_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function O_(t,i,a){switch(i=Cc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function yl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ur(t)}var Ln=new Map,V_=new Set;function Nc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ki=G.d;G.d={f:ES,r:TS,D:AS,C:SS,L:bS,m:wS,X:IS,S:RS,M:CS};function ES(){var t=Ki.f(),i=Ec();return t||i}function TS(t){var i=Wn(t);i!==null&&i.tag===5&&i.type==="form"?Jg(i):Ki.r(t)}var Ha=typeof document>"u"?null:document;function M_(t,i,a){var o=Ha;if(o&&typeof i=="string"&&i){var h=Et(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),V_.has(h)||(V_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ft(i,"link",t),mt(i),o.head.appendChild(i)))}}function AS(t){Ki.D(t),M_("dns-prefetch",t,null)}function SS(t,i){Ki.C(t,i),M_("preconnect",t,i)}function bS(t,i,a){Ki.L(t,i,a);var o=Ha;if(o&&t&&i){var h='link[rel="preload"][as="'+Et(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Et(a.imageSizes)+'"]')):h+='[href="'+Et(t)+'"]';var d=h;switch(i){case"style":d=Fa(t);break;case"script":d=Ga(t)}Ln.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Ln.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(_l(d))||i==="script"&&o.querySelector(vl(d))||(i=o.createElement("link"),Ft(i,"link",t),mt(i),o.head.appendChild(i)))}}function wS(t,i){Ki.m(t,i);var a=Ha;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Et(o)+'"][href="'+Et(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ga(t)}if(!Ln.has(d)&&(t=A({rel:"modulepreload",href:t},i),Ln.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}o=a.createElement("link"),Ft(o,"link",t),mt(o),a.head.appendChild(o)}}}function RS(t,i,a){Ki.S(t,i,a);var o=Ha;if(o&&t){var h=tn(o).hoistableStyles,d=Fa(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(_l(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Ln.get(d))&&Ud(t,a);var R=v=o.createElement("link");mt(R),Ft(R,"link",t),R._p=new Promise(function(j,Y){R.onload=j,R.onerror=Y}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,xc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function IS(t,i){Ki.X(t,i);var a=Ha;if(a&&t){var o=tn(a).hoistableScripts,h=Ga(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=A({src:t,async:!0},i),(i=Ln.get(h))&&jd(t,i),d=a.createElement("script"),mt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function CS(t,i){Ki.M(t,i);var a=Ha;if(a&&t){var o=tn(a).hoistableScripts,h=Ga(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Ln.get(h))&&jd(t,i),d=a.createElement("script"),mt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function P_(t,i,a,o){var h=(h=we.current)?Nc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Fa(a.href),a=tn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Fa(a.href);var d=tn(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(_l(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Ln.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(t,a),d||NS(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ga(a),a=tn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Fa(t){return'href="'+Et(t)+'"'}function _l(t){return'link[rel="stylesheet"]['+t+"]"}function k_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function NS(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ft(i,"link",a),mt(i),t.head.appendChild(i))}function Ga(t){return'[src="'+Et(t)+'"]'}function vl(t){return"script[async]"+t}function L_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Et(a.href)+'"]');if(o)return i.instance=o,mt(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),mt(o),Ft(o,"style",h),xc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Fa(a.href);var d=t.querySelector(_l(h));if(d)return i.state.loading|=4,i.instance=d,mt(d),d;o=k_(a),(h=Ln.get(h))&&Ud(o,h),d=(t.ownerDocument||t).createElement("link"),mt(d);var v=d;return v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Ft(d,"link",o),i.state.loading|=4,xc(d,a.precedence,t),i.instance=d;case"script":return d=Ga(a.src),(h=t.querySelector(vl(d)))?(i.instance=h,mt(h),h):(o=a,(h=Ln.get(d))&&(o=A({},a),jd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),mt(h),Ft(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,xc(o,a.precedence,t));return i.instance}function xc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Ud(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Dc=null;function U_(t,i,a){if(Dc===null){var o=new Map,h=Dc=new Map;h.set(a,o)}else h=Dc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[hs]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function j_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function xS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function z_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var El=null;function DS(){}function OS(t,i,a){if(El===null)throw Error(s(475));var o=El;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Fa(a.href),d=t.querySelector(_l(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=Oc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=d,mt(d);return}d=t.ownerDocument||t,a=k_(a),(h=Ln.get(h))&&Ud(a,h),d=d.createElement("link"),mt(d);var v=d;v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Ft(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=Oc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function VS(){if(El===null)throw Error(s(475));var t=El;return t.stylesheets&&t.count===0&&zd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&zd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Oc(){if(this.count--,this.count===0){if(this.stylesheets)zd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vc=null;function zd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vc=new Map,i.forEach(MS,t),Vc=null,Oc.call(t))}function MS(t,i){if(!(i.state.loading&4)){var a=Vc.get(t);if(a)var o=a.get(null);else{a=new Map,Vc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=Oc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Tl={$$typeof:re,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function PS(t,i,a,o,h,d,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function B_(t,i,a,o,h,d,v,T,R,j,Y,W){return t=new PS(t,i,a,v,T,R,j,W),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),t.current=d,d.stateNode=t,i=Tf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},wf(d),t}function q_(t){return t?(t=Aa,t):Aa}function H_(t,i,a,o,h,d){h=q_(h),o.context===null?o.context=h:o.pendingContext=h,o=pr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=gr(t,o,i),a!==null&&(Tn(a,t,i),Zo(a,t,i))}function F_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Bd(t,i){F_(t,i),(t=t.alternate)&&F_(t,i)}function G_(t){if(t.tag===13){var i=Ta(t,67108864);i!==null&&Tn(i,t,67108864),Bd(t,67108864)}}var Mc=!0;function kS(t,i,a,o){var h=Q.T;Q.T=null;var d=G.p;try{G.p=2,qd(t,i,a,o)}finally{G.p=d,Q.T=h}}function LS(t,i,a,o){var h=Q.T;Q.T=null;var d=G.p;try{G.p=8,qd(t,i,a,o)}finally{G.p=d,Q.T=h}}function qd(t,i,a,o){if(Mc){var h=Hd(o);if(h===null)Nd(t,i,o,Pc,a),K_(t,o);else if(jS(h,t,i,a,o))o.stopPropagation();else if(K_(t,o),i&4&&-1<US.indexOf(t)){for(;h!==null;){var d=Wn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Bn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var R=1<<31-Yt(v);T.entanglements[1]|=R,v&=~R}fi(d),(Ge&6)===0&&(_c=wn()+500,ml(0))}}break;case 13:T=Ta(d,2),T!==null&&Tn(T,d,2),Ec(),Bd(d,2)}if(d=Hd(o),d===null&&Nd(t,i,o,Pc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Nd(t,i,o,null,a)}}function Hd(t){return t=Cn(t),Fd(t)}var Pc=null;function Fd(t){if(Pc=null,t=wi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Pc=t,null}function Q_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qh()){case vo:return 2;case ea:return 8;case as:case Kh:return 32;case ta:return 268435456;default:return 32}default:return 32}}var Gd=!1,Nr=null,xr=null,Dr=null,Al=new Map,Sl=new Map,Or=[],US="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K_(t,i){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Al.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(i.pointerId)}}function bl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Wn(i),i!==null&&G_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function jS(t,i,a,o,h){switch(i){case"focusin":return Nr=bl(Nr,t,i,a,o,h),!0;case"dragenter":return xr=bl(xr,t,i,a,o,h),!0;case"mouseover":return Dr=bl(Dr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return Al.set(d,bl(Al.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,Sl.set(d,bl(Sl.get(d)||null,t,i,a,o,h)),!0}return!1}function Y_(t){var i=wi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Eu(t.priority,function(){if(a.tag===13){var o=En();o=ar(o);var h=Ta(a,o);h!==null&&Tn(h,a,o),Bd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ni=o,a.target.dispatchEvent(o),Ni=null}else return i=Wn(a),i!==null&&G_(i),t.blockedOn=a,!1;i.shift()}return!0}function X_(t,i,a){kc(t)&&a.delete(i)}function zS(){Gd=!1,Nr!==null&&kc(Nr)&&(Nr=null),xr!==null&&kc(xr)&&(xr=null),Dr!==null&&kc(Dr)&&(Dr=null),Al.forEach(X_),Sl.forEach(X_)}function Lc(t,i){t.blockedOn===i&&(t.blockedOn=null,Gd||(Gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zS)))}var Uc=null;function $_(t){Uc!==t&&(Uc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Uc===t&&(Uc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Fd(o||a)===null)continue;break}var d=Wn(a);d!==null&&(t.splice(i,3),i-=3,Ff(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function wl(t){function i(R){return Lc(R,t)}Nr!==null&&Lc(Nr,t),xr!==null&&Lc(xr,t),Dr!==null&&Lc(Dr,t),Al.forEach(i),Sl.forEach(i);for(var a=0;a<Or.length;a++){var o=Or[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)Y_(a),a.blockedOn===null&&Or.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[vt]||null;if(typeof d=="function")v||$_(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[vt]||null)T=v.formAction;else if(Fd(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),$_(a)}}}function Qd(t){this._internalRoot=t}jc.prototype.render=Qd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=En();H_(a,o,t,i,null,null)},jc.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;H_(t.current,2,null,t,null,null),Ec(),i[Rn]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var i=or();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Or.length&&i!==0&&i<Or[a].priority;a++);Or.splice(a,0,t),a===0&&Y_(t)}};var Z_=e.version;if(Z_!=="19.1.1")throw Error(s(527,Z_,"19.1.1"));G.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var BS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{ct=zc.inject(BS),Fe=zc}catch{}}return Il.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=dy,d=my,v=py,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=B_(t,1,!1,null,null,a,o,h,d,v,T,null),t[Rn]=i.current,Cd(t),new Qd(i)},Il.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=dy,v=my,T=py,R=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=B_(t,1,!0,i,a??null,o,h,d,v,T,R,j),i.context=q_(null),a=i.current,o=En(),o=ar(o),h=pr(o),h.callback=null,gr(a,h,o),a=o,i.current.lanes=a,bi(i,a),fi(i),t[Rn]=i.current,Cd(t),new jc(i)},Il.version="19.1.1",Il}var ov;function JS(){if(ov)return Xd.exports;ov=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xd.exports=WS(),Xd.exports}var eb=JS();const tb=()=>{};var lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},nb=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},B0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,p=f?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,A=c>>2,b=(c&3)<<4|p>>4;let I=(p&15)<<2|y>>6,B=y&63;g||(B=64,f||(I=64)),s.push(n[A],n[b],n[I],n[B])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(z0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nb(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const b=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||b==null)throw new ib;const I=c<<2|p>>4;if(s.push(I),y!==64){const B=p<<4&240|y>>2;if(s.push(B),b!==64){const K=y<<6&192|b;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ib extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rb=function(r){const e=z0(r);return B0.encodeByteArray(e,!0)},ih=function(r){return rb(r).replace(/\./g,"")},q0=function(r){try{return B0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=()=>sb().__FIREBASE_DEFAULTS__,ob=()=>{if(typeof process>"u"||typeof lv>"u")return;const r=lv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&q0(r[1]);return e&&JSON.parse(e)},bh=()=>{try{return tb()||ab()||ob()||lb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},H0=r=>bh()?.emulatorHosts?.[r],ub=r=>{const e=H0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},F0=()=>bh()?.config,G0=r=>bh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ih(JSON.stringify(n)),ih(JSON.stringify(f)),""].join(".")}const Ml={};function fb(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ml))Ml[e]?r.emulator.push(e):r.prod.push(e);return r}function db(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let uv=!1;function K0(r,e){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||Ml[r]===e||Ml[r]||uv)return;Ml[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=fb().prod.length>0;function f(){const I=document.getElementById(s);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,B){I.setAttribute("width","24"),I.setAttribute("id",B),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{uv=!0,f()},I}function A(I,B){I.setAttribute("id",B),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function b(){const I=db(s),B=n("text"),K=document.getElementById(B)||document.createElement("span"),ne=n("learnmore"),te=document.getElementById(ne)||document.createElement("a"),he=n("preprendIcon"),se=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const re=I.element;p(re),A(te,ne);const ee=y();g(se,he),re.append(se,K,te,ee),document.body.appendChild(re)}c?(K.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function pb(){const r=bh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _b(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vb(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Eb(){return!pb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tb(){try{return typeof indexedDB=="object"}catch{return!1}}function Ab(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="FirebaseError";class ir extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Sb,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?bb(c,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new ir(l,p,s)}}function bb(r,e){return r.replace(wb,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const wb=/\{\$([^}]+)}/g;function Rb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Gs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=e[l];if(cv(c)&&cv(f)){if(!Gs(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function cv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Cl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Nl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function Ib(r,e){const n=new Cb(r,e);return n.subscribe.bind(n)}class Cb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Nb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Jd),l.error===void 0&&(l.error=Jd),l.complete===void 0&&(l.complete=Jd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r){return r&&r._delegate?r._delegate:r}class Qs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new cb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ob(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&f.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Db(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Db(r){return r===zs?void 0:r}function Ob(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const Mb={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Pb=Ve.INFO,kb={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Lb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=kb[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=Pb,this._logHandler=Lb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Ub=(r,e)=>e.some(n=>r instanceof n);let hv,fv;function jb(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zb(){return fv||(fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y0=new WeakMap,fm=new WeakMap,X0=new WeakMap,em=new WeakMap,zm=new WeakMap;function Bb(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(zr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Y0.set(n,r)}).catch(()=>{}),zm.set(e,r),e}function qb(r){if(fm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});fm.set(r,e)}let dm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return fm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||X0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Hb(r){dm=r(dm)}function Fb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(tm(this),e,...n);return X0.set(s,e.sort?e.sort():[e]),zr(s)}:zb().includes(r)?function(...e){return r.apply(tm(this),e),zr(Y0.get(this))}:function(...e){return zr(r.apply(tm(this),e))}}function Gb(r){return typeof r=="function"?Fb(r):(r instanceof IDBTransaction&&qb(r),Ub(r,jb())?new Proxy(r,dm):r)}function zr(r){if(r instanceof IDBRequest)return Bb(r);if(em.has(r))return em.get(r);const e=Gb(r);return e!==r&&(em.set(r,e),zm.set(e,r)),e}const tm=r=>zm.get(r);function Qb(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,e),p=zr(f);return s&&f.addEventListener("upgradeneeded",g=>{s(zr(f.result),g.oldVersion,g.newVersion,zr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Kb=["get","getKey","getAll","getAllKeys","count"],Yb=["put","add","delete","clear"],nm=new Map;function dv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=Yb.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Kb.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return nm.set(e,c),c}Hb(r=>({...r,get:(e,n,s)=>dv(e,n)||r.get(e,n,s),has:(e,n)=>!!dv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($b(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $b(r){return r.getComponent()?.type==="VERSION"}const mm="@firebase/app",mv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new jm("@firebase/app"),Zb="@firebase/app-compat",Wb="@firebase/analytics-compat",Jb="@firebase/analytics",e1="@firebase/app-check-compat",t1="@firebase/app-check",n1="@firebase/auth",i1="@firebase/auth-compat",r1="@firebase/database",s1="@firebase/data-connect",a1="@firebase/database-compat",o1="@firebase/functions",l1="@firebase/functions-compat",u1="@firebase/installations",c1="@firebase/installations-compat",h1="@firebase/messaging",f1="@firebase/messaging-compat",d1="@firebase/performance",m1="@firebase/performance-compat",p1="@firebase/remote-config",g1="@firebase/remote-config-compat",y1="@firebase/storage",_1="@firebase/storage-compat",v1="@firebase/firestore",E1="@firebase/ai",T1="@firebase/firestore-compat",A1="firebase",S1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",b1={[mm]:"fire-core",[Zb]:"fire-core-compat",[Jb]:"fire-analytics",[Wb]:"fire-analytics-compat",[t1]:"fire-app-check",[e1]:"fire-app-check-compat",[n1]:"fire-auth",[i1]:"fire-auth-compat",[r1]:"fire-rtdb",[s1]:"fire-data-connect",[a1]:"fire-rtdb-compat",[o1]:"fire-fn",[l1]:"fire-fn-compat",[u1]:"fire-iid",[c1]:"fire-iid-compat",[h1]:"fire-fcm",[f1]:"fire-fcm-compat",[d1]:"fire-perf",[m1]:"fire-perf-compat",[p1]:"fire-rc",[g1]:"fire-rc-compat",[y1]:"fire-gcs",[_1]:"fire-gcs-compat",[v1]:"fire-fst",[T1]:"fire-fst-compat",[E1]:"fire-vertex","fire-js":"fire-js",[A1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,w1=new Map,gm=new Map;function pv(r,e){try{r.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function no(r){const e=r.name;if(gm.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,r);for(const n of rh.values())pv(n,r);for(const n of w1.values())pv(n,r);return!0}function Bm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new eu("app","Firebase",R1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=S1;function $0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:pm,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Br.create("bad-app-name",{appName:String(l)});if(n||(n=F0()),!n)throw Br.create("no-options");const c=rh.get(l);if(c){if(Gs(n,c.options)&&Gs(s,c.config))return c;throw Br.create("duplicate-app",{appName:l})}const f=new Vb(l);for(const g of gm.values())f.addComponent(g);const p=new I1(n,s,f);return rh.set(l,p),p}function Z0(r=pm){const e=rh.get(r);if(!e&&r===pm&&F0())return $0();if(!e)throw Br.create("no-app",{appName:r});return e}function qr(r,e,n){let s=b1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(f.join(" "));return}no(new Qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebase-heartbeat-database",N1=1,zl="firebase-heartbeat-store";let im=null;function W0(){return im||(im=Qb(C1,N1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(zl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Br.create("idb-open",{originalErrorMessage:r.message})})),im}async function x1(r){try{const n=(await W0()).transaction(zl),s=await n.objectStore(zl).get(J0(r));return await n.done,s}catch(e){if(e instanceof ir)Ji.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e?.message});Ji.warn(n.message)}}}async function gv(r,e){try{const s=(await W0()).transaction(zl,"readwrite");await s.objectStore(zl).put(e,J0(r)),await s.done}catch(n){if(n instanceof ir)Ji.warn(n.message);else{const s=Br.create("idb-set",{originalErrorMessage:n?.message});Ji.warn(s.message)}}}function J0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=1024,O1=30;class V1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>O1){const l=k1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yv(),{heartbeatsToSend:n,unsentEntries:s}=M1(this._heartbeatsCache.heartbeats),l=ih(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ji.warn(e),""}}}function yv(){return new Date().toISOString().substring(0,10)}function M1(r,e=D1){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),_v(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),_v(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class P1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tb()?Ab().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await x1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _v(r){return ih(JSON.stringify({version:2,heartbeats:r})).length}function k1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(r){no(new Qs("platform-logger",e=>new Xb(e),"PRIVATE")),no(new Qs("heartbeat",e=>new V1(e),"PRIVATE")),qr(mm,mv,r),qr(mm,mv,"esm2020"),qr("fire-js","")}L1("");var U1="firebase",j1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(U1,j1,"app");function eE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z1=eE,tE=new eu("auth","Firebase",eE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new jm("@firebase/auth");function B1(r,...e){sh.logLevel<=Ve.WARN&&sh.warn(`Auth (${co}): ${r}`,...e)}function Kc(r,...e){sh.logLevel<=Ve.ERROR&&sh.error(`Auth (${co}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(r,...e){throw qm(r,...e)}function mi(r,...e){return qm(r,...e)}function nE(r,e,n){const s={...z1(),[e]:n};return new eu("auth","Firebase",s).create(e,{appName:r.name})}function Zi(r){return nE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return tE.create(r,...e)}function Te(r,e,...n){if(!r)throw qm(e,...n)}function Xi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Kc(e),new Error(e)}function er(r,e){r||Xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){return typeof self<"u"&&self.location?.href||""}function q1(){return vv()==="http:"||vv()==="https:"}function vv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q1()||yb()||"connection"in navigator)?navigator.onLine:!0}function F1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=mb()||_b()}get(){return H1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(r,e){er(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K1=new nu(3e4,6e4);function Jr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function es(r,e,n,s,l={}){return rE(r,l,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const p=tu({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return gb()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&uo(r.emulatorConfig.host)&&(y.credentials="include"),iE.fetch()(await sE(r,r.config.apiHost,n,p),y)})}async function rE(r,e,n){r._canInitEmulator=!1;const s={...G1,...e};try{const l=new X1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Bc(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Bc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Bc(r,"user-disabled",f);const A=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw nE(r,A,y);Yn(r,A)}}catch(l){if(l instanceof ir)throw l;Yn(r,"network-request-failed",{message:String(l)})}}async function iu(r,e,n,s,l={}){const c=await es(r,e,n,s,l);return"mfaPendingCredential"in c&&Yn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function sE(r,e,n,s){const l=`${e}${n}?${s}`,c=r,f=c.config.emulator?Hm(r.config,l):`${r.config.apiScheme}://${l}`;return Q1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function Y1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),K1.get())})}}function Bc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=mi(r,e,s);return l.customData._tokenResponse=n,l}function Ev(r){return r!==void 0&&r.enterprise!==void 0}class $1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Y1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z1(r,e){return es(r,"GET","/v2/recaptchaConfig",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,e){return es(r,"POST","/v1/accounts:delete",e)}async function ah(r,e){return es(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J1(r,e=!1){const n=_t(r),s=await n.getIdToken(e),l=Fm(s);Te(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:s,authTime:Pl(rm(l.auth_time)),issuedAtTime:Pl(rm(l.iat)),expirationTime:Pl(rm(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function rm(r){return Number(r)*1e3}function Fm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const l=q0(n);return l?JSON.parse(l):(Kc("Failed to decode base64 JWT payload"),null)}catch(l){return Kc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Tv(r){const e=Fm(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ir&&ew(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ew({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(r){const e=r.auth,n=await r.getIdToken(),s=await Bl(r,ah(e,{idToken:n}));Te(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?aE(l.providerUserInfo):[],f=iw(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!f?.length,y=p?g:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,A)}async function nw(r){const e=_t(r);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function aE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(r,e){const n=await rE(r,{},async()=>{const s=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await sE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&uo(r.emulatorConfig.host)&&(g.credentials="include"),iE.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sw(r,e){return es(r,"POST","/v2/accounts:revokeToken",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Tv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await rw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new Wa;return s&&(Te(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Te(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(Te(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Kn{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new tw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _m(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J1(this,e)}reload(){return nw(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Bl(this,W1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,A=n.lastLoginAt??void 0,{uid:b,emailVerified:I,isAnonymous:B,providerData:K,stsTokenManager:ne}=n;Te(b&&ne,e,"internal-error");const te=Wa.fromJSON(this.name,ne);Te(typeof b=="string",e,"internal-error"),Mr(s,e.name),Mr(l,e.name),Te(typeof I=="boolean",e,"internal-error"),Te(typeof B=="boolean",e,"internal-error"),Mr(c,e.name),Mr(f,e.name),Mr(p,e.name),Mr(g,e.name),Mr(y,e.name),Mr(A,e.name);const he=new Kn({uid:b,auth:e,email:l,emailVerified:I,displayName:s,isAnonymous:B,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:te,createdAt:y,lastLoginAt:A});return K&&Array.isArray(K)&&(he.providerData=K.map(se=>({...se}))),g&&(he._redirectEventId=g),he}static async _fromIdTokenResponse(e,n,s=!1){const l=new Wa;l.updateFromServerResponse(n);const c=new Kn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await oh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Te(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?aE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Wa;p.updateFromIdToken(s);const g=new Kn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new _m(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function $i(r){er(r instanceof Function,"Expected a class definition");let e=Av.get(r);return e?(er(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Av.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oE.type="NONE";const Sv=oE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ja{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Yc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Yc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?Kn._fromGetAccountInfoResponse(this.auth,n,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ja($i(Sv),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||$i(Sv);const f=Yc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const A=await y._get(f);if(A){let b;if(typeof A=="string"){const I=await ah(e,{idToken:A}).catch(()=>{});if(!I)break;b=await Kn._fromGetAccountInfoResponse(e,I,A)}else b=Kn._fromJSON(e,A);y!==c&&(p=b),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ja(c,e,s):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Ja(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dE(e))return"Blackberry";if(mE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||cE(e))&&!e.includes("edge/"))return"Chrome";if(fE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function lE(r=en()){return/firefox\//i.test(r)}function uE(r=en()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cE(r=en()){return/crios\//i.test(r)}function hE(r=en()){return/iemobile/i.test(r)}function fE(r=en()){return/android/i.test(r)}function dE(r=en()){return/blackberry/i.test(r)}function mE(r=en()){return/webos/i.test(r)}function Gm(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function aw(r=en()){return Gm(r)&&!!window.navigator?.standalone}function ow(){return vb()&&document.documentMode===10}function pE(r=en()){return Gm(r)||fE(r)||mE(r)||dE(r)||/windows phone/i.test(r)||hE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(r,e=[]){let n;switch(r){case"Browser":n=bv(en());break;case"Worker":n=`${bv(en())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(r,e={}){return es(r,"GET","/v2/passwordPolicy",Jr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=6;class hw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),s=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Un(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Zi(this));const n=e?_t(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uw(this),n=new hw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await sw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&B1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function $s(r){return _t(r)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ib(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dw(r){wh=r}function yE(r){return wh.loadJS(r)}function mw(){return wh.recaptchaEnterpriseScript}function pw(){return wh.gapiScript}function gw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class yw{constructor(){this.enterprise=new _w}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _w{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vw="recaptcha-enterprise",_E="NO_RECAPTCHA";class Ew{constructor(e){this.type=vw,this.auth=$s(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{Z1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new $1(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,f,p){const g=window.grecaptcha;Ev(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{f(y)}).catch(()=>{f(_E)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yw().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(p=>{if(!n&&Ev(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=mw();g.length!==0&&(g+=p),yE(g).then(()=>{l(p,c,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Rv(r,e,n,s=!1,l=!1){const c=new Ew(r);let f;if(l)f=_E;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vm(r,e,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Rv(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Rv(r,e,n,n==="getOobCode");return s(r,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r,e){const n=Bm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Gs(c,e??{}))return l;Yn(l,"already-initialized")}return n.initialize({options:e})}function Aw(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map($i);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function Sw(r,e,n){const s=$s(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=vE(e),{host:f,port:p}=bw(e),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},A=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Gs(y,s.config.emulator)&&Gs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,uo(f)?(Q0(`${c}//${f}${g}`),K0("Auth",!0)):ww()}function vE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function bw(r){const e=vE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Iv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Iv(f)}}}function Iv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ww(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,n){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}async function Rw(r,e){return es(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(r,e){return iu(r,"POST","/v1/accounts:signInWithPassword",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(r,e){return iu(r,"POST","/v1/accounts:signInWithEmailLink",Jr(r,e))}async function Nw(r,e){return iu(r,"POST","/v1/accounts:signInWithEmailLink",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Qm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new ql(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new ql(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,n,"signInWithPassword",Iw);case"emailLink":return Cw(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,s,"signUpPassword",Rw);case"emailLink":return Nw(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(r,e){return iu(r,"POST","/v1/accounts:signInWithIdp",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="http://localhost";class Ks extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new Ks(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,eo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:xw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ow(r){const e=Cl(Nl(r)).link,n=e?Cl(Nl(e)).deep_link_id:null,s=Cl(Nl(r)).deep_link_id;return(s?Cl(Nl(s)).link:null)||s||n||e||r}class Km{constructor(e){const n=Cl(Nl(e)),s=n.apiKey??null,l=n.oobCode??null,c=Dw(n.mode??null);Te(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ow(e);try{return new Km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return ql._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Km.parseLink(n);return Te(s,"argument-error"),ql._fromEmailAndCode(e,s.code,s.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends EE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends ru{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ks._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return kr.credential(n,s)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends ru{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends ru{constructor(){super("twitter.com")}static credential(e,n){return Ks._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(r,e){return iu(r,"POST","/v1/accounts:signUp",Jr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Kn._fromIdTokenResponse(e,s,l),f=Cv(s);return new Ys({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Cv(s);return new Ys({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Cv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends ir{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new lh(e,n,s,l)}}function TE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(r,c,e,s):c})}async function Mw(r,e,n=!1){const s=await Bl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ys._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pw(r,e,n=!1){const{auth:s}=r;if(Un(s.app))return Promise.reject(Zi(s));const l="reauthenticate";try{const c=await Bl(r,TE(s,l,e,r),n);Te(c.idToken,s,"internal-error");const f=Fm(c.idToken);Te(f,s,"internal-error");const{sub:p}=f;return Te(r.uid===p,s,"user-mismatch"),Ys._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(r,e,n=!1){if(Un(r.app))return Promise.reject(Zi(r));const s="signIn",l=await TE(r,s,e),c=await Ys._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function kw(r,e){return AE($s(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(r){const e=$s(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Lw(r,e,n){if(Un(r.app))return Promise.reject(Zi(r));const s=$s(r),f=await vm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vw).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&SE(r),g}),p=await Ys._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(p.user),p}function Uw(r,e,n){return Un(r.app)?Promise.reject(Zi(r)):kw(_t(r),ho.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SE(r),s})}function jw(r,e,n,s){return _t(r).onIdTokenChanged(e,n,s)}function zw(r,e,n){return _t(r).beforeAuthStateChanged(e,n)}function Bw(r,e,n,s){return _t(r).onAuthStateChanged(e,n,s)}function bE(r){return _t(r).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=1e3,Hw=10;class RE extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);ow()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Hw):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const Fw=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IE.type="SESSION";const CE=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Rh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await Gw(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=Ym("",20);l.port1.start();const A=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(b){const I=b;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(I.data.response);break;default:clearTimeout(A),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function Kw(r){pi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function Yw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xw(){return navigator?.serviceWorker?.controller||null}function $w(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebaseLocalStorageDb",Zw=1,ch="firebaseLocalStorage",DE="fbase_key";class su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(r,e){return r.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function Ww(){const r=indexedDB.deleteDatabase(xE);return new su(r).toPromise()}function Em(){const r=indexedDB.open(xE,Zw);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ch,{keyPath:DE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ch)?e(s):(s.close(),await Ww(),e(await Em()))})})}async function Nv(r,e,n){const s=Ih(r,!0).put({[DE]:e,value:n});return new su(s).toPromise()}async function Jw(r,e){const n=Ih(r,!1).get(e),s=await new su(n).toPromise();return s===void 0?null:s.value}function xv(r,e){const n=Ih(r,!0).delete(e);return new su(n).toPromise()}const eR=800,tR=3;class OE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>tR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance($w()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Yw(),!this.activeServiceWorker)return;this.sender=new Qw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await Nv(e,uh,"1"),await xv(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Jw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ih(l,!1).getAll();return new su(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OE.type="LOCAL";const nR=OE;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r,e){return e?$i(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rR(r){return AE(r.auth,new Xm(r),r.bypassAuthState)}function sR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Pw(n,new Xm(r),r.bypassAuthState)}async function aR(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Mw(n,new Xm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rR;case"linkViaPopup":case"linkViaRedirect":return aR;case"reauthViaPopup":case"reauthViaRedirect":return sR;default:Yn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new nu(2e3,1e4);class $a extends VE{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oR.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="pendingRedirect",Xc=new Map;class uR extends VE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const s=await cR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cR(r,e){const n=dR(e),s=fR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function hR(r,e){Xc.set(r._key(),e)}function fR(r){return $i(r._redirectPersistence)}function dR(r){return Yc(lR,r.config.apiKey,r.name)}async function mR(r,e,n=!1){if(Un(r.app))return Promise.reject(Zi(r));const s=$s(r),l=iR(s,e),f=await new uR(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=600*1e3;class gR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ME(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ME({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function yR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(r,e={}){return es(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ER=/^https?/;async function TR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _R(r);for(const n of e)try{if(AR(n))return}catch{}Yn(r,"unauthorized-domain")}function AR(r){const e=ym(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!ER.test(n))return!1;if(vR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new nu(3e4,6e4);function Ov(){const r=pi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function bR(r){return new Promise((e,n)=>{function s(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(mi(r,"network-request-failed"))},timeout:SR.get()})}if(pi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(pi().gapi?.load)s();else{const l=gw("iframefcb");return pi()[l]=()=>{gapi.load?s():n(mi(r,"network-request-failed"))},yE(`${pw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw $c=null,e})}let $c=null;function wR(r){return $c=$c||bR(r),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new nu(5e3,15e3),IR="__/auth/iframe",CR="emulator/auth/iframe",NR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DR(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Hm(e,CR):`https://${r.config.authDomain}/${IR}`,s={apiKey:e.apiKey,appName:r.name,v:co},l=xR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${tu(s).slice(1)}`}async function OR(r){const e=await wR(r),n=pi().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:DR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=mi(r,"network-request-failed"),p=pi().setTimeout(()=>{c(f)},RR.get());function g(){pi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MR=500,PR=600,kR="_blank",LR="http://localhost";class Vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UR(r,e,n,s=MR,l=PR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...VR,width:s.toString(),height:l.toString(),top:c,left:f},y=en().toLowerCase();n&&(p=cE(y)?kR:n),lE(y)&&(e=e||LR,g.scrollbars="yes");const A=Object.entries(g).reduce((I,[B,K])=>`${I}${B}=${K},`,"");if(aw(y)&&p!=="_self")return jR(e||"",p),new Vv(null);const b=window.open(e||"",p,A);Te(b,r,"popup-blocked");try{b.focus()}catch{}return new Vv(b)}function jR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="__/auth/handler",BR="emulator/auth/handler",qR=encodeURIComponent("fac");async function Mv(r,e,n,s,l,c){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:co,eventId:l};if(e instanceof EE){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Rb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,b]of Object.entries({}))f[A]=b}if(e instanceof ru){const A=e.getScopes().filter(b=>b!=="");A.length>0&&(f.scopes=A.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const A of Object.keys(p))p[A]===void 0&&delete p[A];const g=await r._getAppCheckToken(),y=g?`#${qR}=${encodeURIComponent(g)}`:"";return`${HR(r)}?${tu(p).slice(1)}${y}`}function HR({config:r}){return r.emulator?Hm(r,BR):`https://${r.authDomain}/${zR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class FR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=mR,this._overrideRedirectResult=hR}async _openPopup(e,n,s,l){er(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Mv(e,n,s,ym(),l);return UR(e,c,Ym())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await Mv(e,n,s,ym(),l);return Kw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(er(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await OR(e),s=new gR(e);return n.register("authEvent",l=>(Te(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sm,{type:sm},l=>{const c=l?.[0]?.[sm];c!==void 0&&n(!!c),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pE()||uE()||Gm()}}const GR=FR;var Pv="@firebase/auth",kv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YR(r){no(new Qs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gE(r)},y=new fw(s,l,c,g);return Aw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),no(new Qs("auth-internal",e=>{const n=$s(e.getProvider("auth").getImmediate());return(s=>new QR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(Pv,kv,KR(r)),qr(Pv,kv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=300,$R=G0("authIdTokenMaxAge")||XR;let Lv=null;const ZR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$R)return;const l=n?.token;Lv!==l&&(Lv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function WR(r=Z0()){const e=Bm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Tw(r,{popupRedirectResolver:GR,persistence:[nR,Fw,CE]}),s=G0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=ZR(c.toString());zw(n,f,()=>f(n.currentUser)),jw(n,p=>f(p))}}const l=H0("auth");return l&&Sw(n,`http://${l}`),n}function JR(){return document.getElementsByTagName("head")?.[0]??document}dw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=mi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",JR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YR("Browser");var Uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,PE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function C(){}C.prototype=w.prototype,D.D=w.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(O,M,P){for(var x=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)x[Rt-2]=arguments[Rt];return w.prototype[M].apply(O,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,w,C){C||(C=0);var O=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)O[M]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(M=0;16>M;++M)O[M]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=D.g[0],C=D.g[1],M=D.g[2];var P=D.g[3],x=w+(P^C&(M^P))+O[0]+3614090360&4294967295;w=C+(x<<7&4294967295|x>>>25),x=P+(M^w&(C^M))+O[1]+3905402710&4294967295,P=w+(x<<12&4294967295|x>>>20),x=M+(C^P&(w^C))+O[2]+606105819&4294967295,M=P+(x<<17&4294967295|x>>>15),x=C+(w^M&(P^w))+O[3]+3250441966&4294967295,C=M+(x<<22&4294967295|x>>>10),x=w+(P^C&(M^P))+O[4]+4118548399&4294967295,w=C+(x<<7&4294967295|x>>>25),x=P+(M^w&(C^M))+O[5]+1200080426&4294967295,P=w+(x<<12&4294967295|x>>>20),x=M+(C^P&(w^C))+O[6]+2821735955&4294967295,M=P+(x<<17&4294967295|x>>>15),x=C+(w^M&(P^w))+O[7]+4249261313&4294967295,C=M+(x<<22&4294967295|x>>>10),x=w+(P^C&(M^P))+O[8]+1770035416&4294967295,w=C+(x<<7&4294967295|x>>>25),x=P+(M^w&(C^M))+O[9]+2336552879&4294967295,P=w+(x<<12&4294967295|x>>>20),x=M+(C^P&(w^C))+O[10]+4294925233&4294967295,M=P+(x<<17&4294967295|x>>>15),x=C+(w^M&(P^w))+O[11]+2304563134&4294967295,C=M+(x<<22&4294967295|x>>>10),x=w+(P^C&(M^P))+O[12]+1804603682&4294967295,w=C+(x<<7&4294967295|x>>>25),x=P+(M^w&(C^M))+O[13]+4254626195&4294967295,P=w+(x<<12&4294967295|x>>>20),x=M+(C^P&(w^C))+O[14]+2792965006&4294967295,M=P+(x<<17&4294967295|x>>>15),x=C+(w^M&(P^w))+O[15]+1236535329&4294967295,C=M+(x<<22&4294967295|x>>>10),x=w+(M^P&(C^M))+O[1]+4129170786&4294967295,w=C+(x<<5&4294967295|x>>>27),x=P+(C^M&(w^C))+O[6]+3225465664&4294967295,P=w+(x<<9&4294967295|x>>>23),x=M+(w^C&(P^w))+O[11]+643717713&4294967295,M=P+(x<<14&4294967295|x>>>18),x=C+(P^w&(M^P))+O[0]+3921069994&4294967295,C=M+(x<<20&4294967295|x>>>12),x=w+(M^P&(C^M))+O[5]+3593408605&4294967295,w=C+(x<<5&4294967295|x>>>27),x=P+(C^M&(w^C))+O[10]+38016083&4294967295,P=w+(x<<9&4294967295|x>>>23),x=M+(w^C&(P^w))+O[15]+3634488961&4294967295,M=P+(x<<14&4294967295|x>>>18),x=C+(P^w&(M^P))+O[4]+3889429448&4294967295,C=M+(x<<20&4294967295|x>>>12),x=w+(M^P&(C^M))+O[9]+568446438&4294967295,w=C+(x<<5&4294967295|x>>>27),x=P+(C^M&(w^C))+O[14]+3275163606&4294967295,P=w+(x<<9&4294967295|x>>>23),x=M+(w^C&(P^w))+O[3]+4107603335&4294967295,M=P+(x<<14&4294967295|x>>>18),x=C+(P^w&(M^P))+O[8]+1163531501&4294967295,C=M+(x<<20&4294967295|x>>>12),x=w+(M^P&(C^M))+O[13]+2850285829&4294967295,w=C+(x<<5&4294967295|x>>>27),x=P+(C^M&(w^C))+O[2]+4243563512&4294967295,P=w+(x<<9&4294967295|x>>>23),x=M+(w^C&(P^w))+O[7]+1735328473&4294967295,M=P+(x<<14&4294967295|x>>>18),x=C+(P^w&(M^P))+O[12]+2368359562&4294967295,C=M+(x<<20&4294967295|x>>>12),x=w+(C^M^P)+O[5]+4294588738&4294967295,w=C+(x<<4&4294967295|x>>>28),x=P+(w^C^M)+O[8]+2272392833&4294967295,P=w+(x<<11&4294967295|x>>>21),x=M+(P^w^C)+O[11]+1839030562&4294967295,M=P+(x<<16&4294967295|x>>>16),x=C+(M^P^w)+O[14]+4259657740&4294967295,C=M+(x<<23&4294967295|x>>>9),x=w+(C^M^P)+O[1]+2763975236&4294967295,w=C+(x<<4&4294967295|x>>>28),x=P+(w^C^M)+O[4]+1272893353&4294967295,P=w+(x<<11&4294967295|x>>>21),x=M+(P^w^C)+O[7]+4139469664&4294967295,M=P+(x<<16&4294967295|x>>>16),x=C+(M^P^w)+O[10]+3200236656&4294967295,C=M+(x<<23&4294967295|x>>>9),x=w+(C^M^P)+O[13]+681279174&4294967295,w=C+(x<<4&4294967295|x>>>28),x=P+(w^C^M)+O[0]+3936430074&4294967295,P=w+(x<<11&4294967295|x>>>21),x=M+(P^w^C)+O[3]+3572445317&4294967295,M=P+(x<<16&4294967295|x>>>16),x=C+(M^P^w)+O[6]+76029189&4294967295,C=M+(x<<23&4294967295|x>>>9),x=w+(C^M^P)+O[9]+3654602809&4294967295,w=C+(x<<4&4294967295|x>>>28),x=P+(w^C^M)+O[12]+3873151461&4294967295,P=w+(x<<11&4294967295|x>>>21),x=M+(P^w^C)+O[15]+530742520&4294967295,M=P+(x<<16&4294967295|x>>>16),x=C+(M^P^w)+O[2]+3299628645&4294967295,C=M+(x<<23&4294967295|x>>>9),x=w+(M^(C|~P))+O[0]+4096336452&4294967295,w=C+(x<<6&4294967295|x>>>26),x=P+(C^(w|~M))+O[7]+1126891415&4294967295,P=w+(x<<10&4294967295|x>>>22),x=M+(w^(P|~C))+O[14]+2878612391&4294967295,M=P+(x<<15&4294967295|x>>>17),x=C+(P^(M|~w))+O[5]+4237533241&4294967295,C=M+(x<<21&4294967295|x>>>11),x=w+(M^(C|~P))+O[12]+1700485571&4294967295,w=C+(x<<6&4294967295|x>>>26),x=P+(C^(w|~M))+O[3]+2399980690&4294967295,P=w+(x<<10&4294967295|x>>>22),x=M+(w^(P|~C))+O[10]+4293915773&4294967295,M=P+(x<<15&4294967295|x>>>17),x=C+(P^(M|~w))+O[1]+2240044497&4294967295,C=M+(x<<21&4294967295|x>>>11),x=w+(M^(C|~P))+O[8]+1873313359&4294967295,w=C+(x<<6&4294967295|x>>>26),x=P+(C^(w|~M))+O[15]+4264355552&4294967295,P=w+(x<<10&4294967295|x>>>22),x=M+(w^(P|~C))+O[6]+2734768916&4294967295,M=P+(x<<15&4294967295|x>>>17),x=C+(P^(M|~w))+O[13]+1309151649&4294967295,C=M+(x<<21&4294967295|x>>>11),x=w+(M^(C|~P))+O[4]+4149444226&4294967295,w=C+(x<<6&4294967295|x>>>26),x=P+(C^(w|~M))+O[11]+3174756917&4294967295,P=w+(x<<10&4294967295|x>>>22),x=M+(w^(P|~C))+O[2]+718787259&4294967295,M=P+(x<<15&4294967295|x>>>17),x=C+(P^(M|~w))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+P&4294967295}s.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var C=w-this.blockSize,O=this.B,M=this.h,P=0;P<w;){if(M==0)for(;P<=C;)l(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<w;)if(O[M++]=D.charCodeAt(P++),M==this.blockSize){l(this,O),M=0;break}}else for(;P<w;)if(O[M++]=D[P++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=w},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var C=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=C&255,C/=256;for(this.u(D),D=Array(16),w=C=0;4>w;++w)for(var O=0;32>O;O+=8)D[C++]=this.g[w]>>>O&255;return D};function c(D,w){var C=p;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=w(D)}function f(D,w){this.h=w;for(var C=[],O=!0,M=D.length-1;0<=M;M--){var P=D[M]|0;O&&P==w||(C[M]=P,O=!1)}this.g=C}var p={};function g(D){return-128<=D&&128>D?c(D,function(w){return new f([w|0],0>w?-1:0)}):new f([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return te(y(-D));for(var w=[],C=1,O=0;D>=C;O++)w[O]=D/C|0,C*=4294967296;return new f(w,0)}function A(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return te(A(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(w,8)),O=b,M=0;M<D.length;M+=8){var P=Math.min(8,D.length-M),x=parseInt(D.substring(M,M+P),w);8>P?(P=y(Math.pow(w,P)),O=O.j(P).add(y(x))):(O=O.j(C),O=O.add(y(x)))}return O}var b=g(0),I=g(1),B=g(16777216);r=f.prototype,r.m=function(){if(ne(this))return-te(this).m();for(var D=0,w=1,C=0;C<this.g.length;C++){var O=this.i(C);D+=(0<=O?O:4294967296+O)*w,w*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(ne(this))return"-"+te(this).toString(D);for(var w=y(Math.pow(D,6)),C=this,O="";;){var M=ee(C,w).g;C=he(C,M.j(w));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=M,K(C))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function ne(D){return D.h==-1}r.l=function(D){return D=he(this,D),ne(D)?-1:K(D)?0:1};function te(D){for(var w=D.g.length,C=[],O=0;O<w;O++)C[O]=~D.g[O];return new f(C,~D.h).add(I)}r.abs=function(){return ne(this)?te(this):this},r.add=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],O=0,M=0;M<=w;M++){var P=O+(this.i(M)&65535)+(D.i(M)&65535),x=(P>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);O=x>>>16,P&=65535,x&=65535,C[M]=x<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function he(D,w){return D.add(te(w))}r.j=function(D){if(K(this)||K(D))return b;if(ne(this))return ne(D)?te(this).j(te(D)):te(te(this).j(D));if(ne(D))return te(this.j(te(D)));if(0>this.l(B)&&0>D.l(B))return y(this.m()*D.m());for(var w=this.g.length+D.g.length,C=[],O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<D.g.length;M++){var P=this.i(O)>>>16,x=this.i(O)&65535,Rt=D.i(M)>>>16,it=D.i(M)&65535;C[2*O+2*M]+=x*it,se(C,2*O+2*M),C[2*O+2*M+1]+=P*it,se(C,2*O+2*M+1),C[2*O+2*M+1]+=x*Rt,se(C,2*O+2*M+1),C[2*O+2*M+2]+=P*Rt,se(C,2*O+2*M+2)}for(O=0;O<w;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=w;O<2*w;O++)C[O]=0;return new f(C,0)};function se(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function re(D,w){this.g=D,this.h=w}function ee(D,w){if(K(w))throw Error("division by zero");if(K(D))return new re(b,b);if(ne(D))return w=ee(te(D),w),new re(te(w.g),te(w.h));if(ne(w))return w=ee(D,te(w)),new re(te(w.g),w.h);if(30<D.g.length){if(ne(D)||ne(w))throw Error("slowDivide_ only works with positive integers.");for(var C=I,O=w;0>=O.l(D);)C=H(C),O=H(O);var M=ce(C,1),P=ce(O,1);for(O=ce(O,2),C=ce(C,2);!K(O);){var x=P.add(O);0>=x.l(D)&&(M=M.add(C),P=x),O=ce(O,1),C=ce(C,1)}return w=he(D,M.j(w)),new re(M,w)}for(M=b;0<=D.l(w);){for(C=Math.max(1,Math.floor(D.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(C),x=P.j(w);ne(x)||0<x.l(D);)C-=O,P=y(C),x=P.j(w);K(P)&&(P=I),M=M.add(P),D=he(D,x)}return new re(M,D)}r.A=function(D){return ee(this,D).h},r.and=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)&D.i(O);return new f(C,this.h&D.h)},r.or=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)|D.i(O);return new f(C,this.h|D.h)},r.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)^D.i(O);return new f(C,this.h^D.h)};function H(D){for(var w=D.g.length+1,C=[],O=0;O<w;O++)C[O]=D.i(O)<<1|D.i(O-1)>>>31;return new f(C,D.h)}function ce(D,w){var C=w>>5;w%=32;for(var O=D.g.length-C,M=[],P=0;P<O;P++)M[P]=0<w?D.i(P+C)>>>w|D.i(P+C+1)<<32-w:D.i(P+C);return new f(M,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,PE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=A,Hr=f}).apply(typeof Uv<"u"?Uv:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kE,xl,LE,Zc,Tm,UE,jE,zE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in _))break e;_=_[L]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,S=!1,L={next:function(){if(!S&&_<u.length){var F=_++;return{value:m(F,u[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,_){return u.call.apply(u.bind,arguments)}function b(u,m,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:b,I.apply(null,arguments)}function B(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function K(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,L,F){for(var ae=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ae[ke-2]=arguments[ke];return m.prototype[L].apply(S,ae)}}function ne(u){const m=u.length;if(0<m){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function te(u,m){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(g(S)){const L=u.length||0,F=S.length||0;u.length=L+F;for(let ae=0;ae<F;ae++)u[L+ae]=S[ae]}else u.push(S)}}class he{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function se(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ee(u){return ee[" "](u),u}ee[" "]=function(){};var H=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ce(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function w(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(_ in S)u[_]=S[_];for(let F=0;F<C.length;F++)_=C[F],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){p.setTimeout(()=>{throw u},0)}function x(){var u=be;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Rt{constructor(){this.h=this.g=null}add(m,_){const S=it.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var it=new he(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let G,le=!1,be=new Rt,N=()=>{const u=p.Promise.resolve(void 0);G=()=>{u.then(Z)}};var Z=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(_){P(_)}var m=it;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}le=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function ge(u,m){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(H){e:{try{ee(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ge.aa.h.call(this)}}K(ge,ie);var we={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),We=0;function $n(u,m,_,S,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=L,this.key=++We,this.da=this.fa=!1}function sr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ai(u){this.src=u,this.g={},this.h=0}Ai.prototype.add=function(u,m,_,S,L){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var ae=rs(u,m,S,L);return-1<ae?(m=u[ae],_||(m.fa=!1)):(m=new $n(m,this.src,F,!!S,L),m.fa=_,u.push(m)),m};function is(u,m){var _=m.type;if(_ in u.g){var S=u.g[_],L=Array.prototype.indexOf.call(S,m,void 0),F;(F=0<=L)&&Array.prototype.splice.call(S,L,1),F&&(sr(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function rs(u,m,_,S){for(var L=0;L<u.length;++L){var F=u[L];if(!F.da&&F.listener==m&&F.capture==!!_&&F.ha==S)return L}return-1}var ss="closure_lm_"+(1e6*Math.random()|0),_o={};function yu(u,m,_,S,L){if(Array.isArray(m)){for(var F=0;F<m.length;F++)yu(u,m[F],_,S,L);return null}return _=_u(_),u&&u[Vt]?u.K(m,_,y(S)?!!S.capture:!1,L):wn(u,m,_,!1,S,L)}function wn(u,m,_,S,L,F){if(!m)throw Error("Invalid event type");var ae=y(L)?!!L.capture:!!L,ke=ta(u);if(ke||(u[ss]=ke=new Ai(u)),_=ke.add(m,_,S,ae,F),_.proxy)return _;if(S=Qh(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)pe||(L=ae),L===void 0&&(L=!1),u.addEventListener(m.toString(),S,L);else if(u.attachEvent)u.attachEvent(as(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Qh(){function u(_){return m.call(u.src,u.listener,_)}const m=Kh;return u}function vo(u,m,_,S,L){if(Array.isArray(m))for(var F=0;F<m.length;F++)vo(u,m[F],_,S,L);else S=y(S)?!!S.capture:!!S,_=_u(_),u&&u[Vt]?(u=u.i,m=String(m).toString(),m in u.g&&(F=u.g[m],_=rs(F,_,S,L),-1<_&&(sr(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete u.g[m],u.h--)))):u&&(u=ta(u))&&(m=u.g[m.toString()],u=-1,m&&(u=rs(m,_,S,L)),(_=-1<u?m[u]:null)&&ea(_))}function ea(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Vt])is(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(as(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=ta(m))?(is(_,u),_.h==0&&(_.src=null,m[ss]=null)):sr(u)}}}function as(u){return u in _o?_o[u]:_o[u]="on"+u}function Kh(u,m){if(u.da)u=!0;else{m=new ge(m,this);var _=u.listener,S=u.ha||u.src;u.fa&&ea(u),u=_.call(S,m)}return u}function ta(u){return u=u[ss],u instanceof Ai?u:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(u){return typeof u=="function"?u:(u[Eo]||(u[Eo]=function(m){return u.handleEvent(m)}),u[Eo])}function ct(){oe.call(this),this.i=new Ai(this),this.M=this,this.F=null}K(ct,oe),ct.prototype[Vt]=!0,ct.prototype.removeEventListener=function(u,m,_,S){vo(this,u,m,_,S)};function Fe(u,m){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new ie(m,u);else if(m instanceof ie)m.target=m.target||u;else{var L=m;m=new ie(S,u),O(m,L)}if(L=!0,_)for(var F=_.length-1;0<=F;F--){var ae=m.g=_[F];L=dn(ae,S,!0,m)&&L}if(ae=m.g=u,L=dn(ae,S,!0,m)&&L,L=dn(ae,S,!1,m)&&L,_)for(F=0;F<_.length;F++)ae=m.g=_[F],L=dn(ae,S,!1,m)&&L}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],S=0;S<_.length;S++)sr(_[S]);delete u.g[m],u.h--}}this.F=null},ct.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},ct.prototype.L=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function dn(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,F=0;F<m.length;++F){var ae=m[F];if(ae&&!ae.da&&ae.capture==_){var ke=ae.listener,Ct=ae.ha||ae.src;ae.fa&&is(u.i,ae),L=ke.call(Ct,S)!==!1&&L}}return L&&!S.defaultPrevented}function Yt(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function vu(u){u.g=Yt(()=>{u.g=null,u.i&&(u.i=!1,vu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Yh extends oe{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(u){oe.call(this),this.h=u,this.g={}}K(os,oe);var ls=[];function us(u){ce(u.g,function(m,_){this.g.hasOwnProperty(_)&&ea(m)},u),u.g={}}os.prototype.N=function(){os.aa.N.call(this),us(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=p.JSON.stringify,na=p.JSON.parse,cs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function To(){}To.prototype.h=null;function Ao(u){return u.h||(u.h=u.i())}function So(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bi(){ie.call(this,"d")}K(bi,ie);function bo(){ie.call(this,"c")}K(bo,ie);var Zn={},wo=null;function ar(){return wo=wo||new ct}Zn.La="serverreachability";function ia(u){ie.call(this,Zn.La,u)}K(ia,ie);function or(u){const m=ar();Fe(m,new ia(m))}Zn.STAT_EVENT="statevent";function Eu(u,m){ie.call(this,Zn.STAT_EVENT,u),this.stat=m}K(Eu,ie);function rt(u){const m=ar();Fe(m,new Eu(m,u))}Zn.Ma="timingevent";function It(u,m){ie.call(this,Zn.Ma,u),this.size=m}K(It,ie);function vt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Ro(u,m,_,S,L,F){u.info(function(){if(u.g)if(F)for(var ae="",ke=F.split("&"),Ct=0;Ct<ke.length;Ct++){var Le=ke[Ct].split("=");if(1<Le.length){var Pt=Le[0];Le=Le[1];var Nt=Pt.split("_");ae=2<=Nt.length&&Nt[1]=="type"?ae+(Pt+"="+Le+"&"):ae+(Pt+"=redacted&")}}else ae=null;else ae=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+_+`
`+ae})}function Xh(u,m,_,S,L,F,ae){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+_+`
`+F+" "+ae})}function lr(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hs(u,_)+(S?" "+S:"")})}function Tu(u,m){u.info(function(){return"TIMEOUT: "+m})}Rn.prototype.info=function(){};function hs(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return Bn(_)}catch{return m}}var ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wn;function Jn(){}K(Jn,To),Jn.prototype.g=function(){return new XMLHttpRequest},Jn.prototype.i=function(){return{}},Wn=new Jn;function tn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.R=S||1,this.U=new os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var Io={},ra={};function qn(u,m,_){u.L=1,u.v=gs(mn(m)),u.m=_,u.P=!0,Ri(u,null)}function Ri(u,m){u.F=Date.now(),fs(u),u.A=mn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Vo(_.i,"t",S),u.C=0,_=u.j.J,u.h=new mt,u.g=Lu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Yh(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ls[0]=L.toString()),L=ls);for(var F=0;F<L.length;F++){var ae=yu(_,L[F],S||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),or(),Ro(u.i,u.u,u.A,u.l,u.R,u.m)}tn.prototype.ca=function(u){u=u.target;const m=this.M;m&&xn(u)==3?m.j():this.Y(u)},tn.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=xn(this.g);var m=this.g.Ba();const Mi=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||Nt!=4||m==7||(m==8||0>=Mi?or(3):or(2)),cr(this);var _=this.g.Z();this.X=_;t:if(Au(this)){var S=Nu(this.g);u="";var L=S.length,F=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ei(this);var ae="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(S[m],{stream:!(F&&m==L-1)});S.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Xh(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,Ct=this.g;if((ke=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(ke)){var Le=ke;break t}}Le=null}if(_=Le)lr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,_);else{this.o=!1,this.s=3,rt(12),zt(this),ei(this);break e}}if(this.P){_=!0;let Bt;for(;!this.J&&this.C<ae.length;)if(Bt=Su(this,ae),Bt==ra){Nt==4&&(this.s=4,rt(14),_=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Io){this.s=4,rt(15),lr(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else lr(this.i,this.l,Bt,null),ds(this,Bt);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ae.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)lr(this.i,this.l,ae,"[Invalid Chunked Response]"),zt(this),ei(this);else if(0<ae.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),bs(Pt),Pt.M=!0,rt(11))}}else lr(this.i,this.l,ae,null),ds(this,ae);Nt==4&&zt(this),this.o&&!this.J&&(Nt==4?Mu(this.j,this):(this.o=!1,fs(this)))}else ef(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),ei(this)}}}catch{}finally{}};function Au(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Su(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?ra:(_=Number(m.substring(_,S)),isNaN(_)?Io:(S+=1,S+_>m.length?ra:(m=m.slice(S,S+_),u.C=S+_,m)))}tn.prototype.cancel=function(){this.J=!0,zt(this)};function fs(u){u.S=Date.now()+u.I,bu(u,u.I)}function bu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vt(I(u.ba,u),m)}function cr(u){u.B&&(p.clearTimeout(u.B),u.B=null)}tn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Tu(this.i,this.A),this.L!=2&&(or(),rt(17)),zt(this),this.s=2,ei(this)):bu(this,this.S-u)};function ei(u){u.j.G==0||u.J||Mu(u.j,u)}function zt(u){cr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,us(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ds(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Co(_.h,u))){if(!u.K&&Co(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ga(_),ma(_);else break e;Uo(_),rt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=vt(I(_.Za,_),6e3));if(1>=aa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Vi(_,11)}else if((u.K||_.g==u)&&ga(_),!se(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Le=L[m];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Pt=Le[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const Nt=Le[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const Mi=Le[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(S=1.5*Mi,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Bt=u.g;if(Bt){const oi=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var F=S.h;F.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(oa(F,F.h),F.h=null))}if(S.D){const zo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(S.ya=zo,Ke(S.I,S.D,zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ae=u;if(S.qa=ku(S,S.J?S.ia:null,S.W),ae.K){nn(S.h,ae);var ke=ae,Ct=S.L;Ct&&(ke.I=Ct),ke.B&&(cr(ke),fs(ke)),S.g=ae}else Ou(S);0<_.i.length&&pa(_)}else Le[0]!="stop"&&Le[0]!="close"||Vi(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Vi(_,7):ko(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}or(4)}catch{}}var wu=class{constructor(u,m){this.g=u,this.map=m}};function Ii(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function aa(u){return u.h?1:u.g?u.g.size:0}function Co(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function oa(u,m){u.g?u.g.add(m):u.h=m}function nn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ii.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function No(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return ne(u.i)}function $h(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,S=0;S<_;S++)m.push(u[S]);return m}m=[],_=0;for(S in u)m[_++]=u[S];return m}function la(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const S in u)m[_++]=S;return m}}}function xo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=la(u),S=$h(u),L=S.length,F=0;F<L;F++)m.call(void 0,S[F],_&&_[F],u)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),L=null;if(0<=S){var F=u[_].substring(0,S);L=u[_].substring(S+1)}else F=u[_];m(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Et(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Et){this.h=u.h,ps(this,u.j),this.o=u.o,this.g=u.g,hr(this,u.s),this.l=u.l;var m=u.i,_=new Ni;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ci(this,_),this.m=u.m}else u&&(m=String(u).match(ms))?(this.h=!1,ps(this,m[1]||"",!0),this.o=In(m[2]||""),this.g=In(m[3]||"",!0),hr(this,m[4]),this.l=In(m[5]||"",!0),Ci(this,m[6]||"",!0),this.m=In(m[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Et.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ys(m,Do,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ys(m,Do,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ys(_,_.charAt(0)=="/"?Wh:Oo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ys(_,ua)),u.join("")};function mn(u){return new Et(u)}function ps(u,m,_){u.j=_?In(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function hr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ci(u,m,_){m instanceof Ni?(u.i=m,Iu(u.i,u.h)):(_||(m=ys(m,Jh)),u.i=new Ni(m,u.h))}function Ke(u,m,_){u.i.set(m,_)}function gs(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function In(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ru),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ru(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Do=/[#\/\?@]/g,Oo=/[#\?:]/g,Wh=/[#\?]/g,Jh=/[#\?@]/g,ua=/#/g;function Ni(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Cn(u){u.g||(u.g=new Map,u.h=0,u.i&&Zh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ni.prototype,r.add=function(u,m){Cn(this),this.i=null,u=ti(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function xi(u,m){Cn(u),m=ti(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Di(u,m){return Cn(u),m=ti(u,m),u.g.has(m)}r.forEach=function(u,m){Cn(this),this.g.forEach(function(_,S){_.forEach(function(L){u.call(m,L,S,this)},this)},this)},r.na=function(){Cn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let S=0;S<m.length;S++){const L=u[S];for(let F=0;F<L.length;F++)_.push(m[S])}return _},r.V=function(u){Cn(this);let m=[];if(typeof u=="string")Di(this,u)&&(m=m.concat(this.g.get(ti(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Cn(this),this.i=null,u=ti(this,u),Di(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Vo(u,m,_){xi(u,m),0<_.length&&(u.i=null,u.g.set(ti(u,m),ne(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var S=m[_];const F=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var L=F;ae[S]!==""&&(L+="="+encodeURIComponent(String(ae[S]))),u.push(L)}}return this.i=u.join("&")};function ti(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Iu(u,m){m&&!u.j&&(Cn(u),u.i=null,u.g.forEach(function(_,S){var L=S.toLowerCase();S!=L&&(xi(this,S),Vo(this,L,_))},u)),u.j=m}function _s(u,m){const _=new Rn;if(p.Image){const S=new Image;S.onload=B(Nn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=B(Nn,_,"TestLoadImage: error",!1,m,S),S.onabort=B(Nn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=B(Nn,_,"TestLoadImage: timeout",!1,m,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Hn(u,m){const _=new Rn,S=new AbortController,L=setTimeout(()=>{S.abort(),Nn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?Nn(_,"TestPingServer: ok",!0,m):Nn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Nn(_,"TestPingServer: error",!1,m)})}function Nn(u,m,_,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(_)}catch{}}function vs(){this.g=new cs}function ni(u,m,_){const S=_||"";try{xo(u,function(L,F){let ae=L;y(L)&&(ae=Bn(L)),m.push(S+F+"="+encodeURIComponent(ae))})}catch(L){throw m.push(S+"type="+encodeURIComponent("_badmap")),L}}function fr(u){this.l=u.Ub||null,this.j=u.eb||!1}K(fr,To),fr.prototype.g=function(){return new Oi(this.l,this.j)},fr.prototype.i=(function(u){return function(){return u}})({});function Oi(u,m){ct.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Oi,ct),r=Oi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):ri(this),this.readyState==3&&Mo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ii(this))},r.Qa=function(u){this.g&&(this.response=u,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ri(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Po(u){let m="";return ce(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function Mt(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Po(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ke(u,m,_))}function qe(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(qe,ct);var ca=/^https?$/i,Es=["POST","PUT"];r=qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wn.g(),this.v=this.o?Ao(this.o):Ao(Wn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){Cu(this,F);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)_.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())_.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Es,m,void 0))||S||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ae]of _)this.g.setRequestHeader(F,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){Cu(this,F)}};function Cu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ha(u),si(u)}function ha(u){u.A||(u.A=!0,Fe(u,"complete"),Fe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Fe(this,"complete"),Fe(this,"abort"),si(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),si(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},r.bb=function(){fa(this)};function fa(u){if(u.h&&typeof f<"u"&&(!u.v[1]||xn(u)!=4||u.Z()!=2)){if(u.u&&xn(u)==4)Yt(u.Ea,0,u);else if(Fe(u,"readystatechange"),xn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=ae===0){var L=String(u.D).match(ms)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),S=!ca.test(L?L.toLowerCase():"")}_=S}if(_)Fe(u,"complete"),Fe(u,"success");else{u.m=6;try{var F=2<xn(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",ha(u)}}finally{si(u)}}}}function si(u,m){if(u.g){Ts(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Fe(u,"ready");try{_.onreadystatechange=S}catch{}}}function Ts(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function xn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),na(m)}};function Nu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ef(u){const m={};u=(u.g&&2<=xn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(se(u[S]))continue;var _=M(u[S]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=m[L]||[];m[L]=F,F.push(_)}D(m,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function da(u){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,u),this.cb=As("retryDelaySeedMs",1e4,u),this.Wa=As("forwardChannelMaxRetries",2,u),this.wa=As("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(u&&u.concurrentRequestLimit),this.Da=new vs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=da.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,S){rt(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=ku(this,null,this.W),pa(this)};function ko(u){if(xu(u),u.G==3){var m=u.U++,_=mn(u.I);if(Ke(_,"SID",u.K),Ke(_,"RID",m),Ke(_,"TYPE","terminate"),Ss(u,_),m=new tn(u,u.j,m),m.L=2,m.v=gs(mn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),fs(m)}Pu(u)}function ma(u){u.g&&(bs(u),u.g.cancel(),u.g=null)}function xu(u){ma(u),u.u&&(p.clearTimeout(u.u),u.u=null),ga(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function pa(u){if(!sa(u.h)&&!u.s){u.s=!0;var m=u.Ga;G||N(),le||(G(),le=!0),be.add(m,u),u.B=0}}function tf(u,m){return aa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vt(I(u.Ga,u,m),jo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new tn(this,this.j,u);let F=this.o;if(this.S&&(F?(F=w(F),O(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Du(this,L,m),_=mn(this.I),Ke(_,"RID",u),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Ss(this,_),F&&(this.O?m="headers="+encodeURIComponent(String(Po(F)))+"&"+m:this.m&&Mt(_,this.m,F)),oa(this.h,L),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",m),Ke(_,"SID","null"),L.T=!0,qn(L,_,null)):qn(L,_,m),this.G=2}}else this.G==3&&(u?Lo(this,u):this.i.length==0||sa(this.h)||Lo(this))};function Lo(u,m){var _;m?_=m.l:_=u.U++;const S=mn(u.I);Ke(S,"SID",u.K),Ke(S,"RID",_),Ke(S,"AID",u.T),Ss(u,S),u.m&&u.o&&Mt(S,u.m,u.o),_=new tn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Du(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),oa(u.h,_),qn(_,S,m)}function Ss(u,m){u.H&&ce(u.H,function(_,S){Ke(m,S,_)}),u.l&&xo({},function(_,S){Ke(m,S,_)})}function Du(u,m,_){_=Math.min(u.i.length,_);var S=u.l?I(u.l.Na,u.l,u):null;e:{var L=u.i;let F=-1;for(;;){const ae=["count="+_];F==-1?0<_?(F=L[0].g,ae.push("ofs="+F)):F=0:ae.push("ofs="+F);let ke=!0;for(let Ct=0;Ct<_;Ct++){let Le=L[Ct].g;const Pt=L[Ct].map;if(Le-=F,0>Le)F=Math.max(0,L[Ct].g-100),ke=!1;else try{ni(Pt,ae,"req"+Le+"_")}catch{S&&S(Pt)}}if(ke){S=ae.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,S}function Ou(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;G||N(),le||(G(),le=!0),be.add(m,u),u.v=0}}function Uo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vt(I(u.Fa,u),jo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vt(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),ma(this),Vu(this))};function bs(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Vu(u){u.g=new tn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=mn(u.qa);Ke(m,"RID","rpc"),Ke(m,"SID",u.K),Ke(m,"AID",u.T),Ke(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(m,"TO",u.ja),Ke(m,"TYPE","xmlhttp"),Ss(u,m),u.m&&u.o&&Mt(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=gs(mn(m)),_.m=null,_.P=!0,Ri(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ma(this),Uo(this),rt(19))};function ga(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Mu(u,m){var _=null;if(u.g==m){ga(u),bs(u),u.g=null;var S=2}else if(Co(u.h,m))_=m.D,nn(u.h,m),S=1;else return;if(u.G!=0){if(m.o)if(S==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;S=ar(),Fe(S,new It(S,_)),pa(u)}else Ou(u);else if(L=m.s,L==3||L==0&&0<m.X||!(S==1&&tf(u,m)||S==2&&Uo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:Vi(u,5);break;case 4:Vi(u,10);break;case 3:Vi(u,6);break;default:Vi(u,2)}}}function jo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Vi(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),S=u.Xa;const L=!S;S=new Et(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ps(S,"https"),gs(S),L?_s(S.toString(),_):Hn(S.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),Pu(u),xu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Pu(u){if(u.G=0,u.ka=[],u.l){const m=No(u.h);(m.length!=0||u.i.length!=0)&&(te(u.ka,m),te(u.ka,u.i),u.h.i.length=0,ne(u.i),u.i.length=0),u.l.ra()}}function ku(u,m,_){var S=_ instanceof Et?mn(_):new Et(_);if(S.g!="")m&&(S.g=m+"."+S.g),hr(S,S.s);else{var L=p.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var F=new Et(null);S&&ps(F,S),m&&(F.g=m),L&&hr(F,L),_&&(F.l=_),S=F}return _=u.D,m=u.ya,_&&m&&Ke(S,_,m),Ke(S,"VER",u.la),Ss(u,S),S}function Lu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qe(new fr({eb:_})):new qe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}r=Uu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ya(){}ya.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){ct.call(this),this.g=new da(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!se(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!se(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ai(this)}K(rn,ct),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){ko(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Bn(u),u=_);m.i.push(new wu(m.Ya++,u)),m.G==3&&pa(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,rn.aa.N.call(this)};function ju(u){bi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}K(ju,bi);function zu(){bo.call(this),this.status=1}K(zu,bo);function ai(u){this.g=u}K(ai,Uu),ai.prototype.ua=function(){Fe(this.g,"a")},ai.prototype.ta=function(u){Fe(this.g,new ju(u))},ai.prototype.sa=function(u){Fe(this.g,new zu)},ai.prototype.ra=function(){Fe(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,zE=function(){return new ya},jE=function(){return ar()},UE=Zn,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ur.NO_ERROR=0,ur.TIMEOUT=8,ur.HTTP_ERROR=6,Zc=ur,wi.COMPLETE="complete",LE=wi,So.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",ct.prototype.listen=ct.prototype.K,xl=So,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,kE=qe}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const jv="@firebase/firestore",zv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new jm("@firebase/firestore");function Qa(){return Gr.logLevel}function eI(r){Gr.setLogLevel(r)}function fe(r,...e){if(Gr.logLevel<=Ve.DEBUG){const n=e.map($m);Gr.debug(`Firestore (${fo}): ${r}`,...n)}}function tr(r,...e){if(Gr.logLevel<=Ve.ERROR){const n=e.map($m);Gr.error(`Firestore (${fo}): ${r}`,...n)}}function io(r,...e){if(Gr.logLevel<=Ve.WARN){const n=e.map($m);Gr.warn(`Firestore (${fo}): ${r}`,...n)}}function $m(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BE(r,s,n)}function BE(r,e,n){let s=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw tr(s),new Error(s)}function He(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||BE(e,l,s)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Wt.UNAUTHENTICATED)))}shutdown(){}}class nI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class iI{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wi,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class rI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new rI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=oI(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function Am(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return am(l)===am(c)?Me(l,c):am(l)?1:-1}return Me(r.length,e.length)}const lI=55296,uI=57343;function am(r){const e=r.charCodeAt(0);return e>=lI&&e<=uI}function ro(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof di?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=di.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Me(e.length,n.length)}static compareSegments(e,n){const s=di.isNumericId(e),l=di.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?di.extractNumericId(e).compare(di.extractNumericId(n)):Am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class tt extends di{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new tt(n)}static emptyPath(){return new tt([])}}const cI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends di{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return cI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new Qt([qv])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(c(),l++)}if(c(),f)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(tt.fromString(e))}static fromName(e){return new _e(tt.fromString(e).popFirst(5))}static empty(){return new _e(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(r,e,n){if(!n)throw new ue(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function hI(r,e,n,s){if(e===!0&&s===!0)throw new ue(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Hv(r){if(!_e.isDocumentKey(r))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fv(r){if(_e.isDocumentKey(r))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function FE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ch(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function an(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(r);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r,e){const n={typeString:r};return e&&(n.value=e),n}function au(r,e){if(!FE(r))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ue(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Qv=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Qv);return new nt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new nt(0,0))}static max(){return new Re(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function fI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Re.fromTimestamp(s===1e9?new nt(n+1,0):new nt(n,s));return new Qr(l,_e.empty(),e)}function dI(r){return new Qr(r.readTime,r.key,Hl)}class Qr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Qr(Re.min(),_e.empty(),Hl)}static max(){return new Qr(Re.max(),_e.empty(),Hl)}}function mI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(r.documentKey,e.documentKey),n!==0?n:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==pI)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):J.reject(n)}static resolve(e){return new J(((n,s)=>{n(e)}))}static reject(e){return new J(((n,s)=>{s(e)}))}static waitFor(e){return new J(((n,s)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(g=>s(g)))})),f=!0,c===l&&n()}))}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next((l=>l?J.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new J(((s,l)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((A=>{f[y]=A,++p,p===c&&s(f)}),(A=>l(A)))}}))}static doWhile(e,n){return new J(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function yI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function xh(r){return r==null}function hh(r){return r===0&&1/r==-1/0}function _I(r){return typeof r=="number"&&Number.isInteger(r)&&!hh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="";function vI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Kv(e)),e=EI(r.get(n),e);return Kv(e)}function EI(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case GE:n+="";break;default:n+=c}}return n}function Kv(r){return r+GE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ts(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function QE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=l??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Gt(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Gt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new An([])}unionWith(e){let n=new Ot(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new KE("Invalid base64 string: "+c):c}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const TI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(r){if(He(!!r,39018),typeof r=="string"){let e=0;const n=TI.exec(r);if(He(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Yr(r){return typeof r=="string"?Kt.fromBase64String(r):Kt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="server_timestamp",XE="__type__",$E="__previous_value__",ZE="__local_write_time__";function Jm(r){return(r?.mapValue?.fields||{})[XE]?.stringValue===YE}function Dh(r){const e=r.mapValue.fields[$E];return Jm(e)?Dh(e):e}function Fl(r){const e=Kr(r.mapValue.fields[ZE].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,s,l,c,f,p,g,y,A){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=A}}const fh="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||fh}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="__type__",SI="__max__",Fc={mapValue:{}},JE="__vector__",dh="value";function Xr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Jm(r)?4:wI(r)?9007199254740991:bI(r)?10:11:Ae(28295,{value:r})}function Ei(r,e){if(r===e)return!0;const n=Xr(r);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fl(r).isEqual(Fl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Kr(l.timestampValue),p=Kr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Yr(l.bytesValue).isEqual(Yr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return yt(l.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return yt(l.integerValue)===yt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=yt(l.doubleValue),p=yt(c.doubleValue);return f===p?hh(f)===hh(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return ro(r.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Yv(f)!==Yv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!Ei(f[g],p[g])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function Ql(r,e){return(r.values||[]).find((n=>Ei(n,e)))!==void 0}function so(r,e){if(r===e)return 0;const n=Xr(r),s=Xr(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=yt(c.integerValue||c.doubleValue),g=yt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return $v(r.timestampValue,e.timestampValue);case 4:return $v(Fl(r),Fl(e));case 5:return Am(r.stringValue,e.stringValue);case 6:return(function(c,f){const p=Yr(c),g=Yr(f);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const A=Me(p[y],g[y]);if(A!==0)return A}return Me(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Me(yt(c.latitude),yt(f.latitude));return p!==0?p:Me(yt(c.longitude),yt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Zv(r.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},g=f.fields||{},y=p[dh]?.arrayValue,A=g[dh]?.arrayValue,b=Me(y?.values?.length||0,A?.values?.length||0);return b!==0?b:Zv(y,A)})(r.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Fc.mapValue&&f===Fc.mapValue)return 0;if(c===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},A=Object.keys(y);g.sort(),A.sort();for(let b=0;b<g.length&&b<A.length;++b){const I=Am(g[b],A[b]);if(I!==0)return I;const B=so(p[g[b]],y[A[b]]);if(B!==0)return B}return Me(g.length,A.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function $v(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const n=Kr(r),s=Kr(e),l=Me(n.seconds,s.seconds);return l!==0?l:Me(n.nanos,s.nanos)}function Zv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=so(n[l],s[l]);if(c)return c}return Me(n.length,s.length)}function ao(r){return Sm(r)}function Sm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Kr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Yr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return _e.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Sm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${Sm(n.fields[f])}`;return l+"}"})(r.mapValue):Ae(61005,{value:r})}function Wc(r){switch(Xr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dh(r);return e?16+Wc(e):16;case 5:return 2*r.stringValue.length;case 6:return Yr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Wc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return ts(s.fields,((c,f)=>{l+=c.length+Wc(f)})),l})(r.mapValue);default:throw Ae(13486,{value:r})}}function Wv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function bm(r){return!!r&&"integerValue"in r}function ep(r){return!!r&&"arrayValue"in r}function Jv(r){return!!r&&"nullValue"in r}function e0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Jc(r){return!!r&&"mapValue"in r}function bI(r){return(r?.mapValue?.fields||{})[WE]?.stringValue===JE}function kl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ts(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=kl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(r.arrayValue.values[n]);return e}return{...r}}function wI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===SI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=Qt.emptyPath(),s={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=kl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());Jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Jc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ts(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new fn(kl(this.value))}}function eT(r){const e=[];return ts(r.fields,((n,s)=>{const l=new Qt([n]);if(Jc(s)){const c=eT(s.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,s,l,c,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Jt(e,0,Re.min(),Re.min(),Re.min(),fn.empty(),0)}static newFoundDocument(e,n,s,l){return new Jt(e,1,n,Re.min(),s,l,0)}static newNoDocument(e,n){return new Jt(e,2,n,Re.min(),Re.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Re.min(),Re.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.position=e,this.inclusive=n}}function t0(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],f=r.position[l];if(c.field.isKeyField()?s=_e.comparator(_e.fromName(f.referenceValue),n.key):s=so(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function n0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ei(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function RI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{}class bt extends tT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new CI(e,n,s):n==="array-contains"?new DI(e,s):n==="in"?new OI(e,s):n==="not-in"?new VI(e,s):n==="array-contains-any"?new MI(e,s):new bt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new NI(e,s):new xI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(so(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends tT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return nT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nT(r){return r.op==="and"}function iT(r){return II(r)&&nT(r)}function II(r){for(const e of r.filters)if(e instanceof Xn)return!1;return!0}function wm(r){if(r instanceof bt)return r.field.canonicalString()+r.op.toString()+ao(r.value);if(iT(r))return r.filters.map((e=>wm(e))).join(",");{const e=r.filters.map((n=>wm(n))).join(",");return`${r.op}(${e})`}}function rT(r,e){return r instanceof bt?(function(s,l){return l instanceof bt&&s.op===l.op&&s.field.isEqual(l.field)&&Ei(s.value,l.value)})(r,e):r instanceof Xn?(function(s,l){return l instanceof Xn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,p)=>c&&rT(f,l.filters[p])),!0):!1})(r,e):void Ae(19439)}function sT(r){return r instanceof bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ao(n.value)}`})(r):r instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(sT).join(" ,")+"}"})(r):"Filter"}class CI extends bt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class NI extends bt{constructor(e,n){super(e,"in",n),this.keys=aT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xI extends bt{constructor(e,n){super(e,"not-in",n),this.keys=aT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function aT(r,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class DI extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&Ql(n.arrayValue,this.value)}}class OI extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class VI extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class MI extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ql(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n=null,s=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function i0(r,e=null,n=[],s=[],l=null,c=null,f=null){return new PI(r,e,n,s,l,c,f)}function tp(r){const e=Ie(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>wm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>ao(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>ao(s))).join(",")),e.Te=n}return e.Te}function np(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!RI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!rT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!n0(r.startAt,e.startAt)&&n0(r.endAt,e.endAt)}function Rm(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n=null,s=[],l=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kI(r,e,n,s,l,c,f,p){return new go(r,e,n,s,l,c,f,p)}function Oh(r){return new go(r)}function r0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function oT(r){return r.collectionGroup!==null}function Ll(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Ot(Qt.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Kl(c,s))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new Kl(Qt.keyField(),s))}return e.Ie}function gi(r){const e=Ie(r);return e.Ee||(e.Ee=LI(e,Ll(r))),e.Ee}function LI(r,e){if(r.limitType==="F")return i0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Kl(l.field,c)}));const n=r.endAt?new mh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new mh(r.startAt.position,r.startAt.inclusive):null;return i0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Im(r,e){const n=r.filters.concat([e]);return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function ph(r,e,n){return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Vh(r,e){return np(gi(r),gi(e))&&r.limitType===e.limitType}function lT(r){return`${tp(gi(r))}|lt:${r.limitType}`}function Ka(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>sT(l))).join(", ")}]`),xh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>ao(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>ao(l))).join(",")),`Target(${s})`})(gi(r))}; limitType=${r.limitType})`}function Mh(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):_e.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Ll(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(f,p,g){const y=t0(f,p,g);return f.inclusive?y<=0:y<0})(s.startAt,Ll(s),l)||s.endAt&&!(function(f,p,g){const y=t0(f,p,g);return f.inclusive?y>=0:y>0})(s.endAt,Ll(s),l))})(r,e)}function UI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function uT(r){return(e,n)=>{let s=!1;for(const l of Ll(r)){const c=jI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function jI(r,e,n){const s=r.field.isKeyField()?_e.comparator(e.key,n.key):(function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?so(g,y):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return QE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new ut(_e.comparator);function nr(){return zI}const cT=new ut(_e.comparator);function Dl(...r){let e=cT;for(const n of r)e=e.insert(n.key,n);return e}function hT(r){let e=cT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Bs(){return Ul()}function fT(){return Ul()}function Ul(){return new Zs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const BI=new ut(_e.comparator),qI=new Ot(_e.comparator);function Pe(...r){let e=qI;for(const n of r)e=e.add(n);return e}const HI=new Ot(Me);function FI(){return HI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function dT(r){return{integerValue:""+r}}function mT(r,e){return _I(e)?dT(e):ip(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function GI(r,e,n){return r instanceof Yl?(function(l,c){const f={fields:{[XE]:{stringValue:YE},[ZE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Jm(c)&&(c=Dh(c)),c&&(f.fields[$E]=c),{mapValue:f}})(n,e):r instanceof Xl?gT(r,e):r instanceof $l?yT(r,e):(function(l,c){const f=pT(l,c),p=s0(f)+s0(l.Ae);return bm(f)&&bm(l.Ae)?dT(p):ip(l.serializer,p)})(r,e)}function QI(r,e,n){return r instanceof Xl?gT(r,e):r instanceof $l?yT(r,e):n}function pT(r,e){return r instanceof Zl?(function(s){return bm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Yl extends Ph{}class Xl extends Ph{constructor(e){super(),this.elements=e}}function gT(r,e){const n=_T(e);for(const s of r.elements)n.some((l=>Ei(l,s)))||n.push(s);return{arrayValue:{values:n}}}class $l extends Ph{constructor(e){super(),this.elements=e}}function yT(r,e){let n=_T(e);for(const s of r.elements)n=n.filter((l=>!Ei(l,s)));return{arrayValue:{values:n}}}class Zl extends Ph{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s0(r){return yt(r.integerValue||r.doubleValue)}function _T(r){return ep(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.field=e,this.transform=n}}function KI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Xl&&l instanceof Xl||s instanceof $l&&l instanceof $l?ro(s.elements,l.elements,Ei):s instanceof Zl&&l instanceof Zl?Ei(s.Ae,l.Ae):s instanceof Yl&&l instanceof Yl})(r.transform,e.transform)}class YI{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class kh{}function ET(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Lh(r.key,on.none()):new ou(r.key,r.data,on.none());{const n=r.data,s=fn.empty();let l=new Ot(Qt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new ns(r.key,s,new An(l.toArray()),on.none())}}function XI(r,e,n){r instanceof ou?(function(l,c,f){const p=l.value.clone(),g=o0(l.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ns?(function(l,c,f){if(!eh(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=o0(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(TT(l)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function jl(r,e,n,s){return r instanceof ou?(function(c,f,p,g){if(!eh(c.precondition,f))return p;const y=c.value.clone(),A=l0(c.fieldTransforms,g,f);return y.setAll(A),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof ns?(function(c,f,p,g){if(!eh(c.precondition,f))return p;const y=l0(c.fieldTransforms,g,f),A=f.data;return A.setAll(TT(c)),A.setAll(y),f.convertToFoundDocument(f.version,A).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,n,s):(function(c,f,p){return eh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,n)}function $I(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=pT(s.transform,l||null);c!=null&&(n===null&&(n=fn.empty()),n.set(s.field,c))}return n||null}function a0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&ro(s,l,((c,f)=>KI(c,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ou extends kh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ns extends kh{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function o0(r,e,n){const s=new Map;He(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,p=e.data.field(c.field);s.set(c.field,QI(f,p,n[l]))}return s}function l0(r,e,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,GI(c,f,e))}return s}class Lh extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZI extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&XI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=fT();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const g=ET(f,p);g!==null&&s.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((n,s)=>a0(n,s)))&&ro(this.baseMutations,e.baseMutations,((n,s)=>a0(n,s)))}}class rp{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){He(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return BI})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new rp(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,je;function t2(r){switch(r){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function AT(r){if(r===void 0)return tr("GRPC error has no .code"),X.UNKNOWN;switch(r){case St.OK:return X.OK;case St.CANCELLED:return X.CANCELLED;case St.UNKNOWN:return X.UNKNOWN;case St.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case St.INTERNAL:return X.INTERNAL;case St.UNAVAILABLE:return X.UNAVAILABLE;case St.UNAUTHENTICATED:return X.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case St.NOT_FOUND:return X.NOT_FOUND;case St.ALREADY_EXISTS:return X.ALREADY_EXISTS;case St.PERMISSION_DENIED:return X.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case St.ABORTED:return X.ABORTED;case St.OUT_OF_RANGE:return X.OUT_OF_RANGE;case St.UNIMPLEMENTED:return X.UNIMPLEMENTED;case St.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:r})}}(je=St||(St={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new Hr([4294967295,4294967295],0);function u0(r){const e=n2().encode(r),n=new PE;return n.update(e),new Uint8Array(n.digest())}function c0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Hr([n,s],0),new Hr([l,c],0)]}class sp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(s<0)throw new Ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hr.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(Hr.fromNumber(s)));return l.compare(i2)===1&&(l=new Hr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=u0(e),[s,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new sp(c,l,n);return s.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=u0(e),[s,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Uh(Re.min(),l,new ut(Me),nr(),Pe())}}class lu{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new lu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class ST{constructor(e,n){this.targetId=e,this.Ce=n}}class bT{constructor(e,n,s=Kt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class h0{constructor(){this.ve=0,this.Fe=f0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ae(38017,{changeType:c})}})),new lu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=f0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class r2{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.Je=Gc(),this.He=Gc(),this.Ye=new ut(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Rm(c))if(s===0){const f=new _e(c.path);this.et(n,f,Jt.newNoDocument(f,Re.min()))}else He(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=Yr(s).toUint8Array()}catch(g){if(g instanceof KE)return io("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new sp(f,l,c)}catch(g){return io(g instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&Rm(p.target)){const g=new _e(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Jt.newNoDocument(g,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Pe();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new Uh(e,n,this.Ye,this.je,s);return this.je=nr(),this.Je=Gc(),this.He=Gc(),this.Ye=new ut(Me),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new h0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new h0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new ut(_e.comparator)}function f0(){return new ut(_e.comparator)}const s2={asc:"ASCENDING",desc:"DESCENDING"},a2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o2={and:"AND",or:"OR"};class l2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(r,e){return r.useProto3Json||xh(e)?e:{value:e}}function gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function u2(r,e){return gh(r,e.toTimestamp())}function yi(r){return He(!!r,49232),Re.fromTimestamp((function(n){const s=Kr(n);return new nt(s.seconds,s.nanos)})(r))}function ap(r,e){return Nm(r,e).canonicalString()}function Nm(r,e){const n=(function(l){return new tt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function RT(r){const e=tt.fromString(r);return He(DT(e),10190,{key:e.toString()}),e}function xm(r,e){return ap(r.databaseId,e.path)}function om(r,e){const n=RT(e);if(n.get(1)!==r.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new _e(CT(n))}function IT(r,e){return ap(r.databaseId,e)}function c2(r){const e=RT(r);return e.length===4?tt.emptyPath():CT(e)}function Dm(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function CT(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function d0(r,e,n){return{name:xm(r,e),fields:n.value.mapValue.fields}}function h2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,A){return y.useProto3Json?(He(A===void 0||typeof A=="string",58123),Kt.fromBase64String(A||"")):(He(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Kt.fromUint8Array(A||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const A=y.code===void 0?X.UNKNOWN:AT(y.code);return new ue(A,y.message||"")})(f);n=new bT(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=om(r,s.document.name),c=yi(s.document.updateTime),f=s.document.createTime?yi(s.document.createTime):Re.min(),p=new fn({mapValue:{fields:s.document.fields}}),g=Jt.newFoundDocument(l,c,f,p),y=s.targetIds||[],A=s.removedTargetIds||[];n=new th(y,A,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=om(r,s.document),c=s.readTime?yi(s.readTime):Re.min(),f=Jt.newNoDocument(l,c),p=s.removedTargetIds||[];n=new th([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=om(r,s.document),c=s.removedTargetIds||[];n=new th([],c,l,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new e2(l,c),p=s.targetId;n=new ST(p,f)}}return n}function f2(r,e){let n;if(e instanceof ou)n={update:d0(r,e.key,e.value)};else if(e instanceof Lh)n={delete:xm(r,e.key)};else if(e instanceof ns)n={update:d0(r,e.key,e.data),updateMask:T2(e.fieldMask)};else{if(!(e instanceof ZI))return Ae(16599,{Vt:e.type});n={verify:xm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const p=f.transform;if(p instanceof Yl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Xl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof $l)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zl)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:u2(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(r,e.precondition)),n}function d2(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?yi(l.updateTime):yi(c);return f.isEqual(Re.min())&&(f=yi(c)),new YI(f,l.transformResults||[])})(n,e)))):[]}function m2(r,e){return{documents:[IT(r,e.path)]}}function p2(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=IT(r,l);const c=(function(y){if(y.length!==0)return xT(Xn.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((A=>(function(I){return{field:Ya(I.field),direction:_2(I.dir)}})(A)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Cm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function g2(r){let e=c2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){He(s===1,65062);const A=n.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let c=[];n.where&&(c=(function(b){const I=NT(b);return I instanceof Xn&&iT(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(b){return b.map((I=>(function(K){return new Kl(Xa(K.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(I)))})(n.orderBy));let p=null;n.limit&&(p=(function(b){let I;return I=typeof b=="object"?b.value:b,xh(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(b){const I=!!b.before,B=b.values||[];return new mh(B,I)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const I=!b.before,B=b.values||[];return new mh(B,I)})(n.endAt)),kI(e,l,f,c,p,"F",g,y)}function y2(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xa(n.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Xa(n.unaryFilter.field);return bt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Xa(n.unaryFilter.field);return bt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Xa(n.unaryFilter.field);return bt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return bt.create(Xa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((s=>NT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function _2(r){return s2[r]}function v2(r){return a2[r]}function E2(r){return o2[r]}function Ya(r){return{fieldPath:r.canonicalString()}}function Xa(r){return Qt.fromServerFormat(r.fieldPath)}function xT(r){return r instanceof bt?(function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(n.field),op:v2(n.op),value:n.value}}})(r):r instanceof Xn?(function(n){const s=n.getFilters().map((l=>xT(l)));return s.length===1?s[0]:{compositeFilter:{op:E2(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function T2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,s,l,c=Re.min(),f=Re.min(),p=Kt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.yt=e}}function S2(r){const e=g2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.Cn=new w2}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Qr.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class w2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Ot(tt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OT=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(OT,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="LruGarbageCollector",R2=1048576;function g0([r,e],[n,s]){const l=Me(r,n);return l===0?Me(e,s):l}class I2{constructor(e){this.Ir=e,this.buffer=new Ot(g0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();g0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?fe(p0,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.Vr(3e5)}))}}class N2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Nh.ce);const s=new I2(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(m0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,f,p,g,y;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,f=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(s=b,p=Date.now(),this.removeTargets(e,s,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(y=Date.now(),Qa()<=Ve.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-A}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-A}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function x2(r,e){return new N2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.changes=new Zs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&jl(s.mutation,l,An.empty(),nt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const l=Bs();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let f=Dl();return c.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,s,l){let c=nr();const f=Ul(),p=(function(){return Ul()})();return n.forEach(((g,y)=>{const A=s.get(y.key);l.has(y.key)&&(A===void 0||A.mutation instanceof ns)?c=c.insert(y.key,y):A!==void 0?(f.set(y.key,A.mutation.getFieldMask()),jl(A.mutation,y,A.mutation.getFieldMask(),nt.now())):f.set(y.key,An.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,A)=>f.set(y,A))),n.forEach(((y,A)=>p.set(y,new O2(A,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=Ul();let l=new ut(((f,p)=>f-p)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let A=s.get(g)||An.empty();A=p.applyToLocalView(y,A),s.set(g,A);const b=(l.get(p.batchId)||Pe()).add(g);l=l.insert(p.batchId,b)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,A=g.value,b=fT();A.forEach((I=>{if(!c.has(I)){const B=ET(n.get(I),s.get(I));B!==null&&b.set(I,B),c=c.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,b))}return J.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(f){return _e.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):J.resolve(Bs());let p=Hl,g=c;return f.next((y=>J.forEach(y,((A,b)=>(p<b.largestBatchId&&(p=b.largestBatchId),c.get(A)?J.resolve():this.remoteDocumentCache.getEntry(e,A).next((I=>{g=g.insert(A,I)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Pe()))).next((A=>({batchId:p,changes:hT(A)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let l=Dl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let f=Dl();return this.indexManager.getCollectionParents(e,c).next((p=>J.forEach(p,(g=>{const y=(function(b,I){return new go(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next((A=>{A.forEach(((b,I)=>{f=f.insert(b,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((f=>{c.forEach(((g,y)=>{const A=y.getKey();f.get(A)===null&&(f=f.insert(A,Jt.newInvalidDocument(A)))}));let p=Dl();return f.forEach(((g,y)=>{const A=c.get(g);A!==void 0&&jl(A.mutation,y,An.empty(),nt.now()),Mh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:yi(l.createTime)}})(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:S2(l.bundledQuery),readTime:yi(l.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.overlays=new ut(_e.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return J.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),J.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const l=Bs(),c=n.length+1,f=new _e(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return J.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new ut(((y,A)=>y-A));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let A=c.get(y.largestBatchId);A===null&&(A=Bs(),c=c.insert(y.largestBatchId,A)),A.set(y.getKey(),y)}}const p=Bs(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,A)=>p.set(y,A))),!(p.size()>=l)););return J.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new JI(n,s));let c=this.qr.get(n);c===void 0&&(c=Pe(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.Qr=new Ot(jt.$r),this.Ur=new Ot(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new jt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new _e(new tt([])),s=new jt(n,e),l=new jt(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new tt([])),s=new jt(n,e),l=new jt(n,e+1);let c=Pe();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new jt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(jt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new WI(c,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new jt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return J.resolve(f)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Wm:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new jt(n,0),l=new jt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ot(Me);return n.forEach((l=>{const c=new jt(l,0),f=new jt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{s=s.add(p.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;_e.isDocumentKey(c)||(c=c.child(""));const f=new jt(new _e(c),0);let p=new Ot(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),f),J.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,(l=>{const c=new jt(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new jt(n,0),l=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.ri=e,this.docs=(function(){return new ut(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let s=nr();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Jt.newInvalidDocument(l))})),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=nr();const f=n.path,p=new _e(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:A}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||mI(dI(A),s)<=0||(l.has(A.key)||Mh(n,A))&&(c=c.insert(A.key,A.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,n,s,l){Ae(9500)}ii(e,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new j2(this)}getSize(e){return J.resolve(this.size)}}class j2 extends D2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.persistence=e,this.si=new Zs((n=>tp(n)),np),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new op,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),J.waitFor(c).next((()=>l))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),J.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nh(0),this.li=!1,this.li=!0,this.hi=new k2,this.referenceDelegate=e(this),this.Pi=new z2(this),this.indexManager=new b2,this.remoteDocumentCache=(function(l){return new U2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new A2(n),this.Ii=new M2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new L2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const l=new B2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class B2 extends gI{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.Ri=new op,this.Vi=null}static mi(e){return new lp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const l=_e.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new Zs((s=>vI(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=x2(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return J.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?J.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(s++,c.removeEntry(f,Re.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wc(e.data.value)),n}br(e,n,s){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return J.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Pe(),l=Pe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new up(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Eb()?8:yI(en())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new q2;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Qa()<=Ve.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(Qa()<=Ve.DEBUG&&fe("QueryEngine","Query:",Ka(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Qa()<=Ve.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):J.resolve())}ys(e,n){if(r0(n))return J.resolve(null);let s=gi(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=ph(n,null,"F"),s=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=Pe(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,f,g.readTime)?this.ys(e,ph(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,l){return r0(n)||l.isEqual(Re.min())?J.resolve(null):this.ps.getDocuments(e,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?J.resolve(null):(Qa()<=Ve.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ka(n)),this.vs(e,f,n,fI(l,Hl)).next((p=>p)))}))}Ds(e,n){let s=new Ot(uT(e));return n.forEach(((l,c)=>{Mh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return Qa()<=Ve.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Ka(n)),this.ps.getDocumentsMatchingQuery(e,n,Qr.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="LocalStore",F2=3e8;class G2{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ut(Me),this.xs=new Zs((c=>tp(c)),np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Q2(r,e,n,s){return new G2(r,e,n,s)}async function MT(r,e){const n=Ie(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],p=[];let g=Pe();for(const y of l){f.push(y.batchId);for(const A of y.mutations)g=g.add(A.key)}for(const y of c){p.push(y.batchId);for(const A of y.mutations)g=g.add(A.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function K2(r,e){const n=Ie(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,A){const b=y.batch,I=b.keys();let B=J.resolve();return I.forEach((K=>{B=B.next((()=>A.getEntry(g,K))).next((ne=>{const te=y.docVersions.get(K);He(te!==null,48541),ne.version.compareTo(te)<0&&(b.applyToRemoteDocument(ne,y),ne.isValidDocument()&&(ne.setReadTime(y.commitVersion),A.addEntry(ne)))}))})),B.next((()=>p.mutationQueue.removeMutationBatch(g,b)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Pe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function PT(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Y2(r,e){const n=Ie(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((A,b)=>{const I=l.get(b);if(!I)return;p.push(n.Pi.removeMatchingKeys(c,A.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,A.addedDocuments,b))));let B=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?B=B.withResumeToken(Kt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):A.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(A.resumeToken,s)),l=l.insert(b,B),(function(ne,te,he){return ne.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=F2?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(I,B,A)&&p.push(n.Pi.updateTargetData(c,B))}));let g=nr(),y=Pe();if(e.documentUpdates.forEach((A=>{e.resolvedLimboDocuments.has(A)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,A))})),p.push(X2(c,f,e.documentUpdates).next((A=>{g=A.ks,y=A.qs}))),!s.isEqual(Re.min())){const A=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(A)}return J.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function X2(r,e,n){let s=Pe(),l=Pe();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let f=nr();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):fe(cp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function $2(r,e){const n=Ie(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Z2(r,e){const n=Ie(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,J.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Om(r,e,n){const s=Ie(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!po(f))throw f;fe(cp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function y0(r,e,n){const s=Ie(r);let l=Re.min(),c=Pe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,A){const b=Ie(g),I=b.xs.get(A);return I!==void 0?J.resolve(b.Ms.get(I)):b.Pi.getTargetData(y,A)})(s,f,gi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?l:Re.min(),n?c:Pe()))).next((p=>(W2(s,UI(e),p),{documents:p,Qs:c})))))}function W2(r,e,n){let s=r.Os.get(e)||Re.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class _0{constructor(){this.activeTargetIds=FI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J2{constructor(){this.Mo=new _0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="ConnectivityMonitor";class E0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(v0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(v0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Vm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",tC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===fh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const f=Vm(),p=this.zo(e,n.toUriEncodedString());fe(lm,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),A=uo(y);return this.Jo(e,p,g,s,A).then((b=>(fe(lm,`Received RPC '${e}' ${f}: `,b),b)),(b=>{throw io(lm,`RPC '${e}' ${f} failed with error: `,b,"url: ",p,"request:",s),b}))}Ho(e,n,s,l,c,f){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=tC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class rC extends nC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const f=Vm();return new Promise(((p,g)=>{const y=new kE;y.setWithCredentials(!0),y.listenOnce(LE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Zc.NO_ERROR:const b=y.getResponseJson();fe(Zt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(b)),p(b);break;case Zc.TIMEOUT:fe(Zt,`RPC '${e}' ${f} timed out`),g(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const I=y.getStatus();if(fe(Zt,`RPC '${e}' ${f} failed with status:`,I,"response text:",y.getResponseText()),I>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const K=B?.error;if(K&&K.status&&K.message){const ne=(function(he){const se=he.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(se)>=0?se:X.UNKNOWN})(K.status);g(new ue(ne,K.message))}else g(new ue(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ue(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{fe(Zt,`RPC '${e}' ${f} completed.`)}}));const A=JSON.stringify(l);fe(Zt,`RPC '${e}' ${f} sending request:`,l),y.send(n,"POST",A,s,15)}))}T_(e,n,s){const l=Vm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=zE(),p=jE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const A=c.join("");fe(Zt,`Creating RPC '${e}' stream ${l}: ${A}`,g);const b=f.createWebChannel(A,g);this.I_(b);let I=!1,B=!1;const K=new iC({Yo:te=>{B?fe(Zt,`Not sending because RPC '${e}' stream ${l} is closed:`,te):(I||(fe(Zt,`Opening RPC '${e}' stream ${l} transport.`),b.open(),I=!0),fe(Zt,`RPC '${e}' stream ${l} sending:`,te),b.send(te))},Zo:()=>b.close()}),ne=(te,he,se)=>{te.listen(he,(re=>{try{se(re)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return ne(b,xl.EventType.OPEN,(()=>{B||(fe(Zt,`RPC '${e}' stream ${l} transport opened.`),K.o_())})),ne(b,xl.EventType.CLOSE,(()=>{B||(B=!0,fe(Zt,`RPC '${e}' stream ${l} transport closed`),K.a_(),this.E_(b))})),ne(b,xl.EventType.ERROR,(te=>{B||(B=!0,io(Zt,`RPC '${e}' stream ${l} transport errored. Name:`,te.name,"Message:",te.message),K.a_(new ue(X.UNAVAILABLE,"The operation could not be completed")))})),ne(b,xl.EventType.MESSAGE,(te=>{if(!B){const he=te.data[0];He(!!he,16349);const se=he,re=se?.error||se[0]?.error;if(re){fe(Zt,`RPC '${e}' stream ${l} received error:`,re);const ee=re.status;let H=(function(w){const C=St[w];if(C!==void 0)return AT(C)})(ee),ce=re.message;H===void 0&&(H=X.INTERNAL,ce="Unknown error status: "+ee+" with message "+re.message),B=!0,K.a_(new ue(H,ce)),b.close()}else fe(Zt,`RPC '${e}' stream ${l} received:`,he),K.u_(he)}})),ne(p,UE.STAT_EVENT,(te=>{te.stat===Tm.PROXY?fe(Zt,`RPC '${e}' stream ${l} detected buffering proxy`):te.stat===Tm.NOPROXY&&fe(Zt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(r){return new l2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="PersistentStream";class LT{constructor(e,n,s,l,c,f,p,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new ue(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(T0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(T0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sC extends LT{constructor(e,n,s,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=h2(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Re.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?yi(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Dm(this.serializer),n.addTarget=(function(c,f){let p;const g=f.target;if(p=Rm(g)?{documents:m2(c,g)}:{query:p2(c,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=wT(c,f.resumeToken);const y=Cm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Re.min())>0){p.readTime=gh(c,f.snapshotVersion.toTimestamp());const y=Cm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=y2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Dm(this.serializer),n.removeTarget=e,this.q_(n)}}class aC extends LT{constructor(e,n,s,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=d2(e.writeResults,e.commitTime),s=yi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Dm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>f2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{}class lC extends oC{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Nm(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(X.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Nm(n,s),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ue(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class cC{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Ws(this)&&(fe(Xs,"Restarting streams for network reachability change."),await(async function(g){const y=Ie(g);y.Ea.add(4),await uu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await zh(y)})(this))}))})),this.Ra=new uC(s,l)}}async function zh(r){if(Ws(r))for(const e of r.da)await e(!0)}async function uu(r){for(const e of r.da)await e(!1)}function UT(r,e){const n=Ie(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mp(n)?dp(n):yo(n).O_()&&fp(n,e))}function hp(r,e){const n=Ie(r),s=yo(n);n.Ia.delete(e),s.O_()&&jT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ws(n)&&n.Ra.set("Unknown"))}function fp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(r).Y_(e)}function jT(r,e){r.Va.Ue(e),yo(r).Z_(e)}function dp(r){r.Va=new r2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),yo(r).start(),r.Ra.ua()}function mp(r){return Ws(r)&&!yo(r).x_()&&r.Ia.size>0}function Ws(r){return Ie(r).Ea.size===0}function zT(r){r.Va=void 0}async function hC(r){r.Ra.set("Online")}async function fC(r){r.Ia.forEach(((e,n)=>{fp(r,e)}))}async function dC(r,e){zT(r),mp(r)?(r.Ra.ha(e),dp(r)):r.Ra.set("Unknown")}async function mC(r,e,n){if(r.Ra.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){fe(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _h(r,s)}else if(e instanceof th?r.Va.Ze(e):e instanceof ST?r.Va.st(e):r.Va.tt(e),!n.isEqual(Re.min()))try{const s=await PT(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const A=c.Ia.get(y);A&&c.Ia.set(y,A.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,y)=>{const A=c.Ia.get(g);if(!A)return;c.Ia.set(g,A.withResumeToken(Kt.EMPTY_BYTE_STRING,A.snapshotVersion)),jT(c,g);const b=new jr(A.target,g,y,A.sequenceNumber);fp(c,b)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){fe(Xs,"Failed to raise snapshot:",s),await _h(r,s)}}async function _h(r,e,n){if(!po(e))throw e;r.Ea.add(1),await uu(r),r.Ra.set("Offline"),n||(n=()=>PT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(Xs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await zh(r)}))}function BT(r,e){return e().catch((n=>_h(r,n,e)))}async function Bh(r){const e=Ie(r),n=$r(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;pC(e);)try{const l=await $2(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,gC(e,l)}catch(l){await _h(e,l)}qT(e)&&HT(e)}function pC(r){return Ws(r)&&r.Ta.length<10}function gC(r,e){r.Ta.push(e);const n=$r(r);n.O_()&&n.X_&&n.ea(e.mutations)}function qT(r){return Ws(r)&&!$r(r).x_()&&r.Ta.length>0}function HT(r){$r(r).start()}async function yC(r){$r(r).ra()}async function _C(r){const e=$r(r);for(const n of r.Ta)e.ea(n.mutations)}async function vC(r,e,n){const s=r.Ta.shift(),l=rp.from(s,e,n);await BT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Bh(r)}async function EC(r,e){e&&$r(r).X_&&await(async function(s,l){if((function(f){return t2(f)&&f!==X.ABORTED})(l.code)){const c=s.Ta.shift();$r(s).B_(),await BT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Bh(s)}})(r,e),qT(r)&&HT(r)}async function A0(r,e){const n=Ie(r);n.asyncQueue.verifyOperationInProgress(),fe(Xs,"RemoteStore received new credentials");const s=Ws(n);n.Ea.add(3),await uu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zh(n)}async function TC(r,e){const n=Ie(r);e?(n.Ea.delete(2),await zh(n)):e||(n.Ea.add(2),await uu(n),n.Ra.set("Unknown"))}function yo(r){return r.ma||(r.ma=(function(n,s,l){const c=Ie(n);return c.sa(),new sC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:hC.bind(null,r),t_:fC.bind(null,r),r_:dC.bind(null,r),H_:mC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),mp(r)?dp(r):r.Ra.set("Unknown")):(await r.ma.stop(),zT(r))}))),r.ma}function $r(r){return r.fa||(r.fa=(function(n,s,l){const c=Ie(n);return c.sa(),new aC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:yC.bind(null,r),r_:EC.bind(null,r),ta:_C.bind(null,r),na:vC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Bh(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Xs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const f=Date.now()+s,p=new pp(e,n,f,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(r,e){if(tr("AsyncQueue",`${e}: ${r}`),po(r))return new ue(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Dl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new to;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.ga=new ut(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class lo{constructor(e,n,s,l,c,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new lo(e,n,to.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SC{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Ie(n),c=l.queries;l.queries=b0(),c.forEach(((f,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function b0(){return new Zs((r=>lT(r)),Vh)}async function yp(r,e){const n=Ie(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new AC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=gp(f,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&vp(n)}async function _p(r,e){const n=Ie(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bC(r,e){const n=Ie(r);let s=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(s=!0);f.wa=l}}s&&vp(n)}function wC(r,e,n){const s=Ie(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function vp(r){r.Ca.forEach((e=>{e.next()}))}var Mm,w0;(w0=Mm||(Mm={})).Ma="default",w0.Cache="cache";class Ep{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.key=e}}class GT{constructor(e){this.key=e}}class RC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=uT(e),this.tu=new to(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new S0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((A,b)=>{const I=l.get(A),B=Mh(this.query,b)?b:null,K=!!I&&this.mutatedKeys.has(I.key),ne=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let te=!1;I&&B?I.data.isEqual(B.data)?K!==ne&&(s.track({type:3,doc:B}),te=!0):this.su(I,B)||(s.track({type:2,doc:B}),te=!0,(g&&this.eu(B,g)>0||y&&this.eu(B,y)<0)&&(p=!0)):!I&&B?(s.track({type:0,doc:B}),te=!0):I&&!B&&(s.track({type:1,doc:I}),te=!0,(g||y)&&(p=!0)),te&&(B?(f=f.add(B),c=ne?c.add(A):c.delete(A)):(f=f.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const A=this.query.limitType==="F"?f.last():f.first();f=f.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{tu:f,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((A,b)=>(function(B,K){const ne=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:te})}};return ne(B)-ne(K)})(A.type,b.type)||this.eu(A.doc,b.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,f.length!==0||y?{snapshot:new lo(this.query,e.tu,c,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new GT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new FT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tp="SyncEngine";class IC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class CC{constructor(e){this.key=e,this.hu=!1}}class NC{constructor(e,n,s,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Zs((p=>lT(p)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new ut(_e.comparator),this.Au=new Map,this.Ru=new op,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xC(r,e,n=!0){const s=ZT(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await QT(s,e,n,!0),l}async function DC(r,e){const n=ZT(r);await QT(n,e,!0,!1)}async function QT(r,e,n,s){const l=await Z2(r.localStore,gi(e)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await OC(r,e,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&UT(r.remoteStore,l),p}async function OC(r,e,n,s,l){r.pu=(b,I,B)=>(async function(ne,te,he,se){let re=te.view.ru(he);re.Cs&&(re=await y0(ne.localStore,te.query,!1).then((({documents:D})=>te.view.ru(D,re))));const ee=se&&se.targetChanges.get(te.targetId),H=se&&se.targetMismatches.get(te.targetId)!=null,ce=te.view.applyChanges(re,ne.isPrimaryClient,ee,H);return I0(ne,te.targetId,ce.au),ce.snapshot})(r,b,I,B);const c=await y0(r.localStore,e,!0),f=new RC(e,c.Qs),p=f.ru(c.documents),g=lu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(p,r.isPrimaryClient,g);I0(r,n,y.au);const A=new IC(e,n,f);return r.Tu.set(e,A),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function VC(r,e,n){const s=Ie(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!Vh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Om(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&hp(s.remoteStore,l.targetId),Pm(s,l.targetId)})).catch(mo)):(Pm(s,l.targetId),await Om(s.localStore,l.targetId,!0))}async function MC(r,e){const n=Ie(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),hp(n.remoteStore,s.targetId))}async function PC(r,e,n){const s=qC(r);try{const l=await(function(f,p){const g=Ie(f),y=nt.now(),A=p.reduce(((B,K)=>B.add(K.key)),Pe());let b,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let K=nr(),ne=Pe();return g.Ns.getEntries(B,A).next((te=>{K=te,K.forEach(((he,se)=>{se.isValidDocument()||(ne=ne.add(he))}))})).next((()=>g.localDocuments.getOverlayedDocuments(B,K))).next((te=>{b=te;const he=[];for(const se of p){const re=$I(se,b.get(se.key).overlayedDocument);re!=null&&he.push(new ns(se.key,re,eT(re.value.mapValue),on.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,he,p)})).next((te=>{I=te;const he=te.applyToLocalDocumentSet(b,ne);return g.documentOverlayCache.saveOverlays(B,te.batchId,he)}))})).then((()=>({batchId:I.batchId,changes:hT(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,p,g){let y=f.Vu[f.currentUser.toKey()];y||(y=new ut(Me)),y=y.insert(p,g),f.Vu[f.currentUser.toKey()]=y})(s,l.batchId,n),await cu(s,l.changes),await Bh(s.remoteStore)}catch(l){const c=gp(l,"Failed to persist write");n.reject(c)}}async function KT(r,e){const n=Ie(r);try{const s=await Y2(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(He(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?He(f.hu,14607):l.removedDocuments.size>0&&(He(f.hu,42227),f.hu=!1))})),await cu(n,s,e)}catch(s){await mo(s)}}function R0(r,e,n){const s=Ie(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const g=Ie(f);g.onlineState=p;let y=!1;g.queries.forEach(((A,b)=>{for(const I of b.Sa)I.va(p)&&(y=!0)})),y&&vp(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kC(r,e,n){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let f=new ut(_e.comparator);f=f.insert(c,Jt.newNoDocument(c,Re.min()));const p=Pe().add(c),g=new Uh(Re.min(),new Map,new ut(Me),f,p);await KT(s,g),s.du=s.du.remove(c),s.Au.delete(e),Ap(s)}else await Om(s.localStore,e,!1).then((()=>Pm(s,e,n))).catch(mo)}async function LC(r,e){const n=Ie(r),s=e.batch.batchId;try{const l=await K2(n.localStore,e);XT(n,s,null),YT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await cu(n,l)}catch(l){await mo(l)}}async function UC(r,e,n){const s=Ie(r);try{const l=await(function(f,p){const g=Ie(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let A;return g.mutationQueue.lookupMutationBatch(y,p).next((b=>(He(b!==null,37113),A=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,A,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,A))).next((()=>g.localDocuments.getDocuments(y,A)))}))})(s.localStore,e);XT(s,e,n),YT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await cu(s,l)}catch(l){await mo(l)}}function YT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function XT(r,e,n){const s=Ie(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Pm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||$T(r,s)}))}function $T(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(hp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Ap(r))}function I0(r,e,n){for(const s of n)s instanceof FT?(r.Ru.addReference(s.key,e),jC(r,s)):s instanceof GT?(fe(Tp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||$T(r,s.key)):Ae(19791,{wu:s})}function jC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(fe(Tp,"New document in limbo: "+n),r.Eu.add(s),Ap(r))}function Ap(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new _e(tt.fromString(e)),s=r.fu.next();r.Au.set(s,new CC(n)),r.du=r.du.insert(n,s),UT(r.remoteStore,new jr(gi(Oh(n.path)),s,"TargetPurposeLimboResolution",Nh.ce))}}async function cu(r,e,n){const s=Ie(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{f.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const A=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){l.push(y);const A=up.As(g.targetId,y);c.push(A)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(g,y){const A=Ie(g);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>J.forEach(y,(I=>J.forEach(I.Es,(B=>A.persistence.referenceDelegate.addReference(b,I.targetId,B))).next((()=>J.forEach(I.ds,(B=>A.persistence.referenceDelegate.removeReference(b,I.targetId,B)))))))))}catch(b){if(!po(b))throw b;fe(cp,"Failed to update sequence numbers: "+b)}for(const b of y){const I=b.targetId;if(!b.fromCache){const B=A.Ms.get(I),K=B.snapshotVersion,ne=B.withLastLimboFreeSnapshotVersion(K);A.Ms=A.Ms.insert(I,ne)}}})(s.localStore,c))}async function zC(r,e){const n=Ie(r);if(!n.currentUser.isEqual(e)){fe(Tp,"User change. New user:",e.toKey());const s=await MT(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new ue(X.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await cu(n,s.Ls)}}function BC(r,e){const n=Ie(r),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let l=Pe();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function ZT(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kC.bind(null,e),e.Pu.H_=bC.bind(null,e.eventManager),e.Pu.yu=wC.bind(null,e.eventManager),e}function qC(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UC.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Q2(this.persistence,new H2,e.initialUser,this.serializer)}Cu(e){return new VT(lp.mi,this.serializer)}Du(e){return new J2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class HC extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new C2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new VT((s=>yh.mi(s,n)),this.serializer)}}class km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>R0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zC.bind(null,this.syncEngine),await TC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SC})()}createDatastore(e){const n=jh(e.databaseInfo.databaseId),s=(function(c){return new rC(c)})(e.databaseInfo);return(function(c,f,p,g){return new lC(c,f,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,f,p){return new cC(s,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>R0(this.syncEngine,n,0)),(function(){return E0.v()?new E0:new eC})())}createSyncEngine(e,n){return(function(l,c,f,p,g,y,A){const b=new NC(l,c,f,p,g,y);return A&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ie(n);fe(Xs,"RemoteStore shutting down."),s.Ea.add(5),await uu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}km.provider={build:()=>new km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class FC{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Wt.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{fe(Zr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(fe(Zr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=gp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cm(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Zr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await MT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function C0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await GC(r);fe(Zr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>A0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>A0(e.remoteStore,l))),r._onlineComponents=e}async function GC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Zr,"Using user provided OfflineComponentProvider");try{await cm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;io("Error using user provided cache. Falling back to memory cache: "+n),await cm(r,new vh)}}else fe(Zr,"Using default OfflineComponentProvider"),await cm(r,new HC(void 0));return r._offlineComponents}async function WT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Zr,"Using user provided OnlineComponentProvider"),await C0(r,r._uninitializedComponentsProvider._online)):(fe(Zr,"Using default OnlineComponentProvider"),await C0(r,new km))),r._onlineComponents}function QC(r){return WT(r).then((e=>e.syncEngine))}async function Eh(r){const e=await WT(r),n=e.eventManager;return n.onListen=xC.bind(null,e.syncEngine),n.onUnlisten=VC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MC.bind(null,e.syncEngine),n}function KC(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,g,y){const A=new Sp({next:I=>{A.Nu(),f.enqueueAndForget((()=>_p(c,b)));const B=I.docs.has(p);!B&&I.fromCache?y.reject(new ue(X.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&I.fromCache&&g&&g.source==="server"?y.reject(new ue(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),b=new Ep(Oh(p.path),A,{includeMetadataChanges:!0,qa:!0});return yp(c,b)})(await Eh(r),r.asyncQueue,e,n,s))),s.promise}function YC(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,g,y){const A=new Sp({next:I=>{A.Nu(),f.enqueueAndForget((()=>_p(c,b))),I.fromCache&&g.source==="server"?y.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),b=new Ep(p,A,{includeMetadataChanges:!0,qa:!0});return yp(c,b)})(await Eh(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firestore.googleapis.com",x0=!0;class D0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eA,this.ssl=x0}else this.host=e.host,this.ssl=e.ssl??x0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R2)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tI;switch(s.type){case"firstParty":return new sI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=N0.get(n);s&&(fe("ComponentProvider","Removing Datastore"),N0.delete(n),s.terminate())})(this),Promise.resolve()}}function XC(r,e,n,s={}){r=an(r,qh);const l=uo(e),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(Q0(`https://${p}`),K0("Firestore",!0)),c.host!==eA&&c.host!==p&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Gs(g,f)&&(r._setSettings(g),s.mockUserToken)){let y,A;if(typeof s.mockUserToken=="string")y=s.mockUserToken,A=Wt.MOCK_USER;else{y=hb(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Wt(b)}r._authCredentials=new nI(new qE(y,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rr(this.firestore,e,this._query)}}class dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(au(n,dt._jsonSchema))return new dt(e,s||null,new _e(tt.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:wt("string",dt._jsonSchemaVersion),referencePath:wt("string")};class Fr extends rr{constructor(e,n,s){super(e,n,Oh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new _e(e))}withConverter(e){return new Fr(this.firestore,e,this._path)}}function jn(r,e,...n){if(r=_t(r),HE("collection","path",e),r instanceof qh){const s=tt.fromString(e,...n);return Fv(s),new Fr(r,null,s)}{if(!(r instanceof dt||r instanceof Fr))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Fv(s),new Fr(r.firestore,null,s)}}function Sn(r,e,...n){if(r=_t(r),arguments.length===1&&(e=Zm.newId()),HE("doc","path",e),r instanceof qh){const s=tt.fromString(e,...n);return Hv(s),new dt(r,null,new _e(s))}{if(!(r instanceof dt||r instanceof Fr))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Hv(s),new dt(r.firestore,r instanceof Fr?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="AsyncQueue";class V0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const s=um();s&&fe(O0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;fe(O0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",M0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=pp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ae(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Ti extends qh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new V0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function $C(r,e){const n=typeof r=="object"?r:Z0(),s=typeof r=="string"?r:fh,l=Bm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=ub("firestore");c&&XC(l,...c)}return l}function hu(r){if(r._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ZC(r),r._firestoreClient}function ZC(r){const e=r._freezeSettings(),n=(function(l,c,f,p){return new AI(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,JT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new FC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Kt.fromBase64String(e))}catch(n){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:wt("string",zn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(au(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:wt("string",_i._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new vi(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:wt("string",vi._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^__.*__$/;class JC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new ou(e,this.data,n,this.fieldTransforms)}}class tA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class bp{constructor(e,n,s,l,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nA(this.Ac)&&WC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jh(e)}Cc(e,n,s,l=!1){return new bp({Ac:e,methodName:n,Dc:s,path:Qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mu(r){const e=r._freezeSettings(),n=jh(r._databaseId);return new eN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function wp(r,e,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);Cp("Data must be an object, but it was:",f,s);const p=sA(s,f);let g,y;if(c.merge)g=new An(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const A=[];for(const b of c.mergeFields){const I=Lm(e,b,n);if(!f.contains(I))throw new ue(X.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);oA(A,I)||A.push(I)}g=new An(A),y=f.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=f.fieldTransforms;return new JC(new fn(p),g,y)}class Hh extends du{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}class Rp extends du{_toFieldTransform(e){return new vT(e.path,new Yl)}isEqual(e){return e instanceof Rp}}class Ip extends du{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Zl(e.serializer,mT(e.serializer,this.Fc));return new vT(e.path,n)}isEqual(e){return e instanceof Ip&&this.Fc===e.Fc}}function iA(r,e,n,s){const l=r.Cc(1,e,n);Cp("Data must be an object, but it was:",l,s);const c=[],f=fn.empty();ts(s,((g,y)=>{const A=Np(e,g,n);y=_t(y);const b=l.yc(A);if(y instanceof Hh)c.push(A);else{const I=pu(y,b);I!=null&&(c.push(A),f.set(A,I))}}));const p=new An(c);return new tA(f,p,l.fieldTransforms)}function rA(r,e,n,s,l,c){const f=r.Cc(1,e,n),p=[Lm(e,s,n)],g=[l];if(c.length%2!=0)throw new ue(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)p.push(Lm(e,c[I])),g.push(c[I+1]);const y=[],A=fn.empty();for(let I=p.length-1;I>=0;--I)if(!oA(y,p[I])){const B=p[I];let K=g[I];K=_t(K);const ne=f.yc(B);if(K instanceof Hh)y.push(B);else{const te=pu(K,ne);te!=null&&(y.push(B),A.set(B,te))}}const b=new An(y);return new tA(A,b,f.fieldTransforms)}function tN(r,e,n,s=!1){return pu(n,r.Cc(s?4:3,e))}function pu(r,e){if(aA(r=_t(r)))return Cp("Unsupported field value:",e,r),sA(r,e);if(r instanceof du)return(function(s,l){if(!nA(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const p of s){let g=pu(p,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=_t(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mT(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=nt.fromDate(s);return{timestampValue:gh(l.serializer,c)}}if(s instanceof nt){const c=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gh(l.serializer,c)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zn)return{bytesValue:wT(l.serializer,s._byteString)};if(s instanceof dt){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ap(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof vi)return(function(f,p){return{mapValue:{fields:{[WE]:{stringValue:JE},[dh]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return ip(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Ch(s)}`)})(r,e)}function sA(r,e){const n={};return QE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(r,((s,l)=>{const c=pu(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function aA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof _i||r instanceof zn||r instanceof dt||r instanceof du||r instanceof vi)}function Cp(r,e,n){if(!aA(n)||!FE(n)){const s=Ch(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Lm(r,e,n){if((e=_t(e))instanceof fu)return e._internalPath;if(typeof e=="string")return Np(r,e);throw Th("Field path arguments must be of type string or ",r,!1,void 0,n)}const nN=new RegExp("[~\\*/\\[\\]]");function Np(r,e,n){if(e.search(nN)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new fu(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Th(r,e,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${l}`),g+=")"),new ue(X.INVALID_ARGUMENT,p+r+g)}function oA(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iN extends lA{data(){return super.data()}}function xp(r,e){return typeof e=="string"?Np(r,e):e instanceof fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Op extends Dp{}function qs(r,e,...n){let s=[];e instanceof Dp&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((g=>g instanceof Mp)).length,p=c.filter((g=>g instanceof Vp)).length;if(f>1||f>0&&p>0)throw new ue(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Vp extends Op{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Vp(e,n,s)}_apply(e){const n=this._parse(e);return hA(e._query,n),new rr(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=mu(e.firestore);return(function(c,f,p,g,y,A,b){let I;if(y.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new ue(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){L0(b,A);const K=[];for(const ne of b)K.push(k0(g,c,ne));I={arrayValue:{values:K}}}else I=k0(g,c,b)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||L0(b,A),I=tN(p,f,b,A==="in"||A==="not-in");return bt.create(y,A,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Mp extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const g of p)hA(f,g),f=Im(f,g)})(e._query,n),new rr(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pp extends Op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pp(e,n)}_apply(e){const n=(function(l,c,f){if(l.startAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kl(c,f)})(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,(function(l,c){const f=l.explicitOrderBy.concat([c]);return new go(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function rN(r,e="asc"){const n=e,s=xp("orderBy",r);return Pp._create(s,n)}class kp extends Op{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new kp(e,n,s)}_apply(e){return new rr(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}}function cA(r){return kp._create("limit",r,"F")}function k0(r,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new ue(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(e)&&n.indexOf("/")!==-1)throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!_e.isDocumentKey(s))throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wv(r,new _e(s))}if(n instanceof dt)return Wv(r,n._key);throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function L0(r,e){if(!Array.isArray(r)||r.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hA(r,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sN{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ts(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[dh].arrayValue?.values?.map((s=>yt(s.doubleValue)));return new vi(n)}convertGeoPoint(e){return new _i(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Dh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);He(DT(s),9688,{name:e});const l=new Gl(s.get(1),s.get(3)),c=new _e(s.popFirst(5));return l.isEqual(n)||tr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends lA{constructor(e,n,s,l,c,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(xp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:wt("string",Hs._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class nh extends Hs{data(e={}){return super.data(e)}}class Fs{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Vl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new nh(this._firestore,this._userDataWriter,s.key,s,new Vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const g=new nh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Vl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new nh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Vl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,A=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),A=f.indexOf(p.doc.key)),{type:aN(p.type),doc:g,oldIndex:y,newIndex:A}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(r){r=an(r,dt);const e=an(r.firestore,Ti);return KC(hu(e),r._key).then((n=>fA(e,r,n)))}Fs._jsonSchemaVersion="firestore/querySnapshot/1.0",Fs._jsonSchema={type:wt("string",Fs._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Up extends sN{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function oN(r){r=an(r,rr);const e=an(r.firestore,Ti),n=hu(e),s=new Up(e);return uA(r._query),YC(n,r._query).then((l=>new Fs(e,s,r,l)))}function jp(r,e,n){r=an(r,dt);const s=an(r.firestore,Ti),l=Lp(r.converter,e,n);return gu(s,[wp(mu(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,on.none())])}function Sh(r,e,n,...s){r=an(r,dt);const l=an(r.firestore,Ti),c=mu(l);let f;return f=typeof(e=_t(e))=="string"||e instanceof fu?rA(c,"updateDoc",r._key,e,n,s):iA(c,"updateDoc",r._key,e),gu(l,[f.toMutation(r._key,on.exists(!0))])}function zp(r){return gu(an(r.firestore,Ti),[new Lh(r._key,on.none())])}function Fh(r,e){const n=an(r.firestore,Ti),s=Sn(r),l=Lp(r.converter,e);return gu(n,[wp(mu(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,on.exists(!1))]).then((()=>s))}function Za(r,...e){r=_t(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||P0(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(P0(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,f,p;if(r instanceof dt)f=an(r.firestore,Ti),p=Oh(r._key.path),c={next:g=>{e[s]&&e[s](fA(f,r,g))},error:e[s+1],complete:e[s+2]};else{const g=an(r,rr);f=an(g.firestore,Ti),p=g._query;const y=new Up(f);c={next:A=>{e[s]&&e[s](new Fs(f,y,g,A))},error:e[s+1],complete:e[s+2]},uA(r._query)}return(function(y,A,b,I){const B=new Sp(I),K=new Ep(A,B,b);return y.asyncQueue.enqueueAndForget((async()=>yp(await Eh(y),K))),()=>{B.Nu(),y.asyncQueue.enqueueAndForget((async()=>_p(await Eh(y),K)))}})(hu(f),p,l,c)}function gu(r,e){return(function(s,l){const c=new Wi;return s.asyncQueue.enqueueAndForget((async()=>PC(await QC(s),l,c))),c.promise})(hu(r),e)}function fA(r,e,n){const s=n.docs.get(e._key),l=new Up(r);return new Hs(r,l,e._key,s,new Vl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,n,s){this._verifyNotCommitted();const l=hm(e,this._firestore),c=Lp(l.converter,n,s),f=wp(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,on.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const c=hm(e,this._firestore);let f;return f=typeof(n=_t(n))=="string"||n instanceof fu?rA(this._dataReader,"WriteBatch.update",c._key,n,s,l):iA(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hm(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(r,e){if((r=_t(r)).firestore!==e)throw new ue(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Wr(){return new Rp("serverTimestamp")}function dA(r){return new Ip("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r){return hu(r=an(r,Ti)),new lN(r,(e=>gu(r,e)))}(function(e,n=!0){(function(l){fo=l})(co),no(new Qs("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),p=new Ti(new iI(s.getProvider("auth-internal")),new aI(f,s.getProvider("app-check-internal")),(function(y,A){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(y.options.projectId,A)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),qr(jv,zv,e),qr(jv,zv,"esm2020")})();/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hN=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),U0=r=>{const e=hN(r);return e.charAt(0).toUpperCase()+e.slice(1)},mA=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),fN=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=me.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:f,...p},g)=>me.createElement("svg",{ref:g,...dN,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:mA("lucide",l),...!c&&!fN(p)&&{"aria-hidden":"true"},...p},[...f.map(([y,A])=>me.createElement(y,A)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=(r,e)=>{const n=me.forwardRef(({className:s,...l},c)=>me.createElement(mN,{ref:c,iconNode:e,className:mA(`lucide-${cN(U0(r))}`,`lucide-${r}`,s),...l}));return n.displayName=U0(r),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gN=pA("chevron-left",pN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_N=pA("chevron-right",yN),et={dashboard:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),sales:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),products:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5L12 3l9 4.5M3 7.5v9l9 4.5m9-13.5v9l-9 4.5m0-9l9-4.5m-9 4.5L3 7.5"})}),purchases:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),inventory:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),reports:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),logout:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),plus:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),user:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),money:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),close:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),trash:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),edit:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),filter:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h18M6 12h12M10 20h4"})}),userPlus:E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 14a4 4 0 10-8 0 4 4 0 008 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14v7m-5-3h10M16 3h5m-2.5-2.5V5.5"})]})},vN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyA6pwcMnIn0y0HcKRWQhfpvPKwmbH-Jc4Y",authDomain:"sofwipad-erp-contable.firebaseapp.com",projectId:"sofwipad-erp-contable",storageBucket:"sofwipad-erp-contable.appspot.com",messagingSenderId:"902895181248",appId:"1:902895181248:web:dfb884b039dedacfb3bc25",measurementId:"G-D22KTMEDP6"};const gA=$0(vN),Wl=WR(gA),ot=$C(gA);eI("debug");const yA=me.createContext(),EN=({children:r})=>{const[e,n]=me.useState(null),[s,l]=me.useState(null),[c,f]=me.useState(null),[p,g]=me.useState(!0),[y,A]=me.useState(""),b=async B=>{const K=uN(ot),ne=jn(ot,`companies/${B}/chart_of_accounts`);[{code:"1105",name:"Caja",class:"Activo"},{code:"1110",name:"Bancos",class:"Activo"},{code:"1305",name:"Clientes",class:"Activo"},{code:"1435",name:"Inventarios",class:"Activo"},{code:"2205",name:"Proveedores Nacionales",class:"Pasivo"},{code:"2105",name:"Obligaciones Financieras",class:"Pasivo"},{code:"3115",name:"Aportes Sociales",class:"Patrimonio"},{code:"4135",name:"Comercio al por mayor y al por menor",class:"Ingreso"},{code:"5105",name:"Gastos de Personal",class:"Gasto"},{code:"5195",name:"Diversos",class:"Gasto"},{code:"6135",name:"Costo de Ventas",class:"Costo"}].forEach(he=>{const se=Sn(ne,he.code);K.set(se,he)});try{await K.commit(),console.log(`Plan de cuentas inicial creado para la empresa: ${B}`)}catch(he){console.error("Error creando el plan de cuentas inicial:",he),A("No se pudo completar la configuracin inicial de la empresa.")}};me.useEffect(()=>{const K=Bw(Wl,async ne=>{if(ne&&!ne.isAnonymous){const te=Sn(ot,"users",ne.uid),he=await Ah(te);if(he.exists()){const se={uid:ne.uid,...he.data()};if(n(ne),l(se),se.companyId){const re=Sn(ot,"companies",se.companyId),ee=await Ah(re);if(ee.exists()){f({id:ee.id,...ee.data()});const H=jn(ot,`companies/${se.companyId}/chart_of_accounts`),ce=qs(H,cA(1));(await oN(ce)).empty&&(console.log("Plan de cuentas no encontrado, iniciando configuracin..."),await b(se.companyId))}else A(`Error: La empresa con ID ${se.companyId} no fue encontrada.`),f(null)}else A("Usuario no est asociado a ninguna empresa."),f(null)}else A("No se encontr el perfil del usuario en la base de datos."),await bE(Wl)}else n(null),l(null),f(null);g(!1)});return()=>K()},[]);const I={user:e,userData:s,companyData:c,loading:p,error:y,setError:A};return E.jsx(yA.Provider,{value:I,children:r})},Js=()=>me.useContext(yA),Bp=({isOpen:r,onClose:e,title:n,children:s})=>r?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),E.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:et.close})]}),E.jsx("div",{className:"p-6",children:s})]})}):null,at=({id:r,label:e,...n})=>E.jsxs("div",{children:[E.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),E.jsx("input",{id:r,...n,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),Yi=({id:r,label:e,children:n,...s})=>E.jsxs("div",{children:[E.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),E.jsx("select",{id:r,...s,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n})]}),bn=({children:r,onClick:e,type:n="button",variant:s="primary",...l})=>{const c="inline-flex items-center justify-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",f={primary:"border-transparent text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",secondary:"border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-indigo-500",danger:"border-transparent text-white bg-red-600 hover:bg-red-700 focus:ring-red-500"};return E.jsx("button",{type:n,onClick:e,className:`${c} ${f[s]}`,...l,children:r})},Jl=({title:r,children:e,actions:n})=>E.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[E.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r}),n&&E.jsx("div",{className:"flex space-x-2",children:n})]}),E.jsx("div",{className:"p-4",children:e})]}),Gh=()=>E.jsx("div",{className:"flex justify-center items-center h-full",children:E.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}),_A=({message:r})=>r?E.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative my-4",role:"alert",children:[E.jsx("strong",{className:"font-bold",children:"Error: "}),E.jsx("span",{className:"block sm:inline",children:r})]}):null,TN=()=>{const[r,e]=me.useState(!0),[n,s]=me.useState(""),[l,c]=me.useState(""),[f,p]=me.useState(""),[g,y]=me.useState(""),[A,b]=me.useState(""),[I,B]=me.useState(""),[K,ne]=me.useState(!1),te=async se=>{se.preventDefault(),ne(!0),B("");try{await Uw(Wl,n,l)}catch(re){B(re.message)}ne(!1)},he=async se=>{if(se.preventDefault(),l.length<6){B("La contrasea debe tener al menos 6 caracteres.");return}ne(!0),B("");try{const re=jn(ot,"companies"),ee=await Fh(re,{name:g,NIT:A,createdAt:Wr(),taxConfig:{iva:19,ica:.414,retefuente:2.5}}),ce=(await Lw(Wl,n,l)).user;await jp(Sn(ot,"users",ce.uid),{name:f,email:n,companyId:ee.id,role:"Admin",createdAt:Wr()})}catch(re){B(re.message)}ne(!1)};return E.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center py-12 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[E.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Sofwipad ERP Contable"}),E.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Inicia sesin en tu cuenta":"Crea una nueva cuenta y empresa"})]}),E.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:E.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[E.jsxs("form",{className:"space-y-6",onSubmit:r?te:he,children:[!r&&E.jsxs(E.Fragment,{children:[E.jsx(at,{id:"name",name:"name",type:"text",label:"Tu Nombre Completo",required:!0,value:f,onChange:se=>p(se.target.value)}),E.jsx(at,{id:"companyName",name:"companyName",type:"text",label:"Nombre de la Empresa",required:!0,value:g,onChange:se=>y(se.target.value)}),E.jsx(at,{id:"nit",name:"nit",type:"text",label:"NIT de la Empresa",required:!0,value:A,onChange:se=>b(se.target.value)}),E.jsx("hr",{})]}),E.jsx(at,{id:"email",name:"email",type:"email",label:"Correo Electrnico",autoComplete:"email",required:!0,value:n,onChange:se=>s(se.target.value)}),E.jsx(at,{id:"password",name:"password",type:"password",label:"Contrasea",autoComplete:"current-password",required:!0,value:l,onChange:se=>c(se.target.value)}),E.jsx(_A,{message:I}),E.jsx("div",{children:E.jsx(bn,{type:"submit",variant:"primary",className:"w-full",disabled:K,children:K?"Procesando...":r?"Iniciar Sesin":"Registrar Empresa"})})]}),E.jsxs("div",{className:"mt-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("button",{onClick:()=>{e(!r),B("")},className:"font-medium text-indigo-600 hover:text-indigo-500",children:r?"No tienes una cuenta? Regstrate":"Ya tienes una cuenta? Inicia sesin"})})]})]})})]})},AN=()=>{const{userData:r,companyData:e}=Js(),[n,s]=me.useState("dashboard"),[l,c]=me.useState(!0),f=async()=>{await bE(Wl)},p=({view:A,icon:b,children:I})=>E.jsxs("a",{href:"#",onClick:B=>{B.preventDefault(),s(A)},className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${n===A?"bg-indigo-600 text-white":"text-gray-300 hover:bg-indigo-800 hover:text-white"}`,children:[E.jsx("span",{className:"mr-3",children:b}),I]}),g=()=>{switch(n){case"dashboard":return E.jsx(j0,{});case"sales":return E.jsx(SN,{setActiveView:s});case"thirdparties":return E.jsx(bN,{});case"products":return E.jsx(wN,{});default:return E.jsx(j0,{})}},y={Admin:"Administrador",Contador:"Contador",Empleado:"Empleado"};return E.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans relative",children:[E.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-indigo-900 text-white flex flex-col transform transition-transform duration-300 z-20
        ${l?"translate-x-0 w-64":"-translate-x-full w-64"}`,children:[E.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-indigo-800",children:[E.jsx("h2",{className:"text-xl font-bold truncate",children:e?.name||"ERP Nube"}),E.jsx("button",{onClick:()=>c(!1),"aria-label":"Cerrar men",className:"text-gray-300 hover:text-white",children:E.jsx(gN,{className:"h-6 w-6"})})]}),E.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:[E.jsx(p,{view:"dashboard",icon:et.dashboard,children:"Dashboard"}),E.jsx(p,{view:"sales",icon:et.sales,children:"Ventas"}),E.jsx(p,{view:"purchases",icon:et.purchases,children:"Compras"}),E.jsx(p,{view:"inventory",icon:et.inventory,children:"Inventario"}),E.jsx(p,{view:"reports",icon:et.reports,children:"Reportes"}),E.jsx(p,{view:"thirdparties",icon:et.user,children:"Clientes/Proveedores"}),E.jsx(p,{view:"products",icon:et.products,children:"Productos/Servicios"})]}),E.jsxs("div",{className:"px-4 py-4 border-t border-indigo-800",children:[E.jsxs("div",{className:"flex items-center mb-4",children:[E.jsx("div",{className:"p-2 bg-indigo-700 rounded-full",children:et.user}),E.jsxs("div",{className:"ml-3",children:[E.jsx("p",{className:"text-sm font-medium text-white",children:r?.name}),E.jsx("p",{className:"text-xs text-indigo-300",children:y[r?.role]||r?.role})]})]}),E.jsxs("a",{href:"#",onClick:f,className:"flex items-center w-full px-4 py-2.5 text-sm font-medium rounded-lg text-gray-300 hover:bg-red-600 hover:text-white transition-colors",children:[E.jsx("span",{className:"mr-3",children:et.logout}),"Cerrar Sesin"]})]})]}),!l&&E.jsxs("div",{className:"fixed top-1/2 -translate-y-1/2 left-0 z-30 group",children:[E.jsx("button",{onClick:()=>c(!0),"aria-label":"Abrir men",className:"bg-indigo-600 text-white p-2 rounded-r-md shadow-md transition-all duration-300 hover:bg-indigo-700 hover:-translate-x-1",children:E.jsx(_N,{className:"h-6 w-6"})}),E.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-300 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg pointer-events-none",children:["Abrir men",E.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-1 w-2 h-2 bg-gray-900 rotate-45"})]})]}),E.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${l?"ml-64":"ml-0"}`,children:[E.jsx("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-6",children:E.jsx("h1",{className:"text-2xl font-semibold text-gray-800 capitalize",children:n})}),E.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:g()})]})]})},j0=()=>{const{companyData:r}=Js(),e=[{title:"Ventas del Mes",value:"$12,500,000",icon:et.sales,color:"text-green-500"},{title:"Cuentas por Cobrar",value:"$4,200,000",icon:et.money,color:"text-yellow-500"},{title:"Compras del Mes",value:"$7,800,000",icon:et.purchases,color:"text-red-500"},{title:"Valor Inventario",value:"$25,000,000",icon:et.inventory,color:"text-blue-500"}];return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("h2",{className:"text-xl font-semibold text-gray-700",children:["Bienvenido a ",r?.name]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[E.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${n.color}`,children:KS.cloneElement(n.icon,{className:"h-8 w-8"})}),E.jsxs("div",{className:"ml-4",children:[E.jsx("p",{className:"text-lg font-semibold text-gray-800",children:n.title}),E.jsx("p",{className:"text-sm font-medium text-gray-500",children:n.value})]})]},n.title))}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsx(Jl,{title:"Ventas vs Compras (ltimos 6 meses)",children:E.jsx("div",{className:"h-64 bg-gray-200 rounded-md flex items-center justify-center",children:E.jsx("p",{className:"text-gray-500",children:"Grfico de barras aqu"})})}),E.jsx(Jl,{title:"Actividades Recientes",children:E.jsxs("ul",{className:"space-y-3",children:[E.jsx("li",{className:"text-sm text-gray-600",children:"Factura de venta #FV-002 creada."}),E.jsx("li",{className:"text-sm text-gray-600",children:"Pago a proveedor 'DistriPartes SAS' registrado."}),E.jsx("li",{className:"text-sm text-gray-600",children:"Nuevo producto 'Aceite 20W-50' aadido al inventario."})]})})]})]})},SN=({setActiveView:r})=>{const{companyData:e}=Js(),[n,s]=me.useState(!1),[l,c]=me.useState(null),[f,p]=me.useState([]),[g,y]=me.useState([]),[A,b]=me.useState([]),[I,B]=me.useState(!0),[K,ne]=me.useState(null);me.useEffect(()=>{if(!e)return;B(!0);const re=qs(jn(ot,`companies/${e.id}/invoices_sales`)),ee=Za(re,H=>{const ce=H.docs.map(D=>({id:D.id,...D.data()}));p(ce),B(!1)},H=>{console.error("Error fetching invoices: ",H),B(!1)});return()=>ee()},[e]),me.useEffect(()=>{if(!e)return;const re=qs(jn(ot,`companies/${e.id}/thirdparties`)),ee=qs(jn(ot,`companies/${e.id}/products`)),H=Za(re,D=>{y(D.docs.map(w=>({id:w.id,...w.data()})))}),ce=Za(ee,D=>{b(D.docs.map(w=>({id:w.id,...w.data()})))});return()=>{H(),ce()}},[e]),me.useEffect(()=>{if(!e)return;const re=qs(jn(ot,`companies/${e.id}/invoices_sales`),rN("createdAt","desc"),cA(1)),ee=Za(re,H=>{if(H.empty)ne(null);else{const ce=H.docs[0].data();ne(ce.invoiceNumber)}});return()=>ee()},[e]);const te=async re=>{if(e)try{const ee=Sn(ot,`companies/${e.id}/counters/invoices_sales`);await jp(ee,{lastNumber:dA(1)},{merge:!0});const H=await Ah(ee),ce=H.exists()?H.data().lastNumber:1,D=Math.random().toString(36).substring(2,5).toUpperCase(),w=`FV-${String(ce).padStart(3,"0")}${D}`,C=jn(ot,`companies/${e.id}/invoices_sales`),O=await Fh(C,{...re,companyId:e.id,invoiceNumber:w,createdAt:Wr(),status:"Pendiente"});await Sh(O,{id:O.id}),s(!1)}catch(ee){console.error("Error creating invoice: ",ee)}},he=async re=>{if(!(!e||!l))try{const ee=Sn(ot,`companies/${e.id}/invoices_sales/${l.id}`);await Sh(ee,{...re,updatedAt:Wr()}),c(null),s(!1)}catch(ee){console.error("Error updating invoice: ",ee)}},se=async re=>{if(e&&await confirmDialog("Seguro que deseas eliminar esta factura?"))try{const ee=`companies/${e.id}/invoices_sales/${re}`;console.log(" Intentando borrar:",ee),await zp(Sn(ot,ee)),console.log(" Factura eliminada correctamente")}catch(ee){console.error(" Error deleting invoice: ",ee),toast.error("Error eliminando factura: "+ee.message)}};return E.jsxs("div",{children:[E.jsx("div",{className:"border-b mb-4",children:E.jsxs("nav",{className:"flex space-x-6 text-sm font-medium text-gray-600",children:[E.jsx("button",{className:"border-b-2 border-blue-600 text-blue-600 pb-2",children:"Documentos de venta"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Facturas recurrentes"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Clientes"}),E.jsx("button",{className:"pb-2 hover:text-blue-600",children:"Seguimiento comercial"})]})}),E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("input",{type:"text",placeholder:"Buscar por Identificacin o Cliente",className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(bn,{variant:"secondary",children:[et.filter," Filtros"]})]}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsxs(bn,{type:"button",variant:"secondary",onClick:()=>r("thirdparties"),children:[et.userPlus," Crear Cliente"]}),E.jsxs(bn,{onClick:()=>{c(null),s(!0)},children:[et.plus," Crear Factura"]})]})]}),E.jsx(Jl,{title:"Facturas de Venta",children:I?E.jsx(Gh,{}):E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3",children:"Fecha"}),E.jsx("th",{className:"px-6 py-3",children:"Comprobante"}),E.jsx("th",{className:"px-6 py-3",children:"Identificacin"}),E.jsx("th",{className:"px-6 py-3",children:"Cliente"}),E.jsx("th",{className:"px-6 py-3",children:"Total"}),E.jsx("th",{className:"px-6 py-3",children:"Moneda"}),E.jsx("th",{className:"px-6 py-3",children:"Estado"}),E.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),E.jsx("tbody",{children:f.map(re=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-4",children:re.date?.seconds?new Date(re.date.seconds*1e3).toLocaleDateString():"N/A"}),E.jsx("td",{className:"px-6 py-4 font-medium text-blue-600",children:re.invoiceNumber||"FV-SINID"}),E.jsx("td",{className:"px-6 py-4",children:g.find(ee=>ee.id===re.clientId)?.idNumber||"N/A"}),E.jsx("td",{className:"px-6 py-4",children:g.find(ee=>ee.id===re.clientId)?.name||"Consumidor Final"}),E.jsxs("td",{className:"px-6 py-4",children:["$",new Intl.NumberFormat("es-CO").format(re.total||0)]}),E.jsx("td",{className:"px-6 py-4",children:"COP"}),E.jsx("td",{className:"px-6 py-4",children:E.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re.status==="Pagada"?"bg-green-100 text-green-800":re.status==="Vencida"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:re.status||"Pendiente"})}),E.jsxs("td",{className:"px-6 py-4 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>{c(re),s(!0)},children:et.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>se(re.id),children:et.trash})]})]},re.id))})]})}),E.jsx(RN,{isOpen:n,onClose:()=>{s(!1),c(null)},onSubmit:l?he:te,clients:g,products:A,initialData:l,lastInvoiceNumber:K})]})},bN=()=>{const{companyData:r}=Js(),[e,n]=me.useState([]),[s,l]=me.useState(!0),[c,f]=me.useState(!1),[p,g]=me.useState(null),[y,A]=me.useState(""),[b,I]=me.useState({type:[],personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",phone:"",email:"",otherDescription:"",createdAt:null}),B=H=>H.personType==="empresa"?H.tradeName||`${H.name}`||"":`${H.name||""} ${H.lastName||""}`.trim(),K=H=>H==="NIT"?"NIT":"CC";me.useEffect(()=>{if(!r)return;const H=qs(jn(ot,`companies/${r.id}/thirdparties`)),ce=Za(H,D=>{n(D.docs.map(w=>({id:w.id,...w.data()}))),l(!1)},D=>{console.error("Error loading third parties:",D),l(!1)});return()=>ce()},[r]);const ne=e.filter(H=>{const ce=y.toLowerCase();return(H.idNumber||"").toLowerCase().includes(ce)||(H.name||"").toLowerCase().includes(ce)||(H.lastName||"").toLowerCase().includes(ce)||(H.tradeName||"").toLowerCase().includes(ce)||(H.email||"").toLowerCase().includes(ce)}),te=()=>{g(null),I({type:[],personType:"persona",idType:"CC",idNumber:"",name:"",lastName:"",tradeName:"",city:"",address:"",phone:"",email:"",otherDescription:"",createdAt:null}),f(!0)},he=H=>{g(H.id),I({type:Array.isArray(H.type)?H.type:[H.type].filter(Boolean),personType:H.personType||"persona",idType:H.idType||(H.personType==="empresa"?"NIT":"CC"),idNumber:H.idNumber||"",name:H.name||"",lastName:H.lastName||"",tradeName:H.tradeName||"",city:H.city||"",address:H.address||"",phone:H.phone||"",email:H.email||"",otherDescription:H.otherDescription||"",createdAt:H.createdAt||null}),f(!0)},se=H=>{const{name:ce,value:D,type:w,checked:C}=H.target;if(ce==="personType"){I(O=>({...O,personType:D,idType:D==="empresa"?"NIT":"CC"}));return}if(ce==="type"){I(O=>{let M=[...O.type];return C?M.includes(D)||M.push(D):M=M.filter(P=>P!==D),{...O,type:M}});return}I(O=>({...O,[ce]:w==="checkbox"?C:D}))},re=async H=>{if(H.preventDefault(),!r)return;const ce={type:b.type,personType:b.personType,idType:b.idType,idNumber:String(b.idNumber).trim(),name:String(b.name).trim(),lastName:String(b.lastName).trim(),tradeName:String(b.tradeName).trim(),city:String(b.city).trim(),address:String(b.address).trim(),phone:String(b.phone).trim(),email:String(b.email).trim(),otherDescription:b.type.includes("otro")?String(b.otherDescription).trim():"",createdAt:p?b.createdAt:Wr(),updatedAt:Wr()};try{p?await Sh(Sn(ot,`companies/${r.id}/thirdparties/${p}`),ce):await Fh(jn(ot,`companies/${r.id}/thirdparties`),ce),f(!1),g(null)}catch(D){console.error("Error saving third party",D),toast.error(" Error guardando tercero: "+D.message)}},ee=async H=>{if(r&&confirm(`Eliminar "${B(H)}"? Esta accin no se puede deshacer.`))try{await zp(Sn(ot,`companies/${r.id}/thirdparties/${H.id}`))}catch(ce){console.error("Error deleting third party",ce),toast.error(" Error eliminando: "+ce.message)}};return E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("input",{type:"text",placeholder:"Buscar por identificacin, nombre o correo",value:y,onChange:H=>A(H.target.value),className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(bn,{onClick:te,children:[et.plus," Nuevo Tercero"]})]}),E.jsx(Jl,{title:"Terceros (Clientes, Proveedores y Otros)",children:s?E.jsx(Gh,{}):E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0 z-10",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Tipo"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Tipo Persona"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Identificacin"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Nombre / Razn social"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Ciudad"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Telfono"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Correo"}),E.jsx("th",{className:"px-6 py-3 bg-gray-50",children:"Acciones"})]})}),E.jsxs("tbody",{children:[ne.map(H=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-3 capitalize",children:Array.isArray(H.type)?H.type.join(", "):H.type||""}),E.jsx("td",{className:"px-6 py-3 capitalize",children:H.personType}),E.jsxs("td",{className:"px-6 py-3",children:[K(H.idType)," ",H.idNumber]}),E.jsx("td",{className:"px-6 py-3",children:B(H)}),E.jsx("td",{className:"px-6 py-3",children:H.city}),E.jsx("td",{className:"px-6 py-3",children:H.phone}),E.jsx("td",{className:"px-6 py-3",children:H.email}),E.jsxs("td",{className:"px-6 py-3 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>he(H),children:et.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>ee(H),children:et.trash})]})]},H.id)),ne.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"8",className:"text-center py-4 text-gray-500",children:"No se encontraron resultados"})})]})]})})}),E.jsx(Bp,{isOpen:c,onClose:()=>f(!1),title:`${p?"Editar":"Crear"} Tercero`,children:E.jsxs("form",{onSubmit:re,className:"space-y-6",children:[E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Tipo de tercero"}),E.jsx("div",{className:"flex items-center space-x-6",children:["cliente","proveedor","otro"].map(H=>E.jsxs("label",{className:"flex items-center space-x-2 capitalize",children:[E.jsx("input",{type:"checkbox",name:"type",value:H,checked:b.type.includes(H),onChange:se}),E.jsx("span",{children:H})]},H))}),b.type.includes("otro")&&E.jsx("div",{className:"mt-3",children:E.jsx(at,{id:"otherDescription",name:"otherDescription",label:"Descripcin (Otro)",value:b.otherDescription,onChange:se,required:!0})})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs(Yi,{id:"personType",name:"personType",label:"Tipo de Persona",value:b.personType,onChange:se,children:[E.jsx("option",{value:"persona",children:"Persona"}),E.jsx("option",{value:"empresa",children:"Empresa"})]}),E.jsx(Yi,{id:"idType",name:"idType",label:"Tipo de Identificacin",value:b.idType,onChange:se,children:b.personType==="empresa"?E.jsx("option",{value:"NIT",children:"NIT"}):E.jsx("option",{value:"CC",children:"Cdula de Ciudadana (CC)"})}),E.jsx(at,{id:"idNumber",name:"idNumber",label:b.personType==="empresa"?"Nmero de NIT":"Nmero de Cdula",value:b.idNumber,onChange:se,required:!0}),E.jsx(at,{id:"name",name:"name",label:b.personType==="empresa"?"Razn Social / Nombre Legal":"Nombres",value:b.name,onChange:se,required:!0}),b.personType==="persona"?E.jsx(at,{id:"lastName",name:"lastName",label:"Apellidos",value:b.lastName,onChange:se}):E.jsx(at,{id:"tradeName",name:"tradeName",label:"Nombre Comercial",value:b.tradeName,onChange:se}),E.jsx(at,{id:"city",name:"city",label:"Ciudad",value:b.city,onChange:se}),E.jsx(at,{id:"address",name:"address",label:"Direccin",value:b.address,onChange:se}),E.jsx(at,{id:"phone",name:"phone",label:"Telfono",value:b.phone,onChange:se}),E.jsx(at,{id:"email",name:"email",type:"email",label:"Correo Electrnico",value:b.email,onChange:se}),p&&E.jsxs("div",{className:"md:col-span-2",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creacin"}),E.jsx("input",{type:"text",value:b.createdAt?new Date(b.createdAt.seconds*1e3).toLocaleString("es-CO"):"",readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed"})]})]}),E.jsxs("div",{className:"flex justify-end space-x-2",children:[E.jsx(bn,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancelar"}),E.jsx(bn,{type:"submit",variant:"primary",children:p?"Actualizar":"Guardar"})]})]})})]})},wN=()=>{const{companyData:r}=Js(),[e,n]=me.useState([]),[s,l]=me.useState(!0),[c,f]=me.useState(!1),[p,g]=me.useState(null),[y,A]=me.useState(""),[b,I]=me.useState({type:"producto",code:"",description:"",quantity:0,unit:"unidades",unitValue:0,taxed:!0,iva:19,createdAt:null}),B=["unidades","centmetros","metros","kilogramos","litros"];me.useEffect(()=>{if(!r)return;const ee=qs(jn(ot,`companies/${r.id}/products`)),H=Za(ee,ce=>{n(ce.docs.map(D=>({id:D.id,...D.data()}))),l(!1)});return()=>H()},[r]);const K=e.filter(ee=>{const H=y.toLowerCase();return ee.code?.toLowerCase().includes(H)||ee.description?.toLowerCase().includes(H)||ee.name?.toLowerCase().includes(H)}),ne=()=>{g(null),I({type:"producto",code:"",description:"",quantity:0,unit:"unidades",unitValue:0,taxed:!0,iva:19,createdAt:null}),f(!0)},te=ee=>{g(ee.id),I({type:ee.type||"producto",code:ee.code||"",description:ee.description||"",quantity:ee.quantity??0,unit:ee.unit||"unidades",unitValue:ee.unitValue??0,taxed:ee.taxed??!0,iva:ee.iva??"",createdAt:ee.createdAt||null}),f(!0)},he=ee=>{const{name:H,value:ce,type:D,checked:w}=ee.target;I(C=>({...C,[H]:D==="checkbox"?w:ce}))},se=async ee=>{if(ee.preventDefault(),!!r)try{let H=b.code;if(!p){const D=b.type==="producto"?"products":"services",w=Sn(ot,`companies/${r.id}/counters/${D}`);await jp(w,{lastCode:dA(1)},{merge:!0});const C=await Ah(w),O=C.exists()?C.data().lastCode:1;H=`${b.type==="producto"?"P":"S"}-${String(O).padStart(3,"0")}`}const ce={type:b.type,code:H,description:String(b.description).trim(),name:String(b.description).trim(),quantity:Number(b.quantity)||0,unit:b.unit,unitValue:Number(b.unitValue)||0,taxed:!!b.taxed,iva:b.taxed?b.iva===""?null:Number(b.iva):0,createdAt:p?b.createdAt:Wr(),updatedAt:Wr()};p?await Sh(Sn(ot,`companies/${r.id}/products/${p}`),ce):await Fh(jn(ot,`companies/${r.id}/products`),ce),f(!1),g(null)}catch(H){console.error("Error guardando producto/servicio",H),toast.error(" Error guardando producto/servicio: "+H.message)}},re=async ee=>{if(r&&confirm(`Eliminar "${ee.description}"? Esta accin no se puede deshacer.`))try{await zp(Sn(ot,`companies/${r.id}/products/${ee.id}`))}catch(H){console.error("Error eliminando producto/servicio",H),toast.error(" Error eliminando: "+H.message)}};return E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("input",{type:"text",placeholder:"Buscar por cdigo o descripcin",value:y,onChange:ee=>A(ee.target.value),className:"border px-3 py-2 rounded-lg text-sm w-80"}),E.jsxs(bn,{onClick:ne,children:[et.plus," Nuevo Producto/Servicio"]})]}),E.jsx(Jl,{title:"Productos y Servicios",children:s?E.jsx(Gh,{}):E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3",children:"Tipo"}),E.jsx("th",{className:"px-6 py-3",children:"Cdigo"}),E.jsx("th",{className:"px-6 py-3",children:"Descripcin"}),E.jsx("th",{className:"px-6 py-3",children:"Cantidad"}),E.jsx("th",{className:"px-6 py-3",children:"Unidad"}),E.jsx("th",{className:"px-6 py-3",children:"Valor Unitario"}),E.jsx("th",{className:"px-6 py-3",children:"Gravado IVA"}),E.jsx("th",{className:"px-6 py-3",children:"IVA"}),E.jsx("th",{className:"px-6 py-3",children:"Acciones"})]})}),E.jsxs("tbody",{children:[K.map(ee=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-6 py-3 capitalize",children:ee.type}),E.jsx("td",{className:"px-6 py-3",children:ee.code}),E.jsx("td",{className:"px-6 py-3",children:ee.description}),E.jsx("td",{className:"px-6 py-3 text-right",children:ee.quantity}),E.jsx("td",{className:"px-6 py-3",children:ee.unit}),E.jsxs("td",{className:"px-6 py-3 text-right",children:["$",new Intl.NumberFormat("es-CO").format(ee.unitValue||0)]}),E.jsx("td",{className:"px-6 py-3",children:ee.taxed?"S":"No"}),E.jsx("td",{className:"px-6 py-3",children:ee.iva===null||ee.iva===""?"No especificado":`${ee.iva}%`}),E.jsxs("td",{className:"px-6 py-3 flex space-x-2",children:[E.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>te(ee),children:et.edit}),E.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>re(ee),children:et.trash})]})]},ee.id)),K.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"9",className:"text-center py-4 text-gray-500",children:"No se encontraron resultados"})})]})]})}),E.jsx(Bp,{isOpen:c,onClose:()=>f(!1),title:`${p?"Editar":"Crear"} Producto/Servicio`,children:E.jsxs("form",{onSubmit:se,className:"space-y-6",children:[E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Tipo"}),E.jsxs("div",{className:"flex items-center space-x-6",children:[E.jsxs("label",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"radio",name:"type",value:"producto",checked:b.type==="producto",onChange:he}),E.jsx("span",{children:"Producto"})]}),E.jsxs("label",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"radio",name:"type",value:"servicio",checked:b.type==="servicio",onChange:he}),E.jsx("span",{children:"Servicio"})]})]})]}),E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsxs("h3",{className:"font-semibold mb-2",children:["Informacin del ",b.type]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx(at,{id:"description",name:"description",label:"Descripcin",value:b.description,onChange:he,required:!0}),E.jsx(at,{id:"quantity",name:"quantity",type:"number",label:"Cantidad",value:b.quantity,onChange:he,min:"0"}),E.jsx(Yi,{id:"unit",name:"unit",label:"Unidad de medida",value:b.unit,onChange:he,children:B.map(ee=>E.jsx("option",{value:ee,children:ee},ee))}),E.jsx(at,{id:"unitValue",name:"unitValue",type:"number",label:"Valor unitario",value:b.unitValue,onChange:he,min:"0",step:"0.01"}),p&&E.jsxs("div",{className:"col-span-2",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creacin"}),E.jsx("input",{type:"text",value:b.createdAt?new Date(b.createdAt.seconds*1e3).toLocaleDateString("es-CO"):"",readOnly:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed"})]})]})]}),E.jsxs("div",{className:"border rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold mb-2",children:"Impuestos"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"checkbox",name:"taxed",checked:b.taxed,onChange:he}),E.jsx("span",{children:"Gravado con IVA"})]}),E.jsxs(Yi,{id:"iva",name:"iva",label:"IVA",value:b.iva,onChange:he,disabled:!b.taxed,children:[E.jsx("option",{value:"",children:"No especificado"}),E.jsx("option",{value:0,children:"0%"}),E.jsx("option",{value:5,children:"5%"}),E.jsx("option",{value:19,children:"19%"})]})]})]}),E.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[E.jsx(bn,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancelar"}),E.jsx(bn,{type:"submit",variant:"primary",children:"Guardar"})]})]})})]})},RN=({isOpen:r,onClose:e,onSubmit:n,clients:s,products:l,initialData:c,lastInvoiceNumber:f})=>{const{userData:p}=Js(),[g,y]=me.useState("Electrnica"),[A,b]=me.useState(""),[I,B]=me.useState(()=>{const G=new Date;return new Date(G.getTime()-G.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[K,ne]=me.useState([{productId:"",code:"",name:"",quantity:1,price:0,discount:0,tax:"",retention:0}]),[te,he]=me.useState("Efectivo"),[se,re]=me.useState(""),[ee,H]=me.useState(0),[ce,D]=me.useState(0),[w,C]=me.useState(0),[O,M]=me.useState(0),P=G=>{if(!G)return null;const le=G.match(/^FV-(\d+)([A-Z0-9]+)?$/);if(!le)return null;const be=parseInt(le[1],10)+1,N=Math.random().toString(36).substring(2,5).toUpperCase();return`FV-${String(be).padStart(3,"0")}${N}`};me.useEffect(()=>{c&&(y(c.tipoFactura||"Electrnica"),b(c.clientId||""),B(c.date?new Date(c.date.seconds*1e3).toISOString().split("T")[0]:I),ne(c.items||[]),he(c.paymentMethod||"Efectivo"),re(c.observaciones||""))},[c]);const x=(G,le,be)=>{const N=[...K];if(N[G][le]=be,le==="productId")if(be==="")N[G]={productId:"",code:"",name:"",quantity:1,price:0,discount:0,tax:"",retention:0};else{const Z=l.find(oe=>oe.id===be);Z&&(N[G].price=Z.unitValue||0,N[G].tax=Z.iva??"",N[G].code=Z.code||"",N[G].name=Z.name||Z.description||"")}ne(N)},Rt=()=>ne([...K,{productId:"",code:"",name:"",quantity:1,price:0,discount:0,tax:"",retention:0}]),it=G=>ne(K.filter((le,be)=>be!==G));me.useEffect(()=>{let G=0,le=0,be=0;K.forEach(N=>{const Z=Number(N.quantity)||0,oe=Number(N.price)||0,ie=(Number(N.discount)||0)/100,pe=Z*oe*(1-ie),ge=N.tax===""?0:Number(N.tax)/100;G+=pe,le+=pe*ge,be+=Number(N.retention)||0}),H(G),D(le),C(be),M(G+le-be)},[K]);const Q=G=>{G.preventDefault();const le=c?c.invoiceNumber:P(f),be={id:c?.id||null,tipoFactura:g,clientId:A,vendedor:p?.name||"Usuario",date:new Date(I),items:K.map(N=>({...N,quantity:Number(N.quantity),price:Number(N.price),discount:Number(N.discount),tax:N.tax===""?null:Number(N.tax),retention:Number(N.retention)})),paymentMethod:te,observaciones:se,subtotal:ee,iva:ce,retenciones:w,total:O,invoiceNumber:le};n(be),e()};return E.jsx(Bp,{isOpen:r,onClose:e,title:c?"Editar Factura de Venta":"Crear Nueva Factura de Venta",children:E.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[!c&&f&&E.jsxs("div",{className:"p-2 bg-gray-100 rounded text-sm text-gray-700 space-y-1",children:[E.jsxs("p",{children:["ltima factura registrada: ",E.jsx("b",{children:f})]}),P(f)&&E.jsxs("p",{children:["Siguiente sugerida:"," ",E.jsx("b",{children:P(f)})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs(Yi,{label:"Tipo de Factura",value:g,onChange:G=>y(G.target.value),children:[E.jsx("option",{value:"Electrnica",children:"FV-1 Factura Electrnica"}),E.jsx("option",{value:"Fsica",children:"FV-2 Documento Ingreso"})]}),E.jsxs(Yi,{label:"Cliente",value:A,onChange:G=>b(G.target.value),required:!0,children:[E.jsx("option",{value:"",children:"Seleccione un cliente"}),s.map(G=>E.jsxs("option",{value:G.id,children:[G.name," - ",G.idNumber]},G.id))]}),E.jsx(at,{label:"Vendedor",value:p?.name||"",readOnly:!0}),E.jsx(at,{label:"Fecha",type:"date",value:I,onChange:G=>B(G.target.value)})]}),E.jsx("h4",{className:"text-md font-semibold pt-4 border-t",children:"tems de la Factura"}),E.jsxs("div",{className:"grid grid-cols-14 gap-2 font-semibold text-gray-600 text-sm border-b pb-1",children:[E.jsx("div",{className:"col-span-3",children:"Producto"}),E.jsx("div",{className:"col-span-2",children:"Cantidad"}),E.jsx("div",{className:"col-span-2",children:"Valor Unitario"}),E.jsx("div",{className:"col-span-2",children:"% Desc."}),E.jsx("div",{className:"col-span-2",children:"Impuesto"}),E.jsx("div",{className:"col-span-1",children:"Ret."}),E.jsx("div",{className:"col-span-1",children:"Valor Total"}),E.jsx("div",{className:"w-8 flex justify-center"})]}),K.map((G,le)=>{const be=Number(G.quantity)||0,N=Number(G.price)||0,Z=(Number(G.discount)||0)/100,oe=be*N*(1-Z),ie=G.tax===""?0:Number(G.tax)/100,pe=oe+oe*ie-(Number(G.retention)||0);return E.jsxs("div",{className:"grid grid-cols-14 gap-2 items-center",children:[E.jsx("div",{className:"col-span-3",children:E.jsxs(Yi,{value:G.productId,onChange:ge=>x(le,"productId",ge.target.value),children:[E.jsx("option",{value:"",children:"Seleccione producto"}),l.map(ge=>E.jsxs("option",{value:ge.id,children:[ge.code," - ",ge.name]},ge.id))]})}),E.jsx("div",{className:"col-span-2",children:E.jsx(at,{type:"number",value:G.quantity,min:"1",onChange:ge=>x(le,"quantity",ge.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsx(at,{type:"number",value:G.price,onChange:ge=>x(le,"price",ge.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsx(at,{type:"number",value:G.discount,onChange:ge=>x(le,"discount",ge.target.value)})}),E.jsx("div",{className:"col-span-2",children:E.jsxs(Yi,{value:G.tax,onChange:ge=>x(le,"tax",ge.target.value),children:[E.jsx("option",{value:"",children:" "}),E.jsx("option",{value:0,children:"0% (Exento)"}),E.jsx("option",{value:5,children:"5%"}),E.jsx("option",{value:19,children:"19%"})]})}),E.jsx("div",{className:"col-span-1",children:E.jsx(at,{type:"number",value:G.retention,onChange:ge=>x(le,"retention",ge.target.value)})}),E.jsx("div",{className:"col-span-1 text-right font-semibold",children:new Intl.NumberFormat("es-CO").format(pe)}),E.jsx("div",{className:"w-8 flex justify-center items-center",children:E.jsx("button",{type:"button",className:"text-red-500 hover:text-red-700 p-1",onClick:()=>it(le),children:et.trash})})]},le)}),E.jsx(bn,{type:"button",variant:"secondary",onClick:Rt,children:"Aadir tem"}),E.jsxs("div",{className:"mt-4 border-t pt-4 space-y-2 text-right",children:[E.jsxs("p",{children:["Subtotal: ",E.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(ee)]})]}),E.jsxs("p",{children:["IVA: ",E.jsxs("b",{children:["$",new Intl.NumberFormat("es-CO").format(ce)]})]}),E.jsxs("p",{children:["Retenciones:"," ",E.jsxs("b",{children:["-$",new Intl.NumberFormat("es-CO").format(w)]})]}),E.jsxs("p",{className:"text-lg font-bold",children:["Total Neto: $",new Intl.NumberFormat("es-CO").format(O)]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 border-t pt-4",children:[E.jsxs(Yi,{label:"Forma de Pago",value:te,onChange:G=>he(G.target.value),children:[E.jsx("option",{value:"Efectivo",children:"Efectivo"}),E.jsx("option",{value:"Crdito",children:"Crdito"})]}),E.jsx(at,{label:"Observaciones",value:se,onChange:G=>re(G.target.value)})]}),E.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[E.jsx(bn,{type:"button",variant:"secondary",onClick:e,children:"Cancelar"}),E.jsx(bn,{type:"submit",variant:"primary",children:c?"Actualizar Factura":"Guardar Factura"})]})]})})};function IN(){return E.jsx(EN,{children:E.jsx(CN,{})})}const CN=()=>{const{user:r,loading:e,error:n}=Js();return e?E.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50",children:E.jsx(Gh,{})}):n?E.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-50 p-4",children:E.jsx(_A,{message:n})}):r?E.jsx(AN,{}):E.jsx(TN,{})};eb.createRoot(document.getElementById("root")).render(E.jsx(me.StrictMode,{children:E.jsx(IN,{})}));
